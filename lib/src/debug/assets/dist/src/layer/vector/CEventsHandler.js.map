{"version":3,"file":"CEventsHandler.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/layer/vector/CEventsHandler.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;AAUhC,qDAAqD;AACrD,+CAA+C;AAC/C;IAWC;QATU,wBAAmB,GAAG;YAC/B,KAAK;YACL,QAAQ;YACR,YAAY;YACZ,YAAY;SACZ,CAAC;QAEM,aAAQ,GAAG,IAAI,GAAG,EAAiC,CAAC;QAG3D,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC7B,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,UAAU,KAAK;YAC/C,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,GAAG,EAAoB,CAAC,CAAC;QAClD,CAAC,CAAC,CAAC;IACJ,CAAC;IAES,2CAAkB,GAA5B,UAA6B,UAAoB;QAChD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YAC3C,IAAI,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC;gBAC3B,SAAS;YAEV,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACrC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,IAAI,GAAG,EAAoB,CAAC,CAAC;SACtD;IACF,CAAC;IAED,2BAAE,GAAF,UAAG,SAAiB,EAAE,OAAyB;QAC9C,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC9C,IAAI,UAAU,KAAK,SAAS,EAAE;YAC7B,OAAO,CAAC,IAAI,CAAC,sBAAsB,GAAG,SAAS,GAAG,6BAA6B,CAAC,CAAC;YACjF,OAAO,KAAK,CAAC;SACb;QAED,UAAU,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACzB,CAAC;IAED,4BAAG,GAAH,UAAI,SAAiB,EAAE,OAAyB;QAC/C,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC9C,IAAI,UAAU,KAAK,SAAS,EAAE;YAC7B,OAAO,CAAC,IAAI,CAAC,sBAAsB,GAAG,SAAS,GAAG,+BAA+B,CAAC,CAAC;YACnF,OAAO,KAAK,CAAC;SACb;QAED,IAAI,OAAO,GAAG,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACzC,IAAI,CAAC,OAAO,EAAE;YACb,OAAO,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;YACtC,OAAO,KAAK,CAAC;SACb;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAED,6BAAI,GAAJ,UAAK,SAAiB,EAAE,SAAoB;QAC3C,IAAI,UAAU,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QAC9C,IAAI,UAAU,KAAK,SAAS,EAAE;YAC7B,OAAO,CAAC,IAAI,CAAC,sBAAsB,GAAG,SAAS,CAAC,CAAC;YACjD,OAAO,KAAK,CAAC;SACb;QAED,UAAU,CAAC,OAAO,CAAC,UAAU,OAAyB;YACrD,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QAC/B,CAAC,EAAE,IAAI,CAAC,CAAC;IACV,CAAC;IACF,qBAAC;AAAD,CAAC,AAlED,IAkEC","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n\n// Type of the data passed to event handlers.\ninterface EventData {\n\tposition?: cool.Point;\n}\n\ntype EventHandlerType = (data: EventData) => void;\n\n// Used as base class for classes that needs to setup\n// event handlers for real or synthetic events.\nabstract class CEventsHandler {\n\n\tprotected supportedEventNames = [\n\t\t'add',\n\t\t'remove',\n\t\t'mouseenter',\n\t\t'mouseleave'\n\t];\n\n\tprivate handlers = new Map<string, Set<EventHandlerType>>();\n\n\tconstructor() {\n\t\tvar handlers = this.handlers;\n\t\tthis.supportedEventNames.forEach(function (eName) {\n\t\t\thandlers.set(eName, new Set<EventHandlerType>());\n\t\t});\n\t}\n\n\tprotected addSupportedEvents(eventNames: string[]) {\n\t\tfor (var i = 0; i < eventNames.length; ++i) {\n\t\t\tvar eName = eventNames[i];\n\t\t\tif (this.handlers.has(eName))\n\t\t\t\tcontinue;\n\n\t\t\tthis.supportedEventNames.push(eName);\n\t\t\tthis.handlers.set(eName, new Set<EventHandlerType>());\n\t\t}\n\t}\n\n\ton(eventName: string, handler: EventHandlerType): boolean {\n\t\tvar handlerSet = this.handlers.get(eventName);\n\t\tif (handlerSet === undefined) {\n\t\t\tconsole.warn('Unknown event type: ' + eventName + ' used to register a handler');\n\t\t\treturn false;\n\t\t}\n\n\t\thandlerSet.add(handler);\n\t}\n\n\toff(eventName: string, handler: EventHandlerType): boolean {\n\t\tvar handlerSet = this.handlers.get(eventName);\n\t\tif (handlerSet === undefined) {\n\t\t\tconsole.warn('Unknown event type: ' + eventName + ' used to unregister a handler');\n\t\t\treturn false;\n\t\t}\n\n\t\tvar removed = handlerSet.delete(handler);\n\t\tif (!removed) {\n\t\t\tconsole.warn('Unregistered handler!');\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tfire(eventName: string, eventData: EventData): boolean {\n\t\tvar handlerSet = this.handlers.get(eventName);\n\t\tif (handlerSet === undefined) {\n\t\t\tconsole.warn('Unknown event type: ' + eventName);\n\t\t\treturn false;\n\t\t}\n\n\t\thandlerSet.forEach(function (handler: EventHandlerType) {\n\t\t\thandler.call(this, eventData);\n\t\t}, this);\n\t}\n}"]}