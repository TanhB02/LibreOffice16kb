{"version":3,"file":"Marker.Drag.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/layer/marker/Marker.Drag.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Handler.MarkerDrag is used internally by L.Marker to make the markers draggable.\n */\n\nL.Handler.MarkerDrag = L.Handler.extend({\n\tinitialize: function (marker) {\n\t\tthis._marker = marker;\n\t},\n\n\taddHooks: function () {\n\t\tvar icon = this._marker._icon;\n\n\t\tif (!this._draggable) {\n\t\t\tthis._draggable = new L.Draggable(icon, icon, true);\n\t\t}\n\n\t\tthis._draggable.on({\n\t\t\tdown: this._onDown,\n\t\t\tdragstart: this._onDragStart,\n\t\t\tdrag: this._onDrag,\n\t\t\tdragend: this._onDragEnd,\n\t\t\tup: this._onUp\n\t\t}, this).enable();\n\n\t\tL.DomUtil.addClass(icon, 'leaflet-marker-draggable');\n\t},\n\n\tremoveHooks: function () {\n\t\tthis._draggable.off({\n\t\t\tdown: this._onDown,\n\t\t\tdragstart: this._onDragStart,\n\t\t\tdrag: this._onDrag,\n\t\t\tdragend: this._onDragEnd,\n\t\t\tup: this._onUp\n\t\t}, this).disable();\n\n\t\tif (this._marker._icon) {\n\t\t\tL.DomUtil.removeClass(this._marker._icon, 'leaflet-marker-draggable');\n\t\t}\n\t},\n\n\tmoved: function () {\n\t\treturn this._draggable && this._draggable._moved;\n\t},\n\n\tfreezeX: function (boolChoice) {\n\t\tif (this._draggable)\n\t\t\tthis._draggable.freezeX(boolChoice);\n\t},\n\n\tfreezeY: function (boolChoice) {\n\t\tif (this._draggable)\n\t\t\tthis._draggable.freezeY(boolChoice);\n\t},\n\n\t_onDown: function (e) {\n\t\tthis._marker.fire('down', e);\n\t},\n\n\t_onDragStart: function (e) {\n\t\tthis._marker\n\t\t    .fire('movestart', e)\n\t\t    .fire('dragstart', e);\n\t},\n\n\t_onDrag: function (e) {\n\t\tvar marker = this._marker,\n\t\t    shadow = marker._shadow,\n\t\t    iconPos = L.DomUtil.getPosition(marker._icon),\n\t\t    latlng = marker._map.layerPointToLatLng(iconPos);\n\n\t\t// update shadow position\n\t\tif (shadow) {\n\t\t\tL.DomUtil.setPosition(shadow, iconPos);\n\t\t}\n\n\t\tmarker._latlng = latlng;\n\t\te.latlng = latlng;\n\n\t\tmarker\n\t\t    .fire('move', e)\n\t\t    .fire('drag', e);\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tthis._marker\n\t\t    .fire('moveend', e)\n\t\t    .fire('dragend', e);\n\t},\n\n\t_onUp: function (e) {\n\t\tthis._marker.fire('up', e);\n\t}\n});\n"]}