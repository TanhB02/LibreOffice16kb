{"version":3,"file":"Debug.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/app/Debug.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8; fill-column: 100 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * DebugManager contains debugging tools and support for toggling them.\n * Open the Debug Menu with\n * - Ctrl+Shift+Alt+D (Map.Keyboard.js _handleCtrlCommand)\n * - Help > About > D (Toolbar.js aboutDialogKeyHandler)\n * - Help > About > Triple Click (Toolbar.js aboutDialogClickHandler)\n * - &debug=true URL parameter (Map.js initialize)\n * - &randomUser=true URL parameter (global.js)\n */\n\n/* global app L _ InvalidationRectangleSection TileManager */\n\ntype TimeoutHdl = ReturnType<typeof setTimeout>;\n\ninterface DebugTool {\n\tname: string;\n\tcategory: string;\n\tstartsOn: boolean;\n\tonAdd: () => void;\n\tonRemove: () => void;\n}\n\ninterface DebugTimeArray {\n\tcount: number;\n\tms: number;\n\tbest: number;\n\tworst: number;\n\tdate: number;\n}\n\ntype AutomatedTaskFn = (pn: number) => number;\n\ninterface AutomatedTaskSet {\n\t[name: string]: AutomatedTaskFn;\n}\n\nclass DebugManager {\n\tprivate _map: MapInterface;\n\tprivate _docLayer: DocLayerInterface;\n\tprivate _painter: PainterInterface;\n\tprivate debugOn: boolean;\n\tprivate debugNeverStarted: boolean;\n\tprivate _controls: ControlsInterface;\n\tprivate _toolLayers: BaseClass[];\n\n\tprivate overlayOn: boolean;\n\tprivate _overlayData: OverlaysInterface;\n\n\tprivate tileOverlaysOn: boolean;\n\n\tprivate tileInvalidationsOn: boolean;\n\tprivate _tileInvalidationMessages: Map<number, string>;\n\tprivate _tileInvalidationId: number;\n\tprivate _tileInvalidationKeypressQueue: number[];\n\tprivate _tileInvalidationKeypressTimes: DebugTimeArray;\n\tprivate _tileInvalidationTimeoutId: TimeoutHdl;\n\n\tprivate tileDataOn: boolean;\n\tprivate _tileDataTotalMessages: number;\n\tprivate _tileDataTotalLoads: number;\n\tprivate _tileDataTotalUpdates: number;\n\tprivate _tileDataTotalDeltas: number;\n\tprivate _tileDataTotalInvalidates: number;\n\n\tprivate pingOn: boolean;\n\tprivate _pingQueue: number[];\n\tprivate _pingTimes: DebugTimeArray;\n\tprivate _pingTimeoutId: TimeoutHdl;\n\n\tprivate logIncomingMessages: boolean;\n\tprivate logOutgoingMessages: boolean;\n\tprivate logKeyboardEvents: boolean;\n\n\tprivate eventDelayWatchdog: boolean;\n\tprivate _eventDelayTimeout: TimeoutHdl;\n\tprivate _lastEventDelayTime: number;\n\tprivate _lastEventDelay: number;\n\tprivate _eventDelayWatchStart: number;\n\n\tprivate _typerLorem: string;\n\tprivate _typerLoremPos: number;\n\tprivate _typerTimeoutId: TimeoutHdl;\n\n\tprivate _automatedUserTimeoutId: TimeoutHdl;\n\tprivate _automatedUserTask: string;\n\tprivate _automatedUserTasks: AutomatedTaskSet;\n\tprivate _automatedUserQueue: string[];\n\tprivate _automatedUserPhase: number;\n\n\tconstructor(map: MapInterface) {\n\t\tthis._map = map;\n\t\tthis._docLayer = null;\n\t\tthis._painter = null;\n\t\tthis.debugOn = false;\n\t\tthis.debugNeverStarted = true;\n\t}\n\n\tpublic toggle(): void {\n\t\tif (!this.debugOn) {\n\t\t\tthis._start();\n\t\t} else {\n\t\t\tthis._stop();\n\t\t}\n\n\t\t// redraw canvas with changed debug overlays\n\t\tthis._painter.update();\n\t}\n\n\tprivate _start(): void {\n\t\tthis._docLayer = this._map._docLayer;\n\t\tthis._painter = this._map._docLayer._painter;\n\n\t\tthis.debugOn = true;\n\t\tthis.debugNeverStarted = false;\n\n\t\tthis._controls = {};\n\t\t// Add header\n\t\tthis._controls['header'] = L.control\n\t\t\t.layers({}, {}, { collapsed: false })\n\t\t\t.addTo(this._map);\n\t\tconst b = document.createElement('b');\n\t\tb.append(_('Debug Tools'));\n\t\tthis._controls['header']._container.prepend(b);\n\t\tthis._controls['header']._container.append(_('Ctrl+Shift+Alt+D to exit'));\n\n\t\tthis._toolLayers = [];\n\t\tthis._addDebugTools();\n\n\t\t// Initialize here because tasks can add themselves to the queue even\n\t\t// if the user is not active\n\t\tthis._automatedUserQueue = [];\n\t\tthis._automatedUserTasks = {};\n\n\t\t// Display debug info in About box\n\t\tconst wopiHostId = document.getElementById('wopi-host-id-cloned');\n\t\tif (wopiHostId) wopiHostId.style.display = 'block';\n\n\t\tconst servedBy = document.getElementById('served-by-cloned');\n\t\tif (servedBy) servedBy.style.display = 'flex';\n\t}\n\n\tprivate _stop(): void {\n\t\tthis.debugOn = false;\n\n\t\t// Remove layers\n\t\tfor (const tool of this._toolLayers) {\n\t\t\tthis._map.removeLayer(tool);\n\t\t}\n\n\t\t// Remove controls\n\t\tconst keys = Object.keys(this._controls);\n\t\tfor (const category of keys) {\n\t\t\tthis._controls[category].remove();\n\t\t}\n\t\tthis._controls = {};\n\n\t\t// Hide debug info in About box\n\t\tconst wopiHostId = document.getElementById('wopi-host-id-cloned');\n\t\tif (wopiHostId) wopiHostId.style.display = 'none';\n\n\t\tconst servedBy = document.getElementById('served-by-cloned');\n\t\tif (servedBy) servedBy.style.display = 'none';\n\t}\n\n\tprivate _addDebugTool(tool: DebugTool) {\n\t\t// Create control if it doesn't exist\n\t\tif (!(tool.category in this._controls)) {\n\t\t\tthis._controls[tool.category] = L.control\n\t\t\t\t.layers({}, {}, { collapsed: false })\n\t\t\t\t.addTo(this._map);\n\t\t\t// Add a title\n\t\t\tconst b = document.createElement('b');\n\t\t\tb.append(tool.category);\n\t\t\tthis._controls[tool.category]._container.prepend(b);\n\t\t}\n\n\t\t// Create layer\n\t\tconst layer = new L.LayerGroup();\n\t\tthis._toolLayers.push(layer);\n\t\tthis._controls[tool.category]._addLayer(layer, tool.name, true);\n\t\tthis._controls[tool.category]._update();\n\n\t\tthis._map.on(\n\t\t\t'layeradd',\n\t\t\tfunction (e: EventBaseType) {\n\t\t\t\tif (e.layer === layer) {\n\t\t\t\t\ttool.onAdd();\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis,\n\t\t);\n\t\tthis._map.on(\n\t\t\t'layerremove',\n\t\t\tfunction (e: EventBaseType) {\n\t\t\t\tif (e.layer === layer) {\n\t\t\t\t\ttool.onRemove();\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis,\n\t\t);\n\t\tif (tool.startsOn) {\n\t\t\tthis._map.addLayer(layer);\n\t\t}\n\t}\n\n\tprivate _addDebugTools(): void {\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\tconst self = this; // easier than using (function (){}).bind(this) each time\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Data Overlay',\n\t\t\tcategory: 'Display',\n\t\t\tstartsOn: true,\n\t\t\tonAdd: function () {\n\t\t\t\tself.overlayOn = true;\n\t\t\t\tself._overlayData = {};\n\t\t\t\tself._painter._addDebugOverlaySection();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.overlayOn = false;\n\t\t\t\tself._overlayData = {};\n\t\t\t\tself._painter._removeDebugOverlaySection();\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Tile Overlays',\n\t\t\tcategory: 'Display',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself.tileOverlaysOn = true;\n\t\t\t\tself._painter.update();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.tileOverlaysOn = false;\n\t\t\t\tself._painter.update();\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Tile Invalidations',\n\t\t\tcategory: 'Display',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself.tileInvalidationsOn = true;\n\t\t\t\tself._tileInvalidationMessages = new Map();\n\t\t\t\tself._tileInvalidationId = 0;\n\t\t\t\tself._tileInvalidationKeypressQueue = [];\n\t\t\t\tself._tileInvalidationKeypressTimes = self.getTimeArray();\n\t\t\t\tself._tileInvalidationTimeout();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.tileInvalidationsOn = false;\n\t\t\t\tself.clearOverlayMessage('tileInvalidationMessages');\n\t\t\t\tself.clearOverlayMessage('tileInvalidationTime');\n\t\t\t\tclearTimeout(self._tileInvalidationTimeoutId);\n\t\t\t\tself._painter.update();\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Tile data',\n\t\t\tcategory: 'Display',\n\t\t\tstartsOn: true,\n\t\t\tonAdd: function () {\n\t\t\t\tself.tileDataOn = true;\n\t\t\t\tself._tileDataTotalMessages = 0;\n\t\t\t\tself._tileDataTotalLoads = 0;\n\t\t\t\tself._tileDataTotalUpdates = 0;\n\t\t\t\tself._tileDataTotalDeltas = 0;\n\t\t\t\tself._tileDataTotalInvalidates = 0;\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.tileDataOn = false;\n\t\t\t\tself.clearOverlayMessage('top-tileData');\n\t\t\t},\n\t\t});\n\n\t\t/*\n\t\t * Doesn't seem to do anything\n\t\t * TODO: Reenable\n\t\tthis._addDebugTool({\n\t\t\tname: 'Always Active',\n\t\t\tcategory: 'Functionality',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself._map._debugAlwaysActive = true;\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself._map._debugAlwaysActive = false;\n\t\t\t},\n\t\t});\n\t\t*/\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Show Clipboard',\n\t\t\tcategory: 'Display',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself._map._textInput.debug(true);\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself._map._textInput.debug(false);\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Tile pixel grid section',\n\t\t\tcategory: 'Display',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself._painter._addTilePixelGridSection();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself._painter._removeTilePixelGridSection();\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Tile preload map',\n\t\t\tcategory: 'Display',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself._painter._addPreloadMap();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself._painter._removePreloadMap();\n\t\t\t},\n\t\t});\n\n\t\tif (this._docLayer.isCalc()) {\n\t\t\tthis._addDebugTool({\n\t\t\t\tname: 'Splits section',\n\t\t\t\tcategory: 'Display',\n\t\t\t\tstartsOn: false,\n\t\t\t\tonAdd: function () {\n\t\t\t\t\tself._painter._addSplitsSection();\n\t\t\t\t},\n\t\t\t\tonRemove: function () {\n\t\t\t\t\tself._painter._removeSplitsSection();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Ping',\n\t\t\tcategory: 'Display',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself.pingOn = true;\n\t\t\t\tself._pingQueue = [];\n\t\t\t\tself._pingTimes = self.getTimeArray();\n\t\t\t\tself._pingTimeout();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.pingOn = false;\n\t\t\t\tself.clearOverlayMessage('rendercount');\n\t\t\t\tself.clearOverlayMessage('ping');\n\t\t\t\tclearTimeout(self._pingTimeoutId);\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Performance Tracing',\n\t\t\tcategory: 'Logging',\n\t\t\tstartsOn: app.socket.traceEventRecordingToggle,\n\t\t\tonAdd: function () {\n\t\t\t\tapp.socket.setTraceEventLogging(true);\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tapp.socket.setTraceEventLogging(false);\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Protocol Logging',\n\t\t\tcategory: 'Logging',\n\t\t\tstartsOn: true,\n\t\t\tonAdd: function () {\n\t\t\t\twindow.setLogging(true);\n\t\t\t\tapp.Log.print();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\twindow.setLogging(false);\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Log incoming messages',\n\t\t\tcategory: 'Logging',\n\t\t\tstartsOn: true,\n\t\t\tonAdd: function () {\n\t\t\t\tself.logIncomingMessages = true;\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.logIncomingMessages = false;\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Log outgoing messages',\n\t\t\tcategory: 'Logging',\n\t\t\tstartsOn: true,\n\t\t\tonAdd: function () {\n\t\t\t\tself.logOutgoingMessages = true;\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.logOutgoingMessages = false;\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Log keyboard events',\n\t\t\tcategory: 'Logging',\n\t\t\tstartsOn: true,\n\t\t\tonAdd: function () {\n\t\t\t\tself.logKeyboardEvents = true;\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.logKeyboardEvents = false;\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Tile Dumping',\n\t\t\tcategory: 'Logging',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tapp.socket.sendMessage('toggletiledumping true');\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tapp.socket.sendMessage('toggletiledumping false');\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Debug Deltas',\n\t\t\tcategory: 'Logging',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tTileManager.setDebugDeltas(true);\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tTileManager.setDebugDeltas(false);\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Event delay watchdog',\n\t\t\tcategory: 'Logging',\n\t\t\tstartsOn: true,\n\t\t\tonAdd: function () {\n\t\t\t\tself.eventDelayWatchdog = true;\n\t\t\t\tself._eventDelayTimeout = null;\n\t\t\t\tself._lastEventDelayTime = 0;\n\t\t\t\tself._lastEventDelay = 0;\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself.eventDelayWatchdog = false;\n\t\t\t\tself.clearOverlayMessage('eventDelayTime');\n\n\t\t\t\tif (self._eventDelayTimeout) clearTimeout(self._eventDelayTimeout);\n\t\t\t\tdelete self._eventDelayTimeout;\n\t\t\t\tdelete self._eventDelayWatchStart;\n\t\t\t\tdelete self._lastEventDelayTime;\n\t\t\t\tdelete self._lastEventDelay;\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Typer',\n\t\t\tcategory: 'Functionality',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself._typerLorem =\n\t\t\t\t\t'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\\n';\n\t\t\t\tself._typerLoremPos = 0;\n\t\t\t\tself._typerTimeout();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tclearTimeout(self._typerTimeoutId);\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Randomize user settings',\n\t\t\tcategory: 'Functionality',\n\t\t\tstartsOn: !!window.coolParams.get('randomUser'),\n\t\t\tonAdd: function () {\n\t\t\t\tself._randomizeSettings();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\t// do nothing\n\t\t\t},\n\t\t});\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Enable automated user',\n\t\t\tcategory: 'Automated User',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself._automatedUserTimeout();\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tclearTimeout(self._automatedUserTimeoutId);\n\t\t\t\tself._automatedUserTask = undefined;\n\t\t\t\tself._automatedUserPhase = 0;\n\t\t\t},\n\t\t});\n\n\t\tif (this._docLayer.isCalc()) {\n\t\t\tthis._addDebugTool({\n\t\t\t\tname: 'Click, type, delete, cells & formulas',\n\t\t\t\tcategory: 'Automated User',\n\t\t\t\tstartsOn: false,\n\t\t\t\tonAdd: function () {\n\t\t\t\t\tself._automatedUserAddTask(\n\t\t\t\t\t\tthis.name,\n\t\t\t\t\t\tself._automatedUserTypeCellFormula.bind(self),\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tonRemove: function () {\n\t\t\t\t\tself._automatedUserRemoveTask(this.name);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis._addDebugTool({\n\t\t\tname: 'Insert and delete shape',\n\t\t\tcategory: 'Automated User',\n\t\t\tstartsOn: false,\n\t\t\tonAdd: function () {\n\t\t\t\tself._automatedUserAddTask(\n\t\t\t\t\tthis.name,\n\t\t\t\t\tself._automatedUserInsertTypeShape.bind(self),\n\t\t\t\t);\n\t\t\t},\n\t\t\tonRemove: function () {\n\t\t\t\tself._automatedUserRemoveTask(this.name);\n\t\t\t},\n\t\t});\n\n\t\tif (this._docLayer.isCalc()) {\n\t\t\tthis._addDebugTool({\n\t\t\t\tname: 'Resize rows and columns',\n\t\t\t\tcategory: 'Automated User',\n\t\t\t\tstartsOn: false,\n\t\t\t\tonAdd: function () {\n\t\t\t\t\tself._automatedUserAddTask(\n\t\t\t\t\t\tthis.name,\n\t\t\t\t\t\tself._automatedUserResizeRowsColumns.bind(self),\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tonRemove: function () {\n\t\t\t\t\tself._automatedUserRemoveTask(this.name);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (this._docLayer.isCalc()) {\n\t\t\tthis._addDebugTool({\n\t\t\t\tname: 'Insert rows and columns',\n\t\t\t\tcategory: 'Automated User',\n\t\t\t\tstartsOn: false,\n\t\t\t\tonAdd: function () {\n\t\t\t\t\tself._automatedUserAddTask(\n\t\t\t\t\t\tthis.name,\n\t\t\t\t\t\tself._automatedUserInsertRowsColumns.bind(self),\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tonRemove: function () {\n\t\t\t\t\tself._automatedUserRemoveTask(this.name);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (this._docLayer.isCalc()) {\n\t\t\tthis._addDebugTool({\n\t\t\t\tname: 'Delete rows and columns',\n\t\t\t\tcategory: 'Automated User',\n\t\t\t\tstartsOn: false,\n\t\t\t\tonAdd: function () {\n\t\t\t\t\tself._automatedUserAddTask(\n\t\t\t\t\t\tthis.name,\n\t\t\t\t\t\tself._automatedUserDeleteRowsColumns.bind(self),\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tonRemove: function () {\n\t\t\t\t\tself._automatedUserRemoveTask(this.name);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _randomizeSettings(): void {\n\t\t// Toggle dark mode\n\t\tconst isDark = window.prefs.getBoolean('darkTheme');\n\t\tif (Math.random() < 0.5) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'Randomize Settings: Toggle dark mode to ' +\n\t\t\t\t\t(isDark ? 'Light' : 'Dark'),\n\t\t\t);\n\t\t\tthis._map.uiManager.toggleDarkMode();\n\t\t} else {\n\t\t\twindow.app.console.log(\n\t\t\t\t'Randomize Settings: Leave dark mode as ' + (isDark ? 'Dark' : 'Light'),\n\t\t\t);\n\t\t}\n\n\t\t// Set zoom\n\t\tconst targetZoom = Math.floor(Math.random() * 9) + 6; // 6 to 14, 50% to 200%\n\t\twindow.app.console.log('Randomize Settings: Set zoom to ' + targetZoom);\n\t\tthis._map.setZoom(targetZoom, null, false);\n\n\t\t// Toggle spell check\n\t\tconst isSpellCheck =\n\t\t\tthis._map['stateChangeHandler'].getItemValue('.uno:SpellOnline');\n\t\tif (Math.random() < 0.5) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'Randomize Settings: Toggle spell check to ' +\n\t\t\t\t\t(isSpellCheck == 'true' ? 'off' : 'on'),\n\t\t\t);\n\t\t\tthis._map.sendUnoCommand('.uno:SpellOnline');\n\t\t} else {\n\t\t\twindow.app.console.log(\n\t\t\t\t'Randomize Settings: Leave spell check as ' +\n\t\t\t\t\t(isSpellCheck == 'true' ? 'on' : 'off'),\n\t\t\t);\n\t\t}\n\n\t\t// Toggle formatting marks\n\t\tif (this._docLayer.isWriter()) {\n\t\t\tif (Math.random() < 0.5) {\n\t\t\t\twindow.app.console.log('Randomize Settings: Toggle formatting marks');\n\t\t\t\tthis._map.sendUnoCommand('.uno:ControlCodes');\n\t\t\t} else {\n\t\t\t\twindow.app.console.log('Randomize Settings: Leave formatting marks');\n\t\t\t}\n\t\t}\n\n\t\t// Move to different part of sheet\n\t\tif (this._docLayer.isCalc()) {\n\t\t\t// Select random position\n\t\t\tconst docSize = this._map.getDocSize();\n\t\t\tconst maxX = docSize.x; //Math.min(docSize.x, 10000);\n\t\t\tconst maxY = docSize.y; //Math.min(docSize.y, 10000);\n\t\t\tconst positions = [\n\t\t\t\t{ x: maxX, y: 0 }, // top right\n\t\t\t\t{ x: 0, y: maxY }, // bottom left\n\t\t\t\t{ x: maxX, y: maxY }, // bottom right\n\t\t\t\t{ x: maxX / 2, y: maxY / 2 }, // center\n\t\t\t];\n\t\t\tconst pos = positions[Math.floor(Math.random() * positions.length)];\n\n\t\t\t// Calculate mouse click position\n\t\t\tconst viewSize = this._map.getSize();\n\t\t\tconst centerPos = {\n\t\t\t\tx: pos.x + viewSize.x / 2,\n\t\t\t\ty: pos.y + viewSize.y / 2,\n\t\t\t};\n\t\t\tconst centerTwips = this._docLayer._pixelsToTwips(centerPos);\n\n\t\t\t// Perform action\n\t\t\twindow.app.console.log(\n\t\t\t\t'Randomize Settings: Move to ',\n\t\t\t\tpos,\n\t\t\t\t' click at ',\n\t\t\t\tcenterPos,\n\t\t\t\tcenterTwips,\n\t\t\t);\n\t\t\tapp.map._docLayer.scrollToPos(pos);\n\t\t\tthis._docLayer._postMouseEvent(\n\t\t\t\t'buttondown',\n\t\t\t\tcenterTwips.x,\n\t\t\t\tcenterTwips.y,\n\t\t\t\t1,\n\t\t\t\t1,\n\t\t\t\t0,\n\t\t\t);\n\t\t\tthis._docLayer._postMouseEvent(\n\t\t\t\t'buttonup',\n\t\t\t\tcenterTwips.x,\n\t\t\t\tcenterTwips.y,\n\t\t\t\t1,\n\t\t\t\t1,\n\t\t\t\t0,\n\t\t\t);\n\t\t}\n\n\t\t// Toggle sidebar\n\t\tif (!this._map._docLoadedOnce) {\n\t\t\t// When first opening the document, initializeSidebar is called\n\t\t\t// 200ms after setup, which would overwrite our randomization.\n\t\t\t// So in this case, wait for sidebar initialization and the\n\t\t\t// response to complete so that we know the current state\n\t\t\tsetTimeout(this._randomizeSidebar.bind(this), 1000);\n\t\t} else {\n\t\t\tthis._randomizeSidebar();\n\t\t}\n\n\t\tthis._painter.update();\n\t}\n\n\tprivate _randomizeSidebar(): void {\n\t\tlet sidebars = ['none', '.uno:SidebarDeck.PropertyDeck', '.uno:Navigator'];\n\t\tif (this._docLayer.isImpress()) {\n\t\t\tsidebars = sidebars.concat([\n\t\t\t\t'.uno:SlideChangeWindow',\n\t\t\t\t'.uno:CustomAnimation',\n\t\t\t\t'.uno:MasterSlidesPanel',\n\t\t\t\t'.uno:ModifyPage',\n\t\t\t]);\n\t\t}\n\t\tconst sidebar = sidebars[Math.floor(Math.random() * sidebars.length)];\n\t\twindow.app.console.log('Randomize Settings: Target sidebar: ' + sidebar);\n\t\tif (this._map.sidebar && this._map.sidebar.isVisible()) {\n\t\t\t// There is currently a sidebar\n\t\t\tconst currentSidebar = this._map.sidebar.getTargetDeck();\n\t\t\tif (sidebar == 'none') {\n\t\t\t\twindow.app.console.log('Randomize Settings: Remove sidebar');\n\t\t\t\t// Send message for existing sidebar to remove it\n\t\t\t\tthis._map.sendUnoCommand(currentSidebar);\n\t\t\t} else if (sidebar == currentSidebar) {\n\t\t\t\twindow.app.console.log(\n\t\t\t\t\t'Randomize Settings: Leave sidebar as ' + sidebar,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow.app.console.log(\n\t\t\t\t\t'Randomize Settings: Switch sidebar to ' + sidebar,\n\t\t\t\t);\n\t\t\t\tthis._map.sendUnoCommand(sidebar);\n\t\t\t}\n\t\t} else {\n\t\t\t// Sidebar currently hidden\n\t\t\t// eslint-disable-next-line no-lonely-if\n\t\t\tif (sidebar == 'none') {\n\t\t\t\twindow.app.console.log('Randomize Settings: Leave sidebar off');\n\t\t\t} else {\n\t\t\t\twindow.app.console.log('Randomize Settings: Open sidebar ' + sidebar);\n\t\t\t\tthis._map.sendUnoCommand(sidebar);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _automatedUserAddTask(\n\t\tname: string,\n\t\ttaskFn: (pn: number) => number,\n\t): void {\n\t\t// task function takes phase number, returns waitTime\n\t\t// When waitTime == 0, task is done.\n\n\t\t// Save taskFn\n\t\tthis._automatedUserTasks[name] = taskFn;\n\t\t// Add to queue\n\t\tif (!this._automatedUserQueue.includes(name)) {\n\t\t\tthis._automatedUserQueue.push(name);\n\t\t}\n\t}\n\n\tprivate _automatedUserRemoveTask(name: string): void {\n\t\t// Don't bother deleting function from _debugAutomatedUserTasks\n\t\t// Remove from queue\n\t\tif (this._automatedUserQueue.includes(name)) {\n\t\t\tthis._automatedUserQueue.splice(\n\t\t\t\tthis._automatedUserQueue.indexOf(name),\n\t\t\t\t1,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _automatedUserTimeout(): void {\n\t\tif (!this._automatedUserTask) {\n\t\t\t// Not in the middle of a task, pick a new one\n\t\t\twindow.app.console.log(\n\t\t\t\t'Automated User: Pick a new task. Current queue: ',\n\t\t\t\tthis._automatedUserQueue,\n\t\t\t);\n\t\t\tthis._automatedUserTask = this._automatedUserQueue.shift();\n\t\t\tthis._automatedUserPhase = 0;\n\t\t}\n\n\t\tif (this._automatedUserTask && this._automatedUserPhase == 0) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'Automated User: Starting task ' + this._automatedUserTask,\n\t\t\t);\n\t\t\t// Re-enqueue task\n\t\t\tthis._automatedUserQueue.push(this._automatedUserTask);\n\t\t}\n\n\t\tif (this._automatedUserTask) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'Automated User: Current task: ' +\n\t\t\t\t\tthis._automatedUserTask +\n\t\t\t\t\t' Current phase: ' +\n\t\t\t\t\tthis._automatedUserPhase,\n\t\t\t);\n\t\t\tconst taskFn = this._automatedUserTasks[this._automatedUserTask];\n\t\t\tconst waitTime = taskFn(this._automatedUserPhase);\n\t\t\tthis._automatedUserPhase++;\n\t\t\tif (waitTime == 0) {\n\t\t\t\twindow.app.console.log(\n\t\t\t\t\t'Automated User: Task complete: ' + this._automatedUserTask,\n\t\t\t\t);\n\t\t\t\tthis._automatedUserTask = undefined;\n\t\t\t\tthis._automatedUserPhase = 0;\n\t\t\t}\n\t\t\tthis._automatedUserTimeoutId = setTimeout(\n\t\t\t\tthis._automatedUserTimeout.bind(this),\n\t\t\t\twaitTime,\n\t\t\t);\n\t\t} else {\n\t\t\twindow.app.console.log('Automated User: Waiting for tasks');\n\t\t\t// Nothing in queue, check again in 1s\n\t\t\tthis._automatedUserTimeoutId = setTimeout(\n\t\t\t\tthis._automatedUserTimeout.bind(this),\n\t\t\t\t1000,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _automatedUserTypeCellFormula(phase: number): number {\n\t\tlet waitTime = 0;\n\t\tswitch (phase) {\n\t\t\tcase 0:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Click in center');\n\t\t\t\t\tconst pos = this._docLayer._latLngToTwips(this._map.getCenter());\n\t\t\t\t\tthis._docLayer._postMouseEvent('buttondown', pos.x, pos.y, 1, 1, 0);\n\t\t\t\t\tthis._docLayer._postMouseEvent('buttonup', pos.x, pos.y, 1, 1, 0);\n\t\t\t\t\twaitTime = 500;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Type text');\n\t\t\t\t\tthis._typeText('asdf\\nqwer\\n', 100);\n\t\t\t\t\twaitTime = 1000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Click formula bar');\n\t\t\t\t\tthis._map.sendUnoCommand('.uno:StartFormula');\n\t\t\t\t\twaitTime = 500;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Type formula');\n\t\t\t\t\tthis._typeText('A1\\n', 100);\n\t\t\t\t\twaitTime = 1000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Delete row');\n\t\t\t\t\tthis._docLayer.postKeyboardEvent('input', 0, 1025); //up\n\t\t\t\t\tthis._docLayer.postKeyboardEvent('input', 0, 1025); //up\n\t\t\t\t\tthis._map.sendUnoCommand('.uno:DeleteRows');\n\t\t\t\t\twaitTime = 1000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Delete cells');\n\t\t\t\t\tapp.socket.sendMessage('removetextcontext id=0 before=0 after=1'); //delete\n\t\t\t\t\tthis._docLayer.postKeyboardEvent('input', 0, 1025); //up\n\t\t\t\t\tapp.socket.sendMessage('removetextcontext id=0 before=0 after=1'); //delete\n\t\t\t\t\twaitTime = 500;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn waitTime;\n\t}\n\n\tprivate _automatedUserInsertTypeShape(phase: number): number {\n\t\tlet waitTime = 0;\n\t\tswitch (phase) {\n\t\t\tcase 0:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Insert Shape');\n\t\t\t\t\tconst shapes = ['rectangle', 'circle', 'diamond', 'pentagon'];\n\t\t\t\t\tconst shape = shapes[Math.floor(Math.random() * shapes.length)];\n\t\t\t\t\tthis._map.sendUnoCommand('.uno:BasicShapes.' + shape);\n\t\t\t\t\twaitTime = 1000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Type in Shape');\n\t\t\t\t\tthis._docLayer.postKeyboardEvent('input', 0, 1280); // enter to select text\n\t\t\t\t\tthis._typeText('textinshape', 100);\n\t\t\t\t\twaitTime = 1500;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Type Escape');\n\t\t\t\t\tthis._docLayer.postKeyboardEvent('input', 0, 1281); // esc\n\t\t\t\t\twaitTime = 500;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Select Shape');\n\t\t\t\t\tconst pos = this._docLayer._latLngToTwips(this._map.getCenter());\n\t\t\t\t\tthis._docLayer._postMouseEvent('buttondown', pos.x, pos.y, 1, 1, 0);\n\t\t\t\t\tthis._docLayer._postMouseEvent('buttonup', pos.x, pos.y, 1, 1, 0);\n\t\t\t\t\twaitTime = 1000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Delete Shape');\n\t\t\t\t\tapp.socket.sendMessage('removetextcontext id=0 before=0 after=1');\n\t\t\t\t\twaitTime = 1000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn waitTime;\n\t}\n\n\tprivate _automatedUserResizeRowsColumns(phase: number): number {\n\t\tlet waitTime = 0;\n\t\tswitch (phase) {\n\t\t\tcase 0:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Resize row smaller');\n\t\t\t\t\t// Not necessary here, but nice to highlight the row being changed\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('row header')\n\t\t\t\t\t\t._selectRow(1, 0);\n\t\t\t\t\tthis._map.sendUnoCommand(\n\t\t\t\t\t\t'.uno:RowHeight {\"RowHeight\":{\"type\":\"unsigned short\",\"value\":200},\"Row\":{\"type\":\"long\",\"value\":2}}',\n\t\t\t\t\t);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Resize row larger');\n\t\t\t\t\t// Not necessary here, but nice to highlight the row being changed\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('row header')\n\t\t\t\t\t\t._selectRow(1, 0);\n\t\t\t\t\tthis._map.sendUnoCommand(\n\t\t\t\t\t\t'.uno:RowHeight {\"RowHeight\":{\"type\":\"unsigned short\",\"value\":2000},\"Row\":{\"type\":\"long\",\"value\":2}}',\n\t\t\t\t\t);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Resize row auto');\n\t\t\t\t\t// Selecting row is necessary here\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('row header')\n\t\t\t\t\t\t._selectRow(1, 0);\n\t\t\t\t\tthis._map.sendUnoCommand(\n\t\t\t\t\t\t'.uno:SetOptimalRowHeight {\"aExtraHeight\":{\"type\":\"unsigned short\",\"value\":0}}',\n\t\t\t\t\t);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Resize column smaller');\n\t\t\t\t\t// Not necessary here, but nice to highlight the column being changed\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('column header')\n\t\t\t\t\t\t._selectColumn(1, 0);\n\t\t\t\t\tthis._map.sendUnoCommand(\n\t\t\t\t\t\t'.uno:ColumnWidth {\"ColumnWidth\":{\"type\":\"unsigned short\",\"value\":400},\"Column\":{\"type\":\"long\",\"value\":2}}',\n\t\t\t\t\t);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Resize column larger');\n\t\t\t\t\t// Not necessary here, but nice to highlight the column being changed\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('column header')\n\t\t\t\t\t\t._selectColumn(1, 0);\n\t\t\t\t\tthis._map.sendUnoCommand(\n\t\t\t\t\t\t'.uno:ColumnWidth {\"ColumnWidth\":{\"type\":\"unsigned short\",\"value\":8000},\"Column\":{\"type\":\"long\",\"value\":2}}',\n\t\t\t\t\t);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 5:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Resize column auto');\n\t\t\t\t\t// Selecting column is necessary here\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('column header')\n\t\t\t\t\t\t._selectColumn(1, 0);\n\t\t\t\t\tthis._map.sendUnoCommand(\n\t\t\t\t\t\t'.uno:SetOptimalColumnWidthDirect {\"aExtraHeight\":{\"type\":\"unsigned short\",\"value\":0}}',\n\t\t\t\t\t);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn waitTime;\n\t}\n\n\tprivate _automatedUserInsertRowsColumns(phase: number): number {\n\t\tlet waitTime = 0;\n\t\tswitch (phase) {\n\t\t\tcase 0:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Insert row');\n\t\t\t\t\t// Select just this row first, doesn't work if multiple rows are selected\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('row header')\n\t\t\t\t\t\t._selectRow(1, 0);\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('row header')\n\t\t\t\t\t\t.insertRowAbove(1);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Delete column');\n\t\t\t\t\t// Select just this column first, doesn't work if multiple columns are selected\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('column header')\n\t\t\t\t\t\t._selectColumn(1, 0);\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('column header')\n\t\t\t\t\t\t.insertColumnBefore(1);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn waitTime;\n\t}\n\n\tprivate _automatedUserDeleteRowsColumns(phase: number): number {\n\t\tlet waitTime = 0;\n\t\tswitch (phase) {\n\t\t\tcase 0:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Delete row');\n\t\t\t\t\t// Select just this row first, otherwise multiple rows could get deleted\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('row header')\n\t\t\t\t\t\t._selectRow(1, 0);\n\t\t\t\t\tapp.sectionContainer.getSectionWithName('row header').deleteRow(1);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\t{\n\t\t\t\t\twindow.app.console.log('Automated User: Delete column');\n\t\t\t\t\t// Select just this column first, otherwise multiple columns could get deleted\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('column header')\n\t\t\t\t\t\t._selectColumn(1, 0);\n\t\t\t\t\tapp.sectionContainer\n\t\t\t\t\t\t.getSectionWithName('column header')\n\t\t\t\t\t\t.deleteColumn(1);\n\t\t\t\t\twaitTime = 2000;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t\treturn waitTime;\n\t}\n\n\tprivate _typerTimeout() {\n\t\tconst letter = this._typerLorem.charCodeAt(\n\t\t\tthis._typerLoremPos % this._typerLorem.length,\n\t\t);\n\t\tthis._typeChar(letter);\n\t\tthis._typerLoremPos++;\n\t\tthis._typerTimeoutId = setTimeout(this._typerTimeout.bind(this), 50);\n\t}\n\n\tprivate _typeText(text: string, delayMs: number) {\n\t\tfor (let i = 0; i < text.length; i++) {\n\t\t\tif (delayMs) {\n\t\t\t\tsetTimeout(\n\t\t\t\t\tL.bind(this._typeChar, this, text.charCodeAt(i)),\n\t\t\t\t\ti * delayMs,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis._typeChar(text.charCodeAt(i));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _typeChar(charCode: number): void {\n\t\tif (this.tileInvalidationsOn) {\n\t\t\tthis.addTileInvalidationKeypress();\n\t\t}\n\t\tif (charCode === '\\n'.charCodeAt(0)) {\n\t\t\tthis._docLayer.postKeyboardEvent('input', 0, 1280);\n\t\t} else {\n\t\t\tthis._docLayer.postKeyboardEvent('input', charCode, 0);\n\t\t}\n\t}\n\n\tpublic setOverlayMessage(id: string, message: string): void {\n\t\tif (this.overlayOn) {\n\t\t\tthis._overlayData[id] = message;\n\t\t}\n\t}\n\n\tpublic clearOverlayMessage(id: string): void {\n\t\tif (this.overlayOn && this._overlayData[id]) {\n\t\t\tdelete this._overlayData[id];\n\t\t}\n\t}\n\n\tpublic getOverlayMessages(): any {\n\t\tif (this.tileDataOn) this._tileDataUpdateOverlay();\n\n\t\treturn this._overlayData;\n\t}\n\n\tpublic getTimeArray(): DebugTimeArray {\n\t\treturn {\n\t\t\tcount: 0,\n\t\t\tms: 0,\n\t\t\tbest: Number.MAX_SAFE_INTEGER,\n\t\t\tworst: 0,\n\t\t\tdate: 0,\n\t\t};\n\t}\n\n\tpublic updateTimeArray(times: DebugTimeArray, value: number) {\n\t\tif (value < times.best) {\n\t\t\ttimes.best = value;\n\t\t}\n\t\tif (value > times.worst) {\n\t\t\ttimes.worst = value;\n\t\t}\n\t\ttimes.ms += value;\n\t\ttimes.count++;\n\t\treturn (\n\t\t\t'best: ' +\n\t\t\ttimes.best +\n\t\t\t' ms, worst: ' +\n\t\t\ttimes.worst +\n\t\t\t' ms, avg: ' +\n\t\t\tMath.round(times.ms / times.count) +\n\t\t\t' ms, last: ' +\n\t\t\tvalue +\n\t\t\t' ms'\n\t\t);\n\t}\n\n\tprivate _tileDataUpdateOverlay(): void {\n\t\tconst messages = this._tileDataTotalMessages;\n\t\tconst loads = this._tileDataTotalLoads;\n\t\tconst deltas = this._tileDataTotalDeltas;\n\t\tconst updates = this._tileDataTotalUpdates;\n\t\tconst invalidates = this._tileDataTotalInvalidates;\n\t\tthis.setOverlayMessage(\n\t\t\t'top-tileData',\n\t\t\t'Total tile messages: ' +\n\t\t\t\tmessages +\n\t\t\t\t'\\n' +\n\t\t\t\t'loads: ' +\n\t\t\t\tloads +\n\t\t\t\t' ' +\n\t\t\t\t'deltas: ' +\n\t\t\t\tdeltas +\n\t\t\t\t' ' +\n\t\t\t\t'updates: ' +\n\t\t\t\tupdates +\n\t\t\t\t'\\n' +\n\t\t\t\t'invalidates: ' +\n\t\t\t\tinvalidates +\n\t\t\t\t'\\n' +\n\t\t\t\t'Tile update waste: ' +\n\t\t\t\tMath.round((100.0 * updates) / (updates + deltas)) +\n\t\t\t\t'%\\n' +\n\t\t\t\t'New Tile ratio: ' +\n\t\t\t\tMath.round((100.0 * loads) / (loads + updates + deltas)) +\n\t\t\t\t'%',\n\t\t);\n\t}\n\n\tpublic tileDataAddMessage(): void {\n\t\tthis._tileDataTotalMessages++;\n\t}\n\n\tpublic tileDataAddLoad(): void {\n\t\tthis._tileDataTotalLoads++;\n\t}\n\n\tpublic tileDataAddUpdate(): void {\n\t\tthis._tileDataTotalUpdates++;\n\t}\n\n\tpublic tileDataAddDelta(): void {\n\t\tthis._tileDataTotalDeltas++;\n\t}\n\n\tpublic tileDataAddInvalidate(): void {\n\t\tthis._tileDataTotalInvalidates++;\n\t}\n\n\tprivate _tileInvalidationTimeout(): void {\n\t\tconst keys = this._tileInvalidationMessages.keys();\n\t\tfor (const key of keys) {\n\t\t\tif (key < this._tileInvalidationId - 5) {\n\t\t\t\tthis._tileInvalidationMessages.delete(key);\n\t\t\t}\n\t\t}\n\t\tthis._tileInvalidationTimeoutId = setTimeout(\n\t\t\tL.bind(this._tileInvalidationTimeout, this),\n\t\t\t50,\n\t\t);\n\t}\n\n\t// key press times will be paired with the invalidation messages\n\tpublic addTileInvalidationKeypress(): void {\n\t\tif (!this.tileInvalidationsOn) {\n\t\t\treturn;\n\t\t}\n\t\tthis._tileInvalidationKeypressQueue.push(+new Date());\n\t}\n\n\tpublic addTileInvalidationMessage(message: string): void {\n\t\tif (!this.tileInvalidationsOn) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._tileInvalidationMessages.set(this._tileInvalidationId - 1, message);\n\n\t\tlet messages = '';\n\t\tfor (\n\t\t\tlet i = this._tileInvalidationId - 1;\n\t\t\ti > this._tileInvalidationId - 6;\n\t\t\ti--\n\t\t) {\n\t\t\tif (i >= 0 && this._tileInvalidationMessages.has(i)) {\n\t\t\t\tmessages +=\n\t\t\t\t\t'' + i + ': ' + this._tileInvalidationMessages.get(i) + '\\n';\n\t\t\t}\n\t\t}\n\t\tthis.setOverlayMessage('tileInvalidationMessages', messages);\n\t}\n\n\tpublic addTileInvalidationRectangle(\n\t\trectangleArray: number[] /* [x, y, width, height] in twips */,\n\t\tcommand: string,\n\t): void {\n\t\tif (!this.tileInvalidationsOn) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst signX = this._docLayer.isCalcRTL() ? -1 : 1;\n\n\t\tconst absTopLeftTwips = L.point(\n\t\t\trectangleArray[0] * signX,\n\t\t\trectangleArray[1],\n\t\t);\n\t\tconst absBottomRightTwips = L.point(\n\t\t\t(rectangleArray[0] + rectangleArray[2]) * signX,\n\t\t\trectangleArray[1] + rectangleArray[3],\n\t\t);\n\n\t\tthis._tileInvalidationMessages.set(this._tileInvalidationId, command);\n\t\tthis._tileInvalidationId++;\n\n\t\tconst x = absTopLeftTwips.x * app.twipsToPixels;\n\t\tconst y = absTopLeftTwips.y * app.twipsToPixels;\n\t\tconst w = (absBottomRightTwips.x - absTopLeftTwips.x) * app.twipsToPixels;\n\t\tconst h = (absBottomRightTwips.y - absTopLeftTwips.y) * app.twipsToPixels;\n\t\tInvalidationRectangleSection.setRectangle(x, y, w, h);\n\n\t\t// There is not always an invalidation for every keypress.\n\t\t// Keypresses at the front of the queue that are older than 1s\n\t\t// are probably stale and should be ignored.\n\t\tconst now = +new Date();\n\t\tlet oldestKeypress: number;\n\t\tdo {\n\t\t\toldestKeypress = this._tileInvalidationKeypressQueue.shift();\n\t\t} while (oldestKeypress && now - oldestKeypress > 1000);\n\t\tif (oldestKeypress) {\n\t\t\tconst timeText = this.updateTimeArray(\n\t\t\t\tthis._tileInvalidationKeypressTimes,\n\t\t\t\tnow - oldestKeypress,\n\t\t\t);\n\t\t\tthis.setOverlayMessage(\n\t\t\t\t'tileInvalidationTime',\n\t\t\t\t'Tile invalidation time: ' + timeText,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _pingTimeout(): void {\n\t\t// pings will be paired with the pong messages\n\t\tthis._pingQueue.push(+new Date());\n\t\tapp.socket.sendMessage('ping');\n\t\tthis._pingTimeoutId = setTimeout(this._pingTimeout.bind(this), 2000);\n\t}\n\n\tpublic reportPong(rendercount: number): void {\n\t\tif (!this.pingOn) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO: move rendercount from pong to tile data tool\n\t\tthis.setOverlayMessage(\n\t\t\t'rendercount',\n\t\t\t'Server rendered tiles: ' + rendercount,\n\t\t);\n\n\t\tconst oldestPing = this._pingQueue.shift();\n\t\tif (oldestPing) {\n\t\t\tconst now = +new Date();\n\t\t\tconst timeText = this._map._debug.updateTimeArray(\n\t\t\t\tthis._pingTimes,\n\t\t\t\tnow - oldestPing,\n\t\t\t);\n\t\t\tthis.setOverlayMessage('ping', 'Server ping time: ' + timeText);\n\t\t}\n\t}\n\n\tpublic timeEventDelay(): void {\n\t\tif (!this.eventDelayWatchdog || this._eventDelayTimeout !== null) return;\n\n\t\tthis._eventDelayWatchStart = performance.now();\n\t\tthis._eventDelayTimeout = setTimeout(() => {\n\t\t\tthis._eventDelayTimeout = null;\n\t\t\tthis.reportEventDelay(performance.now() - this._eventDelayWatchStart);\n\t\t}, 0);\n\t}\n\n\tpublic reportEventDelay(delayMs: number): void {\n\t\tif (!this.eventDelayWatchdog) return;\n\n\t\t// Time in ms to prefer showing a large, slow event handling time\n\t\tconst slow_time_display_timeout = 3000;\n\n\t\t// Threshold above which event handling is considered 'slow', in ms\n\t\tconst slow_time_threshold = 50;\n\n\t\t// Threshold above which event handling is considered to be catastrophically slow, in ms\n\t\tconst very_slow_time_threshold = 250;\n\n\t\tconst currentTime = performance.now();\n\t\tif (\n\t\t\tthis._lastEventDelay < slow_time_threshold ||\n\t\t\tdelayMs > this._lastEventDelay ||\n\t\t\tcurrentTime - this._lastEventDelayTime > slow_time_display_timeout\n\t\t) {\n\t\t\tthis._lastEventDelayTime = currentTime;\n\t\t\tthis._lastEventDelay = delayMs;\n\t\t\tthis.setOverlayMessage(\n\t\t\t\t'top-eventDelayTime',\n\t\t\t\t'Event handling delay: ' + Math.ceil(delayMs) + 'ms',\n\t\t\t);\n\n\t\t\tif (delayMs > very_slow_time_threshold) {\n\t\t\t\tconst msg = _(\n\t\t\t\t\t'Event handling has been delayed for an unexpectedly long time: {0}ms',\n\t\t\t\t);\n\t\t\t\tthis._map.uiManager.showInfoModal(\n\t\t\t\t\t'cool_alert',\n\t\t\t\t\t'',\n\t\t\t\t\tmsg.replace('{0}', delayMs.toString()),\n\t\t\t\t\t'',\n\t\t\t\t\t_('OK'),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n\napp.DebugManager = DebugManager;\n"]}