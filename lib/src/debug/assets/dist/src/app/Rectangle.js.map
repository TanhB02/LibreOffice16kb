{"version":3,"file":"Rectangle.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/app/Rectangle.ts"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nnamespace cool {\n\t/**\n\t * Represents a rectangle object which works with core pixels.\n\t * x1 and y1 should always <= x2 and y2. In other words width >= 0 && height >= 0 is a precondition.\n\t * This class doesn't check for above conditions. There is a isValid function for use when needed.\n\t */\n\texport class Rectangle {\n\t\tprivate x1: number;\n\t\tprivate y1: number;\n\t\tprivate width: number;\n\t\tprivate height: number;\n\n\t\tconstructor(x: number, y: number, width: number, height: number) {\n\t\t\tthis.x1 = x;\n\t\t\tthis.y1 = y;\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t}\n\n\t\t// convenience private getters\n\n\t\tprivate get x2(): number {\n\t\t\treturn this.x1 + this.width;\n\t\t}\n\n\t\tprivate get y2(): number {\n\t\t\treturn this.y1 + this.height;\n\t\t}\n\n\t\tprivate get area(): number {\n\t\t\treturn this.width * this.height;\n\t\t}\n\n\t\t// Rounded coordinates private getters\n\n\t\tprivate get rx1(): number {\n\t\t\treturn Math.round(this.x1);\n\t\t}\n\n\t\tprivate get ry1(): number {\n\t\t\treturn Math.round(this.y1);\n\t\t}\n\n\t\tprivate get rx2(): number {\n\t\t\treturn Math.round(this.x2);\n\t\t}\n\n\t\tprivate get ry2(): number {\n\t\t\treturn Math.round(this.y2);\n\t\t}\n\n\t\tprivate get rwidth(): number {\n\t\t\treturn this.rx2 - this.rx1;\n\t\t}\n\n\t\tprivate get rheight(): number {\n\t\t\treturn this.ry2 - this.ry1;\n\t\t}\n\n\t\tprivate get rarea(): number {\n\t\t\treturn this.rwidth * this.rheight;\n\t\t}\n\n\t\tpublic isValid(): boolean {\n\t\t\tif (this.x1 <= this.x2 && this.y1 <= this.y2) return true;\n\t\t\treturn false;\n\t\t}\n\n\t\tpublic clone(): Rectangle {\n\t\t\treturn new Rectangle(this.x1, this.x2, this.width, this.height);\n\t\t}\n\n\t\tpublic containsPoint(x: number, y: number): boolean {\n\t\t\tif (x >= this.x1 && x <= this.x2 && y >= this.y1 && y <= this.y2)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t}\n\n\t\tpublic containsPixel(px: number, py: number): boolean {\n\t\t\tif (px >= this.rx1 && px <= this.rx2 && py >= this.ry1 && py <= this.ry2)\n\t\t\t\treturn true;\n\n\t\t\treturn false;\n\t\t}\n\n\t\tpublic containsXOrdinate(ox: number): boolean {\n\t\t\tif (ox >= this.x1 && ox <= this.x2) return true;\n\n\t\t\treturn false;\n\t\t}\n\n\t\tpublic containsYOrdinate(oy: number): boolean {\n\t\t\tif (oy >= this.y1 && oy <= this.y2) return true;\n\n\t\t\treturn false;\n\t\t}\n\n\t\tpublic containsPixelOrdinateX(ox: number): boolean {\n\t\t\tif (ox >= this.rx1 && ox <= this.rx2) return true;\n\n\t\t\treturn false;\n\t\t}\n\n\t\tpublic containsPixelOrdinateY(oy: number): boolean {\n\t\t\tif (oy >= this.ry1 && oy <= this.ry2) return true;\n\n\t\t\treturn false;\n\t\t}\n\n\t\t/// Sets x1 of the rectangle without changing x2.\n\t\tpublic setX1(x1: number): void {\n\t\t\tthis.width += this.x1 - x1;\n\t\t\tthis.x1 = x1;\n\t\t}\n\n\t\t/// Sets x2 of the rectangle without changing x1.\n\t\tpublic setX2(x2: number): void {\n\t\t\tthis.width = x2 - this.x1;\n\t\t}\n\n\t\t/// Sets y1 of the rectangle without changing y2.\n\t\tpublic setY1(y1: number): void {\n\t\t\tthis.height += this.y1 - y1;\n\t\t\tthis.y1 = y1;\n\t\t}\n\n\t\t/// Sets y2 of the rectangle without changing y1.\n\t\tpublic setY2(y2: number): void {\n\t\t\tthis.height = y2 - this.y1;\n\t\t}\n\n\t\t/// Sets width keeping x1 constant.\n\t\tpublic setWidth(width: number): void {\n\t\t\tthis.width = width;\n\t\t}\n\n\t\t/// Sets height keeping y1 constant.\n\t\tpublic setHeight(height: number): void {\n\t\t\tthis.height = height;\n\t\t}\n\n\t\t/// Sets area by either keeping height or width as constant.\n\t\tpublic setArea(area: number, preserveHeight: boolean): void {\n\t\t\tif (!preserveHeight) {\n\t\t\t\t//preserve width\n\t\t\t\tconst height = area / this.width;\n\t\t\t\tthis.setHeight(height);\n\t\t\t} else {\n\t\t\t\t// preserve height\n\t\t\t\tconst width = area / this.height;\n\t\t\t\tthis.setWidth(width);\n\t\t\t}\n\t\t}\n\n\t\t/// Moves the whole rectangle by (dx, dy) by preserving width and height.\n\t\tpublic moveBy(dx: number, dy: number): void {\n\t\t\tthis.x1 += dx;\n\t\t\tthis.y1 += dy;\n\t\t}\n\n\t\t/**\n\t\t * Moves the rectangle to (x, y) as its new x1, y1 without changing\n\t\t * its size.\n\t\t */\n\t\tpublic moveTo(x: number, y: number): void {\n\t\t\tthis.x1 = x;\n\t\t\tthis.y1 = y;\n\t\t}\n\n\t\t// TODO: Following methods could be replaced with js getters\n\t\t// but we need to change their users to access getters.\n\n\t\tpublic getX1(): number {\n\t\t\treturn this.x1;\n\t\t}\n\n\t\tpublic getX2(): number {\n\t\t\treturn this.x2;\n\t\t}\n\n\t\tpublic getY1(): number {\n\t\t\treturn this.y1;\n\t\t}\n\n\t\tpublic getY2(): number {\n\t\t\treturn this.y2;\n\t\t}\n\n\t\tpublic getWidth(): number {\n\t\t\treturn this.width;\n\t\t}\n\n\t\tpublic getHeight(): number {\n\t\t\treturn this.height;\n\t\t}\n\n\t\tpublic getArea(): number {\n\t\t\treturn this.area;\n\t\t}\n\n\t\tpublic getCenter(): number[] {\n\t\t\treturn [(this.x2 + this.x1) / 2, (this.y2 + this.y1) / 2];\n\t\t}\n\n\t\tpublic getPxX1(): number {\n\t\t\treturn this.rx1;\n\t\t}\n\n\t\tpublic getPxX2(): number {\n\t\t\treturn this.rx2;\n\t\t}\n\n\t\tpublic getPxY1(): number {\n\t\t\treturn this.ry1;\n\t\t}\n\n\t\tpublic getPxY2(): number {\n\t\t\treturn this.ry2;\n\t\t}\n\n\t\tpublic getPxWidth(): number {\n\t\t\treturn this.rwidth;\n\t\t}\n\n\t\tpublic getPxHeight(): number {\n\t\t\treturn this.rheight;\n\t\t}\n\n\t\tpublic getPxArea(): number {\n\t\t\treturn this.rarea;\n\t\t}\n\n\t\tpublic getPxCenter(): number[] {\n\t\t\treturn [\n\t\t\t\tMath.round((this.rx2 + this.rx1) / 2),\n\t\t\t\tMath.round((this.ry2 + this.ry1) / 2),\n\t\t\t];\n\t\t}\n\t}\n\n\texport function createRectangle(\n\t\tx: number,\n\t\ty: number,\n\t\twidth: number,\n\t\theight: number,\n\t): Rectangle {\n\t\treturn new Rectangle(x, y, width, height);\n\t}\n}\n"]}