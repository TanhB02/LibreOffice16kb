{"version":3,"file":"WheelTransition.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/transition/WheelTransition.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;;;;;;;;;;;;;;;;AAchC,IAAK,YAMJ;AAND,WAAK,YAAY;IAChB,uDAAY,CAAA;IACZ,uDAAY,CAAA;IACZ,2DAAc,CAAA;IACd,yDAAa,CAAA;IACb,2DAAc,CAAA;AACf,CAAC,EANI,YAAY,KAAZ,YAAY,QAMhB;AAED;IAA8B,mCAAkB;IAE/C,yBAAY,oBAA0C;eACrD,kBAAM,oBAAoB,CAAC;IAC5B,CAAC;IAES,gDAAsB,GAAhC;QACC,IAAM,iBAAiB,GAAG,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC;QAEtE,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,gBAAgB,EAAE;YAC5D,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,QAAQ,CAAC;SACpC;aAAM,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,UAAU,EAAE;YAC7D,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,UAAU,CAAC;SACtC;aAAM,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,SAAS,EAAE;YAC5D,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,SAAS,CAAC;SACrC;aAAM,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,UAAU,EAAE;YAC7D,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,UAAU,CAAC;SACtC;aAAM;YACN,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,QAAQ,CAAC;SACpC;IACF,CAAC;IAES,yCAAe,GAAzB;QACC,IAAM,KAAK,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;QAC5C,OAAO,iLAI0D,IAAI,CAAC,EAAE,GAAG,CAAC,4DAC3B,KAAK,WAAM,KAAK,+EAIhE,CAAC;IACH,CAAC;IACF,sBAAC;AAAD,CAAC,AAnCD,CAA8B,kBAAkB,GAmC/C;AAED,SAAS,CAAC,eAAe,GAAG,eAAe,CAAC","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ndeclare var SlideShow: any;\n\nenum WheelSubType {\n\tONEWHEEL = 1,\n\tTWOWHEEL = 2,\n\tTHREEWHEEL = 3,\n\tFOURWHEEL = 4,\n\tEIGHTWHEEL = 8,\n}\n\nclass WheelTransition extends ClippingTransition {\n\tprivate stocks: number;\n\tconstructor(transitionParameters: TransitionParameters) {\n\t\tsuper(transitionParameters);\n\t}\n\n\tprotected initMaskFunctionParams() {\n\t\tconst transitionSubType = this.transitionFilterInfo.transitionSubtype;\n\n\t\tif (transitionSubType == TransitionSubType.TWOBLADEVERTICAL) {\n\t\t\tthis.stocks = WheelSubType.TWOWHEEL;\n\t\t} else if (transitionSubType == TransitionSubType.THREEBLADE) {\n\t\t\tthis.stocks = WheelSubType.THREEWHEEL;\n\t\t} else if (transitionSubType == TransitionSubType.FOURBLADE) {\n\t\t\tthis.stocks = WheelSubType.FOURWHEEL;\n\t\t} else if (transitionSubType == TransitionSubType.EIGHTBLADE) {\n\t\t\tthis.stocks = WheelSubType.EIGHTWHEEL;\n\t\t} else {\n\t\t\tthis.stocks = WheelSubType.ONEWHEEL;\n\t\t}\n\t}\n\n\tprotected getMaskFunction(): string {\n\t\tconst slice = (2.0 * Math.PI) / this.stocks;\n\t\treturn `\n                float getMaskValue(vec2 uv, float time) {\n                    float progress = time;\n\n                    float angle = atan(uv.y - 0.5, uv.x - 0.5) + ${Math.PI / 2};\n                    float mask = step(mod(angle, ${slice}), ${slice} * progress);\n\n                    return mask;\n                }\n\t\t`;\n\t}\n}\n\nSlideShow.WheelTransition = WheelTransition;\n"]}