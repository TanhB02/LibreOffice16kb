{"version":3,"file":"WipeTransition.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/transition/WipeTransition.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;;;;;;;;;;;;;;;;AAchC,IAAK,WAKJ;AALD,WAAK,WAAW;IACf,2DAAW,CAAA;IACX,2DAAW,CAAA;IACX,2DAAW,CAAA;IACX,2DAAW,CAAA;AACZ,CAAC,EALI,WAAW,KAAX,WAAW,QAKf;AAED;IAA6B,kCAAkB;IAG9C,wBAAY,oBAA0C;eACrD,kBAAM,oBAAoB,CAAC;IAC5B,CAAC;IAES,+CAAsB,GAAhC;QACC,IAAM,iBAAiB,GAAG,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC;QACtE,IACC,iBAAiB,IAAI,iBAAiB,CAAC,WAAW;YAClD,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAC3C;YACD,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,WAAW,CAAC;SACzC;aAAM,IACN,iBAAiB,IAAI,iBAAiB,CAAC,WAAW;YAClD,CAAC,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAC5C;YACD,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,WAAW,CAAC;SACzC;aAAM,IACN,iBAAiB,IAAI,iBAAiB,CAAC,WAAW;YAClD,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAC3C;YACD,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,WAAW,CAAC;SACzC;aAAM;YACN,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,WAAW,CAAC;SACzC;IACF,CAAC;IAED,qBAAqB;IACX,wCAAe,GAAzB;QACC,IAAM,eAAe,GACpB,IAAI,CAAC,SAAS,IAAI,WAAW,CAAC,WAAW;YACzC,IAAI,CAAC,SAAS,IAAI,WAAW,CAAC,WAAW,CAAC;QAC3C,IAAM,aAAa,GAClB,IAAI,CAAC,SAAS,IAAI,WAAW,CAAC,WAAW;YACzC,IAAI,CAAC,SAAS,IAAI,WAAW,CAAC,WAAW,CAAC;QAE3C,OAAO,2HAImB,eAAe,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,yBAC/C,aAAa,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC,EAAE,kGAItD,CAAC;IACH,CAAC;IAEF,qBAAC;AAAD,CAAC,AAlDD,CAA6B,kBAAkB,GAkD9C;AAED,SAAS,CAAC,cAAc,GAAG,cAAc,CAAC","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ndeclare var SlideShow: any;\n\nenum WipeSubType {\n\tLEFTTORIGHT,\n\tRIGHTTOLEFT,\n\tTOPTOBOTTOM,\n\tBOTTOMTOTOP,\n}\n\nclass WipeTransition extends ClippingTransition {\n\tprivate direction: number;\n\n\tconstructor(transitionParameters: TransitionParameters) {\n\t\tsuper(transitionParameters);\n\t}\n\n\tprotected initMaskFunctionParams() {\n\t\tconst transitionSubType = this.transitionFilterInfo.transitionSubtype;\n\t\tif (\n\t\t\ttransitionSubType == TransitionSubType.TOPTOBOTTOM &&\n\t\t\tthis.transitionFilterInfo.isDirectionForward\n\t\t) {\n\t\t\tthis.direction = WipeSubType.TOPTOBOTTOM;\n\t\t} else if (\n\t\t\ttransitionSubType == TransitionSubType.TOPTOBOTTOM &&\n\t\t\t!this.transitionFilterInfo.isDirectionForward\n\t\t) {\n\t\t\tthis.direction = WipeSubType.BOTTOMTOTOP;\n\t\t} else if (\n\t\t\ttransitionSubType == TransitionSubType.LEFTTORIGHT &&\n\t\t\tthis.transitionFilterInfo.isDirectionForward\n\t\t) {\n\t\t\tthis.direction = WipeSubType.LEFTTORIGHT;\n\t\t} else {\n\t\t\tthis.direction = WipeSubType.RIGHTTOLEFT;\n\t\t}\n\t}\n\n\t// jscpd:ignore-start\n\tprotected getMaskFunction(): string {\n\t\tconst isHorizontalDir =\n\t\t\tthis.direction == WipeSubType.LEFTTORIGHT ||\n\t\t\tthis.direction == WipeSubType.RIGHTTOLEFT;\n\t\tconst isBackwardDir =\n\t\t\tthis.direction == WipeSubType.RIGHTTOLEFT ||\n\t\t\tthis.direction == WipeSubType.BOTTOMTOTOP;\n\n\t\treturn `\n        float getMaskValue(vec2 uv, float time) {\n            float progress = time;\n\n            float coord = ${isHorizontalDir ? 'uv.x' : 'uv.y'};\n            ${isBackwardDir ? 'coord = 1.0 - coord;' : ''}\n            float mask = step(coord, progress);\n            return mask;\n        }\n\t\t`;\n\t}\n\t// jscpd:ignore-end\n}\n\nSlideShow.WipeTransition = WipeTransition;\n"]}