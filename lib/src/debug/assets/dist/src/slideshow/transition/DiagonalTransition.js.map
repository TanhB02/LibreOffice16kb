{"version":3,"file":"DiagonalTransition.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/transition/DiagonalTransition.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;;;;;;;;;;;;;;;;AAchC,IAAK,eAKJ;AALD,WAAK,eAAe;IACnB,iEAAU,CAAA;IACV,2DAAO,CAAA;IACP,6DAAQ,CAAA;IACR,mEAAW,CAAA;AACZ,CAAC,EALI,eAAe,KAAf,eAAe,QAKnB;AAED;IAAiC,sCAAkB;IAGlD,4BAAY,oBAA0C;eACrD,kBAAM,oBAAoB,CAAC;IAC5B,CAAC;IAES,mDAAsB,GAAhC;QACC,IAAM,iBAAiB,GAAG,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,CAAC;QAEtE,IACC,iBAAiB,IAAI,iBAAiB,CAAC,eAAe;YACtD,CAAC,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAC5C;YACD,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC,UAAU,CAAC;SAC5C;aAAM,IACN,iBAAiB,IAAI,iBAAiB,CAAC,cAAc;YACrD,CAAC,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAC5C;YACD,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC,WAAW,CAAC;SAC7C;aAAM,IAAI,iBAAiB,IAAI,iBAAiB,CAAC,eAAe,EAAE;YAClE,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC,QAAQ,CAAC;SAC1C;aAAM;YACN,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC,OAAO,CAAC;SACzC;IACF,CAAC;IAED,qBAAqB;IACX,4CAAe,GAAzB;QACC,IAAM,eAAe,GACpB,IAAI,CAAC,SAAS,IAAI,eAAe,CAAC,QAAQ;YAC1C,IAAI,CAAC,SAAS,IAAI,eAAe,CAAC,WAAW,CAAC;QAC/C,IAAM,gBAAgB,GACrB,IAAI,CAAC,SAAS,IAAI,eAAe,CAAC,UAAU;YAC5C,IAAI,CAAC,SAAS,IAAI,eAAe,CAAC,WAAW,CAAC;QAE/C,OAAO,oJAI4B,eAAe,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,MAAM,oHAEzC,gBAAgB,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,QAAQ,uTAU9E,CAAC;IACH,CAAC;IAEF,yBAAC;AAAD,CAAC,AAvDD,CAAiC,kBAAkB,GAuDlD;AAED,SAAS,CAAC,kBAAkB,GAAG,kBAAkB,CAAC","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ndeclare var SlideShow: any;\n\nenum DiagonalSubType {\n\tBOTTOMLEFT,\n\tTOPLEFT,\n\tTOPRIGHT,\n\tBOTTOMRIGHT,\n}\n\nclass DiagonalTransition extends ClippingTransition {\n\tprivate direction: number;\n\n\tconstructor(transitionParameters: TransitionParameters) {\n\t\tsuper(transitionParameters);\n\t}\n\n\tprotected initMaskFunctionParams() {\n\t\tconst transitionSubType = this.transitionFilterInfo.transitionSubtype;\n\n\t\tif (\n\t\t\ttransitionSubType == TransitionSubType.HORIZONTALRIGHT &&\n\t\t\t!this.transitionFilterInfo.isDirectionForward\n\t\t) {\n\t\t\tthis.direction = DiagonalSubType.BOTTOMLEFT;\n\t\t} else if (\n\t\t\ttransitionSubType == TransitionSubType.HORIZONTALLEFT &&\n\t\t\t!this.transitionFilterInfo.isDirectionForward\n\t\t) {\n\t\t\tthis.direction = DiagonalSubType.BOTTOMRIGHT;\n\t\t} else if (transitionSubType == TransitionSubType.HORIZONTALRIGHT) {\n\t\t\tthis.direction = DiagonalSubType.TOPRIGHT;\n\t\t} else {\n\t\t\tthis.direction = DiagonalSubType.TOPLEFT;\n\t\t}\n\t}\n\n\t// jscpd:ignore-start\n\tprotected getMaskFunction(): string {\n\t\tconst startsFromRight =\n\t\t\tthis.direction == DiagonalSubType.TOPRIGHT ||\n\t\t\tthis.direction == DiagonalSubType.BOTTOMRIGHT;\n\t\tconst startsFromBottom =\n\t\t\tthis.direction == DiagonalSubType.BOTTOMLEFT ||\n\t\t\tthis.direction == DiagonalSubType.BOTTOMRIGHT;\n\n\t\treturn `\n                float getMaskValue(vec2 uv, float time) {\n                    float u_steps = 10.0f;\n\n                    float xCoord = ${startsFromRight ? '1.0f - uv.x' : 'uv.x'};\n                    float yCoord = floor(uv.y * u_steps) / u_steps;\n                    float yStep = ${startsFromBottom ? '1.0f - yCoord' : 'yCoord'};\n\n                    float stepDelay = 1.0f;\n                    float adjustedTime = time * 2.0f - yStep * stepDelay;\n\n                    float stepWidth = 1.0f;\n                    float mask = step(xCoord * stepWidth, adjustedTime);\n\n                    return mask;\n                }\n\t\t`;\n\t}\n\t// jscpd:ignore-end\n}\n\nSlideShow.DiagonalTransition = DiagonalTransition;\n"]}