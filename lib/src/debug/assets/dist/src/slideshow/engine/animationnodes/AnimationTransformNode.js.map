{"version":3,"file":"AnimationTransformNode.js","sourceRoot":"","sources":["../../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/animationnodes/AnimationTransformNode.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,0BAA0B;;;;;;;;;;;;;;;;AAE1B;;;;;;;;GAQG;AAEH;IAAqC,0CAAkB;IACtD,gCACC,SAA4B,EAC5B,WAA8B,EAC9B,YAAyB;QAH1B,YAKC,kBAAM,SAAS,EAAE,WAAW,EAAE,YAAY,CAAC,SAE3C;QADA,KAAI,CAAC,UAAU,GAAG,wBAAwB,CAAC;;IAC5C,CAAC;IAEa,4CAAqB,GAAnC,UAAoC,KAAa;QAChD,OAAO,CACN,KAAK,KAAK,WAAW;YACrB,KAAK,KAAK,OAAO;YACjB,KAAK,KAAK,QAAQ;YAClB,KAAK,KAAK,OAAO;YACjB,KAAK,KAAK,OAAO,CACjB,CAAC;IACH,CAAC;IAEM,8CAAa,GAApB;QACC,iBAAM,aAAa,WAAE,CAAC;QAEtB,IAAM,SAAS,GAAG,IAAI,CAAC,SAAqC,CAAC;QAC7D,IACC,CAAC,sBAAsB,CAAC,qBAAqB,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,EACrE;YACD,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,OAAO,CAAC;YACvC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,sEAAsE;gBACrE,IAAI,CAAC,gBAAgB,EAAE,CACxB,CAAC;SACF;aAAM;YACN,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC7C;IACF,CAAC;IAEM,+CAAc,GAArB;QACC,IAAM,iBAAiB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACpD,IAAI,UAAU,GAAG,IAAI,CAAC;QAEtB,IACC,IAAI,CAAC,gBAAgB,EAAE,KAAK,OAAO;YACnC,IAAI,CAAC,gBAAgB,EAAE,KAAK,WAAW,EACtC;YACD,UAAU,GAAG,2BAA2B,CACvC,IAAI,CAAC,gBAAgB,EAAE,EACvB,IAAI,CAAC,kBAAkB,EAAE,EACzB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,WAAW,EACtC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,YAAY,CACvC,CAAC;SACF;aAAM;YACN,UAAU,GAAG,uBAAuB,CACnC,IAAI,CAAC,gBAAgB,EAAE,EACvB,IAAI,CAAC,kBAAkB,EAAE,EACzB,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,WAAW,EACtC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,YAAY,CACvC,CAAC;SACF;QAED,IAAI,CAAC,UAAU,EAAE;YAChB,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,oEAAoE,CACpE,CAAC;YACF,OAAO,IAAI,CAAC;SACZ;QAED,IAAM,aAAa,GAA6B,IAAI,CAAC,CAAC,kCAAkC;QACxF,OAAO,cAAc,CAAC,iBAAiB,EAAE,IAAI,EAAE,UAAU,EAAE,aAAa,CAAC,CAAC;IAC3E,CAAC;IAEM,iDAAgB,GAAvB;QACC,OACC,IAAI,CAAC,SACL,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;IAC/B,CAAC;IACF,6BAAC;AAAD,CAAC,AA5ED,CAAqC,kBAAkB,GA4EtD","sourcesContent":["// @ts-strict-ignore\n/* -*- tab-width: 4 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nclass AnimationTransformNode extends AnimationBaseNode3 {\n\tconstructor(\n\t\taNodeInfo: AnimationNodeInfo,\n\t\taParentNode: BaseContainerNode,\n\t\taNodeContext: NodeContext,\n\t) {\n\t\tsuper(aNodeInfo, aParentNode, aNodeContext);\n\t\tthis.sClassName = 'AnimationTransformNode';\n\t}\n\n\tpublic static isValidTransformation(sType: string) {\n\t\treturn (\n\t\t\tsType === 'translate' ||\n\t\t\tsType === 'scale' ||\n\t\t\tsType === 'rotate' ||\n\t\t\tsType === 'skewX' ||\n\t\t\tsType === 'skewY'\n\t\t);\n\t}\n\n\tpublic parseNodeInfo() {\n\t\tsuper.parseNodeInfo();\n\n\t\tconst aNodeInfo = this.aNodeInfo as AnimateTransformNodeInfo;\n\t\tif (\n\t\t\t!AnimationTransformNode.isValidTransformation(this.getTransformType())\n\t\t) {\n\t\t\tthis.eCurrentState = NodeState.Invalid;\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimationTransformNode.parseElement: transformation type not found: ' +\n\t\t\t\t\tthis.getTransformType(),\n\t\t\t);\n\t\t} else {\n\t\t\tthis.attributeName = this.getTransformType();\n\t\t}\n\t}\n\n\tpublic createActivity(): AnimationActivity {\n\t\tconst aActivityParamSet = this.fillActivityParams();\n\t\tlet aAnimation = null;\n\n\t\tif (\n\t\t\tthis.getAttributeName() === 'scale' ||\n\t\t\tthis.getAttributeName() === 'translate'\n\t\t) {\n\t\t\taAnimation = createPairPropertyAnimation(\n\t\t\t\tthis.getAttributeName(),\n\t\t\t\tthis.getAnimatedElement(),\n\t\t\t\tthis.aNodeContext.aContext.nSlideWidth,\n\t\t\t\tthis.aNodeContext.aContext.nSlideHeight,\n\t\t\t);\n\t\t} else {\n\t\t\taAnimation = createPropertyAnimation(\n\t\t\t\tthis.getAttributeName(),\n\t\t\t\tthis.getAnimatedElement(),\n\t\t\t\tthis.aNodeContext.aContext.nSlideWidth,\n\t\t\t\tthis.aNodeContext.aContext.nSlideHeight,\n\t\t\t);\n\t\t}\n\n\t\tif (!aAnimation) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimationTransformNode.createActivity: failed to create animation.',\n\t\t\t);\n\t\t\treturn null;\n\t\t}\n\n\t\tconst aInterpolator: PropertyInterpolatorType = null; // createActivity will compute it;\n\t\treturn createActivity(aActivityParamSet, this, aAnimation, aInterpolator);\n\t}\n\n\tpublic getTransformType(): string {\n\t\treturn (\n\t\t\tthis.aNodeInfo as AnimateTransformNodeInfo\n\t\t).transformType.toLowerCase();\n\t}\n}\n"]}