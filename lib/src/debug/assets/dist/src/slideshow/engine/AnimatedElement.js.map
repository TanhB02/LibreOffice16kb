{"version":3,"file":"AnimatedElement.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/AnimatedElement.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,0BAA0B;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgB1B,IAAM,OAAO,GAAG,4BAA4B,CAAC;AAE7C,IAAK,iBAQJ;AARD,WAAK,iBAAiB;IACrB,+DAAO,CAAA;IACP,6DAAM,CAAA;IACN,yDAAI,CAAA;IACJ,2DAAK,CAAA;IACL,6DAAM,CAAA;IACN,yDAAI,CAAA;IACJ,uEAAW,CAAA;AACZ,CAAC,EARI,iBAAiB,KAAjB,iBAAiB,QAQrB;AAED,IAAU,iBAAiB,CAqE1B;AArED,WAAU,iBAAiB;IAC1B,IAAM,gBAAgB,GAAG;QACxB,KAAK,EAAE,UAAC,CAAM,EAAE,CAAM;YACrB,OAAO,CAAC,KAAK,CAAC,CAAC;QAChB,CAAC;QACD,GAAG,EAAE,UAAC,CAAM,EAAE,CAAM;YACnB,OAAO,CAAC,CAAC;QACV,CAAC;QACD,KAAK,EAAE,UAAC,CAAM,EAAE,CAAM;YACrB,OAAO,CAAC,CAAC;QACV,CAAC;KACD,CAAC;IACF,IAAM,eAAe,GAAG;QACvB,KAAK,EAAE,UAAC,CAAS,EAAE,CAAS;YAC3B,OAAO,CAAC,KAAK,CAAC,CAAC;QAChB,CAAC;QACD,GAAG,EAAE,UAAC,CAAS,EAAE,CAAS;YACzB,OAAO,CAAC,GAAG,CAAC,CAAC;QACd,CAAC;QACD,KAAK,EAAE,UAAC,CAAS,EAAE,CAAS;YAC3B,OAAO,CAAC,GAAG,CAAC,CAAC;QACd,CAAC;KACD,CAAC;IACF,IAAM,oBAAoB,GAAG;QAC5B,KAAK,EAAE,UAAC,CAAW,EAAE,CAAW;YAC/B,MAAM,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE,yBAAyB,CAAC,CAAC;YACzD,OAAO,CAAC,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC,QAAQ,EAAE,CAAC;QACtC,CAAC;QACD,GAAG,EAAE,UAAC,CAAW,EAAE,CAAW;YAC7B,MAAM,CAAC,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE,yBAAyB,CAAC,CAAC;YACzD,IAAM,CAAC,GAAa,EAAE,CAAC;YACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBAClC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACpB;YACD,OAAO,CAAC,CAAC;QACV,CAAC;QACD,KAAK,EAAE,UAAC,CAAS,EAAE,CAAW;YAC7B,IAAM,CAAC,GAAa,EAAE,CAAC;YACvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBAClC,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACjB;YACD,OAAO,CAAC,CAAC;QACV,CAAC;KACD,CAAC;IACF,IAAM,cAAc,GAAG;QACtB,KAAK,EAAE,UAAC,CAAM,EAAE,CAAM;YACrB,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACnB,CAAC;QACD,GAAG,EAAE,UAAC,CAAM,EAAE,CAAM;YACnB,IAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;YACpB,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACT,OAAO,CAAC,CAAC;QACV,CAAC;QACD,KAAK,EAAE,UAAC,CAAS,EAAE,CAAM;YACxB,IAAM,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;YACpB,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACX,OAAO,CAAC,CAAC;QACV,CAAC;KACD,CAAC;IAIW,iCAAe,GAAyB,IAAI,GAAG,EAAE,CAAC;IAC/D,kBAAA,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,MAAM,EAAE,eAAe,CAAC,CAAC;IAC/D,kBAAA,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC;IAC9D,kBAAA,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAC;IAChE,kBAAA,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,EAAE,gBAAgB,CAAC,CAAC;IAC9D,kBAAA,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,WAAW,EAAE,oBAAoB,CAAC,CAAC;IACzE,kBAAA,eAAe,CAAC,GAAG,CAAC,iBAAiB,CAAC,KAAK,EAAE,cAAc,CAAC,CAAC;AAC9D,CAAC,EArES,iBAAiB,KAAjB,iBAAiB,QAqE1B;AAID,IAAM,eAAe,GAAG,iBAAiB,CAAC,eAAe,CAAC;AAI1D,IAAU,oBAAoB,CA+C7B;AA/CD,WAAU,oBAAoB;IAC7B,SAAgB,eAAe,CAC9B,UAA6B,EAC7B,aAA0B,EAC1B,eAAgC;QAEhC,QAAQ,UAAU,EAAE;YACnB,KAAK,iBAAiB,CAAC,MAAM;gBAC5B,OAAO,UAAC,KAAU,EAAE,GAAQ,EAAE,EAAU;oBACvC,OAAO,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,KAAK,GAAG,EAAE,GAAG,GAAG,CAAC;gBACtC,CAAC,CAAC;YACH,KAAK,iBAAiB,CAAC,WAAW;gBACjC,OAAO,UAAC,KAAU,EAAE,GAAQ,EAAE,EAAU;oBACvC,IAAM,IAAI,GAAG,EAAE,CAAC;oBAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;wBACtC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;qBAC/C;oBACD,OAAO,IAAW,CAAC;gBACpB,CAAC,CAAC;YACH,KAAK,iBAAiB,CAAC,KAAK;gBAC3B,IAAI,aAAa,KAAK,SAAS,EAAE;oBAChC,QAAQ,aAAa,EAAE;wBACtB,KAAK,UAAU,CAAC,GAAG;4BAClB,OAAO,UAAC,KAAU,EAAE,GAAQ,EAAE,EAAU;gCACvC,OAAO,QAAQ,CAAC,WAAW,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE,CAAC,CAAC;4BAC7C,CAAC,CAAC;wBACH,KAAK,UAAU,CAAC,GAAG,CAAC,CAAC;4BACpB,IAAM,MAAI,GAAG,eAAe,IAAI,cAAc,CAAC,gBAAgB,CAAC;4BAChE,OAAO,UAAC,KAAU,EAAE,GAAQ,EAAE,EAAU;gCACvC,OAAO,QAAQ,CAAC,WAAW,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE,EAAE,MAAI,CAAC,CAAC;4BACnD,CAAC,CAAC;yBACF;qBACD;iBACD;qBAAM;oBACN,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,gEAAgE,CAChE,CAAC;iBACF;gBACD,MAAM;YACP;gBACC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,wFAAwF;oBACvF,iBAAiB,CAAC,UAAU,CAAC,CAC9B,CAAC;SACH;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IA7Ce,oCAAe,kBA6C9B,CAAA;AACF,CAAC,EA/CS,oBAAoB,KAApB,oBAAoB,QA+C7B;AAUD,IAAM,wBAAwB,GAAG;IAChC,MAAM,EAAE;QACP,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,WAAW;QAChB,GAAG,EAAE,WAAW;QAChB,MAAM,EAAE,yBAAyB;QACjC,MAAM,EAAE,sBAAsB;KAC9B;IAED,OAAO,EAAE;QACR,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,YAAY;QACjB,GAAG,EAAE,YAAY;KACjB;IAED,KAAK,EAAE;QACN,IAAI,EAAE,iBAAiB,CAAC,WAAW;QACnC,GAAG,EAAE,SAAS;QACd,GAAG,EAAE,SAAS;KACd;IAED,SAAS,EAAE;QACV,IAAI,EAAE,iBAAiB,CAAC,WAAW;QACnC,GAAG,EAAE,QAAQ;QACb,GAAG,EAAE,QAAQ;KACb;IAED,MAAM,EAAE;QACP,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,kBAAkB;QACvB,GAAG,EAAE,kBAAkB;KACvB;IAED,KAAK,EAAE;QACN,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,UAAU;QACf,GAAG,EAAE,UAAU;KACf;IAED,KAAK,EAAE;QACN,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,UAAU;QACf,GAAG,EAAE,UAAU;KACf;IAED,KAAK,EAAE;QACN,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,UAAU;QACf,GAAG,EAAE,UAAU;QACf,MAAM,EAAE,wBAAwB;QAChC,MAAM,EAAE,qBAAqB;KAC7B;IAED,CAAC,EAAE;QACF,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,MAAM;QACX,GAAG,EAAE,MAAM;QACX,MAAM,EAAE,wBAAwB;QAChC,MAAM,EAAE,qBAAqB;KAC7B;IAED,CAAC,EAAE;QACF,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,MAAM;QACX,GAAG,EAAE,MAAM;QACX,MAAM,EAAE,yBAAyB;QACjC,MAAM,EAAE,sBAAsB;KAC9B;IAED,UAAU,EAAE;QACX,IAAI,EAAE,iBAAiB,CAAC,IAAI;QAC5B,GAAG,EAAE,eAAe;QACpB,GAAG,EAAE,eAAe;KACpB;IAED,SAAS,EAAE;QACV,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,cAAc;QACnB,GAAG,EAAE,cAAc;KACnB;IAED,SAAS,EAAE;QACV,IAAI,EAAE,iBAAiB,CAAC,MAAM;QAC9B,GAAG,EAAE,cAAc;QACnB,GAAG,EAAE,cAAc;KACnB;IAED,SAAS,EAAE;QACV,IAAI,EAAE,iBAAiB,CAAC,KAAK;QAC7B,GAAG,EAAE,cAAc;QACnB,GAAG,EAAE,cAAc;KACnB;IAED,SAAS,EAAE;QACV,IAAI,EAAE,iBAAiB,CAAC,KAAK;QAC7B,GAAG,EAAE,gBAAgB;QACrB,GAAG,EAAE,gBAAgB;KACrB;IAED,SAAS,EAAE;QACV,IAAI,EAAE,iBAAiB,CAAC,KAAK;QAC7B,GAAG,EAAE,cAAc;QACnB,GAAG,EAAE,cAAc;KACnB;IAED,QAAQ,EAAE;QACT,IAAI,EAAE,iBAAiB,CAAC,KAAK;QAC7B,GAAG,EAAE,aAAa;QAClB,GAAG,EAAE,aAAa;KAClB;CACD,CAAC;AAcF;IAAA;QACS,gBAAW,GAAG,IAAI,KAAK,EAAU,CAAC;QAClC,iBAAY,GAAG,IAAI,GAAG,EAAqC,CAAC;IA0DrE,CAAC;IAxDO,0CAAO,GAAd;QACC,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,CAAC;IACtC,CAAC;IAEM,sCAAG,GAAV,UAAW,SAAoC,EAAE,IAAY;QAC5D,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,SAAS,EAAE,EAAE;YAC5C,SAAS,EAAE,SAAS;YACpB,IAAI,EAAE,IAAI;SACV,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC,CAAC;IACzC,CAAC;IAEO,8CAAW,GAAnB,UAAoB,MAAc;QACjC,IAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QACvC,IAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACtC,IAAI,MAAM,KAAK,IAAI;YAAE,OAAO;QAC5B,IAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;YACf,YAAY;YACZ,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;SAClC;QACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC/B,CAAC;IAEM,wCAAK,GAAZ,UAAa,UAA4C;QAAzD,iBAWC;QAVA,IAAI,OAAO,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAC,MAAM;YAC/B,IAAM,SAAS,GAAG,KAAI,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAChD,IAAI,SAAS,EAAE;gBACd,OAAO,GAAG,IAAI,CAAC;gBACf,OAAO,CAAC,KAAK,CAAC,2CAAyC,MAAQ,CAAC,CAAC;gBACjE,SAAS,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;aAC5D;QACF,CAAC,CAAC,CAAC;QACH,OAAO,OAAO,CAAC;IAChB,CAAC;IAEM,wCAAK,GAAZ;QACC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,UAAC,SAAS;YACnC,SAAS,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;QACtC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;IAC3B,CAAC;IAEM,2CAAQ,GAAf;QACC,OAAO;YACN,WAAW,EAAE,eAAe,CAAC,IAAI,CAAC,WAAW,CAAC;YAC9C,YAAY,EAAE,IAAI,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC;SACxC,CAAC;IACH,CAAC;IAEM,2CAAQ,GAAf,UAAgB,KAA6B;QAC5C,IAAI,CAAC,WAAW,GAAG,eAAe,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;QACtD,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;IACjD,CAAC;IACF,+BAAC;AAAD,CAAC,AA5DD,IA4DC;AAiCD,SAAS,YAAY,CAAC,GAAoB;IACzC,OAAO,UAAQ,GAAG,CAAC,CAAC,aAAQ,GAAG,CAAC,CAAC,iBAAY,GAAG,CAAC,KAAK,kBAAa,GAAG,CAAC,MAAM,OAAI,CAAC;AACnF,CAAC;AAED;IA4EC,yBACC,GAAW,EACX,SAAiB,EACjB,UAAkB,EAClB,WAAmB;QA7CZ,sBAAiB,GAAsB,IAAI,CAAC;QAC5C,WAAM,GAAgB,IAAI,CAAC;QAE3B,cAAS,GAAoB,IAAI,CAAC;QAGlC,iBAAY,GAAW,CAAC,CAAC;QACzB,iBAAY,GAAW,CAAC,CAAC;QAGzB,kBAAa,GAAG,YAAY,CAAC,OAAO,CAAC;QACrC,cAAS,GAAG,IAAI,GAAG,EAAgC,CAAC;QACpD,0BAAqB,GAAG,IAAI,GAAG,EAAgC,CAAC;QAGhE,kBAAa,GAAW,GAAG,CAAC;QAC5B,kBAAa,GAAW,GAAG,CAAC;QAC5B,mBAAc,GAAW,CAAC,CAAC;QAC3B,WAAM,GAAW,CAAC,CAAC;QACnB,WAAM,GAAW,CAAC,CAAC;QAGnB,mBAAc,GAAG,eAAe,CAAC,YAAY,CAAC;QAC9C,eAAU,GAAG,eAAe,CAAC,YAAY,CAAC;QAC1C,mBAAc,GAAG,eAAe,CAAC,YAAY,CAAC;QAC9C,eAAU,GAAG,eAAe,CAAC,YAAY,CAAC;QAC1C,mBAAc,GAAG,eAAe,CAAC,YAAY,CAAC;QAC9C,eAAU,GAAG,eAAe,CAAC,YAAY,CAAC;QAC1C,cAAS,GAAG,eAAe,CAAC,YAAY,CAAC;QAEzC,cAAS,GAAmB,IAAI,CAAC;QACjC,sBAAiB,GAAW,CAAC,CAAC;QAGtC,4BAA4B;QACpB,yBAAoB,GAAG,IAAI,GAAG,EAAuB,CAAC;QAY7D,OAAO,CAAC,KAAK,CAAC,qBAAmB,GAAG,UAAK,SAAS,MAAG,CAAC,CAAC;QACvD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QAEtB,IAAI,CAAC,wBAAwB,GAAG,IAAI,wBAAwB,EAAE,CAAC;QAE/D,IAAM,SAAS,GAAuB,GAAG,CAAC,GAAG,CAAC,kBAAkB,CAAC;QACjE,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,cAAc,CAAC;IAC/C,CAAC;IAED,+BAAK,GAAL;QACC,OAAO,IAAI,CAAC,GAAG,CAAC;IACjB,CAAC;IAEM,iCAAO,GAAd;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAEO,uCAAa,GAArB;QACC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC;IACjC,CAAC;IAEM,uCAAa,GAApB;QACC,OAAO,KAAK,CAAC;IACd,CAAC;IAEO,mCAAS,GAAjB,UAAkB,KAAsB;QACvC,IAAI,CAAC,KAAK;YAAE,OAAO,IAAI,CAAC;QACxB,OAAO,IAAI,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;IACjE,CAAC;IAEO,2CAAiB,GAAzB,UACC,KAAkB,EAClB,MAAuB;QAEvB,IAAM,MAAM,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAChE,IAAM,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxC,OAAO,CAAC,SAAS,CAChB,KAAK,EACL,MAAM,CAAC,CAAC,EACR,MAAM,CAAC,CAAC,EACR,MAAM,CAAC,KAAK,EACZ,MAAM,CAAC,MAAM,EACb,CAAC,EACD,CAAC,EACD,MAAM,CAAC,KAAK,EACZ,MAAM,CAAC,MAAM,CACb,CAAC;QACF,OAAO,MAAM,CAAC,qBAAqB,EAAE,CAAC;IACvC,CAAC;IAEO,+BAAK,GAAb,UAAc,QAA4B;QACzC,IAAI,CAAC,QAAQ;YAAE,OAAO,IAAI,CAAC;QAC3B,IAAM,MAAM,GAAG,IAAI,eAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC;QACpE,IAAM,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACxC,OAAO,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAC/D,OAAO,MAAM,CAAC,qBAAqB,EAAE,CAAC;IACvC,CAAC;IAEM,0CAAgB,GAAvB,UAAwB,IAAsB;QAC7C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,CAAC,iBAAiB,GAAG;YACxB,CAAC,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU;YACrC,CAAC,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW;SACvC,CAAC;QACF,OAAO,CAAC,KAAK,CACZ,wCAAsC,IAAI,CAAC,WAAW,SAAI,IAAI,CAAC,YAAY,yBAAoB,IAAI,CAAC,iBAAmB,CACvH,CAAC;IACH,CAAC;IAEM,6CAAmB,GAA1B,UAA2B,iBAAoC;;QAC9D,IAAI,CAAC,iBAAiB,EAAE;YACvB,6DAA6D;YAC7D,IAAI,CAAC,SAAS,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;YAC/C,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,+DAA+D,CAC/D,CAAC;YACF,OAAO;SACP;QACD,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAE3C,IAAI,CAAC,MAAM,GAAI,IAAI,CAAC,iBAAiB,CAAC,OAAqB,CAAC,IAAI,CAAC;QACjE,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACjB,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,sDAAsD,CACtD,CAAC;SACF;QAED,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;QAC/D,CAAC,KAAiD,aAAa,CAC9D,IAAI,CAAC,SAAS,CACd,EAFK,IAAI,CAAC,YAAY,OAAA,EAAK,IAAI,CAAC,YAAY,OAAA,CAE3C,CAAC;QACH,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QACrE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAE5E,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;YACrC,IAAI,CAAC,cAAc,GAAG,WAAW,CAChC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CACpB,CAAC;SACd;QACD,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;YACrC,IAAI,CAAC,cAAc,GAAG,WAAW,CAChC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CACpB,CAAC;SACd;QACD,IAAI,IAAI,CAAC,iBAAiB,CAAC,SAAS,EAAE;YACrC,IAAI,CAAC,cAAc,GAAG,WAAW,CAChC,IAAI,CAAC,iBAAiB,CAAC,SAAS,CACpB,CAAC;SACd;QAED,IAAI,CAAC,GAAG,CACP,wBAAwB;aACvB,oBAAkB,YAAY,CAAC,IAAI,CAAC,SAAS,CAAG,CAAA;aAChD,wBAAsB,YAAY,CAAC,IAAI,CAAC,aAAa,CAAG,CAAA;aACxD,yBAAuB,IAAI,CAAC,YAAY,YAAO,IAAI,CAAC,YAAc,CAAA,CACnE,CAAC;QAEF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACtB,CAAC;IAEO,+CAAqB,GAA7B,UAA8B,OAA2B;QACxD,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAC5C,CAAC;IAEM,iDAAuB,GAA9B,UAA+B,oBAA0C;QACxE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpB,IAAM,eAAe,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAClD,IAAI,CAAC,eAAe,EAAE;gBACrB,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CACvB,wEAAwE,CACxE,CAAC;gBACF,OAAO;aACP;YACD,IAAI,CAAC,SAAS,GAAG,eAAe,CAAC,uBAAuB,EAAE,CAAC;YAC3D,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACpB,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CACvB,8EAA8E,CAC9E,CAAC;gBACF,OAAO;aACP;SACD;QAED,oBAAoB,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;QAC9C,oBAAoB,CAAC,OAAO,GAAG,IAAI,CAAC;QACpC,oBAAoB,CAAC,IAAI,GAAG,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC3E,CAAC;IAEO,yCAAe,GAAvB;QACC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC;QAClC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC;QAClC,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QACzB,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC1B,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QAClB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;QAClB,IAAI,CAAC,QAAQ,GAAG,IAAI,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAClB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC;QACtC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC;QACtC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC;QACtC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,iBAAiB;YACrC,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,WAAW;YACpC,CAAC,CAAC,KAAK,CAAC;QACT,IAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,CAAC;QACtC,qDAAqD;IACtD,CAAC;IAED,sCAAY,GAAZ;QACC,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,eAAe,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAE3D,IAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;QACtC,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;QACxC,IAAM,SAAS,GACd,IAAI;YACJ,IAAI,CAAC,WAAW,CAAC,CAAC;YAClB,GAAG;YACH,IAAI,CAAC,WAAW,CAAC,CAAC;YAClB,KAAK;YACL,MAAM;YACN,KAAK;YACL,OAAO;YACP,MAAM;YACN,MAAM;YACN,IAAI,CAAC;QACN,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;IAC7C,CAAC;IAED,uCAAa,GAAb;QACC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACvB,CAAC;IAEO,4CAAkB,GAA1B;QACC,IAAM,SAAS,GAAuB,GAAG,CAAC,GAAG,CAAC,kBAAkB,CAAC;QACjE,IAAI,SAAS,EAAE;YACd,OAAO,SAAS,CAAC,gBAAgB,CAAC;SAClC;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IAED,gDAAsB,GAAtB,UACC,UAA4C;QAE5C,IAAI,IAAI,CAAC,wBAAwB,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE;YACrE,OAAO,KAAK,CAAC;SACb;QACD,OAAO,IAAI,CAAC,wBAAwB,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IACxD,CAAC;IAED,qCAAW,GAAX,UAAY,QAAuB;QAClC,IAAI,CAAC,IAAI,CAAC,QAAQ;YAAE,OAAO;QAC3B,IAAI,QAAQ,YAAY,eAAe;YAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;aACjE,IAAI,QAAQ,YAAY,eAAe;YAAE,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAC5E,CAAC;IAED,uCAAa,GAAb,UAAc,QAAyB;QACtC,IAAI,QAAQ,CAAC,UAAU,EAAE;YAAE,OAAO;QAElC,IAAM,aAAa,GAAG,QAAQ,CAAC,gBAAgB,EAAE,CAAC;QAClD,IAAM,gBAAgB,GAAG,aAAa,CAAC,cAAc,EAAE,CAAC;QAExD,gBAAgB,CAAC,IAAI,EAAE,CAAC;QACxB,sCAAsC;QAEtC,+DAA+D;QAC/D,IAAM,EAAE,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAElC,gBAAgB,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC;QAE7C,IAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QACxB,IAAM,SAAS,GAAG,IAAI,SAAS,CAAC;YAC/B,CAAC,CAAC,CAAC;YACH,CAAC,CAAC,CAAC;YACH,CAAC,CAAC,CAAC;YACH,CAAC,CAAC,CAAC;YACH,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;YACV,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;SACV,CAAC,CAAC;QACH,gBAAgB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QAEzC,IAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC;QACnC,OAAO,CAAC,KAAK,CACZ,qBAAmB,IAAI,CAAC,GAAG,iDACT,QAAQ,CAAC,KAAK,kCACb,QAAQ,CAAC,MAAM,gCACjB,IAAI,CAAC,YAAY,UAAK,IAAI,CAAC,YAAY,mCACrC,IAAI,CAAC,QAAQ,UAAK,IAAI,CAAC,QAAQ,8BACpC,SAAS,CAAC,QAAQ,EAAI,CACpC,CAAC;QAEF,8BAA8B;QAC9B,aAAa;QACb,MAAM;QACN,MAAM;QACN,mBAAmB;QACnB,oBAAoB;QACpB,qBAAqB;QACrB,qBAAqB;QACrB,yBAAyB;QACzB,0BAA0B;QAC1B,KAAK;QAEL,gBAAgB,CAAC,SAAS,CACzB,QAAQ,EACR,CAAC,EACD,CAAC,EACD,QAAQ,CAAC,KAAK,EACd,QAAQ,CAAC,MAAM,EACf,IAAI,CAAC,aAAa,CAAC,CAAC,EACpB,IAAI,CAAC,aAAa,CAAC,CAAC,EACpB,QAAQ,CAAC,KAAK,EACd,QAAQ,CAAC,MAAM,CACf,CAAC;QACF,gBAAgB,CAAC,OAAO,EAAE,CAAC;IAC5B,CAAC;IAED,uCAAa,GAAb,UAAc,QAAyB;;QACtC,IAAI,QAAQ,CAAC,UAAU,EAAE;YAAE,OAAO;QAElC,IAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QAExB,OAAO,CAAC,KAAK,CACZ,qBAAmB,IAAI,CAAC,GAAG,iDACT,IAAI,CAAC,YAAY,CAAC,KAAK,kCACtB,IAAI,CAAC,YAAY,CAAC,MAAM,gCAC1B,IAAI,CAAC,YAAY,UAAK,IAAI,CAAC,YAAY,mCACrC,IAAI,CAAC,QAAQ,UAAK,IAAI,CAAC,QAAQ,8BACpC,CAAC,CAAC,QAAQ,EAAI,CAC5B,CAAC;QAEF,IAAM,EAAE,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAC5D,IAAM,EAAE,GAAG,IAAI,QAAQ,CACtB,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,EAC3B,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAC5B,CAAC;QACF,IAAM,EAAE,GAAG,IAAI,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;QACpC,IAAM,EAAE,GAAG,IAAI,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;QAEpC,IAAM,UAAU,GAAG,EAAE,CAAC;;YACtB,KAAgB,IAAA,KAAA,SAAA,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA,gBAAA,4BAAE;gBAA7B,IAAM,CAAC,WAAA;gBACX,IAAM,CAAC,GAAG,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;gBAC/B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;gBAC5B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;gBAC7B,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACnB;;;;;;;;;QAED,wEAAwE;QACxE,wEAAwE;QACxE,2EAA2E;QAC3E,IAAM,QAAQ,GAA4B,EAAE,CAAC;QAC7C,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;YACzB,oEAAoE;YACpE,uEAAuE;YACvE,yEAAyE;YACzE,6DAA6D;YAC7D,0BAA0B;YAC1B,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE;gBAChD,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;gBAC7C,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;aACvC;SACD;aAAM,IACN,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC;YAC3C,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,EAC1C;YACD,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;YAC7C,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;YACvC,QAAQ,CAAC,aAAa,GAAG,IAAI,CAAC,cAAc,CAAC;YAC7C,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;SACvC;QAED,IAAM,UAAU,GAAoC;YACnD,MAAM,EAAE,UAAwB;YAChC,KAAK,EAAE,IAAI,CAAC,QAAQ;YACpB,QAAQ,EAAE,QAAQ;SAClB,CAAC;QAEF,IAAI,IAAI,CAAC,sBAAsB,CAAC,UAAU,CAAC;YAAE,OAAO;QAEpD,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,EAAE,UAAU,CAAC,CAAC;IACpD,CAAC;IAED,0CAAgB,GAAhB,UAAiB,iBAAmC;QACnD,IAAI,CAAC,iBAAiB,EAAE;YACvB,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,kEAAkE,CAClE,CAAC;SACF;QACD,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAE3C,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;QAC3B,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,CAAC;QAClC,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;QAChC,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE,CAAC;QAEnC,IAAM,kBAAkB,GACvB,IAAI,CAAC,iBAAiB,CAAC,iBAAiB,CAAC,oBAAoB,CAC5D,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,GAAG,CACR,CAAC;QACH,IAAI,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,CAAC;QAE7C,uDAAuD;QAEvD,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,IAAI,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;IACvC,CAAC;IAED,wCAAc,GAAd;QACC,IAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,CAAC;IACvC,CAAC;IAED,8CAAoB,GAApB;QACC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;YACrB,IAAI,CAAC,aAAa,CAAC,sBAAsB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SACpD;QACD,EAAE,IAAI,CAAC,iBAAiB,CAAC;IAC1B,CAAC;IAED,kCAAQ,GAAR;QACC,OAAO,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;IACnC,CAAC;IAED,4CAAkB,GAAlB;QACC,IAAI,IAAI,CAAC,iBAAiB,IAAI,CAAC,EAAE;YAChC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,6DAA6D,CAC7D,CAAC;YACF,OAAO;SACP;QACD,EAAE,IAAI,CAAC,iBAAiB,CAAC;QACzB,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;YACrB,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAClD;IACF,CAAC;IAED,+CAAqB,GAArB,UAAsB,YAAoB;QACzC,IAAI,CAAC,cAAc,GAAG,YAAY,CAAC;QACnC,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;IAC/D,CAAC;IAED,iBAAiB;IACjB,sCAAY,GAAZ,UAAa,QAA4B;QACxC,IAAI,CAAC,QAAQ,EAAE;YACd,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,kBAAkB;gBACjB,IAAI,CAAC,KAAK,EAAE;gBACZ,sCAAsC,CACvC,CAAC;YACF,OAAO,KAAK,CAAC;SACb;QAED,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC3C,OAAO,IAAI,CAAC;IACb,CAAC;IAED;;;;;;OAMG;IACH,mCAAS,GAAT,UAAU,gBAAwB;QACjC,OAAO,CAAC,KAAK,CACZ,kBAAkB;YACjB,IAAI,CAAC,KAAK,EAAE;YACZ,cAAc;YACd,gBAAgB;YAChB,GAAG,CACJ,CAAC;QACF,IAAM,MAAM,GAAyB;YACpC,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,aAAa,EAAE,IAAI,CAAC,aAAa;YACjC,cAAc,EAAE,IAAI,CAAC,cAAc;YACnC,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,MAAM,EAAE,IAAI,CAAC,MAAM;YACnB,QAAQ,EAAE,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC;YAC7C,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;YAC3B,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,sBAAsB,EAAE,IAAI,CAAC,wBAAwB,CAAC,QAAQ,EAAE;SAChE,CAAC;QACF,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;QAE7C,kEAAkE;QAClE,oBAAoB;QACpB,IAAM,kBAAkB,GAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CACvD,IAAI,CAAC,cAAc,CACnB,CAAC;QACF,IAAI,kBAAkB,EAAE;YACvB,kBAAkB,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;YACzC,IAAI,kBAAkB,CAAC,IAAI,KAAK,CAAC;gBAChC,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;SAC7D;aAAM;YACN,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,qBAAmB,IAAI,CAAC,KAAK,EAAE,oBAAe,gBAAgB,QAAK;iBAClE,+BAA6B,IAAI,CAAC,cAAgB,CAAA,CACnD,CAAC;SACF;IACF,CAAC;IAED;;;;;;;;;OASG;IACH,sCAAY,GAAZ,UAAa,gBAAwB;QAArC,iBA8DC;QA7DA,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;YAC1C,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,kBAAkB;gBACjB,IAAI,CAAC,KAAK,EAAE;gBACZ,wBAAwB;gBACxB,gBAAgB;gBAChB,eAAe,CAChB,CAAC;YACF,OAAO,KAAK,CAAC;SACb;QAED,OAAO,CAAC,KAAK,CACZ,kBAAkB;YACjB,IAAI,CAAC,KAAK,EAAE;YACZ,iBAAiB;YACjB,gBAAgB;YAChB,GAAG,CACJ,CAAC;QAEF,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAElD,IAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,MAAM,EAAE,GAAG;YACpD,IAAI,KAAK,CAAC,GAAG,CAAC,gBAAgB,CAAC,EAAE;gBAChC,KAAK,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;gBAC/B,mEAAmE;gBACnE,sBAAsB;gBACtB,IAAI,KAAK,CAAC,IAAI,KAAK,CAAC,EAAE;oBACrB,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;oBACnB,IAAM,KAAK,GAAG,KAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;oBACrD,IAAI,KAAK;wBAAE,MAAM,GAAG,KAAK,CAAC;oBAC1B,KAAI,CAAC,qBAAqB,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;iBAC1C;gBACD,OAAO;aACP;QACF,CAAC,CAAC,CAAC;QAEH,IAAM,IAAI,GAAG,IAAI,CAAC;QAClB,IAAI,IAAI,EAAE;YACT,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;YAChC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;YAChC,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;YAC1C,IAAI,CAAC,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;YAC1C,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC;YAC5C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YAC5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC;YAC5B,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,UAAU,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACtD,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;YAChC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;YACpC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;YACpC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC;YACpC,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC;YAChC,IAAI,CAAC,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;SACtE;QACD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAC;QAExC,0FAA0F;QAC1F,2DAA2D;QAC3D,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAE1B,OAAO,IAAI,CAAC;IACb,CAAC;IAED,qCAAW,GAAX;QACC,OAAO,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAED,wCAAc,GAAd;QACC,OAAO,IAAI,CAAC,YAAY,CAAC;IAC1B,CAAC;IAED,wCAAc,GAAd;QACC,OAAO,IAAI,CAAC,YAAY,CAAC;IAC1B,CAAC;IAED,wCAAc,GAAd;QACC,aAAa;IACd,CAAC;IAED,yCAAe,GAAf;QACC,OAAO,IAAI,CAAC,aAAa,CAAC;IAC3B,CAAC;IAED,yCAAe,GAAf,UAAgB,aAA2B;QAC1C,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACpC,CAAC;IAEO,oDAA0B,GAAlC;QACC,IAAM,QAAQ,GAAG,IAAI,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACnD,IAAM,UAAU,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;QAC5D,IAAM,UAAU,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;QAC5D,QAAQ;aACN,aAAa,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC;aAC3C,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC;aAC/B,SAAS,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC;aACjD,SAAS,CAAC,UAAU,CAAC;aACrB,SAAS,CAAC,UAAU,CAAC;aACrB,aAAa,CAAC,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACxD,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC1B,CAAC;IAED,qBAAqB;IACrB,8BAAI,GAAJ;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAED,8BAAI,GAAJ;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAED,gCAAM,GAAN;QACC,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;IACnC,CAAC;IAED,kCAAQ,GAAR;QACC,OAAO,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC;IACtD,CAAC;IAED,mCAAS,GAAT;QACC,OAAO,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC;IACvD,CAAC;IAED,iCAAO,GAAP;QACC,OAAO,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;IAC5C,CAAC;IAED,8BAAI,GAAJ,UAAK,WAAmB;QACvB,OAAO,CAAC,KAAK,CAAC,uBAAuB,GAAG,WAAW,GAAG,GAAG,CAAC,CAAC;QAC3D,IAAI,WAAW,KAAK,IAAI,CAAC,QAAQ;YAAE,OAAO;QAE1C,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;QAC5B,IAAI,CAAC,0BAA0B,EAAE,CAAC;IACnC,CAAC;IAED,8BAAI,GAAJ,UAAK,WAAmB;QACvB,OAAO,CAAC,KAAK,CAAC,uBAAuB,GAAG,WAAW,GAAG,GAAG,CAAC,CAAC;QAC3D,IAAI,WAAW,KAAK,IAAI,CAAC,QAAQ;YAAE,OAAO;QAE1C,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;QAC5B,IAAI,CAAC,0BAA0B,EAAE,CAAC;IACnC,CAAC;IAED,gCAAM,GAAN,UAAO,OAAyB;QAC/B,IAAM,WAAW,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAM,WAAW,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;QAC/B,OAAO,CAAC,KAAK,CACZ,yBAAyB,GAAG,WAAW,GAAG,IAAI,GAAG,WAAW,GAAG,GAAG,CAClE,CAAC;QAEF,IAAI,WAAW,KAAK,IAAI,CAAC,QAAQ,IAAI,WAAW,KAAK,IAAI,CAAC,QAAQ;YAAE,OAAO;QAE3E,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;QAC5B,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC;QAC5B,IAAI,CAAC,0BAA0B,EAAE,CAAC;IACnC,CAAC;IAED,kCAAQ,GAAR,UAAS,SAAiB;QACzB,OAAO,CAAC,KAAK,CAAC,2BAA2B,GAAG,SAAS,GAAG,GAAG,CAAC,CAAC;QAE7D,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC;QAC5C,IAAI,aAAa,GAAG,SAAS,GAAG,UAAU,CAAC;QAE3C,IAAI,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,IAAI;YACjC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;QACjD,IAAI,aAAa,IAAI,IAAI,CAAC,aAAa;YAAE,OAAO;QAEhD,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,0BAA0B,EAAE,CAAC;IACnC,CAAC;IAED,mCAAS,GAAT,UAAU,UAAkB;QAC3B,OAAO,CAAC,KAAK,CAAC,4BAA4B,GAAG,UAAU,GAAG,GAAG,CAAC,CAAC;QAE/D,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC;QAC9C,IAAI,aAAa,GAAG,UAAU,GAAG,WAAW,CAAC;QAE7C,IAAI,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,IAAI;YACjC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;QACjD,IAAI,aAAa,IAAI,IAAI,CAAC,aAAa;YAAE,OAAO;QAEhD,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,0BAA0B,EAAE,CAAC;IACnC,CAAC;IAED,iCAAO,GAAP,UAAQ,QAA0B;QACjC,IAAM,SAAS,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC9B,IAAM,UAAU,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QAC/B,OAAO,CAAC,KAAK,CACZ,0BAA0B,GAAG,SAAS,GAAG,IAAI,GAAG,UAAU,GAAG,GAAG,CAChE,CAAC;QAEF,IAAM,UAAU,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC;QAC5C,IAAI,aAAa,GAAG,SAAS,GAAG,UAAU,CAAC;QAC3C,IAAI,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,IAAI;YACjC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;QAEjD,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC;QAC9C,IAAI,aAAa,GAAG,UAAU,GAAG,WAAW,CAAC;QAC7C,IAAI,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,GAAG,IAAI;YACjC,aAAa,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC;QAEjD,IACC,aAAa,IAAI,IAAI,CAAC,aAAa;YACnC,aAAa,IAAI,IAAI,CAAC,aAAa;YAEnC,OAAO;QAER,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;QACnC,IAAI,CAAC,0BAA0B,EAAE,CAAC;IACnC,CAAC;IAED,oCAAU,GAAV;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAED,oCAAU,GAAV,UAAW,MAAc;QACxB,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACrC,OAAO,CAAC,KAAK,CAAC,6BAA6B,GAAG,MAAM,GAAG,GAAG,CAAC,CAAC;IAC7D,CAAC;IAED,0CAAgB,GAAhB;QACC,OAAO,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC;IAED,0CAAgB,GAAhB,UAAiB,YAAoB;QACpC,IAAI,CAAC,cAAc,GAAG,YAAY,CAAC;QACnC,IAAI,CAAC,0BAA0B,EAAE,CAAC;QAClC,OAAO,CAAC,KAAK,CAAC,mCAAmC,GAAG,YAAY,GAAG,GAAG,CAAC,CAAC;IACzE,CAAC;IAED,kCAAQ,GAAR;QACC,OAAO,IAAI,CAAC,MAAM,CAAC;IACpB,CAAC;IAED,kCAAQ,GAAR,UAAS,UAAkB;QAC1B,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;QACzB,IAAI,CAAC,0BAA0B,EAAE,CAAC;QAClC,OAAO,CAAC,KAAK,CAAC,2BAA2B,GAAG,UAAU,GAAG,GAAG,CAAC,CAAC;IAC/D,CAAC;IAED,kCAAQ,GAAR;QACC,OAAO,IAAI,CAAC,MAAM,CAAC;IACpB,CAAC;IAED,kCAAQ,GAAR,UAAS,UAAkB;QAC1B,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;QACzB,IAAI,CAAC,0BAA0B,EAAE,CAAC;QAClC,OAAO,CAAC,KAAK,CAAC,2BAA2B,GAAG,UAAU,GAAG,GAAG,CAAC,CAAC;IAC/D,CAAC;IAED,uCAAa,GAAb;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAED,uCAAa,GAAb,UAAc,MAAc;QAC3B,IAAI,CAAC,QAAQ,GAAG,MAAM,KAAK,SAAS,CAAC;QACrC,OAAO,CAAC,KAAK,CAAC,gCAAgC,GAAG,MAAM,GAAG,GAAG,CAAC,CAAC;IAChE,CAAC;IAED,sCAAY,GAAZ;QACC,OAAO,IAAI,CAAC,UAAU,CAAC;IACxB,CAAC;IAED,sCAAY,GAAZ,UAAa,SAAmB;QAC/B,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,+BAA+B,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,GAAG,CAC5D,CAAC;QACF,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAC7B,CAAC;IAED,wCAAc,GAAd;QACC,OAAO,IAAI,CAAC,UAAU,CAAC;IACxB,CAAC;IAED,wCAAc,GAAd,UAAe,SAAmB;QACjC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,iCAAiC,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,GAAG,CAC9D,CAAC;QACF,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAC7B,CAAC;IAED,sCAAY,GAAZ;QACC,OAAO,IAAI,CAAC,UAAU,CAAC;IACxB,CAAC;IAED,sCAAY,GAAZ,UAAa,SAAmB;QAC/B,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,+BAA+B,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,GAAG,CAC5D,CAAC;QACF,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAC7B,CAAC;IAED,4CAAkB,GAAlB,UAAmB,SAAmB;QACrC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,qCAAqC,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,GAAG,CAClE,CAAC;QAEF,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC5B,CAAC;IAED,qCAAW,GAAX;QACC,OAAO,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAED,qCAAW,GAAX,UAAY,SAAmB;QAC9B,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,8BAA8B,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,GAAG,CAC3D,CAAC;QACF,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;IAC7B,CAAC;IAED,sCAAY,GAAZ;QACC,OAAO,OAAO,CAAC;IAChB,CAAC;IAED,sCAAY,GAAZ,UAAa,MAAc;QAC1B,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,+BAA+B,GAAG,MAAM,GAAG,mBAAmB,CAC9D,CAAC;IACH,CAAC;IAED,sCAAY,GAAZ;QACC,OAAO,OAAO,CAAC;IAChB,CAAC;IAED,sCAAY,GAAZ,UAAa,MAAc;QAC1B,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,+BAA+B,GAAG,MAAM,GAAG,mBAAmB,CAC9D,CAAC;IACH,CAAC;IAED,qCAAW,GAAX,UAAY,SAAyB;QACpC,gEAAgE;QAChE,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,+DAA+D;YAC/D,4BAA4B;YAC5B,sEAAsE;YACtE,wBAAwB;YACxB,6CAA6C;YAC7C,IAAM,SAAS,GAAG,SAAS,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;YAC9C,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,CAAC;SAC5C;IACF,CAAC;IAED,kDAAwB,GAAxB,UACC,0BAAqD,EACrD,EAAU;QAEV,IAAI,CAAC,wBAAwB,CAAC,GAAG,CAAC,0BAA0B,EAAE,EAAE,CAAC,CAAC;IACnE,CAAC;IAED,6BAAG,GAAH,UAAI,QAAgB,EAAE,KAAc;QACnC,4BAA4B,CAAC,KAAK,CACjC,kBAAkB,GAAG,IAAI,CAAC,KAAK,EAAE,GAAG,GAAG,GAAG,QAAQ,EAClD,KAAK,CACL,CAAC;IACH,CAAC;IAz5BsB,4BAAY,GAAG,IAAI,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IAErC,mCAAmB,GAAG,IAAI,GAAG,CAAS;QAC5D,GAAG;QACH,GAAG;QACH,OAAO;QACP,QAAQ;QACR,SAAS;QACT,YAAY;QACZ,QAAQ;QACR,OAAO;QACP,OAAO;QACP,WAAW;QACX,WAAW;QACX,WAAW;QACX,WAAW;QACX,WAAW;QACX,UAAU;KACV,CAAC,CAAC;IAEoB,wCAAwB,GAAG,IAAI,GAAG,CAAS;QACjE,WAAW;QACX,OAAO;QACP,QAAQ;KACR,CAAC,CAAC;IAk4BJ,sBAAC;CAAA,AA35BD,IA25BC;AAED;IAAkC,uCAAe;IAAjD;;IAKA,CAAC;IAJO,2CAAa,GAApB;QACC,OAAO,IAAI,CAAC;IACb,CAAC;IAEF,0BAAC;AAAD,CAAC,AALD,CAAkC,eAAe,GAKhD","sourcesContent":["// @ts-strict-ignore\n/* -*- tab-width: 4 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ntype BoundingBoxType = DOMRect;\n\ntype AnimatedObjectType = ImageBitmap;\n\nconst NSS_SVG = 'http://www.w3.org/2000/svg';\n\nenum PropertyValueType {\n\tUnknown,\n\tNumber,\n\tEnum,\n\tColor,\n\tString,\n\tBool,\n\tTupleNumber,\n}\n\nnamespace PropertyOperators {\n\tconst GenericPropOpSet = {\n\t\tequal: (a: any, b: any) => {\n\t\t\treturn a === b;\n\t\t},\n\t\tadd: (a: any, b: any) => {\n\t\t\treturn a;\n\t\t},\n\t\tscale: (k: any, v: any) => {\n\t\t\treturn v;\n\t\t},\n\t};\n\tconst NumberPropOpSet = {\n\t\tequal: (a: number, b: number) => {\n\t\t\treturn a === b;\n\t\t},\n\t\tadd: (a: number, b: number) => {\n\t\t\treturn a + b;\n\t\t},\n\t\tscale: (k: number, v: number) => {\n\t\t\treturn k * v;\n\t\t},\n\t};\n\tconst TupleNumberPropOpSet = {\n\t\tequal: (a: number[], b: number[]) => {\n\t\t\tassert(a.length === b.length, 'Tuples length mismatch.');\n\t\t\treturn a.toString() === b.toString();\n\t\t},\n\t\tadd: (a: number[], b: number[]) => {\n\t\t\tassert(a.length === b.length, 'Tuples length mismatch.');\n\t\t\tconst r: number[] = [];\n\t\t\tfor (let i = 0; i < a.length; ++i) {\n\t\t\t\tr.push(a[i] + b[i]);\n\t\t\t}\n\t\t\treturn r;\n\t\t},\n\t\tscale: (k: number, v: number[]) => {\n\t\t\tconst r: number[] = [];\n\t\t\tfor (let i = 0; i < v.length; ++i) {\n\t\t\t\tr.push(k * v[i]);\n\t\t\t}\n\t\t\treturn r;\n\t\t},\n\t};\n\tconst ColorPropOpSet = {\n\t\tequal: (a: any, b: any): boolean => {\n\t\t\treturn a.equal(b);\n\t\t},\n\t\tadd: (a: any, b: any): any => {\n\t\t\tconst c = a.clone();\n\t\t\tc.add(b);\n\t\t\treturn c;\n\t\t},\n\t\tscale: (k: number, v: any): any => {\n\t\t\tconst c = v.clone();\n\t\t\tc.scale(k);\n\t\t\treturn c;\n\t\t},\n\t};\n\n\texport type PropOpSet = typeof GenericPropOpSet;\n\texport type PropertyOperatorsMap = Map<PropertyValueType, PropOpSet>;\n\texport const aOperatorSetMap: PropertyOperatorsMap = new Map();\n\taOperatorSetMap.set(PropertyValueType.Number, NumberPropOpSet);\n\taOperatorSetMap.set(PropertyValueType.Enum, GenericPropOpSet);\n\taOperatorSetMap.set(PropertyValueType.String, GenericPropOpSet);\n\taOperatorSetMap.set(PropertyValueType.Bool, GenericPropOpSet);\n\taOperatorSetMap.set(PropertyValueType.TupleNumber, TupleNumberPropOpSet);\n\taOperatorSetMap.set(PropertyValueType.Color, ColorPropOpSet);\n}\n\ntype PropertyOperatorSet = PropertyOperators.PropOpSet;\ntype PropertyOperatorsMap = PropertyOperators.PropertyOperatorsMap;\nconst aOperatorSetMap = PropertyOperators.aOperatorSetMap;\n\ntype PropertyInterpolatorType = (nFrom: any, nTo: any, nT: number) => any;\n\nnamespace PropertyInterpolator {\n\texport function getInterpolator(\n\t\teValueType: PropertyValueType,\n\t\teValueSubType?: ColorSpace,\n\t\teClockDirection?: ClockDirection,\n\t): PropertyInterpolatorType {\n\t\tswitch (eValueType) {\n\t\t\tcase PropertyValueType.Number:\n\t\t\t\treturn (nFrom: any, nTo: any, nT: number): any => {\n\t\t\t\t\treturn (1.0 - nT) * nFrom + nT * nTo;\n\t\t\t\t};\n\t\t\tcase PropertyValueType.TupleNumber:\n\t\t\t\treturn (aFrom: any, aTo: any, nT: number): any => {\n\t\t\t\t\tconst aRes = [];\n\t\t\t\t\tfor (let i = 0; i < aFrom.length; ++i) {\n\t\t\t\t\t\taRes.push((1.0 - nT) * aFrom[i] + nT * aTo[i]);\n\t\t\t\t\t}\n\t\t\t\t\treturn aRes as any;\n\t\t\t\t};\n\t\t\tcase PropertyValueType.Color:\n\t\t\t\tif (eValueSubType !== undefined) {\n\t\t\t\t\tswitch (eValueSubType) {\n\t\t\t\t\t\tcase ColorSpace.rgb:\n\t\t\t\t\t\t\treturn (nFrom: any, nTo: any, nT: number): any => {\n\t\t\t\t\t\t\t\treturn RGBColor.interpolate(nFrom, nTo, nT);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\tcase ColorSpace.hsl: {\n\t\t\t\t\t\t\tconst bCCW = eClockDirection == ClockDirection.counterClockwise;\n\t\t\t\t\t\t\treturn (nFrom: any, nTo: any, nT: number): any => {\n\t\t\t\t\t\t\t\treturn HSLColor.interpolate(nFrom, nTo, nT, bCCW);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twindow.app.console.log(\n\t\t\t\t\t\t'PropertyInterpolator.getInterpolator: color space not defined.',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\twindow.app.console.log(\n\t\t\t\t\t'PropertyInterpolator.getInterpolator: not found any valid interpolator for value type ' +\n\t\t\t\t\t\tPropertyValueType[eValueType],\n\t\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n}\n\ninterface PropertyGetterSetter {\n\ttype: PropertyValueType;\n\tget: string;\n\tset: string;\n\tgetmod?: string;\n\tsetmod?: string;\n}\n\nconst aPropertyGetterSetterMap = {\n\theight: {\n\t\ttype: PropertyValueType.Number,\n\t\tget: 'getHeight',\n\t\tset: 'setHeight',\n\t\tgetmod: 'makeScaler( 1/nHeight )',\n\t\tsetmod: 'makeScaler( nHeight)',\n\t},\n\n\topacity: {\n\t\ttype: PropertyValueType.Number,\n\t\tget: 'getOpacity',\n\t\tset: 'setOpacity',\n\t},\n\n\tscale: {\n\t\ttype: PropertyValueType.TupleNumber,\n\t\tget: 'getSize',\n\t\tset: 'setSize',\n\t},\n\n\ttranslate: {\n\t\ttype: PropertyValueType.TupleNumber,\n\t\tget: 'getPos',\n\t\tset: 'setPos',\n\t},\n\n\trotate: {\n\t\ttype: PropertyValueType.Number,\n\t\tget: 'getRotationAngle',\n\t\tset: 'setRotationAngle',\n\t},\n\n\tskewx: {\n\t\ttype: PropertyValueType.Number,\n\t\tget: 'getSkewX',\n\t\tset: 'setSkewX',\n\t},\n\n\tskewy: {\n\t\ttype: PropertyValueType.Number,\n\t\tget: 'getSkewY',\n\t\tset: 'setSkewY',\n\t},\n\n\twidth: {\n\t\ttype: PropertyValueType.Number,\n\t\tget: 'getWidth',\n\t\tset: 'setWidth',\n\t\tgetmod: 'makeScaler( 1/nWidth )',\n\t\tsetmod: 'makeScaler( nWidth)',\n\t},\n\n\tx: {\n\t\ttype: PropertyValueType.Number,\n\t\tget: 'getX',\n\t\tset: 'setX',\n\t\tgetmod: 'makeScaler( 1/nWidth )',\n\t\tsetmod: 'makeScaler( nWidth)',\n\t},\n\n\ty: {\n\t\ttype: PropertyValueType.Number,\n\t\tget: 'getY',\n\t\tset: 'setY',\n\t\tgetmod: 'makeScaler( 1/nHeight )',\n\t\tsetmod: 'makeScaler( nHeight)',\n\t},\n\n\tvisibility: {\n\t\ttype: PropertyValueType.Enum,\n\t\tget: 'getVisibility',\n\t\tset: 'setVisibility',\n\t},\n\n\tfillstyle: {\n\t\ttype: PropertyValueType.String,\n\t\tget: 'getFillStyle',\n\t\tset: 'setFillStyle',\n\t},\n\n\tlinestyle: {\n\t\ttype: PropertyValueType.String,\n\t\tget: 'getLineStyle',\n\t\tset: 'setLineStyle',\n\t},\n\n\tfillcolor: {\n\t\ttype: PropertyValueType.Color,\n\t\tget: 'getFillColor',\n\t\tset: 'setFillColor',\n\t},\n\n\tlinecolor: {\n\t\ttype: PropertyValueType.Color,\n\t\tget: 'getStrokeColor',\n\t\tset: 'setStrokeColor',\n\t},\n\n\tcharcolor: {\n\t\ttype: PropertyValueType.Color,\n\t\tget: 'getFontColor',\n\t\tset: 'setFontColor',\n\t},\n\n\tdimcolor: {\n\t\ttype: PropertyValueType.Color,\n\t\tget: 'getDimColor',\n\t\tset: 'setDimColor',\n\t},\n};\n\ntype PropertyGetterSetterMapKeyType = keyof typeof aPropertyGetterSetterMap;\n\ninterface TransitionFilterFrameInfo {\n\tanimation: TransitionFilterAnimation;\n\ttime: number;\n}\n\ninterface TransitionFiltersState {\n\tfilterQueue: Array<number>;\n\tframeInfoMap: Map<number, TransitionFilterFrameInfo>;\n}\n\nclass TransitionFiltersManager {\n\tprivate filterQueue = new Array<number>();\n\tprivate frameInfoMap = new Map<number, TransitionFilterFrameInfo>();\n\n\tpublic isEmpty() {\n\t\treturn this.filterQueue.length === 0;\n\t}\n\n\tpublic add(animation: TransitionFilterAnimation, time: number) {\n\t\tthis.frameInfoMap.set(animation.getNodeId(), {\n\t\t\tanimation: animation,\n\t\t\ttime: time,\n\t\t});\n\t\tthis.updateQueue(animation.getNodeId());\n\t}\n\n\tprivate updateQueue(nodeId: number) {\n\t\tconst length = this.filterQueue.length;\n\t\tconst last = this.filterQueue[length];\n\t\tif (nodeId === last) return;\n\t\tconst index = this.filterQueue.indexOf(nodeId);\n\t\tif (index > -1) {\n\t\t\t// remove it\n\t\t\tthis.filterQueue.splice(index, 1);\n\t\t}\n\t\tthis.filterQueue.push(nodeId);\n\t}\n\n\tpublic apply(properties?: AnimatedElementRenderProperties): boolean {\n\t\tlet applied = false;\n\t\tthis.filterQueue.forEach((nodeId) => {\n\t\t\tconst frameInfo = this.frameInfoMap.get(nodeId);\n\t\t\tif (frameInfo) {\n\t\t\t\tapplied = true;\n\t\t\t\tANIMDBG.print(`TransitionFiltersManager.apply: node: ${nodeId}`);\n\t\t\t\tframeInfo.animation.renderFrame(frameInfo.time, properties);\n\t\t\t}\n\t\t});\n\t\treturn applied;\n\t}\n\n\tpublic clear() {\n\t\tthis.frameInfoMap.forEach((frameInfo) => {\n\t\t\tframeInfo.animation.notifySlideEnd();\n\t\t});\n\t\tthis.filterQueue = [];\n\t\tthis.frameInfoMap.clear();\n\t}\n\n\tpublic getState(): TransitionFiltersState {\n\t\treturn {\n\t\t\tfilterQueue: structuredClone(this.filterQueue),\n\t\t\tframeInfoMap: new Map(this.frameInfoMap),\n\t\t};\n\t}\n\n\tpublic setState(state: TransitionFiltersState) {\n\t\tthis.filterQueue = structuredClone(state.filterQueue);\n\t\tthis.frameInfoMap = new Map(state.frameInfoMap);\n\t}\n}\n\ninterface AnimatedElementState {\n\tnCenterX: number;\n\tnCenterY: number;\n\tnScaleFactorX: number;\n\tnScaleFactorY: number;\n\tnRotationAngle: number;\n\tnSkewX: number;\n\tnSkewY: number;\n\taTMatrix: DOMMatrix;\n\tnOpacity: number;\n\taFillColor: RGBColor;\n\taLineColor: RGBColor;\n\taFontColor: RGBColor;\n\tbVisible: boolean;\n\ttransitionFiltersState: TransitionFiltersState;\n}\n\ntype BoundsType = [DOMPoint, DOMPoint, DOMPoint, DOMPoint];\n\ninterface AnimatedElementColorMap {\n\tfromFillColor?: RGBColor;\n\ttoFillColor?: RGBColor;\n\tfromLineColor?: RGBColor;\n\ttoLineColor?: RGBColor;\n}\ninterface AnimatedElementRenderProperties {\n\tbounds: BoundsType;\n\talpha: number;\n\tcolorMap?: AnimatedElementColorMap;\n}\n\nfunction BBoxToString(aBB: BoundingBoxType) {\n\treturn `{ x: ${aBB.x}, y: ${aBB.y}, width: ${aBB.width}, height: ${aBB.height} }`;\n}\n\nclass AnimatedElement {\n\tpublic static readonly DefaultColor = new RGBColor(0, 0, 0);\n\n\tpublic static readonly SupportedProperties = new Set<string>([\n\t\t'x',\n\t\t'y',\n\t\t'width',\n\t\t'height',\n\t\t'opacity',\n\t\t'visibility',\n\t\t'rotate',\n\t\t'skewx',\n\t\t'skewy',\n\t\t'fillstyle',\n\t\t'linestyle',\n\t\t'fillcolor',\n\t\t'linecolor',\n\t\t'charcolor',\n\t\t'dimcolor',\n\t]);\n\n\tpublic static readonly SupportedTransformations = new Set<string>([\n\t\t'translate',\n\t\t'scale',\n\t\t'rotate',\n\t]);\n\n\tprivate sId: string;\n\tprivate slideHash: string;\n\tprivate slideWidth: number;\n\tprivate slideHeight: number;\n\tprivate canvasWidth: number;\n\tprivate canvasHeight: number;\n\tprivate bIsValid: boolean;\n\tprivate slideRenderer: SlideRenderer;\n\tprivate animatedLayerInfo: AnimatedShapeInfo = null;\n\tprivate aLayer: ImageBitmap = null;\n\tprivate canvasScaleFactor: { x: number; y: number };\n\tprivate aBaseBBox: BoundingBoxType = null;\n\tprivate aBBoxInCanvas: BoundingBoxType;\n\tprivate aBaseElement: AnimatedObjectType;\n\tprivate nBaseCenterX: number = 0;\n\tprivate nBaseCenterY: number = 0;\n\tprivate aActiveBBox: BoundingBoxType;\n\tprivate aActiveElement: AnimatedObjectType;\n\tprivate eAdditiveMode = AdditiveMode.Replace;\n\tprivate aStateSet = new Map<number, AnimatedElementState>();\n\tprivate aStateOnNextEffectSet = new Map<number, AnimatedElementState>();\n\tprivate nCenterX: number;\n\tprivate nCenterY: number;\n\tprivate nScaleFactorX: number = 1.0;\n\tprivate nScaleFactorY: number = 1.0;\n\tprivate nRotationAngle: number = 0;\n\tprivate nSkewX: number = 0;\n\tprivate nSkewY: number = 0;\n\tprivate aTMatrix: DOMMatrix;\n\tprivate nOpacity: number; // [0, 1]\n\tprivate aBaseFillColor = AnimatedElement.DefaultColor;\n\tprivate aFillColor = AnimatedElement.DefaultColor;\n\tprivate aBaseLineColor = AnimatedElement.DefaultColor;\n\tprivate aLineColor = AnimatedElement.DefaultColor;\n\tprivate aBaseFontColor = AnimatedElement.DefaultColor;\n\tprivate aFontColor = AnimatedElement.DefaultColor;\n\tprivate aDimColor = AnimatedElement.DefaultColor;\n\tprivate bVisible: boolean;\n\tprivate aClipPath: SVGPathElement = null;\n\tprivate runningAnimations: number = 0;\n\n\tprivate nCurrentEffect: number;\n\t// effect -> animation nodes\n\tprivate activeAnimationNodes = new Map<number, Set<number>>();\n\n\tprivate tfContext: RenderContextGl;\n\tprivate transitionFiltersManager: TransitionFiltersManager;\n\tprivate aSlideShowContext: SlideShowContext;\n\n\tconstructor(\n\t\tsId: string,\n\t\tslideHash: string,\n\t\tslideWidth: number,\n\t\tslideHeight: number,\n\t) {\n\t\tANIMDBG.print(`AnimatedElement(${sId}, ${slideHash})`);\n\t\tthis.sId = sId;\n\t\tthis.slideHash = slideHash;\n\t\tthis.slideWidth = slideWidth;\n\t\tthis.slideHeight = slideHeight;\n\t\tthis.bIsValid = false;\n\n\t\tthis.transitionFiltersManager = new TransitionFiltersManager();\n\n\t\tconst presenter: SlideShowPresenter = app.map.slideShowPresenter;\n\t\tthis.slideRenderer = presenter._slideRenderer;\n\t}\n\n\tgetId() {\n\t\treturn this.sId;\n\t}\n\n\tpublic isValid() {\n\t\treturn this.bIsValid;\n\t}\n\n\tprivate isGlSupported() {\n\t\treturn !this.tfContext.is2dGl();\n\t}\n\n\tpublic isTextElement() {\n\t\treturn false;\n\t}\n\n\tprivate cloneBBox(aBBox: BoundingBoxType): BoundingBoxType {\n\t\tif (!aBBox) return null;\n\t\treturn new DOMRect(aBBox.x, aBBox.y, aBBox.width, aBBox.height);\n\t}\n\n\tprivate createBaseElement(\n\t\tlayer: ImageBitmap,\n\t\tbounds: BoundingBoxType,\n\t): AnimatedObjectType {\n\t\tconst canvas = new OffscreenCanvas(bounds.width, bounds.height);\n\t\tconst context = canvas.getContext('2d');\n\t\tcontext.drawImage(\n\t\t\tlayer,\n\t\t\tbounds.x,\n\t\t\tbounds.y,\n\t\t\tbounds.width,\n\t\t\tbounds.height,\n\t\t\t0,\n\t\t\t0,\n\t\t\tbounds.width,\n\t\t\tbounds.height,\n\t\t);\n\t\treturn canvas.transferToImageBitmap();\n\t}\n\n\tprivate clone(aElement: AnimatedObjectType): AnimatedObjectType {\n\t\tif (!aElement) return null;\n\t\tconst canvas = new OffscreenCanvas(aElement.width, aElement.height);\n\t\tconst context = canvas.getContext('2d');\n\t\tcontext.drawImage(aElement, 0, 0, canvas.width, canvas.height);\n\t\treturn canvas.transferToImageBitmap();\n\t}\n\n\tpublic updateCanvasSize(size: [number, number]) {\n\t\tthis.canvasWidth = size[0];\n\t\tthis.canvasHeight = size[1];\n\t\tthis.canvasScaleFactor = {\n\t\t\tx: this.canvasWidth / this.slideWidth,\n\t\t\ty: this.canvasHeight / this.slideHeight,\n\t\t};\n\t\tconsole.debug(\n\t\t\t`AnimatedElement.updateCanvasSize: (${this.canvasWidth}x${this.canvasHeight}), scale factor: ${this.canvasScaleFactor}`,\n\t\t);\n\t}\n\n\tpublic updateAnimationInfo(animatedLayerInfo: AnimatedShapeInfo) {\n\t\tif (!animatedLayerInfo) {\n\t\t\t// create a dummy bounding box for not break animation engine\n\t\t\tthis.aBaseBBox = new DOMRect(0, 0, 1920, 1080);\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimatedElement.updateAnimationInfo: passed info is not valid',\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tthis.animatedLayerInfo = animatedLayerInfo;\n\n\t\tthis.aLayer = (this.animatedLayerInfo.content as ImageInfo).data;\n\t\tif (!this.aLayer) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimatedElement.updateAnimationInfo: layer not valid',\n\t\t\t);\n\t\t}\n\n\t\tthis.aBaseBBox = this.cloneBBox(this.animatedLayerInfo.bounds);\n\t\t({ x: this.nBaseCenterX, y: this.nBaseCenterY } = getRectCenter(\n\t\t\tthis.aBaseBBox,\n\t\t));\n\t\tthis.aBBoxInCanvas = convert(this.canvasScaleFactor, this.aBaseBBox);\n\t\tthis.aBaseElement = this.createBaseElement(this.aLayer, this.aBBoxInCanvas);\n\n\t\tif (this.animatedLayerInfo.fillColor) {\n\t\t\tthis.aBaseFillColor = colorParser(\n\t\t\t\tthis.animatedLayerInfo.fillColor,\n\t\t\t) as RGBColor;\n\t\t}\n\t\tif (this.animatedLayerInfo.lineColor) {\n\t\t\tthis.aBaseLineColor = colorParser(\n\t\t\t\tthis.animatedLayerInfo.lineColor,\n\t\t\t) as RGBColor;\n\t\t}\n\t\tif (this.animatedLayerInfo.fontColor) {\n\t\t\tthis.aBaseFontColor = colorParser(\n\t\t\t\tthis.animatedLayerInfo.fontColor,\n\t\t\t) as RGBColor;\n\t\t}\n\n\t\tthis.DBG(\n\t\t\t'.updateAnimationInfo: ' +\n\t\t\t\t`\\n  aBaseBBox: ${BBoxToString(this.aBaseBBox)}` +\n\t\t\t\t`\\n  aBBoxInCanvas: ${BBoxToString(this.aBBoxInCanvas)}` +\n\t\t\t\t`\\n  base center: x: ${this.nBaseCenterX} y: ${this.nBaseCenterY}`,\n\t\t);\n\n\t\tthis.bIsValid = true;\n\t}\n\n\tprivate getTextureFromElement(element: AnimatedObjectType) {\n\t\treturn this.tfContext.loadTexture(element);\n\t}\n\n\tpublic setTransitionParameters(transitionParameters: TransitionParameters) {\n\t\tif (!this.tfContext) {\n\t\t\tconst layerCompositor = this.getLayerCompositor();\n\t\t\tif (!layerCompositor) {\n\t\t\t\twindow.app.console.error(\n\t\t\t\t\t'AnimatedElement.setTransitionParameters: layer compositor is undefined',\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.tfContext = layerCompositor.getLayerRendererContext();\n\t\t\tif (!this.tfContext) {\n\t\t\t\twindow.app.console.error(\n\t\t\t\t\t'AnimatedElement.setTransitionParameters: layer renderer context is undefined',\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\ttransitionParameters.context = this.tfContext;\n\t\ttransitionParameters.current = null;\n\t\ttransitionParameters.next = this.getTextureFromElement(this.aBaseElement);\n\t}\n\n\tprivate resetProperties() {\n\t\tthis.nCenterX = this.nBaseCenterX;\n\t\tthis.nCenterY = this.nBaseCenterY;\n\t\tthis.nScaleFactorX = 1.0;\n\t\tthis.nScaleFactorY = 1.0;\n\t\tthis.nRotationAngle = 0.0;\n\t\tthis.nSkewX = 0.0;\n\t\tthis.nSkewY = 0.0;\n\t\tthis.aTMatrix = new DOMMatrix([1, 0, 0, 1, 0, 0]);\n\t\tthis.nOpacity = 1;\n\t\tthis.aFillColor = this.aBaseFillColor;\n\t\tthis.aLineColor = this.aBaseLineColor;\n\t\tthis.aFontColor = this.aBaseFontColor;\n\t\tthis.bVisible = this.animatedLayerInfo\n\t\t\t? this.animatedLayerInfo.initVisible\n\t\t\t: false;\n\t\tthis.transitionFiltersManager.clear();\n\t\t// this.aActiveBBox = this.cloneBBox(this.aBaseBBox);\n\t}\n\n\tinitClipPath() {\n\t\tthis.aClipPath = document.createElementNS(NSS_SVG, 'path');\n\n\t\tconst nWidth = this.aActiveBBox.width;\n\t\tconst nHeight = this.aActiveBBox.height;\n\t\tconst sPathData =\n\t\t\t'M ' +\n\t\t\tthis.aActiveBBox.x +\n\t\t\t' ' +\n\t\t\tthis.aActiveBBox.y +\n\t\t\t' h ' +\n\t\t\tnWidth +\n\t\t\t' v ' +\n\t\t\tnHeight +\n\t\t\t' h -' +\n\t\t\tnWidth +\n\t\t\t' z';\n\t\tthis.aClipPath.setAttribute('d', sPathData);\n\t}\n\n\tcleanClipPath() {\n\t\tthis.aClipPath = null;\n\t}\n\n\tprivate getLayerCompositor(): SlideCompositor {\n\t\tconst presenter: SlideShowPresenter = app.map.slideShowPresenter;\n\t\tif (presenter) {\n\t\t\treturn presenter._slideCompositor;\n\t\t}\n\t\treturn null;\n\t}\n\n\tapplyTransitionFilters(\n\t\tproperties?: AnimatedElementRenderProperties,\n\t): boolean {\n\t\tif (this.transitionFiltersManager.isEmpty() || !this.isGlSupported()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.transitionFiltersManager.apply(properties);\n\t}\n\n\trenderLayer(renderer: LayerRenderer) {\n\t\tif (!this.bVisible) return;\n\t\tif (renderer instanceof LayerRendererGl) this.renderLayerGl(renderer);\n\t\telse if (renderer instanceof LayerRenderer2d) this.renderLayer2d(renderer);\n\t}\n\n\trenderLayer2d(renderer: LayerRenderer2d) {\n\t\tif (renderer.isDisposed()) return;\n\n\t\tconst renderContext = renderer.getRenderContext();\n\t\tconst renderingContext = renderContext.get2dOffscreen();\n\n\t\trenderingContext.save();\n\t\t// renderingContext.scale(sf.x, sf.y);\n\n\t\t// factor to convert from slide coordinate to canvas coordinate\n\t\tconst sf = this.canvasScaleFactor;\n\n\t\trenderingContext.globalAlpha = this.nOpacity;\n\n\t\tconst T = this.aTMatrix;\n\t\tconst transform = new DOMMatrix([\n\t\t\tT.a,\n\t\t\tT.b,\n\t\t\tT.c,\n\t\t\tT.d,\n\t\t\tT.e * sf.x,\n\t\t\tT.f * sf.y,\n\t\t]);\n\t\trenderingContext.setTransform(transform);\n\n\t\tconst aElement = this.aBaseElement;\n\t\tconsole.debug(\n\t\t\t`AnimatedElement(${this.sId}).renderLayer2d:\n\t\t\t\telement width: ${aElement.width}\n\t\t\t\telement height: ${aElement.height}\n\t\t\t\tbase center: (${this.nBaseCenterX}, ${this.nBaseCenterY})\n\t\t\t\tactual center: (${this.nCenterX}, ${this.nCenterY})\n\t\t\t\ttransform: ${transform.toString()}`,\n\t\t);\n\n\t\t// renderingContext.drawImage(\n\t\t// \taElement,\n\t\t// \t0,\n\t\t// \t0,\n\t\t// \taElement.width,\n\t\t// \taElement.height,\n\t\t// \tthis.aBaseBBox.x,\n\t\t// \tthis.aBaseBBox.y,\n\t\t// \tthis.aBaseBBox.width,\n\t\t// \tthis.aBaseBBox.height,\n\t\t// );\n\n\t\trenderingContext.drawImage(\n\t\t\taElement,\n\t\t\t0,\n\t\t\t0,\n\t\t\taElement.width,\n\t\t\taElement.height,\n\t\t\tthis.aBBoxInCanvas.x,\n\t\t\tthis.aBBoxInCanvas.y,\n\t\t\taElement.width,\n\t\t\taElement.height,\n\t\t);\n\t\trenderingContext.restore();\n\t}\n\n\trenderLayerGl(renderer: LayerRendererGl) {\n\t\tif (renderer.isDisposed()) return;\n\n\t\tconst T = this.aTMatrix;\n\n\t\tconsole.debug(\n\t\t\t`AnimatedElement(${this.sId}).renderLayerGl:\n\t\t\t\telement width: ${this.aBaseElement.width}\n\t\t\t\telement height: ${this.aBaseElement.height}\n\t\t\t\tbase center: (${this.nBaseCenterX}, ${this.nBaseCenterY})\n\t\t\t\tactual center: (${this.nCenterX}, ${this.nCenterY})\n\t\t\t\ttransform: ${T.toString()}`,\n\t\t);\n\n\t\tconst tl = new DOMPoint(this.aBaseBBox.x, this.aBaseBBox.y);\n\t\tconst br = new DOMPoint(\n\t\t\ttl.x + this.aBaseBBox.width,\n\t\t\ttl.y + this.aBaseBBox.height,\n\t\t);\n\t\tconst bl = new DOMPoint(tl.x, br.y);\n\t\tconst tr = new DOMPoint(br.x, tl.y);\n\n\t\tconst unitBounds = [];\n\t\tfor (const v of [bl, br, tl, tr]) {\n\t\t\tconst u = v.matrixTransform(T);\n\t\t\tu.x = u.x / this.slideWidth;\n\t\t\tu.y = u.y / this.slideHeight;\n\t\t\tunitBounds.push(u);\n\t\t}\n\n\t\t// This color mapping solution doesn't work if fill and line colors have\n\t\t// the same initial value. For a proper solution we would need separated\n\t\t// layers for stroke and fill, at least when a color animation is involved.\n\t\tconst colorMap: AnimatedElementColorMap = {};\n\t\tif (this.isTextElement()) {\n\t\t\t// On desktop, fill and line color animations seem to have no effect\n\t\t\t// when applied to a paragraph, so here we take into account font color\n\t\t\t// changes only, and we forward them to the renderer as a fill color map,\n\t\t\t// so that we can avoid to perform a further color comparison\n\t\t\t// in the fragment shader.\n\t\t\tif (!this.aFontColor.equal(this.aBaseFontColor)) {\n\t\t\t\tcolorMap.fromFillColor = this.aBaseFontColor;\n\t\t\t\tcolorMap.toFillColor = this.aFontColor;\n\t\t\t}\n\t\t} else if (\n\t\t\t!this.aFillColor.equal(this.aBaseFillColor) ||\n\t\t\t!this.aLineColor.equal(this.aBaseLineColor)\n\t\t) {\n\t\t\tcolorMap.fromFillColor = this.aBaseFillColor;\n\t\t\tcolorMap.toFillColor = this.aFillColor;\n\t\t\tcolorMap.fromLineColor = this.aBaseLineColor;\n\t\t\tcolorMap.toLineColor = this.aLineColor;\n\t\t}\n\n\t\tconst properties: AnimatedElementRenderProperties = {\n\t\t\tbounds: unitBounds as BoundsType,\n\t\t\talpha: this.nOpacity,\n\t\t\tcolorMap: colorMap,\n\t\t};\n\n\t\tif (this.applyTransitionFilters(properties)) return;\n\n\t\trenderer.drawBitmap(this.aBaseElement, properties);\n\t}\n\n\tnotifySlideStart(aSlideShowContext: SlideShowContext) {\n\t\tif (!aSlideShowContext) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimatedElement.notifySlideStart: slideshow context is not valid',\n\t\t\t);\n\t\t}\n\t\tthis.aSlideShowContext = aSlideShowContext;\n\n\t\tthis.runningAnimations = 0;\n\t\tthis.activeAnimationNodes.clear();\n\t\tthis.nCurrentEffect = undefined;\n\t\tthis.aStateOnNextEffectSet.clear();\n\n\t\tconst aAnimatedLayerInfo =\n\t\t\tthis.aSlideShowContext.aSlideShowHandler.getAnimatedLayerInfo(\n\t\t\t\tthis.slideHash,\n\t\t\t\tthis.sId,\n\t\t\t);\n\t\tthis.updateAnimationInfo(aAnimatedLayerInfo);\n\n\t\t// this.aActiveElement = this.clone(this.aBaseElement);\n\n\t\tthis.resetProperties();\n\t\tthis.DBG('.notifySlideStart invoked');\n\t}\n\n\tnotifySlideEnd() {\n\t\tthis.transitionFiltersManager.clear();\n\t}\n\n\tnotifyAnimationStart() {\n\t\tif (!this.isActive()) {\n\t\t\tthis.slideRenderer.notifyAnimationStarted(this.sId);\n\t\t}\n\t\t++this.runningAnimations;\n\t}\n\n\tisActive(): boolean {\n\t\treturn this.runningAnimations > 0;\n\t}\n\n\tnotifyAnimationEnd() {\n\t\tif (this.runningAnimations <= 0) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimatedElement.notifyAnimationEnd: running animations <= 0',\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\t--this.runningAnimations;\n\t\tif (!this.isActive()) {\n\t\t\tthis.slideRenderer.notifyAnimationEnded(this.sId);\n\t\t}\n\t}\n\n\tnotifyNextEffectStart(nEffectIndex: number) {\n\t\tthis.nCurrentEffect = nEffectIndex;\n\t\tthis.activeAnimationNodes.set(this.nCurrentEffect, new Set());\n\t}\n\n\t// TODO remove it\n\tsetToElement(aElement: AnimatedObjectType) {\n\t\tif (!aElement) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimatedElement(' +\n\t\t\t\t\tthis.getId() +\n\t\t\t\t\t').setToElement: element is not valid',\n\t\t\t);\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.aActiveElement = this.clone(aElement);\n\t\treturn true;\n\t}\n\n\t/** saveState\n\t *  Save the state of the managed animated element and append it to aStateSet\n\t *  using the passed animation node id as key.\n\t *\n\t *  @param nAnimationNodeId\n\t *      A non negative integer representing the unique id of an animation node.\n\t */\n\tsaveState(nAnimationNodeId: number) {\n\t\tANIMDBG.print(\n\t\t\t'AnimatedElement(' +\n\t\t\t\tthis.getId() +\n\t\t\t\t').saveState(' +\n\t\t\t\tnAnimationNodeId +\n\t\t\t\t')',\n\t\t);\n\t\tconst aState: AnimatedElementState = {\n\t\t\tnCenterX: this.nCenterX,\n\t\t\tnCenterY: this.nCenterY,\n\t\t\tnScaleFactorX: this.nScaleFactorX,\n\t\t\tnScaleFactorY: this.nScaleFactorY,\n\t\t\tnRotationAngle: this.nRotationAngle,\n\t\t\tnSkewX: this.nSkewX,\n\t\t\tnSkewY: this.nSkewY,\n\t\t\taTMatrix: DOMMatrix.fromMatrix(this.aTMatrix),\n\t\t\tnOpacity: this.nOpacity,\n\t\t\taFillColor: this.aFillColor,\n\t\t\taLineColor: this.aLineColor,\n\t\t\taFontColor: this.aFontColor,\n\t\t\tbVisible: this.bVisible,\n\t\t\ttransitionFiltersState: this.transitionFiltersManager.getState(),\n\t\t};\n\t\tthis.aStateSet.set(nAnimationNodeId, aState);\n\n\t\t// if it's the first animation for current effect set as the state\n\t\t// on effect started\n\t\tconst currentEffectNodes = this.activeAnimationNodes.get(\n\t\t\tthis.nCurrentEffect,\n\t\t);\n\t\tif (currentEffectNodes) {\n\t\t\tcurrentEffectNodes.add(nAnimationNodeId);\n\t\t\tif (currentEffectNodes.size === 1)\n\t\t\t\tthis.aStateOnNextEffectSet.set(this.nCurrentEffect, aState);\n\t\t} else {\n\t\t\twindow.app.console.log(\n\t\t\t\t`AnimatedElement(${this.getId()}).saveState(${nAnimationNodeId}): ` +\n\t\t\t\t\t`current effect not found: ${this.nCurrentEffect}`,\n\t\t\t);\n\t\t}\n\t}\n\n\t/** restoreState\n\t *  Restore the state of the managed animated element to the state with key\n\t *  the passed animation node id.\n\t *\n\t *  @param nAnimationNodeId\n\t *      A non negative integer representing the unique id of an animation node.\n\t *\n\t *  @return\n\t *      True if the restoring operation is successful, false otherwise.\n\t */\n\trestoreState(nAnimationNodeId: number) {\n\t\tif (!this.aStateSet.has(nAnimationNodeId)) {\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimatedElement(' +\n\t\t\t\t\tthis.getId() +\n\t\t\t\t\t').restoreState: state ' +\n\t\t\t\t\tnAnimationNodeId +\n\t\t\t\t\t' is not valid',\n\t\t\t);\n\t\t\treturn false;\n\t\t}\n\n\t\tANIMDBG.print(\n\t\t\t'AnimatedElement(' +\n\t\t\t\tthis.getId() +\n\t\t\t\t').restoreState(' +\n\t\t\t\tnAnimationNodeId +\n\t\t\t\t')',\n\t\t);\n\n\t\tlet aState = this.aStateSet.get(nAnimationNodeId);\n\n\t\tthis.activeAnimationNodes.forEach((nodes, effect, map) => {\n\t\t\tif (nodes.has(nAnimationNodeId)) {\n\t\t\t\tnodes.delete(nAnimationNodeId);\n\t\t\t\t// if an effect has been completely removed restore the state saved\n\t\t\t\t// when effect started\n\t\t\t\tif (nodes.size === 0) {\n\t\t\t\t\tmap.delete(effect);\n\t\t\t\t\tconst state = this.aStateOnNextEffectSet.get(effect);\n\t\t\t\t\tif (state) aState = state;\n\t\t\t\t\tthis.aStateOnNextEffectSet.delete(effect);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\tconst bRet = true;\n\t\tif (bRet) {\n\t\t\tthis.nCenterX = aState.nCenterX;\n\t\t\tthis.nCenterY = aState.nCenterY;\n\t\t\tthis.nScaleFactorX = aState.nScaleFactorX;\n\t\t\tthis.nScaleFactorY = aState.nScaleFactorY;\n\t\t\tthis.nRotationAngle = aState.nRotationAngle;\n\t\t\tthis.nSkewX = aState.nSkewX;\n\t\t\tthis.nSkewY = aState.nSkewY;\n\t\t\tthis.aTMatrix = DOMMatrix.fromMatrix(aState.aTMatrix);\n\t\t\tthis.nOpacity = aState.nOpacity;\n\t\t\tthis.aFillColor = aState.aFillColor;\n\t\t\tthis.aLineColor = aState.aLineColor;\n\t\t\tthis.aFontColor = aState.aFontColor;\n\t\t\tthis.bVisible = aState.bVisible;\n\t\t\tthis.transitionFiltersManager.setState(aState.transitionFiltersState);\n\t\t}\n\t\tthis.aStateSet.delete(nAnimationNodeId);\n\n\t\t// we need to trigger at least one request animation frame for SlideRenderer.render method\n\t\t// maybe we could implement a SlideRenderer.oneShot method.\n\t\tthis.notifyAnimationStart();\n\t\tthis.notifyAnimationEnd();\n\n\t\treturn bRet;\n\t}\n\n\tgetBaseBBox() {\n\t\treturn this.aBaseBBox;\n\t}\n\n\tgetBaseCenterX() {\n\t\treturn this.nBaseCenterX;\n\t}\n\n\tgetBaseCenterY() {\n\t\treturn this.nBaseCenterY;\n\t}\n\n\tapplyTransform() {\n\t\t// empty body\n\t}\n\n\tgetAdditiveMode() {\n\t\treturn this.eAdditiveMode;\n\t}\n\n\tsetAdditiveMode(eAdditiveMode: AdditiveMode) {\n\t\tthis.eAdditiveMode = eAdditiveMode;\n\t}\n\n\tprivate updateTransformationMatrix() {\n\t\tconst aTMatrix = new DOMMatrix([1, 0, 0, 1, 0, 0]);\n\t\tconst skewXAngle = (180 * Math.atan(this.nSkewX)) / Math.PI;\n\t\tconst skewYAngle = (180 * Math.atan(this.nSkewY)) / Math.PI;\n\t\taTMatrix\n\t\t\t.translateSelf(this.nCenterX, this.nCenterY)\n\t\t\t.rotateSelf(this.nRotationAngle)\n\t\t\t.scaleSelf(this.nScaleFactorX, this.nScaleFactorY)\n\t\t\t.skewXSelf(skewYAngle)\n\t\t\t.skewXSelf(skewXAngle)\n\t\t\t.translateSelf(-this.nBaseCenterX, -this.nBaseCenterY);\n\t\tthis.aTMatrix = aTMatrix;\n\t}\n\n\t// Get/Set Properties\n\tgetX() {\n\t\treturn this.nCenterX;\n\t}\n\n\tgetY() {\n\t\treturn this.nCenterY;\n\t}\n\n\tgetPos() {\n\t\treturn [this.getX(), this.getY()];\n\t}\n\n\tgetWidth() {\n\t\treturn this.nScaleFactorX * this.getBaseBBox().width;\n\t}\n\n\tgetHeight() {\n\t\treturn this.nScaleFactorY * this.getBaseBBox().height;\n\t}\n\n\tgetSize() {\n\t\treturn [this.getWidth(), this.getHeight()];\n\t}\n\n\tsetX(nNewCenterX: number) {\n\t\tANIMDBG.print('AnimatedElement.setX(' + nNewCenterX + ')');\n\t\tif (nNewCenterX === this.nCenterX) return;\n\n\t\tthis.nCenterX = nNewCenterX;\n\t\tthis.updateTransformationMatrix();\n\t}\n\n\tsetY(nNewCenterY: number) {\n\t\tANIMDBG.print('AnimatedElement.setY(' + nNewCenterY + ')');\n\t\tif (nNewCenterY === this.nCenterY) return;\n\n\t\tthis.nCenterY = nNewCenterY;\n\t\tthis.updateTransformationMatrix();\n\t}\n\n\tsetPos(aNewPos: [number, number]) {\n\t\tconst nNewCenterX = aNewPos[0];\n\t\tconst nNewCenterY = aNewPos[1];\n\t\tANIMDBG.print(\n\t\t\t'AnimatedElement.setPos(' + nNewCenterX + ', ' + nNewCenterY + ')',\n\t\t);\n\n\t\tif (nNewCenterX === this.nCenterX && nNewCenterY === this.nCenterY) return;\n\n\t\tthis.nCenterX = nNewCenterX;\n\t\tthis.nCenterY = nNewCenterY;\n\t\tthis.updateTransformationMatrix();\n\t}\n\n\tsetWidth(nNewWidth: number) {\n\t\tANIMDBG.print('AnimatedElement.setWidth(' + nNewWidth + ')');\n\n\t\tconst nBaseWidth = this.getBaseBBox().width;\n\t\tlet nScaleFactorX = nNewWidth / nBaseWidth;\n\n\t\tif (Math.abs(nScaleFactorX) < 1e-5)\n\t\t\tnScaleFactorX = Math.sign(nScaleFactorX) * 1e-5;\n\t\tif (nScaleFactorX == this.nScaleFactorX) return;\n\n\t\tthis.nScaleFactorX = nScaleFactorX;\n\t\tthis.updateTransformationMatrix();\n\t}\n\n\tsetHeight(nNewHeight: number) {\n\t\tANIMDBG.print('AnimatedElement.setHeight(' + nNewHeight + ')');\n\n\t\tconst nBaseHeight = this.getBaseBBox().height;\n\t\tlet nScaleFactorY = nNewHeight / nBaseHeight;\n\n\t\tif (Math.abs(nScaleFactorY) < 1e-5)\n\t\t\tnScaleFactorY = Math.sign(nScaleFactorY) * 1e-5;\n\t\tif (nScaleFactorY == this.nScaleFactorY) return;\n\n\t\tthis.nScaleFactorY = nScaleFactorY;\n\t\tthis.updateTransformationMatrix();\n\t}\n\n\tsetSize(aNewSize: [number, number]) {\n\t\tconst nNewWidth = aNewSize[0];\n\t\tconst nNewHeight = aNewSize[1];\n\t\tANIMDBG.print(\n\t\t\t'AnimatedElement.setSize(' + nNewWidth + ', ' + nNewHeight + ')',\n\t\t);\n\n\t\tconst nBaseWidth = this.getBaseBBox().width;\n\t\tlet nScaleFactorX = nNewWidth / nBaseWidth;\n\t\tif (Math.abs(nScaleFactorX) < 1e-5)\n\t\t\tnScaleFactorX = Math.sign(nScaleFactorX) * 1e-5;\n\n\t\tconst nBaseHeight = this.getBaseBBox().height;\n\t\tlet nScaleFactorY = nNewHeight / nBaseHeight;\n\t\tif (Math.abs(nScaleFactorY) < 1e-5)\n\t\t\tnScaleFactorY = Math.sign(nScaleFactorY) * 1e-5;\n\n\t\tif (\n\t\t\tnScaleFactorX == this.nScaleFactorX &&\n\t\t\tnScaleFactorY == this.nScaleFactorY\n\t\t)\n\t\t\treturn;\n\n\t\tthis.nScaleFactorX = nScaleFactorX;\n\t\tthis.nScaleFactorY = nScaleFactorY;\n\t\tthis.updateTransformationMatrix();\n\t}\n\n\tgetOpacity() {\n\t\treturn this.nOpacity;\n\t}\n\n\tsetOpacity(nValue: number) {\n\t\tthis.nOpacity = clampN(nValue, 0, 1);\n\t\tANIMDBG.print('AnimatedElement.setOpacity(' + nValue + ')');\n\t}\n\n\tgetRotationAngle() {\n\t\treturn this.nRotationAngle;\n\t}\n\n\tsetRotationAngle(nNewRotAngle: number) {\n\t\tthis.nRotationAngle = nNewRotAngle;\n\t\tthis.updateTransformationMatrix();\n\t\tANIMDBG.print('AnimatedElement.setRotationAngle(' + nNewRotAngle + ')');\n\t}\n\n\tgetSkewX() {\n\t\treturn this.nSkewX;\n\t}\n\n\tsetSkewX(nSkewValue: number) {\n\t\tthis.nSkewX = nSkewValue;\n\t\tthis.updateTransformationMatrix();\n\t\tANIMDBG.print('AnimatedElement.setSkewX(' + nSkewValue + ')');\n\t}\n\n\tgetSkewY() {\n\t\treturn this.nSkewY;\n\t}\n\n\tsetSkewY(nSkewValue: number) {\n\t\tthis.nSkewY = nSkewValue;\n\t\tthis.updateTransformationMatrix();\n\t\tANIMDBG.print('AnimatedElement.setSkewY(' + nSkewValue + ')');\n\t}\n\n\tgetVisibility(): boolean {\n\t\treturn this.bVisible;\n\t}\n\n\tsetVisibility(sValue: string) {\n\t\tthis.bVisible = sValue === 'visible';\n\t\tconsole.debug('AnimatedElement.setVisibility(' + sValue + ')');\n\t}\n\n\tgetFillColor(): RGBColor {\n\t\treturn this.aFillColor;\n\t}\n\n\tsetFillColor(aRGBValue: RGBColor) {\n\t\twindow.app.console.log(\n\t\t\t'AnimatedElement.setFillColor(' + aRGBValue.toString() + ')',\n\t\t);\n\t\tthis.aFillColor = aRGBValue;\n\t}\n\n\tgetStrokeColor(): RGBColor {\n\t\treturn this.aLineColor;\n\t}\n\n\tsetStrokeColor(aRGBValue: RGBColor) {\n\t\twindow.app.console.log(\n\t\t\t'AnimatedElement.setStrokeColor(' + aRGBValue.toString() + ')',\n\t\t);\n\t\tthis.aLineColor = aRGBValue;\n\t}\n\n\tgetFontColor(): RGBColor {\n\t\treturn this.aFontColor;\n\t}\n\n\tsetFontColor(aRGBValue: RGBColor) {\n\t\twindow.app.console.log(\n\t\t\t'AnimatedElement.setFontColor(' + aRGBValue.toString() + ')',\n\t\t);\n\t\tthis.aFontColor = aRGBValue;\n\t}\n\n\tsetDefaultDimColor(aRGBValue: RGBColor) {\n\t\twindow.app.console.log(\n\t\t\t'AnimatedElement.setDefaultDimColor(' + aRGBValue.toString() + ')',\n\t\t);\n\n\t\tthis.aDimColor = aRGBValue;\n\t}\n\n\tgetDimColor(): RGBColor {\n\t\treturn this.aDimColor;\n\t}\n\n\tsetDimColor(aRGBValue: RGBColor) {\n\t\twindow.app.console.log(\n\t\t\t'AnimatedElement.setDimColor(' + aRGBValue.toString() + ')',\n\t\t);\n\t\tthis.aDimColor = aRGBValue;\n\t\tthis.aLineColor = aRGBValue;\n\t\tthis.aFillColor = aRGBValue;\n\t\tthis.aFontColor = aRGBValue;\n\t}\n\n\tgetFillStyle(): string {\n\t\treturn 'solid';\n\t}\n\n\tsetFillStyle(sValue: string) {\n\t\twindow.app.console.log(\n\t\t\t'AnimatedElement.setFillStyle(' + sValue + ') not implemented',\n\t\t);\n\t}\n\n\tgetLineStyle(): string {\n\t\treturn 'solid';\n\t}\n\n\tsetLineStyle(sValue: string) {\n\t\twindow.app.console.log(\n\t\t\t'AnimatedElement.setLineStyle(' + sValue + ') not implemented',\n\t\t);\n\t}\n\n\tsetClipPath(aClipPath: SVGPathElement) {\n\t\t// TODO: maybe we can reuse the path for creating a texture mask\n\t\tif (this.aClipPath) {\n\t\t\t// We need to translate the clip path to the top left corner of\n\t\t\t// the element bounding box.\n\t\t\t// var aTranslation = SVGIdentityMatrix.translate( this.aActiveBBox.x,\n\t\t\t// \tthis.aActiveBBox.y);\n\t\t\t// aClipPath.matrixTransform( aTranslation );\n\t\t\tconst sPathData = aClipPath.getAttribute('d');\n\t\t\tthis.aClipPath.setAttribute('d', sPathData);\n\t\t}\n\t}\n\n\tsetTransitionFilterFrame(\n\t\taTransitionFilterAnimation: TransitionFilterAnimation,\n\t\tnT: number,\n\t) {\n\t\tthis.transitionFiltersManager.add(aTransitionFilterAnimation, nT);\n\t}\n\n\tDBG(sMessage: string, nTime?: number) {\n\t\taAnimatedElementDebugPrinter.print(\n\t\t\t'AnimatedElement(' + this.getId() + ')' + sMessage,\n\t\t\tnTime,\n\t\t);\n\t}\n}\n\nclass AnimatedTextElement extends AnimatedElement {\n\tpublic isTextElement() {\n\t\treturn true;\n\t}\n\t// TODO: to be implemented\n}\n"]}