{"version":3,"file":"EventMultiplexer.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/EventMultiplexer.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ninterface MouseClickHandler {\n\thandleClick: (aMouseEvent?: any) => boolean;\n}\n\nclass EventMultiplexer {\n\tprivate static CURR_UNIQUE_ID = 0;\n\tprivate nId: number;\n\tprivate aTimerEventQueue: TimerEventQueue;\n\tprivate aEventMap = new Map<EventTrigger, Map<string, EventBase[]>>();\n\tprivate aAnimationsEndHandler: Handler0 = null;\n\tprivate aSkipEffectEndHandlerSet: Handler0[] = [];\n\tprivate aMouseClickHandlerSet: PriorityQueue = null;\n\tprivate aSkipEffectEvent: DelayEvent = null;\n\tprivate aRewindCurrentEffectEvent: DelayEvent = null;\n\tprivate aRewindLastEffectEvent: DelayEvent = null;\n\tprivate aSkipInteractiveEffectEventSet = new Map<number, DelayEvent>();\n\tprivate aRewindRunningInteractiveEffectEventSet = new Map<\n\t\tnumber,\n\t\tDelayEvent\n\t>();\n\tprivate aRewindEndedInteractiveEffectEventSet = new Map<number, DelayEvent>();\n\tprivate aRewindedEffectHandlerSet = new Map<string, Handler0>();\n\tprivate aElementChangedHandlerSet = new Map<string, Handler1>();\n\n\tconstructor(aTimerEventQueue: TimerEventQueue) {\n\t\tthis.nId = EventMultiplexer.getUniqueId();\n\t\tthis.aTimerEventQueue = aTimerEventQueue;\n\t\tthis.aMouseClickHandlerSet = new PriorityQueue(PriorityEntry.compare);\n\t}\n\n\tprivate static getUniqueId() {\n\t\t++EventMultiplexer.CURR_UNIQUE_ID;\n\t\treturn EventMultiplexer.CURR_UNIQUE_ID;\n\t}\n\n\tclear() {\n\t\tthis.aEventMap.clear();\n\t\tthis.aEventMap = null;\n\t\tthis.aSkipEffectEndHandlerSet = null;\n\t\tthis.aMouseClickHandlerSet.clear();\n\t\tthis.aMouseClickHandlerSet = null;\n\t\tthis.aSkipInteractiveEffectEventSet.clear();\n\t\tthis.aSkipInteractiveEffectEventSet = null;\n\t\tthis.aRewindRunningInteractiveEffectEventSet.clear();\n\t\tthis.aRewindRunningInteractiveEffectEventSet = null;\n\t\tthis.aRewindEndedInteractiveEffectEventSet.clear();\n\t\tthis.aRewindEndedInteractiveEffectEventSet = null;\n\t\tthis.aRewindedEffectHandlerSet.clear();\n\t\tthis.aRewindedEffectHandlerSet = null;\n\t\tthis.aElementChangedHandlerSet.clear();\n\t\tthis.aElementChangedHandlerSet = null;\n\t}\n\n\tgetId() {\n\t\treturn this.nId;\n\t}\n\n\thasRegisteredMouseClickHandlers() {\n\t\treturn !this.aMouseClickHandlerSet.isEmpty();\n\t}\n\n\tregisterMouseClickHandler(aHandler: MouseClickHandler, nPriority: number) {\n\t\tconst aHandlerEntry = new PriorityEntry(aHandler, nPriority);\n\t\tthis.aMouseClickHandlerSet.push(aHandlerEntry);\n\t}\n\n\tnotifyMouseClick(aMouseEvent: any) {\n\t\tconst aMouseClickHandlerSet = this.aMouseClickHandlerSet.clone();\n\t\twhile (!aMouseClickHandlerSet.isEmpty()) {\n\t\t\tconst aHandlerEntry = aMouseClickHandlerSet.top();\n\t\t\taMouseClickHandlerSet.pop();\n\t\t\tif (aHandlerEntry.aValue && aHandlerEntry.aValue.handleClick) {\n\t\t\t\tif (aHandlerEntry.aValue.handleClick(aMouseEvent)) break;\n\t\t\t}\n\t\t}\n\t}\n\n\tnotifyMouseMove(aMouseEvent: any) {\n\t\tconst aMouseClickHandlerSet = this.aMouseClickHandlerSet.clone();\n\t\twhile (!aMouseClickHandlerSet.isEmpty()) {\n\t\t\tconst aHandlerEntry = aMouseClickHandlerSet.top();\n\t\t\taMouseClickHandlerSet.pop();\n\t\t\tif (aHandlerEntry.aValue && aHandlerEntry.aValue.onMouseMove) {\n\t\t\t\tif (aHandlerEntry.aValue.onMouseMove(aMouseEvent.x, aMouseEvent.y))\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tregisterEvent(\n\t\teEventType: EventTrigger,\n\t\taNotifierId: number | string,\n\t\taEvent: EventBase,\n\t) {\n\t\tconst sNotifierId = '' + aNotifierId;\n\t\tthis.DBG('registerEvent', eEventType, sNotifierId);\n\t\tif (!this.aEventMap.has(eEventType)) {\n\t\t\tthis.aEventMap.set(eEventType, new Map<string, EventBase[]>());\n\t\t}\n\t\tif (!this.aEventMap.get(eEventType).has(sNotifierId)) {\n\t\t\tthis.aEventMap.get(eEventType).set(sNotifierId, []);\n\t\t}\n\t\tthis.aEventMap.get(eEventType).get(sNotifierId).push(aEvent);\n\t}\n\n\tnotifyEvent(eEventType: EventTrigger, aNotifierId: number | string) {\n\t\tconst sNotifierId = '' + aNotifierId;\n\t\tthis.DBG('notifyEvent', eEventType, sNotifierId);\n\t\tif (this.aEventMap.has(eEventType)) {\n\t\t\tif (this.aEventMap.get(eEventType).has(sNotifierId)) {\n\t\t\t\tconst aEventArray = this.aEventMap.get(eEventType).get(sNotifierId);\n\t\t\t\tconst nSize = aEventArray.length;\n\t\t\t\tfor (let i = 0; i < nSize; ++i) {\n\t\t\t\t\tthis.aTimerEventQueue.addEvent(aEventArray[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tregisterAnimationsEndHandler(aHandler: Handler0) {\n\t\tthis.aAnimationsEndHandler = aHandler;\n\t}\n\n\tnotifyAnimationsEndEvent() {\n\t\tif (this.aAnimationsEndHandler) this.aAnimationsEndHandler();\n\t}\n\n\tregisterNextEffectEndHandler(aHandler: Handler0) {\n\t\tthis.aSkipEffectEndHandlerSet.push(aHandler);\n\t}\n\n\tnotifyNextEffectEndEvent() {\n\t\tconst nSize = this.aSkipEffectEndHandlerSet.length;\n\t\tfor (let i = 0; i < nSize; ++i) {\n\t\t\tthis.aSkipEffectEndHandlerSet[i]();\n\t\t}\n\t\tthis.aSkipEffectEndHandlerSet = [];\n\t}\n\n\tregisterSkipEffectEvent(aEvent: DelayEvent) {\n\t\tthis.aSkipEffectEvent = aEvent;\n\t}\n\n\tnotifySkipEffectEvent() {\n\t\tif (this.aSkipEffectEvent) {\n\t\t\tthis.aTimerEventQueue.addEvent(this.aSkipEffectEvent);\n\t\t\tthis.aSkipEffectEvent = null;\n\t\t}\n\t}\n\n\tregisterRewindCurrentEffectEvent(aEvent: DelayEvent) {\n\t\tthis.aRewindCurrentEffectEvent = aEvent;\n\t}\n\n\tnotifyRewindCurrentEffectEvent() {\n\t\tif (this.aRewindCurrentEffectEvent) {\n\t\t\tthis.aTimerEventQueue.addEvent(this.aRewindCurrentEffectEvent);\n\t\t\tthis.aRewindCurrentEffectEvent = null;\n\t\t}\n\t}\n\n\tregisterRewindLastEffectEvent(aEvent: DelayEvent) {\n\t\tthis.aRewindLastEffectEvent = aEvent;\n\t}\n\n\tnotifyRewindLastEffectEvent() {\n\t\tif (this.aRewindLastEffectEvent) {\n\t\t\tthis.aTimerEventQueue.addEvent(this.aRewindLastEffectEvent);\n\t\t\tthis.aRewindLastEffectEvent = null;\n\t\t}\n\t}\n\n\tregisterSkipInteractiveEffectEvent(nNotifierId: number, aEvent: DelayEvent) {\n\t\tthis.aSkipInteractiveEffectEventSet.set(nNotifierId, aEvent);\n\t}\n\n\tnotifySkipInteractiveEffectEvent(nNotifierId: number) {\n\t\tif (this.aSkipInteractiveEffectEventSet.has(nNotifierId)) {\n\t\t\tthis.aTimerEventQueue.addEvent(\n\t\t\t\tthis.aSkipInteractiveEffectEventSet.get(nNotifierId),\n\t\t\t);\n\t\t}\n\t}\n\n\tregisterRewindRunningInteractiveEffectEvent(\n\t\tnNotifierId: number,\n\t\taEvent: DelayEvent,\n\t) {\n\t\tthis.aRewindRunningInteractiveEffectEventSet.set(nNotifierId, aEvent);\n\t}\n\n\tnotifyRewindRunningInteractiveEffectEvent(nNotifierId: number) {\n\t\tif (this.aRewindRunningInteractiveEffectEventSet.has(nNotifierId)) {\n\t\t\tthis.aTimerEventQueue.addEvent(\n\t\t\t\tthis.aRewindRunningInteractiveEffectEventSet.get(nNotifierId),\n\t\t\t);\n\t\t}\n\t}\n\n\tregisterRewindEndedInteractiveEffectEvent(\n\t\tnNotifierId: number,\n\t\taEvent: DelayEvent,\n\t) {\n\t\tthis.aRewindEndedInteractiveEffectEventSet.set(nNotifierId, aEvent);\n\t}\n\n\tnotifyRewindEndedInteractiveEffectEvent(nNotifierId: number) {\n\t\tif (this.aRewindEndedInteractiveEffectEventSet.has(nNotifierId)) {\n\t\t\tthis.aTimerEventQueue.addEvent(\n\t\t\t\tthis.aRewindEndedInteractiveEffectEventSet.get(nNotifierId),\n\t\t\t);\n\t\t}\n\t}\n\n\tregisterRewindedEffectHandler(\n\t\taNotifierId: number | string,\n\t\taHandler: Handler0,\n\t) {\n\t\tconst sNotifierId = '' + aNotifierId;\n\t\tthis.aRewindedEffectHandlerSet.set(sNotifierId, aHandler);\n\t}\n\n\tnotifyRewindedEffectEvent(aNotifierId: number | string) {\n\t\tconst sNotifierId = '' + aNotifierId;\n\t\tif (this.aRewindedEffectHandlerSet.has(sNotifierId)) {\n\t\t\tthis.aRewindedEffectHandlerSet.get(sNotifierId)();\n\t\t}\n\t}\n\n\tregisterElementChangedHandler(aNotifierId: string, aHandler: Handler1) {\n\t\tthis.aElementChangedHandlerSet.set(aNotifierId, aHandler);\n\t}\n\n\tnotifyElementChangedEvent(aNotifierId: string, aElement: any) {\n\t\tif (this.aElementChangedHandlerSet.has(aNotifierId)) {\n\t\t\tthis.aElementChangedHandlerSet.get(aNotifierId)(aElement);\n\t\t}\n\t}\n\n\tDBG(\n\t\tsMethodName: string,\n\t\teEventType: EventTrigger,\n\t\tnNotifierId: number | string,\n\t\tnTime?: number,\n\t) {\n\t\tif (aEventMultiplexerDebugPrinter.isEnabled()) {\n\t\t\tlet sInfo = 'EventMultiplexer.' + sMethodName;\n\t\t\tsInfo += '( type: ' + EventTrigger[eEventType];\n\t\t\tsInfo += ', notifier: ' + nNotifierId + ' )';\n\t\t\taEventMultiplexerDebugPrinter.print(sInfo, nTime);\n\t\t}\n\t}\n}\n"]}