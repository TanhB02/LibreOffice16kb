{"version":3,"file":"SourceEventElement.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/SourceEventElement.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;AAEhC;;;;;;;;GAQG;AAEH;IASC,4BACC,GAAW,EACX,OAA0B,EAC1B,MAAe,EACf,QAAgB,EAChB,UAA4B,EAC5B,iBAAmC;QAX5B,eAAU,GAAqB,IAAI,CAAC;QAEpC,kBAAa,GAAG,KAAK,CAAC;QACtB,mBAAc,GAAG,KAAK,CAAC;QAU9B,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAE7B,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAE3C,IAAI,CAAC,iBAAiB,CAAC,yBAAyB,CAAC,IAAI,EAAE,IAAI,GAAG,QAAQ,CAAC,CAAC;IACzE,CAAC;IAED,kCAAK,GAAL;QACC,OAAO,IAAI,CAAC,GAAG,CAAC;IACjB,CAAC;IAED,wCAAW,GAAX,UAAY,OAAe,EAAE,OAAe;QAC3C,IAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;QAC9C,IAAI,OAAO,KAAK,IAAI,CAAC,cAAc,EAAE;YACpC,IAAI,OAAO;gBAAE,IAAI,CAAC,YAAY,EAAE,CAAC;;gBAC5B,IAAI,CAAC,YAAY,EAAE,CAAC;SACzB;QACD,OAAO,OAAO,CAAC;IAChB,CAAC;IAED,mCAAM,GAAN,UAAO,CAAS,EAAE,CAAS;QAC1B,qEAAqE;QACrE,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,OAAO,CACN,CAAC,IAAI,MAAM,CAAC,CAAC;YACb,CAAC,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK;YAC5B,CAAC,IAAI,MAAM,CAAC,CAAC;YACb,CAAC,IAAI,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAC7B,CAAC;IACH,CAAC;IAED,yCAAY,GAAZ;QACC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACzB,CAAC;IAED,yCAAY,GAAZ;QACC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACzB,CAAC;IAED,mCAAM,GAAN;QACC,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACzB,CAAC;IAED,wCAAW,GAAX,WAAY,eAAe;QAC1B,IAAI,CAAC,IAAI,CAAC,cAAc;YAAE,OAAO,KAAK,CAAC;QAEvC,IAAI,IAAI,CAAC,aAAa;YAAE,OAAO,KAAK,CAAC;QAErC,IAAI,CAAC,iBAAiB,CAAC,WAAW,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;QACvE,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;QAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,OAAO,IAAI,CAAC;IACb,CAAC;IAED,6CAAgB,GAAhB;QACC,IAAI,IAAI,CAAC,aAAa;YAAE,OAAO;QAC/B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;IACvC,CAAC;IAED,6CAAgB,GAAhB;QACC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;IACvC,CAAC;IACF,yBAAC;AAAD,CAAC,AAtFD,IAsFC","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nclass SourceEventElement implements MouseClickHandler {\n\tprivate sId: string;\n\tprivate aCanvas: HTMLCanvasElement;\n\tprivate bounds: DOMRect;\n\tprivate aSlideShow: SlideShowHandler = null;\n\tprivate aEventMultiplexer: EventMultiplexer;\n\tprivate bClickHandled = false;\n\tprivate bIsPointerOver = false;\n\n\tconstructor(\n\t\tsId: string,\n\t\taCanvas: HTMLCanvasElement,\n\t\tbounds: DOMRect,\n\t\tpriority: number,\n\t\taSlideShow: SlideShowHandler,\n\t\taEventMultiplexer: EventMultiplexer,\n\t) {\n\t\tthis.sId = sId;\n\t\tthis.aCanvas = aCanvas;\n\t\tthis.bounds = bounds;\n\t\tthis.aSlideShow = aSlideShow;\n\n\t\tthis.aEventMultiplexer = aEventMultiplexer;\n\n\t\tthis.aEventMultiplexer.registerMouseClickHandler(this, 1000 + priority);\n\t}\n\n\tgetId() {\n\t\treturn this.sId;\n\t}\n\n\tonMouseMove(cursorX: number, cursorY: number): boolean {\n\t\tconst bIsOver = this.isOver(cursorX, cursorY);\n\t\tif (bIsOver !== this.bIsPointerOver) {\n\t\t\tif (bIsOver) this.onMouseEnter();\n\t\t\telse this.onMouseLeave();\n\t\t}\n\t\treturn bIsOver;\n\t}\n\n\tisOver(x: number, y: number): boolean {\n\t\t// console.debug('SourceEventElement.isOver: x: ' + x + ', y: ' + y);\n\t\tconst bounds = this.bounds;\n\t\treturn (\n\t\t\tx >= bounds.x &&\n\t\t\tx <= bounds.x + bounds.width &&\n\t\t\ty >= bounds.y &&\n\t\t\ty <= bounds.y + bounds.height\n\t\t);\n\t}\n\n\tonMouseEnter() {\n\t\tthis.bIsPointerOver = true;\n\t\tthis.setPointerCursor();\n\t}\n\n\tonMouseLeave() {\n\t\tthis.bIsPointerOver = false;\n\t\tthis.setDefaultCursor();\n\t}\n\n\tcharge() {\n\t\tthis.bClickHandled = false;\n\t\tthis.setPointerCursor();\n\t}\n\n\thandleClick(/*aMouseEvent*/) {\n\t\tif (!this.bIsPointerOver) return false;\n\n\t\tif (this.bClickHandled) return false;\n\n\t\tthis.aEventMultiplexer.notifyEvent(EventTrigger.OnClick, this.getId());\n\t\tthis.aSlideShow.update();\n\t\tthis.bClickHandled = true;\n\t\tthis.setDefaultCursor();\n\t\treturn true;\n\t}\n\n\tsetPointerCursor() {\n\t\tif (this.bClickHandled) return;\n\t\tthis.aCanvas.style.cursor = 'pointer';\n\t}\n\n\tsetDefaultCursor() {\n\t\tthis.aCanvas.style.cursor = 'default';\n\t}\n}\n"]}