{"version":3,"file":"MetaSlide.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/MetaSlide.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,0BAA0B;AAE1B;;;;;;;;GAQG;AAEH;IAOC,mBAAY,SAAoB,EAAE,QAA0B;QAC3D,IAAI,CAAC,KAAK,GAAG,SAAS,CAAC;QACvB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,iBAAiB,GAAG,QAAQ,CAAC,gBAAgB,CAAC;QAEnD,IAAI,IAAI,CAAC,aAAa,EAAE;YACvB,IAAI,CAAC,kBAAkB,GAAG,IAAI,eAAe,CAAC,SAAS,CAAC,CAAC;QAE1D,IAAI,SAAS,CAAC,UAAU,EAAE;YACzB,IAAI,CAAC,kBAAkB,GAAG,IAAI,eAAe,CAC5C,IAAI,CAAC,iBAAiB,CAAC,UAAU,EAAE,EACnC,IAAI,CACJ,CAAC;YACF,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YACpE,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;YACpC,OAAO,CAAC,KAAK,CACZ,oBAAgB,IAAI,CAAC,KAAK,CAAC,KAAK,8BAAyB;gBACxD,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CACnC,CAAC;SACF;IACF,CAAC;IAEM,iCAAa,GAApB;QACC,OAAO,yBAAyB,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,KAAK,SAAS,CAAC;IAC3E,CAAC;IAED,sBAAW,2BAAI;aAAf;YACC,OAAO,IAAI,CAAC,KAAK,CAAC;QACnB,CAAC;;;OAAA;IAED,sBAAW,6BAAM;aAAjB;YACC,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;QAC1B,CAAC;;;OAAA;IAED,sBAAW,2BAAI;aAAf;YACC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC5E,CAAC;;;OAAA;IAED,sBAAW,2BAAI;aAAf;YACC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC5E,CAAC;;;OAAA;IAED,sBAAW,wCAAiB;aAA5B;YACC,OAAO,IAAI,CAAC,kBAAkB,CAAC;QAChC,CAAC;;;OAAA;IAED,sBAAW,wCAAiB;aAA5B;YACC,OAAO,IAAI,CAAC,kBAAkB,CAAC;QAChC,CAAC;;;OAAA;IAEM,kCAAc,GAArB,UAAsB,IAAY;QACjC,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;QACrC,IAAI,QAAQ,EAAE;YACb,IAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,UAAC,KAAK,IAAK,OAAA,KAAK,CAAC,IAAI,KAAK,IAAI,EAAnB,CAAmB,CAAC,CAAC;YACjE,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;gBACjB,OAAO;oBACN,MAAM,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC,MAAM;oBAC9B,KAAK,EAAE,KAAK;iBACZ,CAAC;aACF;SACD;QACD,OAAO,IAAI,CAAC;IACb,CAAC;IAEM,wBAAI,GAAX;QACC,sBAAsB;IACvB,CAAC;IAEM,wBAAI,GAAX;QACC,sBAAsB;IACvB,CAAC;IACF,gBAAC;AAAD,CAAC,AA9ED,IA8EC","sourcesContent":["// @ts-strict-ignore\n/* -*- tab-width: 4 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nclass MetaSlide {\n\tprivate _info: SlideInfo;\n\tprivate readonly _metaPres: MetaPresentation;\n\tprivate readonly _slideShowHandler: SlideShowHandler;\n\tprivate _transitionHandler: SlideTransition;\n\tprivate _animationsHandler: SlideAnimations;\n\n\tconstructor(slideInfo: SlideInfo, metaPres: MetaPresentation) {\n\t\tthis._info = slideInfo;\n\t\tthis._metaPres = metaPres;\n\t\tthis._slideShowHandler = metaPres.slideShowHandler;\n\n\t\tif (this.hasTransition())\n\t\t\tthis._transitionHandler = new SlideTransition(slideInfo);\n\n\t\tif (slideInfo.animations) {\n\t\t\tthis._animationsHandler = new SlideAnimations(\n\t\t\t\tthis._slideShowHandler.getContext(),\n\t\t\t\tthis,\n\t\t\t);\n\t\t\tthis._animationsHandler.importAnimations(slideInfo.animations.root);\n\t\t\tthis._animationsHandler.parseInfo();\n\t\t\tconsole.debug(\n\t\t\t\t`\\x1B[1mSlide ${this._info.index} Animation Tree\\x1B[m\\n` +\n\t\t\t\t\tthis._animationsHandler.info(true),\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic hasTransition(): boolean {\n\t\treturn stringToTransitionTypeMap[this._info.transitionType] !== undefined;\n\t}\n\n\tpublic get info(): SlideInfo {\n\t\treturn this._info;\n\t}\n\n\tpublic get hidden(): boolean {\n\t\treturn this._info.hidden;\n\t}\n\n\tpublic get next(): MetaSlide {\n\t\treturn this.info.next ? this._metaPres.getMetaSlide(this.info.next) : null;\n\t}\n\n\tpublic get prev(): MetaSlide {\n\t\treturn this.info.prev ? this._metaPres.getMetaSlide(this.info.prev) : null;\n\t}\n\n\tpublic get transitionHandler(): SlideTransition {\n\t\treturn this._transitionHandler;\n\t}\n\n\tpublic get animationsHandler(): SlideAnimations {\n\t\treturn this._animationsHandler;\n\t}\n\n\tpublic getTriggerInfo(hash: string) {\n\t\tconst triggers = this._info.triggers;\n\t\tif (triggers) {\n\t\t\tconst index = triggers.findIndex((value) => value.hash === hash);\n\t\t\tif (index !== -1) {\n\t\t\t\treturn {\n\t\t\t\t\tbounds: triggers[index].bounds,\n\t\t\t\t\tindex: index,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic show() {\n\t\t// TODO implement it ?\n\t}\n\n\tpublic hide() {\n\t\t// TODO implement it ?\n\t}\n}\n"]}