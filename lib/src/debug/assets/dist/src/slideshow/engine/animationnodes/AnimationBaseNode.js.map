{"version":3,"file":"AnimationBaseNode.js","sourceRoot":"","sources":["../../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/animationnodes/AnimationBaseNode.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,0BAA0B;;;;;;;;;;;;;;;;AAE1B;;;;;;;;GAQG;AAEH;IAAyC,qCAAQ;IAQhD,2BACC,SAA4B,EAC5B,WAA8B,EAC9B,YAAyB;QAH1B,YAKC,kBAAM,SAAS,EAAE,WAAW,EAAE,YAAY,CAAC,SAM3C;QAJA,KAAI,CAAC,UAAU,GAAG,mBAAmB,CAAC;QACtC,KAAI,CAAC,oBAAoB,GAAG,KAAK,CAAC;QAClC,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;IACvB,CAAC;IAEM,yCAAa,GAApB;QACC,iBAAM,aAAa,WAAE,CAAC;QAEtB,yBAAyB;QACzB,IAAM,SAAS,GAAoB,IAAI,CAAC,SAAS,CAAC;QAClD,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,aAAa,CAAC;QAE3C,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACtB,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,OAAO,CAAC;YACvC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,4DAA4D;gBAC3D,SAAS,CAAC,aAAa,CACxB,CAAC;SACF;QAED,6CAA6C;QAC7C,IAAI,CAAC,oBAAoB;YACxB,SAAS,CAAC,OAAO,IAAI,SAAS,CAAC,OAAO,KAAK,UAAU,CAAC;QAEvD,oBAAoB;QACpB,IAAI,SAAS,CAAC,QAAQ,IAAI,SAAS,CAAC,QAAQ,IAAI,YAAY,EAAE;YAC7D,IAAM,SAAS,GAAG,SAAS,CAAC,QAAqC,CAAC;YAClE,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC,SAAS,CAAC,CAAC;SAC7C;aAAM;YACN,IAAI,CAAC,aAAa,GAAG,YAAY,CAAC,OAAO,CAAC;SAC1C;QAED,gCAAgC;QAChC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE;YACjD,CAAC,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE;gBAC9B,gBAAgB,CAAC,0BAA0B;YAC5C,CAAC,CAAC,gBAAgB,CAAC,0BAA0B,CAAC;QAC/C,IAAI,IAAI,CAAC,cAAc,GAAG,GAAG;YAAE,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;aAClD,IAAI,IAAI,CAAC,cAAc,GAAG,gBAAgB,CAAC,0BAA0B;YACzE,IAAI,CAAC,cAAc,GAAG,gBAAgB,CAAC,0BAA0B,CAAC;QAEnE,IAAI,IAAI,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE;gBACjE,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC;gBACxD,IAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,WAAW,CAAC;gBAC1D,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,YAAY,CAAC;gBAE5D,IAAM,gBAAgB,GAAG,IAAI,CAAC,oBAAoB;oBACjD,CAAC,CAAC,IAAI,mBAAmB,CACvB,IAAI,CAAC,WAAW,EAChB,SAAS,EACT,UAAU,EACV,WAAW,CACX;oBACF,CAAC,CAAC,IAAI,eAAe,CACnB,IAAI,CAAC,WAAW,EAChB,SAAS,EACT,UAAU,EACV,WAAW,CACX,CAAC;gBAEJ,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,GAAG,CACxC,IAAI,CAAC,WAAW,EAChB,gBAAgB,CAChB,CAAC;aACF;YACD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,GAAG,CAChE,IAAI,CAAC,WAAW,CAChB,CAAC;YAEF,oBAAoB;YACpB,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SAC1D;IACF,CAAC;IAES,mCAAO,GAAjB;QACC,IAAI,IAAI,CAAC,SAAS;YACjB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;YAC3D,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QAC5C,OAAO,IAAI,CAAC;IACb,CAAC;IAES,sCAAU,GAApB;QACC,OAAO,IAAI,CAAC;IACb,CAAC;IAES,uCAAW,GAArB;QACC,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,0BAA0B,EAAE,CAAC;YAClC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;YACrD,IAAI,IAAI,CAAC,UAAU,EAAE,CAAC,WAAW,EAAE;gBAClC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;aACrB;iBAAM;gBACN,IAAI,CAAC,UAAU,EAAE,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aAC7D;SACD;aAAM;YACN,iBAAM,yBAAyB,WAAE,CAAC;SAClC;IACF,CAAC;IAES,yCAAa,GAAvB,UAAwB,UAAqB;QAC5C,IAAI,UAAU,KAAK,SAAS,CAAC,MAAM,EAAE;YACpC,IAAI,IAAI,CAAC,SAAS;gBAAE,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;SACzC;QACD,IAAI,UAAU,KAAK,SAAS,CAAC,KAAK,EAAE;YACnC,IAAI,IAAI,CAAC,SAAS;gBAAE,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;YAC7C,IAAI,IAAI,CAAC,WAAW,EAAE,KAAK,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBACvE,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;IACF,CAAC;IAIM,8CAAkB,GAAzB;QACC,mBAAmB;QACnB,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,EAAE,EAAE;YACjC,SAAS,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,CAAC;SAC1C;aAAM;YACN,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,gEAAgE,CAChE,CAAC;SACF;QAED,oCAAoC;QACpC,IAAM,iBAAiB,GAAG,IAAI,gBAAgB,EAAE,CAAC;QAEjD,iBAAiB,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACpE,iBAAiB,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC;QACpE,iBAAiB,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC;QAChE,iBAAiB,CAAC,YAAY,GAAG,SAAS,CAAC;QAC3C,iBAAiB,CAAC,kBAAkB,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC/D,iBAAiB,CAAC,YAAY,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC7D,iBAAiB,CAAC,YAAY,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QACvD,iBAAiB,CAAC,qBAAqB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACpE,iBAAiB,CAAC,qBAAqB,GAAG,IAAI,CAAC,kBAAkB,EAAE,CAAC;QACpE,iBAAiB,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,WAAW,CAAC;QACvE,iBAAiB,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,YAAY,CAAC;QAEzE,OAAO,iBAAiB,CAAC;IAC1B,CAAC;IAEM,+CAAmB,GAA1B;QACC,OAAO,IAAI,CAAC;IACb,CAAC;IAEM,sDAA0B,GAAjC;QACC,IAAI,CAAC,kBAAkB,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;IACnD,CAAC;IAEM,wCAAY,GAAnB;QACC,IAAI,CAAC,kBAAkB,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;IACtD,CAAC;IAEM,yCAAa,GAApB;QACC,OAAO,IAAI,CAAC,WAAW,CAAC;IACzB,CAAC;IAEM,8CAAkB,GAAzB;QACC,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC9B,CAAC;IAEM,mCAAO,GAAd;QACC,IAAI,IAAI,CAAC,SAAS;YAAE,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;QAE7C,iBAAM,OAAO,WAAE,CAAC;IACjB,CAAC;IAEM,4CAAgB,GAAvB;QACC,OAAO,IAAI,CAAC,cAAc,CAAC;IAC5B,CAAC;IAEM,2CAAe,GAAtB;QACC,OAAO,IAAI,CAAC,aAAa,CAAC;IAC3B,CAAC;IAEM,gCAAI,GAAX,UAAY,QAAyB;QAAzB,yBAAA,EAAA,gBAAyB;QACpC,IAAI,KAAK,GAAG,iBAAM,IAAI,YAAC,QAAQ,CAAC,CAAC;QAEjC,IAAI,QAAQ,EAAE;YACb,kBAAkB;YAClB,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBAC1B,KAAK,IAAI,sBAAsB,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAC;YAE3D,gBAAgB;YAChB,KAAK,IAAI,eAAe,GAAG,YAAY,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,CAAC;YAEhE,iBAAiB;YACjB,IAAI,IAAI,CAAC,aAAa,EAAE,EAAE;gBACzB,IAAM,OAAO,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;gBACrC,KAAK,IAAI,oBAAoB,GAAG,OAAO,CAAC;aACxC;SACD;QAED,OAAO,KAAK,CAAC;IACd,CAAC;IACF,wBAAC;AAAD,CAAC,AApND,CAAyC,QAAQ,GAoNhD;AAED;IAA0C,sCAAiB;IAI1D,4BACC,SAA4B,EAC5B,WAA8B,EAC9B,YAAyB;QAH1B,YAKC,kBAAM,SAAS,EAAE,WAAW,EAAE,YAAY,CAAC,SAC3C;QATS,mBAAa,GAAW,EAAE,CAAC;QAC7B,cAAQ,GAAW,IAAI,CAAC;;IAQhC,CAAC;IAEM,0CAAa,GAApB;QACC,iBAAM,aAAa,WAAE,CAAC;QAEtB,IAAM,SAAS,GAAoB,IAAI,CAAC,SAAS,CAAC;QAClD,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,aAAa,CAAC;QAC7C,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACxB,IAAI,CAAC,aAAa,GAAG,SAAS,CAAC,OAAO,CAAC;YACvC,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAClB,IAAI,CAAC,UAAU,mDAAgD,CAClE,CAAC;SACF;aAAM;YACN,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;SACtD;QACD,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,EAAE,CAAC;IAC9B,CAAC;IAEM,6CAAgB,GAAvB;QACC,OAAO,IAAI,CAAC,aAAa,CAAC;IAC3B,CAAC;IAEM,uCAAU,GAAjB;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAEM,iCAAI,GAAX,UAAY,OAAgB;QAC3B,IAAI,KAAK,GAAG,iBAAM,IAAI,YAAC,OAAO,CAAC,CAAC;QAEhC,IAAI,OAAO,EAAE;YACZ,IAAI,IAAI,CAAC,gBAAgB,EAAE;gBAC1B,KAAK;oBACJ,4BAA4B,GAAG,IAAI,CAAC,gBAAgB,EAAE,GAAG,QAAQ,CAAC;YAEpE,IAAI,IAAI,CAAC,UAAU,EAAE;gBAAE,KAAK,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;SAC9D;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IACF,yBAAC;AAAD,CAAC,AAhDD,CAA0C,iBAAiB,GAgD1D;AAED;IAA0C,sCAAkB;IAS3D,4BACC,SAA4B,EAC5B,WAA8B,EAC9B,YAAyB;QAH1B,YAKC,kBAAM,SAAS,EAAE,WAAW,EAAE,YAAY,CAAC,SAS3C;QAPA,KAAI,CAAC,WAAW,GAAG,SAAS,CAAC;QAC7B,KAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;;IACtB,CAAC;IAEM,0CAAa,GAApB;QACC,iBAAM,aAAa,WAAE,CAAC;QAEtB,IAAM,SAAS,GAAoB,IAAI,CAAC,SAAS,CAAC;QAElD,qBAAqB;QACrB,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC;QACvC,IAAM,eAAe,GAAG,SAAS,CAAC,UAAU,CAAC;QAC7C,IAAI,eAAe,KAAK,KAAK;YAAE,IAAI,CAAC,WAAW,GAAG,cAAc,CAAC,GAAG,CAAC;QAErE,oBAAoB;QACpB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,MAAM,CAAC;QACjC,IAAI,SAAS,CAAC,QAAQ,IAAI,SAAS,CAAC,QAAQ,IAAI,QAAQ,EAAE;YACzD,IAAM,SAAS,GAAG,SAAS,CAAC,QAAiC,CAAC;YAC9D,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC,CAAC;SACrC;QAED,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC,IAAI,CAAC;QAEjC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,EAAE,CAAC;QAE7B,oBAAoB;QACpB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,aAAa,GAAG,SAAS,CAAC,QAAQ,CAAC;QACvC,aAAa,GAAG,iBAAiB,CAAC,aAAa,CAAC,CAAC;QACjD,IAAI,aAAa,EAAE;YAClB,IAAM,SAAS,GAAG,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC3C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC;gBACxC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC/C;QAED,kBAAkB;QAClB,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAEnE,mBAAmB;QACnB,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,OAAO,CAAC;IACnC,CAAC;IAEM,0CAAa,GAApB;QACC,OAAO,IAAI,CAAC,WAAW,CAAC;IACzB,CAAC;IAEM,wCAAW,GAAlB;QACC,OAAO,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAEM,yCAAY,GAAnB;QACC,OAAO,IAAI,CAAC,UAAU,CAAC;IACxB,CAAC;IAEM,uCAAU,GAAjB;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAEM,wCAAW,GAAlB;QACC,OAAO,IAAI,CAAC,SAAS,CAAC;IACvB,CAAC;IAEM,sCAAS,GAAhB;QACC,OAAO,IAAI,CAAC,OAAO,CAAC;IACrB,CAAC;IAEM,uCAAU,GAAjB;QACC,OAAO,IAAI,CAAC,QAAQ,CAAC;IACtB,CAAC;IAEM,iCAAI,GAAX,UAAY,OAAgB;QAC3B,IAAI,KAAK,GAAG,iBAAM,IAAI,YAAC,OAAO,CAAC,CAAC;QAEhC,IAAI,OAAO,EAAE;YACZ,kBAAkB;YAClB,IAAI,IAAI,CAAC,aAAa,EAAE;gBACvB,KAAK,IAAI,iBAAiB,GAAG,cAAc,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC;YAEnE,WAAW;YACX,KAAK,IAAI,eAAe,GAAG,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;YAExD,OAAO;YACP,IAAI,IAAI,CAAC,YAAY,EAAE;gBAAE,KAAK,IAAI,WAAW,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;YAEpE,KAAK;YACL,IAAI,IAAI,CAAC,UAAU,EAAE;gBAAE,KAAK,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAE9D,WAAW;YACX,IAAI,IAAI,CAAC,WAAW,EAAE,CAAC,MAAM;gBAC5B,KAAK,IAAI,eAAe,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAEzD,SAAS;YACT,IAAI,IAAI,CAAC,SAAS,EAAE,CAAC,MAAM;gBAC1B,KAAK,IAAI,aAAa,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAErD,UAAU;YACV,IAAI,IAAI,CAAC,UAAU,EAAE;gBAAE,KAAK,IAAI,cAAc,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;SACnE;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IACF,yBAAC;AAAD,CAAC,AAzHD,CAA0C,kBAAkB,GAyH3D","sourcesContent":["// @ts-strict-ignore\n/* -*- tab-width: 4 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nabstract class AnimationBaseNode extends BaseNode {\n\tprivate aTargetHash: string;\n\tprivate bIsTargetTextElement: boolean;\n\tprivate aAnimatedElement: AnimatedElement;\n\tprivate aActivity: AnimationActivity;\n\tprivate nMinFrameCount: number;\n\tprivate eAdditiveMode: AdditiveMode;\n\n\tprotected constructor(\n\t\taNodeInfo: AnimationNodeInfo,\n\t\taParentNode: BaseContainerNode,\n\t\taNodeContext: NodeContext,\n\t) {\n\t\tsuper(aNodeInfo, aParentNode, aNodeContext);\n\n\t\tthis.sClassName = 'AnimationBaseNode';\n\t\tthis.bIsTargetTextElement = false;\n\t\tthis.aAnimatedElement = null;\n\t\tthis.aActivity = null;\n\t}\n\n\tpublic parseNodeInfo() {\n\t\tsuper.parseNodeInfo();\n\n\t\t// targetElement property\n\t\tconst aNodeInfo: AnimateNodeInfo = this.aNodeInfo;\n\t\tthis.aTargetHash = aNodeInfo.targetElement;\n\n\t\tif (!this.aTargetHash) {\n\t\t\tthis.eCurrentState = NodeState.Invalid;\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimationBaseNode.parseElement: target element not found: ' +\n\t\t\t\t\taNodeInfo.targetElement,\n\t\t\t);\n\t\t}\n\n\t\t// subItem property for text animated element\n\t\tthis.bIsTargetTextElement =\n\t\t\taNodeInfo.subItem && aNodeInfo.subItem === 'OnlyText';\n\n\t\t// additive property\n\t\tif (aNodeInfo.additive && aNodeInfo.additive in AdditiveMode) {\n\t\t\tconst sAdditive = aNodeInfo.additive as keyof typeof AdditiveMode;\n\t\t\tthis.eAdditiveMode = AdditiveMode[sAdditive];\n\t\t} else {\n\t\t\tthis.eAdditiveMode = AdditiveMode.Replace;\n\t\t}\n\n\t\t// set up min frame count value;\n\t\tthis.nMinFrameCount = this.getDuration().isValue()\n\t\t\t? this.getDuration().getValue() *\n\t\t\t\tSlideShowHandler.MINIMUM_FRAMES_PER_SECONDS\n\t\t\t: SlideShowHandler.MINIMUM_FRAMES_PER_SECONDS;\n\t\tif (this.nMinFrameCount < 1.0) this.nMinFrameCount = 1;\n\t\telse if (this.nMinFrameCount > SlideShowHandler.MINIMUM_FRAMES_PER_SECONDS)\n\t\t\tthis.nMinFrameCount = SlideShowHandler.MINIMUM_FRAMES_PER_SECONDS;\n\n\t\tif (this.aTargetHash) {\n\t\t\tif (!this.aNodeContext.aAnimatedElementMap.has(this.aTargetHash)) {\n\t\t\t\tconst slideHash = this.aNodeContext.metaSlide.info.hash;\n\t\t\t\tconst slideWidth = this.aNodeContext.aContext.nSlideWidth;\n\t\t\t\tconst slideHeight = this.aNodeContext.aContext.nSlideHeight;\n\n\t\t\t\tconst aAnimatedElement = this.bIsTargetTextElement\n\t\t\t\t\t? new AnimatedTextElement(\n\t\t\t\t\t\t\tthis.aTargetHash,\n\t\t\t\t\t\t\tslideHash,\n\t\t\t\t\t\t\tslideWidth,\n\t\t\t\t\t\t\tslideHeight,\n\t\t\t\t\t\t)\n\t\t\t\t\t: new AnimatedElement(\n\t\t\t\t\t\t\tthis.aTargetHash,\n\t\t\t\t\t\t\tslideHash,\n\t\t\t\t\t\t\tslideWidth,\n\t\t\t\t\t\t\tslideHeight,\n\t\t\t\t\t\t);\n\n\t\t\t\tthis.aNodeContext.aAnimatedElementMap.set(\n\t\t\t\t\tthis.aTargetHash,\n\t\t\t\t\taAnimatedElement,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.aAnimatedElement = this.aNodeContext.aAnimatedElementMap.get(\n\t\t\t\tthis.aTargetHash,\n\t\t\t);\n\n\t\t\t// set additive mode\n\t\t\tthis.aAnimatedElement.setAdditiveMode(this.eAdditiveMode);\n\t\t}\n\t}\n\n\tprotected init_st() {\n\t\tif (this.aActivity)\n\t\t\tthis.aActivity.activate(makeEvent(this.deactivate.bind(this)));\n\t\telse this.aActivity = this.createActivity();\n\t\treturn true;\n\t}\n\n\tprotected resolve_st() {\n\t\treturn true;\n\t}\n\n\tprotected activate_st() {\n\t\tif (this.aActivity) {\n\t\t\tthis.saveStateOfAnimatedElement();\n\t\t\tthis.aActivity.setTargets(this.getAnimatedElement());\n\t\t\tif (this.getContext().bIsSkipping) {\n\t\t\t\tthis.aActivity.end();\n\t\t\t} else {\n\t\t\t\tthis.getContext().aActivityQueue.addActivity(this.aActivity);\n\t\t\t}\n\t\t} else {\n\t\t\tsuper.scheduleDeactivationEvent();\n\t\t}\n\t}\n\n\tprotected deactivate_st(eDestState: NodeState) {\n\t\tif (eDestState === NodeState.Frozen) {\n\t\t\tif (this.aActivity) this.aActivity.end();\n\t\t}\n\t\tif (eDestState === NodeState.Ended) {\n\t\t\tif (this.aActivity) this.aActivity.dispose();\n\t\t\tif (this.getFillMode() === FillModes.Remove && this.getAnimatedElement())\n\t\t\t\tthis.removeEffect();\n\t\t}\n\t}\n\n\tpublic abstract createActivity(): AnimationActivity;\n\n\tpublic fillActivityParams() {\n\t\t// compute duration\n\t\tlet nDuration = 0.001;\n\t\tif (this.getDuration().isValue()) {\n\t\t\tnDuration = this.getDuration().getValue();\n\t\t} else {\n\t\t\twindow.app.console.log(\n\t\t\t\t'AnimationBaseNode.fillActivityParams: duration is not a number',\n\t\t\t);\n\t\t}\n\n\t\t// create and set up activity params\n\t\tconst aActivityParamSet = new ActivityParamSet();\n\n\t\taActivityParamSet.aEndEvent = makeEvent(this.deactivate.bind(this));\n\t\taActivityParamSet.aTimerEventQueue = this.aContext.aTimerEventQueue;\n\t\taActivityParamSet.aActivityQueue = this.aContext.aActivityQueue;\n\t\taActivityParamSet.nMinDuration = nDuration;\n\t\taActivityParamSet.nMinNumberOfFrames = this.getMinFrameCount();\n\t\taActivityParamSet.bAutoReverse = this.isAutoReverseEnabled();\n\t\taActivityParamSet.nRepeatCount = this.getRepeatCount();\n\t\taActivityParamSet.nAccelerationFraction = this.getAccelerateValue();\n\t\taActivityParamSet.nDecelerationFraction = this.getDecelerateValue();\n\t\taActivityParamSet.nSlideWidth = this.aNodeContext.aContext.nSlideWidth;\n\t\taActivityParamSet.nSlideHeight = this.aNodeContext.aContext.nSlideHeight;\n\n\t\treturn aActivityParamSet;\n\t}\n\n\tpublic hasPendingAnimation() {\n\t\treturn true;\n\t}\n\n\tpublic saveStateOfAnimatedElement() {\n\t\tthis.getAnimatedElement().saveState(this.getId());\n\t}\n\n\tpublic removeEffect() {\n\t\tthis.getAnimatedElement().restoreState(this.getId());\n\t}\n\n\tpublic getTargetHash() {\n\t\treturn this.aTargetHash;\n\t}\n\n\tpublic getAnimatedElement() {\n\t\treturn this.aAnimatedElement;\n\t}\n\n\tpublic dispose() {\n\t\tif (this.aActivity) this.aActivity.dispose();\n\n\t\tsuper.dispose();\n\t}\n\n\tpublic getMinFrameCount() {\n\t\treturn this.nMinFrameCount;\n\t}\n\n\tpublic getAdditiveMode() {\n\t\treturn this.eAdditiveMode;\n\t}\n\n\tpublic info(bVerbose: boolean = false) {\n\t\tlet sInfo = super.info(bVerbose);\n\n\t\tif (bVerbose) {\n\t\t\t// min frame count\n\t\t\tif (this.getMinFrameCount())\n\t\t\t\tsInfo += ';  min frame count: ' + this.getMinFrameCount();\n\n\t\t\t// additive mode\n\t\t\tsInfo += ';  additive: ' + AdditiveMode[this.getAdditiveMode()];\n\n\t\t\t// target element\n\t\t\tif (this.getTargetHash()) {\n\t\t\t\tconst sElemId = this.getTargetHash();\n\t\t\t\tsInfo += ';  targetElement: ' + sElemId;\n\t\t\t}\n\t\t}\n\n\t\treturn sInfo;\n\t}\n}\n\nabstract class AnimationBaseNode2 extends AnimationBaseNode {\n\tprotected attributeName: string = '';\n\tprivate aToValue: string = null;\n\n\tprotected constructor(\n\t\taNodeInfo: AnimationNodeInfo,\n\t\taParentNode: BaseContainerNode,\n\t\taNodeContext: NodeContext,\n\t) {\n\t\tsuper(aNodeInfo, aParentNode, aNodeContext);\n\t}\n\n\tpublic parseNodeInfo() {\n\t\tsuper.parseNodeInfo();\n\n\t\tconst aNodeInfo: AnimateNodeInfo = this.aNodeInfo;\n\t\tthis.attributeName = aNodeInfo.attributeName;\n\t\tif (!this.attributeName) {\n\t\t\tthis.eCurrentState = NodeState.Invalid;\n\t\t\twindow.app.console.log(\n\t\t\t\t`${this.sClassName}.parseElement: target attribute name not found`,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.attributeName = this.attributeName.toLowerCase();\n\t\t}\n\t\tthis.aToValue = aNodeInfo.to;\n\t}\n\n\tpublic getAttributeName(): string {\n\t\treturn this.attributeName;\n\t}\n\n\tpublic getToValue(): any {\n\t\treturn this.aToValue;\n\t}\n\n\tpublic info(verbose: boolean): string {\n\t\tlet sInfo = super.info(verbose);\n\n\t\tif (verbose) {\n\t\t\tif (this.getAttributeName())\n\t\t\t\tsInfo +=\n\t\t\t\t\t';  \\x1B[31mattributeName: ' + this.getAttributeName() + '\\x1B[m';\n\n\t\t\tif (this.getToValue()) sInfo += ';  to: ' + this.getToValue();\n\t\t}\n\t\treturn sInfo;\n\t}\n}\n\nabstract class AnimationBaseNode3 extends AnimationBaseNode2 {\n\tprivate eAccumulate: AccumulateMode;\n\tprivate eCalcMode: CalcMode;\n\tprivate aFromValue: string;\n\tprivate aByValue: string;\n\tprivate aKeyTimes: Array<number>;\n\tprivate aValues: Array<string>;\n\tprivate aFormula: string;\n\n\tprotected constructor(\n\t\taNodeInfo: AnimationNodeInfo,\n\t\taParentNode: BaseContainerNode,\n\t\taNodeContext: NodeContext,\n\t) {\n\t\tsuper(aNodeInfo, aParentNode, aNodeContext);\n\n\t\tthis.eAccumulate = undefined;\n\t\tthis.eCalcMode = undefined;\n\t\tthis.aFromValue = null;\n\t\tthis.aByValue = null;\n\t\tthis.aKeyTimes = null;\n\t\tthis.aValues = null;\n\t\tthis.aFormula = null;\n\t}\n\n\tpublic parseNodeInfo() {\n\t\tsuper.parseNodeInfo();\n\n\t\tconst aNodeInfo: AnimateNodeInfo = this.aNodeInfo;\n\n\t\t// accumulate propert\n\t\tthis.eAccumulate = AccumulateMode.None;\n\t\tconst sAccumulateAttr = aNodeInfo.accumulate;\n\t\tif (sAccumulateAttr === 'sum') this.eAccumulate = AccumulateMode.Sum;\n\n\t\t// calcMode property\n\t\tthis.eCalcMode = CalcMode.Linear;\n\t\tif (aNodeInfo.calcMode && aNodeInfo.calcMode in CalcMode) {\n\t\t\tconst sCalcMode = aNodeInfo.calcMode as keyof typeof CalcMode;\n\t\t\tthis.eCalcMode = CalcMode[sCalcMode];\n\t\t}\n\n\t\tthis.aFromValue = aNodeInfo.from;\n\n\t\tthis.aByValue = aNodeInfo.by;\n\n\t\t// keyTimes property\n\t\tthis.aKeyTimes = [];\n\t\tlet sKeyTimesAttr = aNodeInfo.keyTimes;\n\t\tsKeyTimesAttr = removeWhiteSpaces(sKeyTimesAttr);\n\t\tif (sKeyTimesAttr) {\n\t\t\tconst aKeyTimes = sKeyTimesAttr.split(';');\n\t\t\tfor (let i = 0; i < aKeyTimes.length; ++i)\n\t\t\t\tthis.aKeyTimes.push(parseFloat(aKeyTimes[i]));\n\t\t}\n\n\t\t// values property\n\t\tthis.aValues = aNodeInfo.values ? aNodeInfo.values.split(';') : [];\n\n\t\t// formula property\n\t\tthis.aFormula = aNodeInfo.formula;\n\t}\n\n\tpublic getAccumulate(): AccumulateMode {\n\t\treturn this.eAccumulate;\n\t}\n\n\tpublic getCalcMode(): CalcMode {\n\t\treturn this.eCalcMode;\n\t}\n\n\tpublic getFromValue(): string {\n\t\treturn this.aFromValue;\n\t}\n\n\tpublic getByValue(): string {\n\t\treturn this.aByValue;\n\t}\n\n\tpublic getKeyTimes(): Array<number> {\n\t\treturn this.aKeyTimes;\n\t}\n\n\tpublic getValues(): Array<string> {\n\t\treturn this.aValues;\n\t}\n\n\tpublic getFormula(): string {\n\t\treturn this.aFormula;\n\t}\n\n\tpublic info(verbose: boolean): string {\n\t\tlet sInfo = super.info(verbose);\n\n\t\tif (verbose) {\n\t\t\t// accumulate mode\n\t\t\tif (this.getAccumulate())\n\t\t\t\tsInfo += ';  accumulate: ' + AccumulateMode[this.getAccumulate()];\n\n\t\t\t// calcMode\n\t\t\tsInfo += ';  calcMode: ' + CalcMode[this.getCalcMode()];\n\n\t\t\t// from\n\t\t\tif (this.getFromValue()) sInfo += ';  from: ' + this.getFromValue();\n\n\t\t\t// by\n\t\t\tif (this.getByValue()) sInfo += ';  by: ' + this.getByValue();\n\n\t\t\t// keyTimes\n\t\t\tif (this.getKeyTimes().length)\n\t\t\t\tsInfo += ';  keyTimes: ' + this.getKeyTimes().join(',');\n\n\t\t\t// values\n\t\t\tif (this.getValues().length)\n\t\t\t\tsInfo += ';  values: ' + this.getValues().join(',');\n\n\t\t\t// formula\n\t\t\tif (this.getFormula()) sInfo += ';  formula: ' + this.getFormula();\n\t\t}\n\t\treturn sInfo;\n\t}\n}\n"]}