{"version":3,"file":"FrameSynchronization.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/FrameSynchronization.ts"],"names":[],"mappings":"AAAA,0BAA0B;AAE1B;;;;;;;;GAQG;AAEH;IAMC,8BAAY,cAAsB;QAJlC,WAAM,GAAG,IAAI,WAAW,EAAE,CAAC;QAC3B,yBAAoB,GAAG,GAAG,CAAC;QAC3B,cAAS,GAAG,KAAK,CAAC;QAGjB,IAAI,CAAC,cAAc,GAAG,cAAc,CAAC;QACrC,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACzB,CAAC;IAED,+CAAgB,GAAhB;QACC,IAAI,CAAC,oBAAoB;YACxB,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,IAAI,CAAC,cAAc,CAAC;IACrD,CAAC;IAED,0CAAW,GAAX;QACC,IAAI,IAAI,CAAC,SAAS,EAAE;YACnB,2BAA2B;YAC3B,OAAO,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,GAAG,IAAI,CAAC,oBAAoB;gBAAC,CAAC;SACjE;QACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;IACzB,CAAC;IAED,uCAAQ,GAAR;QACC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,yCAAU,GAAV;QACC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IACxB,CAAC;IACF,2BAAC;AAAD,CAAC,AA/BD,IA+BC","sourcesContent":["/* -*- tab-width: 4 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nclass FrameSynchronization {\n\tnFrameDuration: number;\n\taTimer = new ElapsedTime();\n\tnNextFrameTargetTime = 0.0;\n\tbIsActive = false;\n\n\tconstructor(nFrameDuration: number) {\n\t\tthis.nFrameDuration = nFrameDuration;\n\t\tthis.markCurrentFrame();\n\t}\n\n\tmarkCurrentFrame() {\n\t\tthis.nNextFrameTargetTime =\n\t\t\tthis.aTimer.getElapsedTime() + this.nFrameDuration;\n\t}\n\n\tsynchronize() {\n\t\tif (this.bIsActive) {\n\t\t\t// Do busy waiting for now.\n\t\t\twhile (this.aTimer.getElapsedTime() < this.nNextFrameTargetTime);\n\t\t}\n\t\tthis.markCurrentFrame();\n\t}\n\n\tactivate() {\n\t\tthis.bIsActive = true;\n\t}\n\n\tdeactivate() {\n\t\tthis.bIsActive = false;\n\t}\n}\n"]}