{"version":3,"file":"SlideShowHandler.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/SlideShowHandler.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- tab-width: 4 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ntype InteractiveAnimationSequenceMap = Map<\n\tnumber,\n\tInteractiveAnimationSequence\n>;\n\nclass SlideShowContext {\n\tpublic aSlideShowHandler: SlideShowHandler;\n\tpublic aTimerEventQueue: TimerEventQueue;\n\tpublic aEventMultiplexer: EventMultiplexer;\n\tpublic aNextEffectEventArray: NextEffectEventArray;\n\tpublic aInteractiveAnimationSequenceMap: InteractiveAnimationSequenceMap;\n\tpublic aActivityQueue: ActivityQueue;\n\tpublic bIsSkipping: boolean;\n\tpublic nSlideWidth: number;\n\tpublic nSlideHeight: number;\n\tpublic aCanvas: HTMLCanvasElement;\n\n\tconstructor(\n\t\taSlideShowHandler: SlideShowHandler,\n\t\taTimerEventQueue: TimerEventQueue,\n\t\taEventMultiplexer: EventMultiplexer,\n\t\taNextEffectEventArray: NextEffectEventArray,\n\t\taInteractiveAnimationSequenceMap: InteractiveAnimationSequenceMap,\n\t\taActivityQueue: ActivityQueue,\n\t) {\n\t\tthis.aSlideShowHandler = aSlideShowHandler;\n\t\tthis.aTimerEventQueue = aTimerEventQueue;\n\t\tthis.aEventMultiplexer = aEventMultiplexer;\n\t\tthis.aNextEffectEventArray = aNextEffectEventArray;\n\t\tthis.aInteractiveAnimationSequenceMap = aInteractiveAnimationSequenceMap;\n\t\tthis.aActivityQueue = aActivityQueue;\n\t\tthis.bIsSkipping = false;\n\t}\n}\n\nclass SlideShowHandler {\n\tpublic static readonly MAXIMUM_FRAME_COUNT: number = 120;\n\tpublic static readonly MINIMUM_TIMEOUT: number =\n\t\t1.0 / SlideShowHandler.MAXIMUM_FRAME_COUNT;\n\tpublic static readonly MAXIMUM_TIMEOUT: number = 4.0;\n\tpublic static readonly MINIMUM_FRAMES_PER_SECONDS: number = 10;\n\tpublic static readonly PREFERRED_FRAMES_PER_SECONDS: number = 60;\n\tpublic static readonly PREFERRED_FRAME_RATE: number =\n\t\t1.0 / SlideShowHandler.PREFERRED_FRAMES_PER_SECONDS;\n\n\tprivate theMetaPres: MetaPresentation;\n\tprivate slideShowNavigator: SlideShowNavigator;\n\tprivate presenter: SlideShowPresenter;\n\tprivate aTimer: ElapsedTime;\n\tprivate aFrameSynchronization: FrameSynchronization;\n\tprivate aTimerEventQueue: TimerEventQueue;\n\tprivate aActivityQueue: ActivityQueue;\n\tprivate aNextEffectEventArray: NextEffectEventArray;\n\tprivate aInteractiveAnimationSequenceMap: InteractiveAnimationSequenceMap;\n\tprivate aEventMultiplexer: EventMultiplexer;\n\tprivate aContext: SlideShowContext;\n\tprivate bIsIdle: boolean;\n\tprivate bIsEnabled: boolean;\n\tprivate bNoSlideTransition: boolean;\n\tprivate bIsTransitionRunning: boolean;\n\tprivate nCurrentEffect: number;\n\tprivate bIsNextEffectRunning: boolean;\n\tprivate bIsRewinding: boolean;\n\tprivate bIsSkipping: boolean;\n\tprivate bIsSkippingAll: boolean;\n\tprivate nTotalInteractivePlayingEffects: number;\n\tprivate aStartedEffectList: Effect[];\n\tprivate aStartedEffectIndexMap: Map<number, number | undefined>;\n\tprivate automaticAdvanceTimeout: number | { rewindedEffect: number };\n\tprivate enteringSlideTexture: WebGLTexture | ImageBitmap;\n\tpublic isStarting: boolean;\n\tprivate bIsFirstAutoEffectRunning: boolean = false;\n\tprivate transitionsWithMipMapEnabled = new Set([\n\t\tTransitionSubType.CORNERSOUT,\n\t\tTransitionSubType.TOPTOBOTTOM,\n\t\tTransitionSubType.LEFTTORIGHT,\n\t\tTransitionSubType.BOTTOMRIGHT,\n\t\tTransitionSubType.BOTTOMLEFT,\n\t\tTransitionSubType.TOPCENTER,\n\t\tTransitionSubType.CORNERSIN,\n\t\tTransitionSubType.TOPLEFT,\n\t\tTransitionSubType.CIRCLE,\n\t\tTransitionSubType.FANOUTHORIZONTAL,\n\t\tTransitionSubType.ACROSS,\n\t\tTransitionSubType.DIAMOND,\n\t\tTransitionSubType.HEART,\n\t]);\n\n\tconstructor(presenter: SlideShowPresenter) {\n\t\tthis.presenter = presenter;\n\n\t\tthis.aTimer = new ElapsedTime();\n\t\tthis.aFrameSynchronization = new FrameSynchronization(\n\t\t\tSlideShowHandler.PREFERRED_FRAME_RATE,\n\t\t);\n\t\tthis.aTimerEventQueue = new TimerEventQueue(this.aTimer);\n\t\tthis.aActivityQueue = new ActivityQueue(this.aTimer);\n\t\tthis.aNextEffectEventArray = null;\n\t\tthis.aInteractiveAnimationSequenceMap = null;\n\t\tthis.aEventMultiplexer = null;\n\n\t\tthis.aContext = new SlideShowContext(\n\t\t\tthis,\n\t\t\tthis.aTimerEventQueue,\n\t\t\tthis.aEventMultiplexer,\n\t\t\tthis.aNextEffectEventArray,\n\t\t\tthis.aInteractiveAnimationSequenceMap,\n\t\t\tthis.aActivityQueue,\n\t\t);\n\n\t\tthis.bIsIdle = true;\n\t\tthis.bIsEnabled = true;\n\t\tthis.bNoSlideTransition = false;\n\t\tthis.bIsTransitionRunning = false;\n\n\t\tthis.nCurrentEffect = 0;\n\t\tthis.bIsNextEffectRunning = false;\n\t\tthis.bIsRewinding = false;\n\t\tthis.bIsSkipping = false;\n\t\tthis.bIsSkippingAll = false;\n\t\tthis.nTotalInteractivePlayingEffects = 0;\n\t\tthis.aStartedEffectList = [];\n\t\tthis.aStartedEffectIndexMap = new Map();\n\t\tthis.aStartedEffectIndexMap.set(-1, undefined);\n\t\tthis.automaticAdvanceTimeout = null;\n\t}\n\n\tprivate get automaticAdvanceTimeoutRewindedEffect(): number {\n\t\tconst automaticAdvanceTimeout = this.automaticAdvanceTimeout as {\n\t\t\trewindedEffect: number;\n\t\t};\n\t\treturn automaticAdvanceTimeout.rewindedEffect;\n\t}\n\n\tsetMetaPresentation(metaPres: MetaPresentation) {\n\t\tthis.theMetaPres = metaPres;\n\t}\n\n\tsetNavigator(slideShowNavigator: SlideShowNavigator) {\n\t\tthis.slideShowNavigator = slideShowNavigator;\n\t}\n\n\tisGlSupported(): boolean {\n\t\treturn !this.presenter._slideRenderer._context.is2dGl();\n\t}\n\n\tsetSlideEvents(\n\t\taNextEffectEventArray: NextEffectEventArray,\n\t\taInteractiveAnimationSequenceMap: InteractiveAnimationSequenceMap,\n\t\taEventMultiplexer: EventMultiplexer,\n\t) {\n\t\tif (!aNextEffectEventArray)\n\t\t\twindow.app.console.log(\n\t\t\t\t'SlideShow.setSlideEvents: aNextEffectEventArray is not valid',\n\t\t\t);\n\n\t\tif (!aInteractiveAnimationSequenceMap)\n\t\t\twindow.app.console.log(\n\t\t\t\t'SlideShow.setSlideEvents:aInteractiveAnimationSequenceMap  is not valid',\n\t\t\t);\n\n\t\tif (!aEventMultiplexer)\n\t\t\twindow.app.console.log(\n\t\t\t\t'SlideShow.setSlideEvents: aEventMultiplexer is not valid',\n\t\t\t);\n\n\t\tthis.aContext.aNextEffectEventArray = aNextEffectEventArray;\n\t\tthis.aNextEffectEventArray = aNextEffectEventArray;\n\t\tthis.aContext.aInteractiveAnimationSequenceMap =\n\t\t\taInteractiveAnimationSequenceMap;\n\t\tthis.aInteractiveAnimationSequenceMap = aInteractiveAnimationSequenceMap;\n\t\tthis.aContext.aEventMultiplexer = aEventMultiplexer;\n\t\tthis.aEventMultiplexer = aEventMultiplexer;\n\t\tthis.nCurrentEffect = 0;\n\t}\n\n\tcreateSlideTransition(\n\t\taSlideTransitionHandler: SlideTransition,\n\t\ttransitionParameters: TransitionParameters,\n\t\taTransitionEndEvent: DelayEvent,\n\t): SimpleActivity {\n\t\tif (this.bNoSlideTransition) return null;\n\n\t\tconst aSlideTransition =\n\t\t\taSlideTransitionHandler.createSlideTransition(transitionParameters);\n\t\tif (!aSlideTransition) return null;\n\n\t\tlet nDuration = 0.001;\n\t\tif (aSlideTransitionHandler.getDuration().isValue()) {\n\t\t\tnDuration = aSlideTransitionHandler.getDuration().getValue();\n\t\t} else {\n\t\t\twindow.app.console.log(\n\t\t\t\t'SlideShow.createSlideTransition: duration is not a number',\n\t\t\t);\n\t\t}\n\n\t\tconst aCommonParameterSet = new ActivityParamSet();\n\t\taCommonParameterSet.aEndEvent = aTransitionEndEvent;\n\t\taCommonParameterSet.aTimerEventQueue = this.aTimerEventQueue;\n\t\taCommonParameterSet.aActivityQueue = this.aActivityQueue;\n\t\taCommonParameterSet.nMinDuration = nDuration;\n\t\taCommonParameterSet.nMinNumberOfFrames =\n\t\t\taSlideTransitionHandler.getMinFrameCount();\n\t\taCommonParameterSet.nSlideWidth = this.theMetaPres.slideWidth;\n\t\taCommonParameterSet.nSlideHeight = this.theMetaPres.slideHeight;\n\n\t\treturn new SimpleActivity(\n\t\t\taCommonParameterSet,\n\t\t\taSlideTransition,\n\t\t\tDirectionType.Forward,\n\t\t);\n\t}\n\n\tisEnabled() {\n\t\treturn this.bIsEnabled;\n\t}\n\n\tdisable() {\n\t\tthis.bIsEnabled = false;\n\t\tthis.dispose();\n\t}\n\n\tisRunning() {\n\t\treturn !this.bIsIdle;\n\t}\n\n\tisTransitionPlaying() {\n\t\treturn this.bIsTransitionRunning;\n\t}\n\n\tisMainEffectPlaying() {\n\t\treturn this.bIsNextEffectRunning;\n\t}\n\n\tisInteractiveEffectPlaying() {\n\t\treturn this.nTotalInteractivePlayingEffects > 0;\n\t}\n\n\tisAnyEffectPlaying() {\n\t\treturn this.isMainEffectPlaying() || this.isInteractiveEffectPlaying();\n\t}\n\n\thasAnyEffectStarted() {\n\t\treturn this.aStartedEffectList.length > 0;\n\t}\n\n\tnotifyNextEffectStart() {\n\t\tassert(\n\t\t\t!this.bIsNextEffectRunning,\n\t\t\t'SlideShowHandler.notifyNextEffectStart: an effect is already started.',\n\t\t);\n\n\t\tANIMDBG.print('SlideShowHandler.notifyNextEffectStart invoked.');\n\t\tthis.bIsNextEffectRunning = true;\n\t\tthis.aEventMultiplexer.registerNextEffectEndHandler(\n\t\t\tthis.notifyNextEffectEnd.bind(this),\n\t\t);\n\t\tconst aEffect = new Effect();\n\t\taEffect.start();\n\t\tthis.aStartedEffectIndexMap.set(-1, this.aStartedEffectList.length);\n\t\tthis.aStartedEffectList.push(aEffect);\n\n\t\tconst sCurSlideHash = this.theMetaPres.getCurrentSlideHash();\n\t\tconst curMetaSlide = this.theMetaPres.getMetaSlide(sCurSlideHash);\n\t\tif (curMetaSlide.animationsHandler) {\n\t\t\tconst aAnimatedElementMap =\n\t\t\t\tcurMetaSlide.animationsHandler.getAnimatedElementMap();\n\t\t\taAnimatedElementMap.forEach((aAnimatedElement: AnimatedElement) => {\n\t\t\t\taAnimatedElement.notifyNextEffectStart(this.nCurrentEffect);\n\t\t\t});\n\t\t}\n\t}\n\n\tnotifyNextEffectEnd() {\n\t\tassert(\n\t\t\tthis.bIsNextEffectRunning,\n\t\t\t'SlideShow.notifyNextEffectEnd: effect already ended.',\n\t\t);\n\n\t\tANIMDBG.print('SlideShowHandler.notifyNextEffectEnd invoked.');\n\t\tthis.bIsNextEffectRunning = false;\n\n\t\tthis.aStartedEffectList[this.aStartedEffectIndexMap.get(-1)].end();\n\t\tif (this.automaticAdvanceTimeout !== null) {\n\t\t\tif (this.automaticAdvanceTimeoutRewindedEffect === this.nCurrentEffect) {\n\t\t\t\tthis.automaticAdvanceTimeout = null;\n\t\t\t\tthis.notifyAnimationsEnd();\n\t\t\t}\n\t\t}\n\t}\n\n\tnotifyAnimationsEnd() {\n\t\tANIMDBG.print(\n\t\t\t'SlideShowHandler.notifyAnimationsEnd: current slide index: ' +\n\t\t\t\tthis.slideShowNavigator.currentSlideIndex,\n\t\t);\n\t\tconst sCurrSlideHash = this.theMetaPres.getCurrentSlideHash();\n\n\t\tif (this.theMetaPres.isLastSlide(sCurrSlideHash)) return;\n\n\t\tassert(\n\t\t\tthis.automaticAdvanceTimeout === null,\n\t\t\t'SlideShow.notifyAnimationsEnd: Timeout already set.',\n\t\t);\n\n\t\tconst slideInfo = this.theMetaPres.getSlideInfo(sCurrSlideHash);\n\n\t\tif (slideInfo?.nextSlideDuration && slideInfo.nextSlideDuration > 0) {\n\t\t\tthis.automaticAdvanceTimeout = window.setTimeout(\n\t\t\t\tthis.slideShowNavigator.switchSlide.bind(\n\t\t\t\t\tthis.slideShowNavigator,\n\t\t\t\t\t1,\n\t\t\t\t\tfalse,\n\t\t\t\t),\n\t\t\t\tslideInfo.nextSlideDuration,\n\t\t\t);\n\t\t}\n\t}\n\n\tnotifySlideStart(nNewSlideIndex: number, nOldSlideIndex: number) {\n\t\tthis.nCurrentEffect = 0;\n\t\tthis.bIsRewinding = false;\n\t\tthis.bIsSkipping = false;\n\t\tthis.bIsSkippingAll = false;\n\t\tthis.nTotalInteractivePlayingEffects = 0;\n\t\tthis.aStartedEffectList = [];\n\t\tthis.aStartedEffectIndexMap = new Map();\n\t\tthis.aStartedEffectIndexMap.set(-1, undefined);\n\n\t\tif (nOldSlideIndex !== undefined) {\n\t\t\tconst metaOldSlide = this.theMetaPres.getMetaSlideByIndex(nOldSlideIndex);\n\t\t\tif (metaOldSlide.animationsHandler) {\n\t\t\t\tconst aAnimatedElementMap =\n\t\t\t\t\tmetaOldSlide.animationsHandler.getAnimatedElementMap();\n\n\t\t\t\taAnimatedElementMap.forEach((aAnimatedElement: AnimatedElement) => {\n\t\t\t\t\taAnimatedElement.notifySlideEnd();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tconst metaNewSlide = this.theMetaPres.getMetaSlideByIndex(nNewSlideIndex);\n\t\tif (metaNewSlide.animationsHandler) {\n\t\t\tconst aAnimatedElementMap =\n\t\t\t\tmetaNewSlide.animationsHandler.getAnimatedElementMap();\n\n\t\t\taAnimatedElementMap.forEach((aAnimatedElement: AnimatedElement) => {\n\t\t\t\taAnimatedElement.notifySlideStart(this.aContext);\n\t\t\t});\n\t\t}\n\t\tthis.slideCompositor.notifyTransitionStart();\n\t\tthis.presenter._map.fire('transitionstart', { slide: nNewSlideIndex });\n\t}\n\n\tnotifyTransitionEnd(nNewSlide: number, nOldSlide: number | undefined) {\n\t\tNAVDBG.print(\n\t\t\t'SlideShowHandler.notifyTransitionEnd: nNewSlide: ' +\n\t\t\t\tnNewSlide +\n\t\t\t\t', nOldSlide: ' +\n\t\t\t\tnOldSlide +\n\t\t\t\t', this.bIsRewinding: ' +\n\t\t\t\tthis.bIsRewinding,\n\t\t);\n\t\tthis.bIsTransitionRunning = false;\n\t\tif (this.bIsRewinding) {\n\t\t\tthis.theMetaPres.getMetaSlideByIndex(nNewSlide).hide();\n\t\t\tthis.slideShowNavigator.rewindToPreviousSlide();\n\t\t\tthis.bIsRewinding = false;\n\t\t\treturn;\n\t\t}\n\n\t\tconst sCurSlideHash = this.theMetaPres.getCurrentSlideHash();\n\t\tthis.slideCompositor.notifyTransitionEnd(sCurSlideHash);\n\n\t\ttry {\n\t\t\tthis.presentSlide(nNewSlide);\n\t\t} catch (message) {\n\t\t\tconsole.error('notifyTransitionEnd: ' + message);\n\t\t}\n\n\t\tthis.presenter._map.fire('transitionend', { slide: nNewSlide });\n\n\t\tthis.enteringSlideTexture = null;\n\t\tthis.isStarting = false;\n\n\t\tif (this.isEnabled()) {\n\t\t\t// clear all queues\n\t\t\tthis.dispose();\n\n\t\t\tconst aCurrentSlide = this.theMetaPres.getMetaSlide(sCurSlideHash);\n\t\t\tif (\n\t\t\t\taCurrentSlide &&\n\t\t\t\taCurrentSlide.animationsHandler &&\n\t\t\t\taCurrentSlide.animationsHandler.elementsParsed()\n\t\t\t) {\n\t\t\t\taCurrentSlide.animationsHandler.start();\n\t\t\t\tthis.aEventMultiplexer.registerAnimationsEndHandler(\n\t\t\t\t\tthis.notifyAnimationsEnd.bind(this),\n\t\t\t\t);\n\t\t\t} else this.notifyAnimationsEnd();\n\n\t\t\tthis.update();\n\t\t} else this.notifyAnimationsEnd();\n\t}\n\n\tnotifyInteractiveAnimationSequenceStart(nNodeId: number) {\n\t\t++this.nTotalInteractivePlayingEffects;\n\t\tconst aEffect = new Effect(nNodeId);\n\t\taEffect.start();\n\t\tthis.aStartedEffectIndexMap.set(nNodeId, this.aStartedEffectList.length);\n\t\tthis.aStartedEffectList.push(aEffect);\n\t}\n\n\tnotifyInteractiveAnimationSequenceEnd(nNodeId: number) {\n\t\tassert(\n\t\t\tthis.isInteractiveEffectPlaying(),\n\t\t\t'SlideShow.notifyInteractiveAnimationSequenceEnd: no interactive effect playing.',\n\t\t);\n\n\t\tthis.aStartedEffectList[this.aStartedEffectIndexMap.get(nNodeId)].end();\n\t\t--this.nTotalInteractivePlayingEffects;\n\t}\n\n\t/** nextEffect\n\t *  Start the next effect belonging to the main animation sequence if any.\n\t *  If there is an already playing effect belonging to any animation sequence\n\t *  it is skipped.\n\t *\n\t *  @return {Boolean}\n\t *      False if there is no more effect to start, true otherwise.\n\t */\n\tnextEffect(): boolean {\n\t\tif (!this.isEnabled()) return false;\n\n\t\tif (this.isTransitionPlaying()) {\n\t\t\tthis.skipTransition();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.isFirstAutoEffectRunning()) {\n\t\t\tthis.skipFirstAutoEffect();\n\t\t\treturn true;\n\t\t}\n\n\t\tANIMDBG.print(\n\t\t\t`SlideShowHandler.nextEffect: current effect: ${this.nCurrentEffect}`,\n\t\t);\n\t\tif (this.isAnyEffectPlaying()) {\n\t\t\tthis.skipAllPlayingEffects();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!this.aNextEffectEventArray) return false;\n\n\t\tif (this.nCurrentEffect >= this.aNextEffectEventArray.size()) return false;\n\n\t\tthis.notifyNextEffectStart();\n\n\t\tthis.aNextEffectEventArray.at(this.nCurrentEffect).fire();\n\t\t++this.nCurrentEffect;\n\t\tthis.update();\n\t\treturn true;\n\t}\n\n\t/** skipTransition\n\t *  Skip the current playing slide transition.\n\t */\n\tskipTransition() {\n\t\tif (this.bIsSkipping || this.bIsRewinding) return;\n\n\t\tthis.bIsSkipping = true;\n\n\t\tthis.aActivityQueue.endAll();\n\t\tthis.aTimerEventQueue.forceEmpty();\n\t\tthis.aActivityQueue.endAll();\n\t\tthis.update();\n\t\tthis.bIsSkipping = false;\n\t}\n\n\t/** skipAllPlayingEffects\n\t *  Skip all playing effect, independently to which animation sequence they\n\t *  belong.\n\t *\n\t */\n\tskipAllPlayingEffects() {\n\t\tif (this.bIsSkipping || this.bIsRewinding) return true;\n\n\t\tthis.bIsSkipping = true;\n\t\t// TODO: The correct order should be based on the left playing time.\n\t\tfor (let i = 0; i < this.aStartedEffectList.length; ++i) {\n\t\t\tconst aEffect = this.aStartedEffectList[i];\n\t\t\tif (aEffect.isPlaying()) {\n\t\t\t\tif (aEffect.isMainEffect())\n\t\t\t\t\tthis.aEventMultiplexer.notifySkipEffectEvent();\n\t\t\t\telse\n\t\t\t\t\tthis.aEventMultiplexer.notifySkipInteractiveEffectEvent(\n\t\t\t\t\t\taEffect.getId(),\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tthis.update();\n\t\tthis.bIsSkipping = false;\n\t\treturn true;\n\t}\n\n\t/** skipNextEffect\n\t *  Skip the next effect to be played (if any) that belongs to the main\n\t *  animation sequence.\n\t *  Require: no effect is playing.\n\t *\n\t *  @return {Boolean}\n\t *      False if there is no more effect to skip, true otherwise.\n\t */\n\tskipNextEffect(): boolean {\n\t\tif (this.bIsSkipping || this.bIsRewinding) return true;\n\t\tANIMDBG.print(\n\t\t\t`SlideShowHandler.skipNextEffect: current effect: ${this.nCurrentEffect}`,\n\t\t);\n\n\t\tassert(!this.isAnyEffectPlaying(), 'SlideShowHandler.skipNextEffect');\n\n\t\tif (!this.aNextEffectEventArray) return false;\n\n\t\tif (this.nCurrentEffect >= this.aNextEffectEventArray.size()) return false;\n\n\t\tthis.notifyNextEffectStart();\n\n\t\tthis.bIsSkipping = true;\n\t\tthis.aNextEffectEventArray.at(this.nCurrentEffect).fire();\n\t\tthis.aEventMultiplexer.notifySkipEffectEvent();\n\t\t++this.nCurrentEffect;\n\t\tthis.update();\n\t\tthis.bIsSkipping = false;\n\t\treturn true;\n\t}\n\n\t/** skipPlayingOrNextEffect\n\t *  Skip the next effect to be played that belongs to the main animation\n\t *  sequence  or all playing effects.\n\t *\n\t *  @return {Boolean}\n\t *      False if there is no more effect to skip, true otherwise.\n\t */\n\tskipPlayingOrNextEffect() {\n\t\tif (this.isTransitionPlaying()) {\n\t\t\tthis.skipTransition();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.isFirstAutoEffectRunning()) {\n\t\t\tthis.skipFirstAutoEffect();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.isAnyEffectPlaying()) return this.skipAllPlayingEffects();\n\t\telse return this.skipNextEffect();\n\t}\n\n\t/** skipAllEffects\n\t *  Skip all left effects that belongs to the main animation sequence and all\n\t *  playing effects on the current slide.\n\t *\n\t *  @return {Boolean}\n\t *      True if it is already skipping or when it has ended skipping,\n\t *      false if the next slide needs to be displayed.\n\t */\n\tskipAllEffects(): boolean {\n\t\tif (this.bIsSkippingAll) return true;\n\n\t\tthis.bIsSkippingAll = true;\n\n\t\tif (this.isTransitionPlaying()) {\n\t\t\tthis.skipTransition();\n\t\t}\n\n\t\tif (this.isFirstAutoEffectRunning()) {\n\t\t\tthis.skipFirstAutoEffect();\n\t\t}\n\n\t\tif (this.isAnyEffectPlaying()) {\n\t\t\tthis.skipAllPlayingEffects();\n\t\t} else if (\n\t\t\t!this.aNextEffectEventArray ||\n\t\t\tthis.nCurrentEffect >= this.aNextEffectEventArray.size()\n\t\t) {\n\t\t\tthis.bIsSkippingAll = false;\n\t\t\treturn false;\n\t\t}\n\n\t\t// Pay attention here: a new next effect event is appended to\n\t\t// aNextEffectEventArray only after the related animation node has been\n\t\t// resolved, that is only after the animation node related to the previous\n\t\t// effect has notified to be deactivated to the main sequence time container.\n\t\t// So you should avoid any optimization here because the size of\n\t\t// aNextEffectEventArray will going on increasing after every skip action.\n\t\twhile (this.nCurrentEffect < this.aNextEffectEventArray.size()) {\n\t\t\tthis.skipNextEffect();\n\t\t}\n\t\tthis.bIsSkippingAll = false;\n\t\treturn true;\n\t}\n\n\t/** rewindTransition\n\t * Rewind the current playing slide transition.\n\t */\n\trewindTransition() {\n\t\tif (this.bIsSkipping || this.bIsRewinding) return;\n\n\t\tthis.bIsRewinding = true;\n\t\tthis.aActivityQueue.endAll();\n\t\tthis.update();\n\t\tthis.bIsRewinding = false;\n\t}\n\n\t/** rewindEffect\n\t *  Rewind all the effects started after at least one of the current playing\n\t *  effects. If there is no playing effect, it rewinds the last played one,\n\t *  both in case it belongs to the main or to an interactive animation sequence.\n\t *\n\t */\n\trewindEffect() {\n\t\tif (this.bIsSkipping || this.bIsRewinding) return;\n\n\t\tif (\n\t\t\tthis.automaticAdvanceTimeout !== null &&\n\t\t\t!this.automaticAdvanceTimeoutRewindedEffect\n\t\t) {\n\t\t\tclearTimeout(this.automaticAdvanceTimeout as number);\n\t\t\tthis.automaticAdvanceTimeout = { rewindedEffect: this.nCurrentEffect };\n\t\t}\n\n\t\tif (!this.hasAnyEffectStarted()) {\n\t\t\tthis.rewindToPreviousSlide();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.bIsRewinding = true;\n\n\t\tlet nFirstPlayingEffectIndex = undefined;\n\n\t\tlet i = 0;\n\t\tfor (; i < this.aStartedEffectList.length; ++i) {\n\t\t\tconst aEffect = this.aStartedEffectList[i];\n\t\t\tif (aEffect.isPlaying()) {\n\t\t\t\tnFirstPlayingEffectIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// There is at least one playing effect.\n\t\tif (nFirstPlayingEffectIndex !== undefined) {\n\t\t\ti = this.aStartedEffectList.length - 1;\n\t\t\tfor (; i >= nFirstPlayingEffectIndex; --i) {\n\t\t\t\tconst aEffect = this.aStartedEffectList[i];\n\t\t\t\tif (aEffect.isPlaying()) {\n\t\t\t\t\tif (aEffect.isMainEffect()) {\n\t\t\t\t\t\tthis.aEventMultiplexer.notifyRewindCurrentEffectEvent();\n\t\t\t\t\t\tif (this.nCurrentEffect > 0) --this.nCurrentEffect;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.aEventMultiplexer.notifyRewindRunningInteractiveEffectEvent(\n\t\t\t\t\t\t\taEffect.getId(),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else if (aEffect.isEnded()) {\n\t\t\t\t\tif (aEffect.isMainEffect()) {\n\t\t\t\t\t\tthis.aEventMultiplexer.notifyRewindLastEffectEvent();\n\t\t\t\t\t\tif (this.nCurrentEffect > 0) --this.nCurrentEffect;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.aEventMultiplexer.notifyRewindEndedInteractiveEffectEvent(\n\t\t\t\t\t\t\taEffect.getId(),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.update();\n\n\t\t\t// Pay attention here: we need to remove all rewinded effects from\n\t\t\t// the started effect list only after updating.\n\t\t\ti = this.aStartedEffectList.length - 1;\n\t\t\tfor (; i >= nFirstPlayingEffectIndex; --i) {\n\t\t\t\tconst aEffect = this.aStartedEffectList.pop();\n\t\t\t\tif (!aEffect.isMainEffect())\n\t\t\t\t\tthis.aStartedEffectIndexMap.delete(aEffect.getId());\n\t\t\t}\n\t\t} // there is no playing effect\n\t\telse {\n\t\t\tconst aEffect = this.aStartedEffectList.pop();\n\t\t\tif (!aEffect.isMainEffect())\n\t\t\t\tthis.aStartedEffectIndexMap.delete(aEffect.getId());\n\t\t\tif (aEffect.isEnded()) {\n\t\t\t\t// Well that is almost an assertion.\n\t\t\t\tif (aEffect.isMainEffect()) {\n\t\t\t\t\tthis.aEventMultiplexer.notifyRewindLastEffectEvent();\n\t\t\t\t\tif (this.nCurrentEffect > 0) --this.nCurrentEffect;\n\t\t\t\t} else {\n\t\t\t\t\tthis.aEventMultiplexer.notifyRewindEndedInteractiveEffectEvent(\n\t\t\t\t\t\taEffect.getId(),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.update();\n\t\t}\n\n\t\tthis.bIsRewinding = false;\n\t}\n\n\t/** rewindToPreviousSlide\n\t *  Displays the previous slide with all effects, that belong to the main\n\t *  animation sequence, played.\n\t *\n\t */\n\trewindToPreviousSlide() {\n\t\tNAVDBG.print('SlideShowHandler.rewindToPreviousSlide');\n\t\tif (this.isFirstAutoEffectRunning()) {\n\t\t\tthis.rewindFirstAutoEffect();\n\t\t}\n\n\t\tif (this.isTransitionPlaying()) {\n\t\t\tthis.rewindTransition();\n\t\t\treturn;\n\t\t}\n\t\tif (this.isAnyEffectPlaying()) return;\n\n\t\tthis.slideShowNavigator.rewindToPreviousSlide();\n\t}\n\n\t/** rewindAllEffects\n\t *  Rewind all effects already played on the current slide.\n\t *\n\t */\n\trewindAllEffects() {\n\t\tif (!this.hasAnyEffectStarted()) {\n\t\t\tthis.rewindToPreviousSlide();\n\t\t\treturn;\n\t\t}\n\n\t\twhile (this.hasAnyEffectStarted()) {\n\t\t\tthis.rewindEffect();\n\t\t}\n\t}\n\n\tcleanLeavingSlideStatus(nOldSlide: number, bSkipSlideTransition: boolean) {\n\t\tconst aMetaDoc = this.theMetaPres;\n\t\tif (nOldSlide !== undefined) {\n\t\t\tthis.slideCompositor.pauseVideos(aMetaDoc.getSlideHash(nOldSlide));\n\n\t\t\tconst oldMetaSlide = aMetaDoc.getMetaSlideByIndex(nOldSlide);\n\t\t\tif (this.isEnabled()) {\n\t\t\t\tif (\n\t\t\t\t\toldMetaSlide.animationsHandler &&\n\t\t\t\t\toldMetaSlide.animationsHandler.isAnimated()\n\t\t\t\t) {\n\t\t\t\t\t// force end animations\n\t\t\t\t\toldMetaSlide.animationsHandler.end(bSkipSlideTransition);\n\n\t\t\t\t\t// clear all queues\n\t\t\t\t\tthis.dispose();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.automaticAdvanceTimeout !== null) {\n\t\t\t\tclearTimeout(this.automaticAdvanceTimeout as number);\n\t\t\t\tthis.automaticAdvanceTimeout = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t// This method must be invoked by SlideShowNavigator.displaySlide only,\n\t// since we need to update the current slide index.\n\tdisplaySlide(\n\t\tnNewSlide: number,\n\t\tnOldSlide: number | undefined,\n\t\tbSkipSlideTransition: boolean,\n\t) {\n\t\tNAVDBG.print(\n\t\t\t'SlideShowHandler.displaySlide: nNewSlide: ' +\n\t\t\t\tnNewSlide +\n\t\t\t\t', nOldSlide: ' +\n\t\t\t\tnOldSlide,\n\t\t);\n\t\tconst aMetaDoc = this.theMetaPres;\n\t\tif (nNewSlide >= aMetaDoc.numberOfSlides) {\n\t\t\tthis.exitSlideShow();\n\t\t}\n\n\t\tif (this.isTransitionPlaying()) {\n\t\t\tthis.skipTransition();\n\t\t}\n\n\t\tif (this.isFirstAutoEffectRunning()) {\n\t\t\tthis.skipFirstAutoEffect();\n\t\t}\n\n\t\t// handle current slide\n\t\tif (nOldSlide !== undefined) {\n\t\t\tthis.cleanLeavingSlideStatus(nOldSlide, bSkipSlideTransition);\n\t\t}\n\n\t\tthis.notifySlideStart(nNewSlide, nOldSlide);\n\n\t\tif (this.isEnabled() && this.isGlSupported() && !bSkipSlideTransition) {\n\t\t\t// create slide transition and add to activity queue\n\t\t\tif (\n\t\t\t\t(nOldSlide === undefined && this.isStarting) ||\n\t\t\t\t(nOldSlide !== undefined && nNewSlide > nOldSlide)\n\t\t\t) {\n\t\t\t\tconst aNewMetaSlide = aMetaDoc.getMetaSlideByIndex(nNewSlide);\n\t\t\t\tconst aSlideTransitionHandler = aNewMetaSlide.transitionHandler;\n\t\t\t\tif (aSlideTransitionHandler && aSlideTransitionHandler.isValid()) {\n\t\t\t\t\tconst aTransitionEndEvent = makeEvent(\n\t\t\t\t\t\tthis.notifyTransitionEnd.bind(this, nNewSlide, nOldSlide),\n\t\t\t\t\t);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst transitionParameters: TransitionParameters =\n\t\t\t\t\t\t\tthis.createTransitionParameters(nNewSlide, nOldSlide);\n\t\t\t\t\t\tthis.enteringSlideTexture = transitionParameters.next;\n\t\t\t\t\t\tconst aTransitionActivity = this.createSlideTransition(\n\t\t\t\t\t\t\taSlideTransitionHandler,\n\t\t\t\t\t\t\ttransitionParameters,\n\t\t\t\t\t\t\taTransitionEndEvent,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (aTransitionActivity) {\n\t\t\t\t\t\t\tthis.bIsTransitionRunning = true;\n\t\t\t\t\t\t\tthis.aActivityQueue.addActivity(aTransitionActivity);\n\t\t\t\t\t\t\tthis.update();\n\t\t\t\t\t\t\tthis.presenter.stopLoader();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (message) {\n\t\t\t\t\t\tconsole.error('displaySlide failed: ' + message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.notifyTransitionEnd(nNewSlide, nOldSlide);\n\t}\n\n\texitSlideShow() {\n\t\t// TODO: implement it;\n\t\tthis.automaticAdvanceTimeout = null;\n\t}\n\n\tupdate() {\n\t\tthis.aTimer.holdTimer();\n\n\t\t// process queues\n\t\tthis.aTimerEventQueue.process();\n\t\tthis.aActivityQueue.process();\n\n\t\tif (!this.bIsTransitionRunning) this.aFrameSynchronization.synchronize();\n\n\t\tthis.aActivityQueue.processDequeued();\n\n\t\tthis.aTimer.releaseTimer();\n\n\t\tconst bActivitiesLeft = !this.aActivityQueue.isEmpty();\n\t\tconst bTimerEventsLeft = !this.aTimerEventQueue.isEmpty();\n\t\tconst bEventsLeft = bActivitiesLeft || bTimerEventsLeft;\n\n\t\tif (bEventsLeft) {\n\t\t\tlet nNextTimeout;\n\t\t\tif (bActivitiesLeft) {\n\t\t\t\tnNextTimeout = SlideShowHandler.MINIMUM_TIMEOUT;\n\t\t\t\tthis.aFrameSynchronization.activate();\n\t\t\t} else {\n\t\t\t\tnNextTimeout = this.aTimerEventQueue.nextTimeout();\n\t\t\t\tif (nNextTimeout < SlideShowHandler.MINIMUM_TIMEOUT)\n\t\t\t\t\tnNextTimeout = SlideShowHandler.MINIMUM_TIMEOUT;\n\t\t\t\telse if (nNextTimeout > SlideShowHandler.MAXIMUM_TIMEOUT)\n\t\t\t\t\tnNextTimeout = SlideShowHandler.MAXIMUM_TIMEOUT;\n\t\t\t\tthis.aFrameSynchronization.deactivate();\n\t\t\t}\n\n\t\t\tthis.bIsIdle = false;\n\t\t\tsetTimeout(this.update.bind(this), nNextTimeout * 1000);\n\t\t} else {\n\t\t\tthis.bIsIdle = true;\n\t\t}\n\t}\n\n\tdispose() {\n\t\t// clear all queues\n\t\tthis.aTimerEventQueue.clear();\n\t\tthis.aActivityQueue.clear();\n\t\tthis.aNextEffectEventArray = null;\n\t\tthis.aEventMultiplexer = null;\n\t\tthis.automaticAdvanceTimeout = null;\n\t}\n\n\tgetContext() {\n\t\treturn this.aContext;\n\t}\n\n\tprivate get slideRenderer(): SlideRenderer {\n\t\treturn this.presenter._slideRenderer;\n\t}\n\tprivate get slideCompositor(): SlideCompositor {\n\t\treturn this.presenter._slideCompositor;\n\t}\n\n\tgetSlideInfo(nSlideIndex: number): SlideInfo {\n\t\treturn this.theMetaPres.getSlideInfoByIndex(nSlideIndex);\n\t}\n\n\tgetAnimatedLayerInfo(\n\t\tslideHash: string,\n\t\ttargetElement: string,\n\t): AnimatedShapeInfo {\n\t\treturn this.slideCompositor.getAnimatedLayerInfo(slideHash, targetElement);\n\t}\n\n\tprivate isMipMapsEnable(transitionFilterInfo: TransitionFilterInfo): boolean {\n\t\treturn (\n\t\t\ttransitionFilterInfo.transitionType === TransitionType.MISCSHAPEWIPE &&\n\t\t\tthis.transitionsWithMipMapEnabled.has(\n\t\t\t\ttransitionFilterInfo.transitionSubtype,\n\t\t\t)\n\t\t);\n\t}\n\n\tprivate getTexture(\n\t\tnSlideIndex: number,\n\t\ttransitionFilterInfo?: TransitionFilterInfo,\n\t): WebGLTexture | ImageBitmap | null {\n\t\tconst slideImage = this.slideCompositor.getSlide(nSlideIndex);\n\t\tif (!slideImage) {\n\t\t\tconsole.error('SlideShowHandler: cannot get texture');\n\t\t\treturn null;\n\t\t}\n\n\t\t// added check for mipmap texture\n\t\tlet isMipMapEnable = false;\n\t\tif (\n\t\t\ttransitionFilterInfo &&\n\t\t\ttransitionFilterInfo.transitionType &&\n\t\t\ttransitionFilterInfo.transitionSubtype\n\t\t) {\n\t\t\tisMipMapEnable = this.isMipMapsEnable(transitionFilterInfo);\n\t\t}\n\t\treturn this.slideRenderer.createTexture(slideImage, isMipMapEnable);\n\t}\n\n\tprivate presentSlide(nSlideIndex: number) {\n\t\tlet slideTexture = this.enteringSlideTexture;\n\t\tif (!slideTexture) slideTexture = this.getTexture(nSlideIndex);\n\t\tthis.slideRenderer.renderSlide(\n\t\t\tslideTexture,\n\t\t\tthis.getSlideInfo(nSlideIndex),\n\t\t);\n\t\tthis.presenter.stopLoader();\n\t}\n\n\tprivate createTransitionParameters(\n\t\tnNewSlide: number,\n\t\tnOldSlide: number,\n\t): TransitionParameters {\n\t\tlet leavingSlideTexture = null;\n\t\tconst transitionFilterInfo = TransitionFilterInfo.fromSlideInfo(\n\t\t\tthis.getSlideInfo(nNewSlide),\n\t\t);\n\t\tif (this.isStarting) {\n\t\t\tleavingSlideTexture = this.slideRenderer.createEmptyTexture();\n\t\t} else {\n\t\t\tleavingSlideTexture =\n\t\t\t\tnOldSlide !== undefined &&\n\t\t\t\tthis.slideRenderer.lastRenderedSlideIndex === nOldSlide\n\t\t\t\t\t? this.slideRenderer.getSlideTexture()\n\t\t\t\t\t: this.getTexture(nOldSlide, transitionFilterInfo);\n\t\t}\n\t\tconst enteringSlideTexture = this.getTexture(\n\t\t\tnNewSlide,\n\t\t\ttransitionFilterInfo,\n\t\t);\n\t\tconst transitionParameters = new TransitionParameters();\n\t\ttransitionParameters.context = this.slideRenderer._context;\n\t\ttransitionParameters.current = leavingSlideTexture;\n\t\ttransitionParameters.next = enteringSlideTexture;\n\t\ttransitionParameters.transitionFilterInfo = transitionFilterInfo;\n\n\t\treturn transitionParameters;\n\t}\n\n\tpublic notifyFirstAutoEffectStarted() {\n\t\tconsole.debug('SlideShowHandler.notifyFirstAutoEffectStarted');\n\t\tthis.bIsFirstAutoEffectRunning = true;\n\t}\n\n\tpublic notifyFirstAutoEffectEnded() {\n\t\tconsole.debug('SlideShowHandler.notifyFirstAutoEffectEnded');\n\t\tthis.bIsFirstAutoEffectRunning = false;\n\t}\n\n\tpublic isFirstAutoEffectRunning() {\n\t\treturn this.bIsFirstAutoEffectRunning;\n\t}\n\n\tprivate skipFirstAutoEffect() {\n\t\tconsole.debug('SlideShowHandler.skipFirstAutoEffect');\n\t\tthis.bIsSkipping = true;\n\t\tthis.aEventMultiplexer.notifySkipEffectEvent();\n\t\tthis.update();\n\t\tthis.bIsSkipping = false;\n\t\t// empty body\n\t}\n\n\tprivate rewindFirstAutoEffect() {\n\t\tthis.bIsRewinding = true;\n\t\tthis.aEventMultiplexer.notifyRewindCurrentEffectEvent();\n\t\tthis.update();\n\t\tthis.bIsRewinding = false;\n\t}\n}\n"]}