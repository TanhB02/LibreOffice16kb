{"version":3,"file":"SetActivity.js","sourceRoot":"","sources":["../../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/activities/SetActivity.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nclass SetActivity extends AnimationActivity {\n\tprivate aAnimation: AnimationBase;\n\tprivate aTargetElement: null;\n\tprivate aEndEvent: DelayEvent;\n\tprivate aTimerEventQueue: TimerEventQueue;\n\tprivate aToAttr: any;\n\tprivate bIsActive: boolean;\n\n\tconstructor(\n\t\taCommonParamSet: ActivityParamSet,\n\t\taAnimationNode: AnimationSetNode,\n\t\taAnimation: AnimationBase,\n\t) {\n\t\tsuper();\n\n\t\tthis.aAnimation = aAnimation;\n\t\tthis.aTargetElement = null;\n\t\tthis.aEndEvent = aCommonParamSet.aEndEvent;\n\t\tthis.aTimerEventQueue = aCommonParamSet.aTimerEventQueue;\n\t\tthis.bIsActive = true;\n\n\t\tconst aAnimatedElement = aAnimationNode.getAnimatedElement();\n\t\tconst sAttributeName = aAnimationNode.getAttributeName();\n\t\tconst sKey = sAttributeName as PropertyGetterSetterMapKeyType;\n\t\tconst aAttributeProp = aPropertyGetterSetterMap[sKey];\n\n\t\tconst eValueType: PropertyValueType = aAttributeProp['type'];\n\n\t\tconst aValueSet = [aAnimationNode.getToValue()];\n\n\t\tANIMDBG.print(\n\t\t\t'SetActivity: value type: ' +\n\t\t\t\tPropertyValueType[eValueType] +\n\t\t\t\t', aTo = ' +\n\t\t\t\taValueSet[0],\n\t\t);\n\n\t\tconst aValueList: any[] = [];\n\n\t\textractAttributeValues(\n\t\t\teValueType,\n\t\t\taValueList,\n\t\t\taValueSet,\n\t\t\taAnimatedElement.getBaseBBox(),\n\t\t\taCommonParamSet.nSlideWidth,\n\t\t\taCommonParamSet.nSlideHeight,\n\t\t);\n\n\t\tANIMDBG.print('SetActivity ctor: aTo = ' + aValueList[0]);\n\n\t\tthis.aToAttr = aValueList[0];\n\t}\n\n\tpublic activate(aEndEvent: DelayEvent) {\n\t\tthis.aEndEvent = aEndEvent;\n\t\tthis.bIsActive = true;\n\t}\n\n\tpublic dispose() {\n\t\tthis.bIsActive = false;\n\t\tif (this.aEndEvent && this.aEndEvent.isCharged()) this.aEndEvent.dispose();\n\t}\n\n\tpublic calcTimeLag() {\n\t\treturn 0.0;\n\t}\n\n\tpublic perform() {\n\t\tif (!this.isActive()) return false;\n\n\t\t// we're going inactive immediately:\n\t\tthis.bIsActive = false;\n\n\t\tif (this.aAnimation && this.aTargetElement) {\n\t\t\tthis.aAnimation.start(this.aTargetElement);\n\t\t\tthis.aAnimation.perform(this.aToAttr);\n\t\t\tthis.aAnimation.end();\n\t\t}\n\n\t\tif (this.aEndEvent) this.aTimerEventQueue.addEvent(this.aEndEvent);\n\t}\n\n\tpublic isActive() {\n\t\treturn this.bIsActive;\n\t}\n\n\tpublic dequeued() {\n\t\t// empty body\n\t}\n\n\tpublic end() {\n\t\tthis.perform();\n\t}\n\n\tpublic setTargets(aTargetElement: any) {\n\t\tassert(\n\t\t\taTargetElement,\n\t\t\t'SetActivity.setTargets: target element is not valid',\n\t\t);\n\t\tthis.aTargetElement = aTargetElement;\n\t}\n}\n"]}