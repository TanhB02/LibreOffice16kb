{"version":3,"file":"AnimationFactory.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/AnimationFactory.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- tab-width: 4 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ntype GetterType = () => any;\ntype SetterType = (x: any) => any;\n\nabstract class AnimationBase {\n\tpublic abstract start(aAnimatableElement: AnimatedElement): void;\n\n\tpublic abstract perform(aValue: any, last?: boolean): void;\n\n\tpublic abstract end(): void;\n\n\tpublic abstract getUnderlyingValue(): any;\n}\n\nclass GenericAnimation extends AnimationBase {\n\tprotected readonly aGetValueFunc: GetterType;\n\tprotected readonly aSetValueFunc: SetterType;\n\tprivate readonly aGetModifier: SetterType;\n\tprivate readonly aSetModifier: SetterType;\n\tprivate aAnimatableElement: AnimatedElement;\n\tprivate bAnimationStarted: boolean;\n\n\tconstructor(\n\t\taGetValueFunc: GetterType,\n\t\taSetValueFunc: SetterType,\n\t\taGetModifier?: SetterType,\n\t\taSetModifier?: SetterType,\n\t) {\n\t\tsuper();\n\n\t\tassert(\n\t\t\taGetValueFunc && aSetValueFunc,\n\t\t\t'GenericAnimation constructor: get value functor and/or set value functor are not valid',\n\t\t);\n\n\t\tthis.aGetValueFunc = aGetValueFunc;\n\t\tthis.aSetValueFunc = aSetValueFunc;\n\t\tthis.aGetModifier = aGetModifier;\n\t\tthis.aSetModifier = aSetModifier;\n\t\tthis.aAnimatableElement = null;\n\t\tthis.bAnimationStarted = false;\n\t}\n\n\tstart(aAnimatableElement: any): void {\n\t\tassert(\n\t\t\taAnimatableElement,\n\t\t\t'GenericAnimation.start: animatable element is not valid',\n\t\t);\n\n\t\tthis.aAnimatableElement = aAnimatableElement;\n\t\tthis.aAnimatableElement.notifyAnimationStart();\n\n\t\tif (!this.bAnimationStarted) this.bAnimationStarted = true;\n\t}\n\n\tend(): void {\n\t\tif (this.bAnimationStarted) {\n\t\t\tthis.bAnimationStarted = false;\n\t\t\tthis.aAnimatableElement.notifyAnimationEnd();\n\t\t}\n\t}\n\n\tperform(aValue: any): void {\n\t\tif (this.aSetModifier) aValue = this.aSetModifier(aValue);\n\n\t\tthis.aSetValueFunc(aValue);\n\t}\n\n\tgetUnderlyingValue(): any {\n\t\tlet aValue = this.aGetValueFunc();\n\t\tif (this.aGetModifier) aValue = this.aGetModifier(aValue);\n\t\treturn aValue;\n\t}\n}\n\nclass TupleAnimation extends GenericAnimation {\n\tprivate aDefaultValue: any[];\n\tprivate aReferenceSize: any[];\n\n\tconstructor(\n\t\taGetValueFunc: GetterType,\n\t\taSetValueFunc: SetterType,\n\t\taDefaultValue: any[],\n\t\taReferenceSize: any[],\n\t) {\n\t\tsuper(aGetValueFunc, aSetValueFunc);\n\n\t\tassert(\n\t\t\taDefaultValue && aReferenceSize,\n\t\t\t'TupleAnimation constructor: default value functor and/or reference size are not valid',\n\t\t);\n\n\t\tthis.aDefaultValue = aDefaultValue;\n\t\tthis.aReferenceSize = aReferenceSize;\n\t}\n\n\tperform(aNormValue: any[]): void {\n\t\tassert(\n\t\t\taNormValue.length === this.aReferenceSize.length,\n\t\t\t'TupleAnimation.perform: aNormValue array param has wrong length',\n\t\t);\n\n\t\tconst aValue: any[] = [];\n\t\tfor (let i = 0; i < aNormValue.length; ++i) {\n\t\t\taValue.push(aNormValue[i] * this.aReferenceSize[i]);\n\t\t}\n\n\t\tthis.aSetValueFunc(aValue);\n\t}\n\n\tgetUnderlyingValue(): any {\n\t\tconst aValue: any[] = this.aGetValueFunc();\n\t\tassert(\n\t\t\taValue.length === this.aReferenceSize.length,\n\t\t\t'TupleAnimation.perform: array param has wrong length',\n\t\t);\n\n\t\tconst aNormValue: any[] = [];\n\t\tfor (let i = 0; i < aValue.length; ++i) {\n\t\t\taNormValue.push(aValue[i] / this.aReferenceSize[i]);\n\t\t}\n\t\treturn aNormValue;\n\t}\n}\n\nclass HSLAnimationWrapper implements AnimationBase {\n\tprivate aAnimation: AnimationBase;\n\n\tconstructor(aColorAnimation: AnimationBase) {\n\t\tthis.aAnimation = aColorAnimation;\n\t}\n\n\tstart(aAnimatableElement: AnimatedElement) {\n\t\tthis.aAnimation.start(aAnimatableElement);\n\t}\n\n\tend() {\n\t\tthis.aAnimation.end();\n\t}\n\n\tperform(aHSLValue: HSLColor) {\n\t\tthis.aAnimation.perform(aHSLValue.convertToRGB());\n\t}\n\n\tgetUnderlyingValue() {\n\t\treturn this.aAnimation.getUnderlyingValue().convertToHSL();\n\t}\n}\n\nfunction createPropertyAnimation(\n\tsAttrName: string,\n\taAnimatedElement: AnimatedElement,\n\tnWidth: number,\n\tnHeight: number,\n): AnimationBase {\n\tconst sPropNameAsKey = sAttrName as PropertyGetterSetterMapKeyType;\n\tif (!aPropertyGetterSetterMap[sPropNameAsKey]) {\n\t\twindow.app.console.log(\n\t\t\t'createPropertyAnimation: attribute is unknown: ' + sAttrName,\n\t\t);\n\t\treturn null;\n\t}\n\n\tconst aFunctorSet: PropertyGetterSetter =\n\t\taPropertyGetterSetterMap[sPropNameAsKey];\n\n\tconst sGetValueMethod = aFunctorSet.get;\n\tconst sSetValueMethod = aFunctorSet.set;\n\n\tif (!sGetValueMethod || !sSetValueMethod) {\n\t\twindow.app.console.log('createPropertyAnimation: attribute is not handled');\n\t\treturn null;\n\t}\n\n\t// nWidth, nHeight are used here\n\tconst aGetModifier = eval(aFunctorSet.getmod);\n\tconst aSetModifier = eval(aFunctorSet.setmod);\n\n\tconst aGetValueMethod =\n\t\taAnimatedElement[sGetValueMethod as keyof typeof aAnimatedElement];\n\tconst aSetValueMethod =\n\t\taAnimatedElement[sSetValueMethod as keyof typeof aAnimatedElement];\n\treturn new GenericAnimation(\n\t\taGetValueMethod.bind(aAnimatedElement),\n\t\taSetValueMethod.bind(aAnimatedElement),\n\t\taGetModifier,\n\t\taSetModifier,\n\t);\n}\n\nfunction createPairPropertyAnimation(\n\tsTransformType: string,\n\taAnimatedElement: AnimatedElement,\n\tnWidth: number,\n\tnHeight: number,\n): AnimationBase {\n\tconst sTransformTypeAsKey = sTransformType as PropertyGetterSetterMapKeyType;\n\tconst aFunctorSet: PropertyGetterSetter =\n\t\taPropertyGetterSetterMap[sTransformTypeAsKey];\n\tconst sGetValueMethod = aFunctorSet.get;\n\tconst sSetValueMethod = aFunctorSet.set;\n\n\tconst aDefaultValue: any[] = [];\n\tconst aSizeReference: any[] = [];\n\tif (sTransformType === 'scale') {\n\t\taDefaultValue[0] = aSizeReference[0] = aAnimatedElement.getBaseBBox().width;\n\t\taDefaultValue[1] = aSizeReference[1] =\n\t\t\taAnimatedElement.getBaseBBox().height;\n\t} else if (sTransformType === 'translate') {\n\t\taDefaultValue[0] = aAnimatedElement.getBaseCenterX();\n\t\taDefaultValue[1] = aAnimatedElement.getBaseCenterY();\n\t\taSizeReference[0] = nWidth;\n\t\taSizeReference[1] = nHeight;\n\t} else {\n\t\twindow.app.console.log(\n\t\t\t'createPairPropertyAnimation: transform type is not handled',\n\t\t);\n\t\treturn null;\n\t}\n\n\tconst aGetValueMethod =\n\t\taAnimatedElement[sGetValueMethod as keyof typeof aAnimatedElement];\n\tconst aSetValueMethod =\n\t\taAnimatedElement[sSetValueMethod as keyof typeof aAnimatedElement];\n\treturn new TupleAnimation(\n\t\taGetValueMethod.bind(aAnimatedElement),\n\t\taSetValueMethod.bind(aAnimatedElement),\n\t\taDefaultValue,\n\t\taSizeReference,\n\t);\n}\n\nclass TransitionFilterAnimation extends AnimationBase {\n\tprivate nNodeId: number;\n\tprivate aTransitionFilterInfo: TransitionFilterInfo;\n\tprivate aAnimatableElement: AnimatedElement;\n\tprivate bAnimationStarted: boolean;\n\tprivate aTransition: TransitionBase;\n\n\tconstructor(\n\t\tnNodeId: number,\n\t\ttransitionFilterInfo: TransitionFilterInfo,\n\t\taAnimatableElement: AnimatedElement,\n\t) {\n\t\tassert(\n\t\t\taAnimatableElement,\n\t\t\t'TransitionFilterAnimation: animatable element is not valid',\n\t\t);\n\t\tANIMDBG.print(\n\t\t\t'TransitionFilterAnimation: Animated Element Id: ' +\n\t\t\t\taAnimatableElement.getId(),\n\t\t);\n\n\t\tsuper();\n\n\t\tthis.nNodeId = nNodeId;\n\t\tthis.aTransitionFilterInfo = transitionFilterInfo;\n\t\tthis.aAnimatableElement = aAnimatableElement;\n\t\tthis.bAnimationStarted = false;\n\t\tthis.aTransition = null;\n\t}\n\n\tgetNodeId() {\n\t\treturn this.nNodeId;\n\t}\n\n\tstart(aAnimatableElement: AnimatedElement): void {\n\t\tassert(\n\t\t\tthis.aAnimatableElement.getId() === aAnimatableElement.getId(),\n\t\t\t'TransitionFilterAnimation: animatable element mismatch',\n\t\t);\n\n\t\tif (!this.aTransition) {\n\t\t\tconst transitionParameters = this.createTransitionParameters(\n\t\t\t\tthis.aAnimatableElement,\n\t\t\t\tthis.aTransitionFilterInfo,\n\t\t\t);\n\t\t\tthis.aTransition = this.createShapeTransition(transitionParameters);\n\t\t}\n\n\t\tthis.aAnimatableElement.notifyAnimationStart();\n\t\tif (!this.bAnimationStarted) this.bAnimationStarted = true;\n\t}\n\n\tend(): void {\n\t\tif (this.bAnimationStarted) {\n\t\t\tthis.bAnimationStarted = false;\n\t\t\tthis.aAnimatableElement.notifyAnimationEnd();\n\t\t}\n\t}\n\n\tperform(nT: number): void {\n\t\tthis.aAnimatableElement.setTransitionFilterFrame(this, nT);\n\t}\n\n\trenderFrame(nT: number, properties?: AnimatedElementRenderProperties): void {\n\t\tif (this.aTransition) {\n\t\t\tthis.aTransition.renderFrame(nT, properties);\n\t\t}\n\t}\n\n\tnotifySlideEnd(): void {\n\t\t// clean up resources\n\t\tif (this.aTransition) {\n\t\t\tthis.aTransition.end();\n\t\t\tthis.aTransition = null;\n\t\t}\n\t}\n\n\tgetUnderlyingValue(): any {\n\t\treturn 0.0;\n\t}\n\n\tprivate createTransitionParameters(\n\t\taAnimatedElement: AnimatedElement,\n\t\ttransitionFilterInfo: TransitionFilterInfo,\n\t) {\n\t\tconst transitionParameters = new TransitionParameters();\n\t\taAnimatedElement.setTransitionParameters(transitionParameters);\n\t\ttransitionParameters.transitionFilterInfo = transitionFilterInfo;\n\t\treturn transitionParameters;\n\t}\n\n\tprivate createShapeTransition(\n\t\ttransitionParameters: TransitionParameters,\n\t): TransitionBase {\n\t\treturn createTransition(transitionParameters, /*isSlideTransition*/ false);\n\t}\n}\n\nclass PathAnimation extends AnimationBase {\n\tprivate path: string;\n\tprivate eAdditive: AdditiveMode;\n\tprivate slideWidth: number;\n\tprivate slideHeight: number;\n\tprivate aAnimatableElement: AnimatedElement;\n\tprivate bAnimationStarted: boolean;\n\tprivate centerX: number;\n\tprivate centerY: number;\n\tprivate svgPath: SVGPathElement;\n\tprivate pathLength: number;\n\n\tconstructor(\n\t\tpath: string,\n\t\teAdditive: AdditiveMode,\n\t\tslideWidth: number,\n\t\tslideHeight: number,\n\t) {\n\t\tsuper();\n\t\tthis.path = path;\n\t\tthis.eAdditive = eAdditive;\n\t\tthis.slideWidth = slideWidth;\n\t\tthis.slideHeight = slideHeight;\n\n\t\tthis.svgPath = this.createSvgPath(path);\n\t\tthis.pathLength = this.svgPath.getTotalLength();\n\t}\n\n\tstart(aAnimatableElement: AnimatedElement): void {\n\t\tassert(\n\t\t\taAnimatableElement,\n\t\t\t'GenericAnimation.start: animatable element is not valid',\n\t\t);\n\n\t\tthis.aAnimatableElement = aAnimatableElement;\n\t\tthis.centerX = this.aAnimatableElement.getBaseCenterX();\n\t\tthis.centerY = this.aAnimatableElement.getBaseCenterY();\n\n\t\tthis.aAnimatableElement.notifyAnimationStart();\n\n\t\tif (!this.bAnimationStarted) this.bAnimationStarted = true;\n\t}\n\n\tend(): void {\n\t\tif (this.bAnimationStarted) {\n\t\t\tthis.bAnimationStarted = false;\n\t\t\tthis.aAnimatableElement.notifyAnimationEnd();\n\t\t}\n\t}\n\n\tperform(nT: number): void {\n\t\tlet aOutPos = this.parametricPath(nT);\n\t\taOutPos = [aOutPos[0] * this.slideWidth, aOutPos[1] * this.slideHeight];\n\t\taOutPos = [aOutPos[0] + this.centerX, aOutPos[1] + this.centerY];\n\n\t\tthis.aAnimatableElement.setPos(aOutPos);\n\t}\n\n\tgetUnderlyingValue(): any {\n\t\treturn 0.0;\n\t}\n\n\tprivate createSvgPath(path: string): SVGPathElement {\n\t\tconst svgPath = document.createElementNS(\n\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t'path',\n\t\t);\n\t\tsvgPath.setAttribute('d', path);\n\t\treturn svgPath;\n\t}\n\n\tprivate parametricPath(nT: number): [number, number] {\n\t\tconst distance = this.pathLength * nT;\n\t\tconst point = this.svgPath.getPointAtLength(distance);\n\t\treturn [point.x, point.y];\n\t}\n}\n\nfunction createShapeTransition(\n\taActivityParamSet: ActivityParamSet,\n\taAnimatedElement: AnimatedElement,\n\tnSlideWidth: number,\n\tnSlideHeight: number,\n\taAnimatedTransitionFilterNode: AnimationTransitionFilterNode,\n): AnimationActivity {\n\tif (!aAnimatedTransitionFilterNode) {\n\t\twindow.app.console.log(\n\t\t\t'createShapeTransition: the animated transition filter node is not valid.',\n\t\t);\n\t\treturn null;\n\t}\n\tconst eTransitionType = aAnimatedTransitionFilterNode.getTransitionType();\n\tconst eTransitionSubType =\n\t\taAnimatedTransitionFilterNode.getTransitionSubtype();\n\tconst bDirectionForward =\n\t\t!aAnimatedTransitionFilterNode.getReverseDirection();\n\tconst bModeIn =\n\t\taAnimatedTransitionFilterNode.getTransitionMode() == TransitionMode.in;\n\n\tconst transitionFilterInfo = new TransitionFilterInfo(\n\t\teTransitionType,\n\t\teTransitionSubType,\n\t\tbDirectionForward,\n\t\tbModeIn,\n\t);\n\n\tlet aTransitionInfo = null;\n\tif (aTransitionInfoTable[eTransitionType])\n\t\taTransitionInfo = aTransitionInfoTable[eTransitionType][eTransitionSubType];\n\n\tconst eTransitionClass: TransitionClass = aTransitionInfo\n\t\t? aTransitionInfo['class']\n\t\t: TransitionClass.Invalid;\n\n\tswitch (eTransitionClass) {\n\t\tdefault:\n\t\tcase TransitionClass.Invalid:\n\t\t\twindow.app.console.log(\n\t\t\t\t'createShapeTransition: transition class: TRANSITION_INVALID',\n\t\t\t);\n\t\t\treturn null;\n\n\t\tcase TransitionClass.ClipPoligon: {\n\t\t\tconst aClippingAnimation = new TransitionFilterAnimation(\n\t\t\t\taAnimatedTransitionFilterNode.getId(),\n\t\t\t\ttransitionFilterInfo,\n\t\t\t\taAnimatedElement,\n\t\t\t);\n\n\t\t\treturn new SimpleActivity(\n\t\t\t\taActivityParamSet,\n\t\t\t\taClippingAnimation,\n\t\t\t\tDirectionType.Forward,\n\t\t\t);\n\t\t}\n\n\t\tcase TransitionClass.Special:\n\t\t\tswitch (eTransitionType) {\n\t\t\t\t// map SLIDEWIPE to BARWIPE, for now\n\t\t\t\tcase TransitionType.SLIDEWIPE: {\n\t\t\t\t\tlet subtype = TransitionSubType.DEFAULT;\n\t\t\t\t\tlet isForwardDirection = true;\n\t\t\t\t\tswitch (eTransitionSubType) {\n\t\t\t\t\t\tcase TransitionSubType.FROMLEFT:\n\t\t\t\t\t\t\tsubtype = TransitionSubType.LEFTTORIGHT;\n\t\t\t\t\t\t\tisForwardDirection = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase TransitionSubType.FROMRIGHT:\n\t\t\t\t\t\t\tsubtype = TransitionSubType.LEFTTORIGHT;\n\t\t\t\t\t\t\tisForwardDirection = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase TransitionSubType.FROMTOP:\n\t\t\t\t\t\t\tsubtype = TransitionSubType.TOPTOBOTTOM;\n\t\t\t\t\t\t\tisForwardDirection = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase TransitionSubType.FROMBOTTOM:\n\t\t\t\t\t\t\tsubtype = TransitionSubType.TOPTOBOTTOM;\n\t\t\t\t\t\t\tisForwardDirection = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\twindow.app.console.log(\n\t\t\t\t\t\t\t\t'createShapeTransition: unexpected subtype for SLIDEWIPE',\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\ttransitionFilterInfo.transitionType = TransitionType.BARWIPE;\n\t\t\t\t\ttransitionFilterInfo.transitionSubtype = subtype;\n\t\t\t\t\ttransitionFilterInfo.isDirectionForward = isForwardDirection;\n\n\t\t\t\t\tconst aClippingAnimation = new TransitionFilterAnimation(\n\t\t\t\t\t\taAnimatedTransitionFilterNode.getId(),\n\t\t\t\t\t\ttransitionFilterInfo,\n\t\t\t\t\t\taAnimatedElement,\n\t\t\t\t\t);\n\n\t\t\t\t\treturn new SimpleActivity(\n\t\t\t\t\t\taActivityParamSet,\n\t\t\t\t\t\taClippingAnimation,\n\t\t\t\t\t\tDirectionType.Forward,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\t// we map everything else to crossfade\n\t\t\t\tdefault: {\n\t\t\t\t\treturn createCrossFadeTransition(\n\t\t\t\t\t\taActivityParamSet,\n\t\t\t\t\t\taAnimatedElement,\n\t\t\t\t\t\tnSlideWidth,\n\t\t\t\t\t\tnSlideHeight,\n\t\t\t\t\t\tbModeIn,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t}\n}\n\nfunction createCrossFadeTransition(\n\taActivityParamSet: ActivityParamSet,\n\taAnimatedElement: AnimatedElement,\n\tnSlideWidth: number,\n\tnSlideHeight: number,\n\tbModeIn: boolean,\n): AnimationActivity {\n\tconst aAnimation = createPropertyAnimation(\n\t\t'opacity',\n\t\taAnimatedElement,\n\t\tnSlideWidth,\n\t\tnSlideHeight,\n\t);\n\tconst eDirection = bModeIn ? DirectionType.Forward : DirectionType.Backward;\n\treturn new SimpleActivity(aActivityParamSet, aAnimation, eDirection);\n}\n"]}