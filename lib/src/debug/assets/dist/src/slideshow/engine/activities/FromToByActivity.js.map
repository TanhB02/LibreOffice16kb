{"version":3,"file":"FromToByActivity.js","sourceRoot":"","sources":["../../../../../../../../../../../../TanhX/online/browser/src/slideshow/engine/activities/FromToByActivity.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;;;;;;;;;;;;;;;;AAEhC;;;;;;;;GAQG;AAEH,SAAS,wBAAwB,CAChC,QAAW;IAEX;QAAwC,oCAAQ;QAkB/C;YAAY,cAAc;iBAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;gBAAd,yBAAc;;YAA1B,iBA0CC;YAzCA,MAAM,CACL,IAAI,CAAC,MAAM,KAAK,CAAC,EACjB,oDAAoD,CACpD,CAAC;YAEF,IAAM,UAAU,GAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;YAChC,IAAM,QAAQ,GAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAM,QAAQ,GAAQ,IAAI,CAAC,CAAC,CAAC,CAAC;YAC9B,IAAM,iBAAiB,GAAqB,IAAI,CAAC,CAAC,CAAC,CAAC;YACpD,IAAM,UAAU,GAAkB,IAAI,CAAC,CAAC,CAAC,CAAC;YAC1C,IAAM,aAAa,GAA6B,IAAI,CAAC,CAAC,CAAC,CAAC;YACxD,IAAM,YAAY,GAAwB,IAAI,CAAC,CAAC,CAAC,CAAC;YAClD,IAAM,WAAW,GAAY,IAAI,CAAC,CAAC,CAAC,CAAC;YAErC,QAAA,kBACC,UAAU,EACV,QAAQ,EACR,QAAQ,EACR,iBAAiB,EACjB,UAAU,EACV,aAAa,EACb,YAAY,EACZ,WAAW,CACX,SAAC;YAEF,KAAI,CAAC,KAAK,GAAG,UAAU,CAAC;YACxB,KAAI,CAAC,GAAG,GAAG,QAAQ,CAAC;YACpB,KAAI,CAAC,GAAG,GAAG,QAAQ,CAAC;YACpB,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,KAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,KAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;YACrC,KAAI,CAAC,UAAU,GAAG,UAAU,CAAC;YAC7B,KAAI,CAAC,aAAa,GAAG,aAAa,CAAC;YACnC,KAAI,CAAC,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC;YAChC,KAAI,CAAC,GAAG,GAAG,YAAY,CAAC,GAAG,CAAC;YAC5B,KAAI,CAAC,KAAK,GAAG,YAAY,CAAC,KAAK,CAAC;YAChC,KAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;YAChC,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC;YACpB,KAAI,CAAC,WAAW,GAAG,WAAW,CAAC;YAC/B,KAAI,CAAC,QAAQ,GAAG,iBAAiB,CAAC,QAAQ,CAAC;;QAC5C,CAAC;QAEM,8CAAmB,GAA1B;YACC,IAAI,IAAI,CAAC,UAAU,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gBAC5C,IAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;gBACtE,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aAChC;QACF,CAAC;QAEM,yCAAc,GAArB;YACC,IAAI,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBAC1C,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,2EAA2E,CAC3E,CAAC;gBACF,OAAO;aACP;YAED,iBAAM,cAAc,WAAE,CAAC;YAEvB,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAC;YAE/C,IAAM,oBAAoB,GAAG,IAAI,CAAC,UAAU,CAAC,kBAAkB,EAAE,CAAC;YAElE,0CAA0C;YAC1C,wDAAwD;YACxD,sBAAsB;YACtB,sEAAsE;YACtE,mBAAmB;YACnB,IAAI,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;gBACzB,6CAA6C;gBAC7C,2CAA2C;gBAC3C,2CAA2C;gBAC3C,IAAI,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;oBACvB,oBAAoB;oBACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;oBAC9B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC;iBAC1B;qBAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;oBAC9B,oBAAoB;oBACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;oBAE9B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;iBACtD;gBACD,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,WAAW,CAAC;aACjD;iBAAM;gBACN,IAAI,CAAC,WAAW,GAAG,oBAAoB,CAAC;gBACxC,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,WAAW,CAAC;gBAEjD,8CAA8C;gBAC9C,4CAA4C;gBAC5C,+BAA+B;gBAC/B,IAAI,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;oBACvB,eAAe;oBAEf,6BAA6B;oBAC7B,wEAAwE;oBACxE,wCAAwC;oBACxC,qEAAqE;oBACrE,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;oBAC/B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC;oBACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC;iBAC1B;qBAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;oBAC9B,eAAe;oBACf,IAAI,CAAC,WAAW,GAAG,oBAAoB,CAAC;oBAExC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;iBACtD;aACD;YAED,OAAO,CAAC,KAAK,CACZ,iDAAiD;gBAChD,IAAI,CAAC,WAAW;gBAChB,gBAAgB;gBAChB,IAAI,CAAC,SAAS,CACf,CAAC;QACH,CAAC;QAEM,uCAAY,GAAnB;YACC,IAAI,IAAI,CAAC,UAAU;gBAAE,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;QAC5C,CAAC;QAED,mDAAmD;QAC5C,gDAAqB,GAA5B,UAA6B,aAAqB,EAAE,YAAoB;YACvE,IAAI,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBAC1C,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,kFAAkF,CAClF,CAAC;gBACF,OAAO;aACP;YAED,yEAAyE;YACzE,4EAA4E;YAC5E,yEAAyE;YACzE,kEAAkE;YAClE,uBAAuB;YACvB,qEAAqE;YACrE,4EAA4E;YAC5E,qEAAqE;YACrE,wDAAwD;YACxD,iEAAiE;YACjE,0EAA0E;YAC1E,wCAAwC;YACxC,OAAO;YACP,yEAAyE;YACzE,uDAAuD;YACvD,oEAAoE;YACpE,iEAAiE;YACjE,uDAAuD;YACvD,+DAA+D;YAC/D,2DAA2D;YAC3D,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBAC5B,IAAI,IAAI,CAAC,UAAU,IAAI,YAAY,EAAE;oBACpC,IAAI,CAAC,UAAU,GAAG,YAAY,CAAC;oBAC/B,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC,WAAW,CAAC;iBACjD;qBAAM;oBACN,IAAM,YAAY,GAAG,IAAI,CAAC,UAAU,CAAC,kBAAkB,EAAE,CAAC;oBAC1D,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,cAAc,CAAC;wBACjD,IAAI,CAAC,wBAAwB,GAAG,YAAY,CAAC;iBAC9C;aACD;YAED,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,CAC9B,IAAI,CAAC,wBAAwB,EAC7B,IAAI,CAAC,SAAS,EACd,aAAa,CACb,CAAC;YAEF,8BAA8B;YAC9B,mEAAmE;YACnE,6DAA6D;YAC7D,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;gBACjD,mDAAmD;gBACnD,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,CAAC,CAAC;aACpE;YAED,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YACxD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAEhC,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBAC5B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,UAAU,CAAC,kBAAkB,EAAE,CAAC;aAC3D;QACF,CAAC;QAED,iDAAiD;QAC1C,8CAAmB,GAA1B,WAA2B,wBAAwB;YAClD,IAAI,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;gBAC1C,MAAM,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CACrB,gFAAgF,CAChF,CAAC;gBACF,OAAO;aACP;QACF,CAAC;QAEM,qCAAU,GAAjB;YACC,IAAI,IAAI,CAAC,UAAU,EAAE;gBACpB,IAAI,MAAM,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC;gBACtE,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;gBACxD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;aAChC;QACF,CAAC;QAEM,kCAAO,GAAd;YACC,iBAAM,OAAO,WAAE,CAAC;QACjB,CAAC;QACF,uBAAC;IAAD,CAAC,AA/ND,CAAwC,QAAQ,GA+N/C;IAED,OAAO,gBAAgB,CAAC;AACzB,CAAC;AAED;IAA2D,uDAAsB;IAChF,6CACC,UAAe,EACf,QAAa,EACb,QAAa,EACb,iBAAmC,EACnC,UAAyB,EACzB,aAAuC,EACvC,YAAiC,EACjC,WAAoB;eAEpB,kBAAM,iBAAiB,CAAC;IACzB,CAAC;IACF,0CAAC;AAAD,CAAC,AAbD,CAA2D,sBAAsB,GAahF;AAED,IAAM,8BAA8B,GAAG,wBAAwB,CAC9D,mCAAmC,CACnC,CAAC;AAEF;IAAqC,0CAA8B;IAAnE;;IAAqE,CAAC;IAAD,6BAAC;AAAD,CAAC,AAAtE,CAAqC,8BAA8B,GAAG;AAEtE;IAAyD,qDAAoB;IAC5E,2CACC,UAAe,EACf,QAAa,EACb,QAAa,EACb,iBAAmC,EACnC,UAAyB,EACzB,aAAuC,EACvC,YAAiC,EACjC,WAAoB;eAEpB,kBAAM,iBAAiB,CAAC;IACzB,CAAC;IACF,wCAAC;AAAD,CAAC,AAbD,CAAyD,oBAAoB,GAa5E;AAED,IAAM,gCAAgC,GAAG,wBAAwB,CAChE,iCAAiC,CACjC,CAAC;AAEF;IAAuC,4CAAgC;IAAvE;;IAAyE,CAAC;IAAD,+BAAC;AAAD,CAAC,AAA1E,CAAuC,gCAAgC,GAAG","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\nfunction FromToByActivityTemplate<T extends AGConstructor<ActivityBase>>(\n\tBaseType: T,\n) {\n\tabstract class FromToByActivity extends BaseType {\n\t\tprivate aFrom: any;\n\t\tprivate aTo: any;\n\t\tprivate aBy: any;\n\t\tprivate aStartValue: any;\n\t\tprivate aEndValue: any;\n\t\tprivate aPreviousValue: any;\n\t\tprivate aStartInterpolationValue: any;\n\t\tprivate aAnimation: AnimationBase;\n\t\tprivate aInterpolator: PropertyInterpolatorType;\n\t\tprivate equal: (a: any, b: any) => boolean;\n\t\tprivate add: (a: any, b: any) => any;\n\t\tprivate scale: (k: any, v: any) => any;\n\t\tprivate bDynamicStartValue: boolean;\n\t\tprivate nIteration: number;\n\t\tprivate bCumulative: boolean;\n\t\tprivate aFormula: (x: any) => any;\n\n\t\tconstructor(...args: any[]) {\n\t\t\tassert(\n\t\t\t\targs.length === 8,\n\t\t\t\t'FromToByActivity, constructor args length is wrong',\n\t\t\t);\n\n\t\t\tconst aFromValue: any = args[0];\n\t\t\tconst aToValue: any = args[1];\n\t\t\tconst aByValue: any = args[2];\n\t\t\tconst aActivityParamSet: ActivityParamSet = args[3];\n\t\t\tconst aAnimation: AnimationBase = args[4];\n\t\t\tconst aInterpolator: PropertyInterpolatorType = args[5];\n\t\t\tconst aOperatorSet: PropertyOperatorSet = args[6];\n\t\t\tconst bAccumulate: boolean = args[7];\n\n\t\t\tsuper(\n\t\t\t\taFromValue,\n\t\t\t\taToValue,\n\t\t\t\taByValue,\n\t\t\t\taActivityParamSet,\n\t\t\t\taAnimation,\n\t\t\t\taInterpolator,\n\t\t\t\taOperatorSet,\n\t\t\t\tbAccumulate,\n\t\t\t);\n\n\t\t\tthis.aFrom = aFromValue;\n\t\t\tthis.aTo = aToValue;\n\t\t\tthis.aBy = aByValue;\n\t\t\tthis.aStartValue = null;\n\t\t\tthis.aEndValue = null;\n\t\t\tthis.aPreviousValue = null;\n\t\t\tthis.aStartInterpolationValue = null;\n\t\t\tthis.aAnimation = aAnimation;\n\t\t\tthis.aInterpolator = aInterpolator;\n\t\t\tthis.equal = aOperatorSet.equal;\n\t\t\tthis.add = aOperatorSet.add;\n\t\t\tthis.scale = aOperatorSet.scale;\n\t\t\tthis.bDynamicStartValue = false;\n\t\t\tthis.nIteration = 0;\n\t\t\tthis.bCumulative = bAccumulate;\n\t\t\tthis.aFormula = aActivityParamSet.aFormula;\n\t\t}\n\n\t\tpublic initAnimatedElement() {\n\t\t\tif (this.aAnimation && hasValue(this.aFrom)) {\n\t\t\t\tconst aValue = this.aFormula ? this.aFormula(this.aFrom) : this.aFrom;\n\t\t\t\tthis.aAnimation.perform(aValue);\n\t\t\t}\n\t\t}\n\n\t\tpublic startAnimation() {\n\t\t\tif (this.isDisposed() || !this.aAnimation) {\n\t\t\t\twindow.app.console.log(\n\t\t\t\t\t'FromToByActivity.startAnimation: activity disposed or not valid animation',\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsuper.startAnimation();\n\n\t\t\tthis.aAnimation.start(this.getTargetElement());\n\n\t\t\tconst aAnimationStartValue = this.aAnimation.getUnderlyingValue();\n\n\t\t\t// first of all, determine general type of\n\t\t\t// animation, by inspecting which of the FromToBy values\n\t\t\t// are actually valid.\n\t\t\t// See http://www.w3.org/TR/smil20/animation.html#AnimationNS-FromToBy\n\t\t\t// for a definition\n\t\t\tif (hasValue(this.aFrom)) {\n\t\t\t\t// From-to or From-by animation. According to\n\t\t\t\t// SMIL spec, the To value takes precedence\n\t\t\t\t// over the By value, if both are specified\n\t\t\t\tif (hasValue(this.aTo)) {\n\t\t\t\t\t// From-To animation\n\t\t\t\t\tthis.aStartValue = this.aFrom;\n\t\t\t\t\tthis.aEndValue = this.aTo;\n\t\t\t\t} else if (hasValue(this.aBy)) {\n\t\t\t\t\t// From-By animation\n\t\t\t\t\tthis.aStartValue = this.aFrom;\n\n\t\t\t\t\tthis.aEndValue = this.add(this.aStartValue, this.aBy);\n\t\t\t\t}\n\t\t\t\tthis.aStartInterpolationValue = this.aStartValue;\n\t\t\t} else {\n\t\t\t\tthis.aStartValue = aAnimationStartValue;\n\t\t\t\tthis.aStartInterpolationValue = this.aStartValue;\n\n\t\t\t\t// By or To animation. According to SMIL spec,\n\t\t\t\t// the To value takes precedence over the By\n\t\t\t\t// value, if both are specified\n\t\t\t\tif (hasValue(this.aTo)) {\n\t\t\t\t\t// To animation\n\n\t\t\t\t\t// According to the SMIL spec\n\t\t\t\t\t// (http://www.w3.org/TR/smil20/animation.html#animationNS-ToAnimation),\n\t\t\t\t\t// the to animation interpolates between\n\t\t\t\t\t// the _running_ underlying value and the to value (as the end value)\n\t\t\t\t\tthis.bDynamicStartValue = true;\n\t\t\t\t\tthis.aPreviousValue = this.aStartValue;\n\t\t\t\t\tthis.aEndValue = this.aTo;\n\t\t\t\t} else if (hasValue(this.aBy)) {\n\t\t\t\t\t// By animation\n\t\t\t\t\tthis.aStartValue = aAnimationStartValue;\n\n\t\t\t\t\tthis.aEndValue = this.add(this.aStartValue, this.aBy);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tANIMDBG.print(\n\t\t\t\t'FromToByActivity.startAnimation: aStartValue = ' +\n\t\t\t\t\tthis.aStartValue +\n\t\t\t\t\t', aEndValue = ' +\n\t\t\t\t\tthis.aEndValue,\n\t\t\t);\n\t\t}\n\n\t\tpublic endAnimation() {\n\t\t\tif (this.aAnimation) this.aAnimation.end();\n\t\t}\n\n\t\t// perform hook override for ContinuousActivityBase\n\t\tpublic performContinuousHook(nModifiedTime: number, nRepeatCount: number) {\n\t\t\tif (this.isDisposed() || !this.aAnimation) {\n\t\t\t\twindow.app.console.log(\n\t\t\t\t\t'FromToByActivity.performContinuousHook: activity disposed or not valid animation',\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// According to SMIL 3.0 spec 'to' animation if no other (lower priority)\n\t\t\t// animations are active or frozen then a simple interpolation is performed.\n\t\t\t// That is, the start interpolation value is constant while the animation\n\t\t\t// is running, and is equal to the underlying value retrieved when\n\t\t\t// the animation start.\n\t\t\t// However if another animation is manipulating the underlying value,\n\t\t\t// the 'to' animation will initially add to the effect of the lower priority\n\t\t\t// animation, and increasingly dominate it as it nears the end of the\n\t\t\t// simple duration, eventually overriding it completely.\n\t\t\t// That is, each time the underlying value is changed between two\n\t\t\t// computations of the animation function the new underlying value is used\n\t\t\t// as start value for the interpolation.\n\t\t\t// See:\n\t\t\t// http://www.w3.org/TR/SMIL3/smil-animation.html#animationNS-ToAnimation\n\t\t\t// (Figure 6 - Effect of Additive to animation example)\n\t\t\t// Moreover when a 'to' animation is repeated, at each new iteration\n\t\t\t// the start interpolation value is reset to the underlying value\n\t\t\t// of the animated property when the animation started,\n\t\t\t// as it is shown in the example provided by the SMIL 3.0 spec.\n\t\t\t// This is exactly as Firefox performs SVG 'to' animations.\n\t\t\tif (this.bDynamicStartValue) {\n\t\t\t\tif (this.nIteration != nRepeatCount) {\n\t\t\t\t\tthis.nIteration = nRepeatCount;\n\t\t\t\t\tthis.aStartInterpolationValue = this.aStartValue;\n\t\t\t\t} else {\n\t\t\t\t\tconst aActualValue = this.aAnimation.getUnderlyingValue();\n\t\t\t\t\tif (!this.equal(aActualValue, this.aPreviousValue))\n\t\t\t\t\t\tthis.aStartInterpolationValue = aActualValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet aValue = this.aInterpolator(\n\t\t\t\tthis.aStartInterpolationValue,\n\t\t\t\tthis.aEndValue,\n\t\t\t\tnModifiedTime,\n\t\t\t);\n\n\t\t\t// According to the SMIL spec:\n\t\t\t// Because 'to' animation is defined in terms of absolute values of\n\t\t\t// the target attribute, cumulative animation is not defined.\n\t\t\tif (this.bCumulative && !this.bDynamicStartValue) {\n\t\t\t\t// aValue = this.aEndValue * nRepeatCount + aValue;\n\t\t\t\taValue = this.add(this.scale(nRepeatCount, this.aEndValue), aValue);\n\t\t\t}\n\n\t\t\taValue = this.aFormula ? this.aFormula(aValue) : aValue;\n\t\t\tthis.aAnimation.perform(aValue);\n\n\t\t\tif (this.bDynamicStartValue) {\n\t\t\t\tthis.aPreviousValue = this.aAnimation.getUnderlyingValue();\n\t\t\t}\n\t\t}\n\n\t\t// perform hook override for DiscreteActivityBase\n\t\tpublic performDiscreteHook(/*nFrame, nRepeatCount*/) {\n\t\t\tif (this.isDisposed() || !this.aAnimation) {\n\t\t\t\twindow.app.console.log(\n\t\t\t\t\t'FromToByActivity.performDiscreteHook: activity disposed or not valid animation',\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tpublic performEnd() {\n\t\t\tif (this.aAnimation) {\n\t\t\t\tlet aValue = this.isAutoReverse() ? this.aStartValue : this.aEndValue;\n\t\t\t\taValue = this.aFormula ? this.aFormula(aValue) : aValue;\n\t\t\t\tthis.aAnimation.perform(aValue);\n\t\t\t}\n\t\t}\n\n\t\tpublic dispose() {\n\t\t\tsuper.dispose();\n\t\t}\n\t}\n\n\treturn FromToByActivity;\n}\n\nabstract class ContinuousActivityBaserFromToByCtor extends ContinuousActivityBase {\n\tconstructor(\n\t\taFromValue: any,\n\t\taToValue: any,\n\t\taByValue: any,\n\t\taActivityParamSet: ActivityParamSet,\n\t\taAnimation: AnimationBase,\n\t\taInterpolator: PropertyInterpolatorType,\n\t\taOperatorSet: PropertyOperatorSet,\n\t\tbAccumulate: boolean,\n\t) {\n\t\tsuper(aActivityParamSet);\n\t}\n}\n\nconst AbstractLinearFromToByActivity = FromToByActivityTemplate(\n\tContinuousActivityBaserFromToByCtor,\n);\n\nclass LinearFromToByActivity extends AbstractLinearFromToByActivity {}\n\nabstract class DiscreteActivityBaserFromToByCtor extends DiscreteActivityBase {\n\tconstructor(\n\t\taFromValue: any,\n\t\taToValue: any,\n\t\taByValue: any,\n\t\taActivityParamSet: ActivityParamSet,\n\t\taAnimation: AnimationBase,\n\t\taInterpolator: PropertyInterpolatorType,\n\t\taOperatorSet: PropertyOperatorSet,\n\t\tbAccumulate: boolean,\n\t) {\n\t\tsuper(aActivityParamSet);\n\t}\n}\n\nconst AbstractDiscreteFromToByActivity = FromToByActivityTemplate(\n\tDiscreteActivityBaserFromToByCtor,\n);\n\nclass DiscreteFromToByActivity extends AbstractDiscreteFromToByActivity {}\n\ntype FromToByActivityCtorType = new (\n\taFromValue: any,\n\taToValue: any,\n\taByValue: any,\n\taActivityParamSet: ActivityParamSet,\n\taAnimation: AnimationBase,\n\taInterpolator: PropertyInterpolatorType,\n\taOperatorSet: PropertyOperatorSet,\n\tbAccumulate: boolean,\n) => ActivityBase;\n"]}