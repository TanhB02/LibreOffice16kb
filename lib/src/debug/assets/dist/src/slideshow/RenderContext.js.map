{"version":3,"file":"RenderContext.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/slideshow/RenderContext.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ndeclare var SlideShow: any;\n\nabstract class RenderContext {\n\tpublic canvas: HTMLCanvasElement | OffscreenCanvas;\n\tprotected gl:\n\t\t| WebGL2RenderingContext\n\t\t| CanvasRenderingContext2D\n\t\t| OffscreenCanvasRenderingContext2D;\n\n\tprotected disposed = false;\n\n\tconstructor(canvas: HTMLCanvasElement | OffscreenCanvas) {\n\t\tthis.canvas = canvas;\n\t}\n\n\tpublic getGl(): WebGL2RenderingContext {\n\t\treturn this.gl as WebGL2RenderingContext;\n\t}\n\n\tpublic get2dGl(): CanvasRenderingContext2D {\n\t\treturn this.gl instanceof CanvasRenderingContext2D ? this.gl : null;\n\t}\n\n\tpublic get2dOffscreen(): OffscreenCanvasRenderingContext2D {\n\t\treturn this.gl instanceof OffscreenCanvasRenderingContext2D\n\t\t\t? this.gl\n\t\t\t: null;\n\t}\n\n\tpublic isDisposed() {\n\t\treturn this.disposed;\n\t}\n\n\tpublic createTextureWithColor(color: RGBAArray): WebGLTexture | ImageBitmap {\n\t\treturn null;\n\t}\n\n\tpublic createEmptySlide(): WebGLTexture | ImageBitmap {\n\t\treturn null;\n\t}\n\n\tpublic createTransparentTexture(): WebGLTexture | ImageBitmap {\n\t\treturn null;\n\t}\n\n\tpublic abstract is2dGl(): boolean;\n\n\tpublic abstract clear(): void;\n\n\tpublic abstract loadTexture(\n\t\timage: HTMLImageElement,\n\t\tisMipMapEnable?: boolean,\n\t): WebGLTexture | ImageBitmap;\n\n\tpublic abstract deleteTexture(texture: WebGLTexture | ImageBitmap): void;\n\n\tpublic abstract deleteVertexArray(vao: WebGLVertexArrayObject): void;\n\n\tpublic abstract createVertexShader(source: string): WebGLShader;\n\n\tpublic abstract createFragmentShader(source: string): WebGLShader;\n\n\tpublic abstract createShader(type: number, source: string): WebGLShader;\n\n\tpublic abstract createProgram(\n\t\tvertexShader: WebGLShader,\n\t\tfragmentShader: WebGLShader,\n\t): WebGLProgram;\n}\n\nclass RenderContextGl extends RenderContext {\n\tconstructor(canvas: HTMLCanvasElement | OffscreenCanvas) {\n\t\tsuper(canvas);\n\t\tthis.gl = this.canvas.getContext('webgl2', {\n\t\t\tfailIfMajorPerformanceCaveat: true,\n\t\t}) as WebGL2RenderingContext;\n\t\tif (!this.gl) {\n\t\t\tconsole.error('WebGL2 not supported');\n\t\t\tthrow new Error('WebGL2 not supported');\n\t\t}\n\t}\n\n\tpublic is2dGl(): boolean {\n\t\treturn false;\n\t}\n\n\tpublic clear() {\n\t\tthis.disposed = true;\n\t\tthis.gl = null;\n\t}\n\n\tpublic loadTexture(\n\t\timage: HTMLImageElement | ImageBitmap,\n\t\tisMipMapEnable: boolean = false,\n\t): WebGLTexture | ImageBitmap {\n\t\tif (this.isDisposed()) return null;\n\n\t\tconst gl = this.getGl();\n\n\t\tconst texture = gl.createTexture();\n\t\tif (!texture) {\n\t\t\tthrow new Error('Failed to create texture');\n\t\t}\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\tif (isMipMapEnable) {\n\t\t\tgl.generateMipmap(gl.TEXTURE_2D);\n\t\t\tgl.texParameteri(\n\t\t\t\tgl.TEXTURE_2D,\n\t\t\t\tgl.TEXTURE_MIN_FILTER,\n\t\t\t\tgl.LINEAR_MIPMAP_LINEAR,\n\t\t\t);\n\t\t} else {\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\t}\n\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n\t\tif (image instanceof HTMLImageElement)\n\t\t\tconsole.debug(`Texture loaded successfully`);\n\t\treturn texture;\n\t}\n\n\tpublic deleteTexture(texture: WebGLTexture | ImageBitmap): void {\n\t\tif (this.isDisposed()) return;\n\n\t\tconst gl = this.getGl();\n\t\tgl.deleteTexture(texture);\n\t}\n\n\tpublic deleteVertexArray(vao: WebGLVertexArrayObject): void {\n\t\tif (this.isDisposed()) return;\n\n\t\tconst gl = this.getGl();\n\t\tgl.deleteVertexArray(vao);\n\t}\n\n\tpublic createTextureWithColor(color: RGBAArray): WebGLTexture | ImageBitmap {\n\t\tif (this.isDisposed()) return null;\n\n\t\tconst gl = this.getGl();\n\t\tconst texture = gl.createTexture();\n\t\tif (!texture) {\n\t\t\tthrow new Error('Failed to create texture');\n\t\t}\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\n\t\tconst colorPixel = new Uint8Array(color);\n\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D,\n\t\t\t0,\n\t\t\tgl.RGBA,\n\t\t\t1,\n\t\t\t1,\n\t\t\t0,\n\t\t\tgl.RGBA,\n\t\t\tgl.UNSIGNED_BYTE,\n\t\t\tcolorPixel,\n\t\t);\n\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n\t\treturn texture;\n\t}\n\n\tpublic createEmptySlide(): WebGLTexture | ImageBitmap {\n\t\treturn this.createTextureWithColor([0, 0, 0, 255]);\n\t}\n\n\tpublic createTransparentTexture(): WebGLTexture | ImageBitmap {\n\t\treturn this.createTextureWithColor([0, 0, 0, 0]);\n\t}\n\n\tpublic createVertexShader(source: string): WebGLShader {\n\t\treturn this.createShader(this.getGl().VERTEX_SHADER, source);\n\t}\n\n\tpublic createFragmentShader(source: string): WebGLShader {\n\t\treturn this.createShader(this.getGl().FRAGMENT_SHADER, source);\n\t}\n\n\tpublic createShader(type: number, source: string): WebGLShader {\n\t\tif (this.isDisposed()) return null;\n\n\t\tconst gl = this.getGl();\n\t\tconst shader = gl.createShader(type);\n\t\tif (!shader) {\n\t\t\tthrow new Error('Failed to create shader');\n\t\t}\n\t\tgl.shaderSource(shader, source);\n\t\tgl.compileShader(shader);\n\t\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\t\tconst info = gl.getShaderInfoLog(shader);\n\t\t\tgl.deleteShader(shader);\n\t\t\tthrow new Error(`Could not compile shader: ${info}`);\n\t\t}\n\t\tconsole.log(\n\t\t\t'Shader compiled successfully:',\n\t\t\ttype === gl.VERTEX_SHADER ? 'VERTEX' : 'FRAGMENT',\n\t\t);\n\t\treturn shader;\n\t}\n\n\tpublic createProgram(\n\t\tvertexShader: WebGLShader,\n\t\tfragmentShader: WebGLShader,\n\t): WebGLProgram {\n\t\tif (this.isDisposed()) return null;\n\n\t\tconst gl = this.getGl();\n\t\tconst program = gl.createProgram();\n\t\tif (!program) {\n\t\t\tthrow new Error('Failed to create program');\n\t\t}\n\t\tgl.attachShader(program, vertexShader);\n\t\tgl.attachShader(program, fragmentShader);\n\t\tgl.linkProgram(program);\n\t\tif (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n\t\t\tconst info = gl.getProgramInfoLog(program);\n\t\t\tgl.deleteProgram(program);\n\t\t\tthrow new Error(`Could not link program: ${info}`);\n\t\t}\n\t\tconsole.log('Program linked successfully');\n\t\treturn program;\n\t}\n}\n\nclass RenderContext2d extends RenderContext {\n\tconstructor(canvas: HTMLCanvasElement | OffscreenCanvas) {\n\t\tsuper(canvas);\n\n\t\tthis.gl = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n\t\tif (!this.gl) {\n\t\t\tconsole.error('Canvas rendering not supported');\n\t\t\tthrow new Error('Canvas rendering not supported');\n\t\t}\n\t}\n\n\tpublic is2dGl(): boolean {\n\t\treturn true;\n\t}\n\n\tpublic clear() {\n\t\tthis.disposed = true;\n\t\tthis.gl = null;\n\t}\n\n\tpublic loadTexture(\n\t\timage: HTMLImageElement,\n\t\tisMipMapEnable: boolean = false,\n\t): WebGLTexture | ImageBitmap {\n\t\treturn image;\n\t}\n\n\tpublic createVertexShader(source: string): WebGLShader {\n\t\treturn null;\n\t}\n\n\tpublic createFragmentShader(source: string): WebGLShader {\n\t\treturn null;\n\t}\n\n\tpublic createShader(type: number, source: string): WebGLShader {\n\t\treturn null;\n\t}\n\n\tpublic deleteTexture(texture: WebGLTexture | ImageBitmap): void {\n\t\treturn;\n\t}\n\n\tpublic deleteVertexArray(vao: WebGLVertexArrayObject): void {\n\t\treturn;\n\t}\n\n\tpublic createProgram(\n\t\tvertexShader: WebGLShader,\n\t\tfragmentShader: WebGLShader,\n\t): WebGLProgram {\n\t\treturn null;\n\t}\n}\n"]}