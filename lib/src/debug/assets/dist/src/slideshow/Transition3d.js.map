{"version":3,"file":"Transition3d.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/slideshow/Transition3d.ts"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\ndeclare var SlideShow: any;\n\nclass TransitionParameters3D extends TransitionParameters {\n\tpublic leavingPrimitives: Primitive[] = [];\n\tpublic enteringPrimitives: Primitive[] = [];\n\tpublic allOperations: Operation[] = [];\n}\n\nclass Transition3d extends TransitionBase {\n\tconstructor(transitionParameters: TransitionParameters3D) {\n\t\tsuper(transitionParameters);\n\t\tif (this.context.isDisposed()) return;\n\t\tthis.gl.enable(this.gl.BLEND);\n\t\tthis.gl.blendFunc(this.gl.SRC_ALPHA, this.gl.ONE_MINUS_SRC_ALPHA);\n\t}\n\n\tprotected getVertexShader(): string {\n\t\treturn `#version 300 es\n\t\t\t\tprecision mediump float;\n\n\t\t\t\tin vec4 a_position;\n\t\t\t\tin vec3 a_normal;\n\t\t\t\tin vec2 a_texCoord;\n\n\t\t\t\tuniform mat4 u_projectionMatrix;\n\t\t\t\tuniform mat4 u_modelViewMatrix;\n\t\t\t\tuniform mat4 u_sceneTransformMatrix;\n\t\t\t\tuniform mat4 u_primitiveTransformMatrix;\n\t\t\t\tuniform mat4 u_operationsTransformMatrix;\n\n\t\t\t\tout vec2 v_texturePosition;\n\t\t\t\tout vec3 v_normal;\n\n\t\t\t\tmat4 customTranspose(mat4 m) {\n\t\t\t\t\treturn mat4(\n\t\t\t\t\t\tm[0][0], m[1][0], m[2][0], m[3][0],\n\t\t\t\t\t\tm[0][1], m[1][1], m[2][1], m[3][1],\n\t\t\t\t\t\tm[0][2], m[1][2], m[2][2], m[3][2],\n\t\t\t\t\t\tm[0][3], m[1][3], m[2][3], m[3][3]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tmat4 customInverse(mat4 m) {\n\t\t\t\t\tfloat a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3];\n\t\t\t\t\tfloat a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3];\n\t\t\t\t\tfloat a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3];\n\t\t\t\t\tfloat a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3];\n\n\t\t\t\t\tfloat b00 = a00 * a11 - a01 * a10;\n\t\t\t\t\tfloat b01 = a00 * a12 - a02 * a10;\n\t\t\t\t\tfloat b02 = a00 * a13 - a03 * a10;\n\t\t\t\t\tfloat b03 = a01 * a12 - a02 * a11;\n\t\t\t\t\tfloat b04 = a01 * a13 - a03 * a11;\n\t\t\t\t\tfloat b05 = a02 * a13 - a03 * a12;\n\t\t\t\t\tfloat b06 = a20 * a31 - a21 * a30;\n\t\t\t\t\tfloat b07 = a20 * a32 - a22 * a30;\n\t\t\t\t\tfloat b08 = a20 * a33 - a23 * a30;\n\t\t\t\t\tfloat b09 = a21 * a32 - a22 * a31;\n\t\t\t\t\tfloat b10 = a21 * a33 - a23 * a31;\n\t\t\t\t\tfloat b11 = a22 * a33 - a23 * a32;\n\n\t\t\t\t\tfloat det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n\t\t\t\t\treturn mat4(\n\t\t\t\t\t\ta11 * b11 - a12 * b10 + a13 * b09,\n\t\t\t\t\t\ta02 * b10 - a01 * b11 - a03 * b09,\n\t\t\t\t\t\ta31 * b05 - a32 * b04 + a33 * b03,\n\t\t\t\t\t\ta22 * b04 - a21 * b05 - a23 * b03,\n\t\t\t\t\t\ta12 * b08 - a10 * b11 - a13 * b07,\n\t\t\t\t\t\ta00 * b11 - a02 * b08 + a03 * b07,\n\t\t\t\t\t\ta32 * b02 - a30 * b05 - a33 * b01,\n\t\t\t\t\t\ta20 * b05 - a22 * b02 + a23 * b01,\n\t\t\t\t\t\ta10 * b10 - a11 * b08 + a13 * b06,\n\t\t\t\t\t\ta01 * b08 - a00 * b10 - a03 * b06,\n\t\t\t\t\t\ta30 * b04 - a31 * b02 + a33 * b00,\n\t\t\t\t\t\ta21 * b02 - a20 * b04 - a23 * b00,\n\t\t\t\t\t\ta11 * b07 - a10 * b09 - a12 * b06,\n\t\t\t\t\t\ta00 * b09 - a01 * b07 + a02 * b06,\n\t\t\t\t\t\ta31 * b01 - a30 * b03 - a32 * b00,\n\t\t\t\t\t\ta20 * b03 - a21 * b01 + a22 * b00) / det;\n\t\t\t\t}\n\n\t\t\t\tvoid main(void) {\n\t\t\t\t\tmat4 modelViewMatrix = u_modelViewMatrix * u_operationsTransformMatrix * u_sceneTransformMatrix * u_primitiveTransformMatrix;\n\t\t\t\t\tmat3 normalMatrix = mat3(customTranspose(customInverse(modelViewMatrix)));\n\t\t\t\t\tgl_Position = u_projectionMatrix * modelViewMatrix * a_position;\n\t\t\t\t\tv_texturePosition = a_texCoord;\n\t\t\t\t\tv_normal = normalize(normalMatrix * a_normal);\n\t\t\t\t}\n\t\t\t\t`;\n\t}\n\n\tprotected getFragmentShader(): string {\n\t\treturn `#version 300 es\n\t\t\t\tprecision mediump float;\n\n\t\t\t\tuniform sampler2D slideTexture;\n\t\t\t\tin vec2 v_texturePosition;\n\t\t\t\tin vec3 v_normal;\n\n\t\t\t\tout vec4 outColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 lightVector = vec3(0.0, 0.0, 1.0);\n\t\t\t\t\tfloat light = max(dot(lightVector, v_normal), 0.0);\n\t\t\t\t\tvec4 fragment = texture(slideTexture, v_texturePosition);\n\t\t\t\t\tvec4 black = vec4(0.0, 0.0, 0.0, fragment.a);\n\t\t\t\t\toutColor = mix(black, fragment, light);\n\t\t\t\t}\n\t\t\t\t`;\n\t}\n\n\tprivate calculateModelViewMatrix() {\n\t\tconst EyePos = 10.0;\n\t\tconst modelView = glMatrix.mat4.create();\n\n\t\tglMatrix.mat4.translate(\n\t\t\tmodelView,\n\t\t\tmodelView,\n\t\t\tnew Float32Array([0, 0, -EyePos]),\n\t\t);\n\n\t\treturn modelView;\n\t}\n\n\tprivate calculateProjectionMatrix() {\n\t\tconst EyePos = 10.0;\n\t\tconst RealN = -1.0,\n\t\t\tRealF = 1.0;\n\t\tconst RealL = -1.0,\n\t\t\tRealR = 1.0,\n\t\t\tRealB = -1.0,\n\t\t\tRealT = 1.0;\n\t\tconst ClipN = EyePos + 5.0 * RealN;\n\t\tconst ClipF = EyePos + 15.0 * RealF;\n\t\tconst ClipL = RealL * 8.0;\n\t\tconst ClipR = RealR * 8.0;\n\t\tconst ClipB = RealB * 8.0;\n\t\tconst ClipT = RealT * 8.0;\n\n\t\tconst projection = glMatrix.mat4.create();\n\t\tglMatrix.mat4.frustum(projection, ClipL, ClipR, ClipB, ClipT, ClipN, ClipF);\n\t\tconst scale = new Float32Array([\n\t\t\t1.0 /\n\t\t\t\t((RealR * 2.0 * ClipN) / (EyePos * (ClipR - ClipL)) -\n\t\t\t\t\t(ClipR + ClipL) / (ClipR - ClipL)),\n\t\t\t1.0 /\n\t\t\t\t((RealT * 2.0 * ClipN) / (EyePos * (ClipT - ClipB)) -\n\t\t\t\t\t(ClipT + ClipB) / (ClipT - ClipB)),\n\t\t\t1.0,\n\t\t]);\n\t\tglMatrix.mat4.scale(projection, projection, scale);\n\t\treturn projection;\n\t}\n\n\tpublic initUniforms(): void {\n\t\tif (this.context.isDisposed()) return;\n\n\t\tthis.gl.useProgram(this.program);\n\n\t\tconst modelViewMatrix = this.calculateModelViewMatrix();\n\t\tthis.gl.uniformMatrix4fv(\n\t\t\tthis.gl.getUniformLocation(this.program, 'u_modelViewMatrix'),\n\t\t\tfalse,\n\t\t\tmodelViewMatrix,\n\t\t);\n\n\t\tconst projectionMatrix = this.calculateProjectionMatrix();\n\t\tthis.gl.uniformMatrix4fv(\n\t\t\tthis.gl.getUniformLocation(this.program, 'u_projectionMatrix'),\n\t\t\tfalse,\n\t\t\tprojectionMatrix,\n\t\t);\n\n\t\t// prettier-ignore\n\t\tconst sceneTransformMatrix = new Float32Array([\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n        ]);\n\t\tthis.gl.uniformMatrix4fv(\n\t\t\tthis.gl.getUniformLocation(this.program, 'u_sceneTransformMatrix'),\n\t\t\tfalse,\n\t\t\tsceneTransformMatrix,\n\t\t);\n\n\t\t// prettier-ignore\n\t\tconst primitiveTransformMatrix = new Float32Array([\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n        ]);\n\t\tthis.gl.uniformMatrix4fv(\n\t\t\tthis.gl.getUniformLocation(this.program, 'u_primitiveTransformMatrix'),\n\t\t\tfalse,\n\t\t\tprimitiveTransformMatrix,\n\t\t);\n\n\t\t// prettier-ignore\n\t\tconst operationsTransformMatrix = new Float32Array([\n            1, 0, 0, 0,\n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            0, 0, 0, 1\n        ]);\n\t\tthis.gl.uniformMatrix4fv(\n\t\t\tthis.gl.getUniformLocation(this.program, 'u_operationsTransformMatrix'),\n\t\t\tfalse,\n\t\t\toperationsTransformMatrix,\n\t\t);\n\n\t\tthis.otherUniformsInitialization();\n\n\t\tconsole.log('Uniforms initialized');\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tpublic otherUniformsInitialization(): void {}\n\n\tpublic render(nT: number): void {\n\t\tif (this.context.isDisposed()) return;\n\n\t\tthis.gl.viewport(\n\t\t\t0,\n\t\t\t0,\n\t\t\tthis.context.canvas.width,\n\t\t\tthis.context.canvas.height,\n\t\t);\n\t\tthis.gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT);\n\n\t\tthis.gl.useProgram(this.program);\n\t\tthis.gl.uniform1f(this.gl.getUniformLocation(this.program, 'time'), nT);\n\n\t\tthis.gl.activeTexture(this.gl.TEXTURE0);\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.leavingSlide);\n\t\tthis.gl.uniform1i(\n\t\t\tthis.gl.getUniformLocation(this.program, 'leavingSlideTexture'),\n\t\t\t0,\n\t\t);\n\n\t\tthis.gl.activeTexture(this.gl.TEXTURE1);\n\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, this.enteringSlide);\n\t\tthis.gl.uniform1i(\n\t\t\tthis.gl.getUniformLocation(this.program, 'enteringSlideTexture'),\n\t\t\t1,\n\t\t);\n\n\t\tthis.renderUniformValue();\n\n\t\tthis.gl.bindVertexArray(this.vao);\n\t\tthis.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);\n\n\t\tapp.map.fire('newslideshowframe', {\n\t\t\tframe: this.gl.canvas,\n\t\t});\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\tpublic renderUniformValue(): void {}\n}\n\nSlideShow.Transition3d = Transition3d;\n"]}