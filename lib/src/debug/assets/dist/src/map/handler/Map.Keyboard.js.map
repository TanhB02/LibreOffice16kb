{"version":3,"file":"Map.Keyboard.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/map/handler/Map.Keyboard.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * L.Map.Keyboard is handling keyboard interaction with the map, enabled by default.\n *\n * It handles keyboard interactions which are NOT text input, including those which\n * don't require edit permissions (e.g. page scroll). Text input is handled\n * at TextInput.\n */\n\n/* global app UNOKey UNOModifier TileManager */\n\nL.Map.mergeOptions({\n\tkeyboard: true,\n\tkeyboardPanOffset: 20,\n\tkeyboardZoomOffset: 1\n});\n\nL.Map.Keyboard = L.Handler.extend({\n\n\tkeymap: {\n\t\t8   : UNOKey.BACKSPACE,\n\t\t9   : UNOKey.TAB,\n\t\t13  : UNOKey.RETURN,\n\t\t16  : null, // shift\t\t: UNKOWN\n\t\t17  : null, // ctrl\t\t: UNKOWN\n\t\t18  : null, // alt\t\t: UNKOWN\n\t\t19  : null, // pause/break\t: UNKOWN\n\t\t20  : null, // caps lock\t: UNKOWN\n\t\t27  : UNOKey.ESCAPE,\n\t\t32  : UNOKey.SPACE,\n\t\t33  : UNOKey.PAGEUP,\n\t\t34  : UNOKey.PAGEDOWN,\n\t\t35  : UNOKey.END,\n\t\t36  : UNOKey.HOME,\n\t\t37  : UNOKey.LEFT,\n\t\t38  : UNOKey.UP,\n\t\t39  : UNOKey.RIGHT,\n\t\t40  : UNOKey.DOWN,\n\t\t45  : UNOKey.INSERT,\n\t\t46  : UNOKey.DELETE,\n\t\t48  : UNOKey.NUM0,\n\t\t49  : UNOKey.NUM1,\n\t\t50  : UNOKey.NUM2,\n\t\t51  : UNOKey.NUM3,\n\t\t52  : UNOKey.NUM4,\n\t\t53  : UNOKey.NUM5,\n\t\t54  : UNOKey.NUM6,\n\t\t55  : UNOKey.NUM7,\n\t\t56  : UNOKey.NUM8,\n\t\t57  : UNOKey.NUM9,\n\t\t65  : UNOKey.A,\n\t\t66  : UNOKey.B,\n\t\t67  : UNOKey.C,\n\t\t68  : UNOKey.D,\n\t\t69  : UNOKey.E,\n\t\t70  : UNOKey.F,\n\t\t71  : UNOKey.G,\n\t\t72  : UNOKey.H,\n\t\t73  : UNOKey.I,\n\t\t74  : UNOKey.J,\n\t\t75  : UNOKey.K,\n\t\t76  : UNOKey.L,\n\t\t77  : UNOKey.M,\n\t\t78  : UNOKey.N,\n\t\t79  : UNOKey.O,\n\t\t80  : UNOKey.P,\n\t\t81  : UNOKey.Q,\n\t\t82  : UNOKey.R,\n\t\t83  : UNOKey.S,\n\t\t84  : UNOKey.T,\n\t\t85  : UNOKey.U,\n\t\t86  : UNOKey.V,\n\t\t87  : UNOKey.W,\n\t\t88  : UNOKey.X,\n\t\t89  : UNOKey.Y,\n\t\t90  : UNOKey.Z,\n\t\t91  : null, // left window key\t: UNKOWN\n\t\t92  : null, // right window key\t: UNKOWN\n\t\t93\t: UNOKey.CONTEXTMENU,\n\t\t96  : UNOKey.NUM0,\n\t\t97  : UNOKey.NUM1,\n\t\t98  : UNOKey.NUM2,\n\t\t99  : UNOKey.NUM3,\n\t\t100 : UNOKey.NUM4,\n\t\t101 : UNOKey.NUM5,\n\t\t102 : UNOKey.NUM6,\n\t\t103 : UNOKey.NUM7,\n\t\t104 : UNOKey.NUM8,\n\t\t105 : UNOKey.NUM9,\n\t\t106 : UNOKey.MULTIPLY,\n\t\t107 : UNOKey.ADD,\n\t\t109 : UNOKey.SUBTRACT,\n\t\t110 : UNOKey.DECIMAL,\n\t\t111 : UNOKey.DIVIDE,\n\t\t112 : UNOKey.F1,\n\t\t113 : UNOKey.F2,\n\t\t114 : UNOKey.F3,\n\t\t115 : UNOKey.F4,\n\t\t116 : UNOKey.F5,\n\t\t117 : UNOKey.F6,\n\t\t118 : UNOKey.F7,\n\t\t119 : UNOKey.F8,\n\t\t120 : UNOKey.F9,\n\t\t121 : UNOKey.F10,\n\t\t122 : UNOKey.F11,\n\t\t123 : UNOKey.F12,\n\t\t144 : UNOKey.NUMLOCK,\n\t\t145 : UNOKey.SCROLLLOCK,\n\t\t173 : UNOKey.SUBTRACT,\n\t\t186 : UNOKey.SEMICOLON,\n\t\t187 : UNOKey.EQUAL,\n\t\t188 : UNOKey.COMMA,\n\t\t189 : UNOKey.SUBTRACT,\n\t\t190 : null, // period\t\t: UNKOWN\n\t\t191 : null, // forward slash\t: UNKOWN\n\t\t192 : null, // grave accent\t: UNKOWN\n\t\t219 : null, // open bracket\t: UNKOWN\n\t\t220 : null, // back slash\t: UNKOWN\n\t\t221 : null, // close bracket\t: UNKOWN\n\t\t222 : null  // single quote\t: UNKOWN\n\t},\n\n\thandleOnKeyDownKeys: {\n\t\t// these keys need to be handled on keydown in order for them\n\t\t// to work on chrome\n\t\t// Backspace and Delete are handled at TextInput's 'beforeinput' handler.\n\t\t9   : true, // tab\n\t\t19  : true, // pause/break\n\t\t20  : true, // caps lock\n\t\t27  : true, // escape\n\t\t33  : true, // page up\n\t\t34  : true, // page down\n\t\t35  : true, // end\n\t\t36  : true, // home\n\t\t37  : true, // left arrow\n\t\t38  : true, // up arrow\n\t\t39  : true, // right arrow\n\t\t40  : true, // down arrow\n\t\t45  : true, // insert\n\t\t93  : true, // context menu\n\t\t113 : true  // f2\n\t},\n\n\t// See https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode for list of keycodes\n\tkeyCodes: {\n\n\t\tpageUp:   33,\n\t\tpageDown: 34,\n\t\tenter:    13,\n\t\tBACKSPACE:8,\n\t\tTAB:      9,\n\t\tSPACE :   32,\n\t\tSHIFT:    16, // shift\t\t: UNKOWN\n\t\tCTRL:     17, // ctrl\t\t: UNKOWN\n\t\tALT:      18, // alt\t\t: UNKOWN\n\t\tPAUSE:    19, // pause/break\t: UNKOWN\n\t\tCAPSLOCK: 20, // caps lock\t: UNKOWN,\n\t\tPAGEUP:   33,\n\t\tPAGEDOWN: 34,\n\t\tEND:      35,\n\t\tHOME:     36,\n\t\tLEFT:     37,\n\t\tUP:       38,\n\t\tRIGHT:    39,\n\t\tDOWN:     40,\n\t\tINSERT:   45,\n\t\tDELETE:   46,\n\t\tNUM0:     [48,96], // two values because of different mapping in mac and windows for same keys\n\t\tNUM1:     [49,97],\n\t\tNUM2:     [50,98],\n\t\tNUM3:     [51,99],\n\t\tNUM4:     [52,100],\n\t\tNUM5:     [53,101],\n\t\tNUM6:     [54,102],\n\t\tNUM7:     [55,103],\n\t\tNUM8:     [56,103],\n\t\tNUM9:     [57,104],\n\t\tA:        65,\n\t\tB:        66,\n\t\tC:        [67,99],\n\t\t//c:        99,\n\t\tD:        68,\n\t\tE:        69,\n\t\t//f:        70, no need for separate as for Windows it will remain the same\n\t\tF:        70,\n\t\tG:        71,\n\t\tH:        72,\n\t\tI:        73,\n\t\tJ:        74,\n\t\tK:        75,\n\t\tL:        76,\n\t\tM:        77,\n\t\tN:        78,\n\t\tO:        79,\n\t\tP:        80,\n\t\tQ:        81,\n\t\tR:        82,\n\t\tS:        83,\n\t\tT:        84,\n\t\tU:        85,\n\t\tV:        [86,118],\n\t\t//v:        118, // this is for MAC as the value of v changes when we press keydown\n\t\tW:        87,\n\t\tX:        [88,120],\n\t\t//x:        120, // this is for MAC as the value of x changes when we press keydown\n\t\tY:        89,\n\t\tZ:        90,\n\t\tLEFTWINDOWKEY :    [91,91], // left window key\t: UNKOWN  and also for MAC\n\t\tRIGHTWINDOWKEY:    [92,93], // right window key\t: UNKOWN  and also for MAC\n\t\tCONTEXTMENU:       93, // context menu\n\t\t// NUM0:     96,\n\t\t// NUM1:     97,\n\t\t// NUM2:     98,\n\t\t// NUM3:     99,\n\t\t// NUM4:     100,\n\t\t// NUM5:     101,\n\t\t// NUM6:     102,\n\t\t// NUM7:     103,\n\t\t// NUM8:     104,\n\t\tMULTIPLY:    106,\n\t\tADD:         107,\n\t\t//SUBTRACT:    109,\n\t\tDECIMAL:     110,\n\t\tDIVIDE:      111,\n\t\tF1:       112,\n\t\tF2:       113,\n\t\tF3:       114,\n\t\tF4:       115,\n\t\tF5:       116,\n\t\tF6:       117,\n\t\tF7:       118,\n\t\tF8:       119,\n\t\tF9:       120,\n\t\tF10:      121,\n\t\tF11:      122,\n\t\tF12 :     123,\n\t\tNUMLOCK:  144,\n\t\tSCROLLLOCK:   145,\n\t\tSUBTRACT:     [109,173,189],\n\t\tSEMICOLON:    186,\n\t\tEQUAL:        187,\n\t\tCOMMA:        188,\n\t\t//SUBTRACT:     189,\n\t\tPERIOD:       190, // period\t\t: UNKOWN\n\t\tFORWARDSLASH: 191, // forward slash\t: UNKOWN\n\t\tGRAVEACCENT:  192, // grave accent\t: UNKOWN\n\t\tOPENBRACKET:  219, // open bracket\t: UNKOWN\n\t\tBACKSLASH:    220, // back slash\t: UNKOWN\n\t\tCLOSEBRACKET: 221, // close bracket\t: UNKOWN\n\t\tSINGLEQUOTE : 222  // single quote\t: UNKOWN\n\n\t},\n\n\tnavigationKeyCodes: {\n\t\tleft:    [37],\n\t\tright:   [39],\n\t\tdown:    [40],\n\t\tup:      [38],\n\t\tzoomIn:  [187, 107, 61, 171],\n\t\tzoomOut: [189, 109, 173]\n\t},\n\n\tallowedKeyCodeWhenNotEditing: {\n\t\t27:    true,  // ESC\n\t\t33:    true,  // pageUp\n\t\t34:    true,  // pageDown\n\t\t13:    true,  // enter\n\t\t 8:    true,  // BACKSPACE\n\t\t16:    true,  // SHIFT\n\t\t17:    true,  // CTRL\n\t\t18:    true,  // ALT\n\t\t19:    true,  // PAUSE\n\t\t20:    true,  // CAPSLOCK\n\t\t35:    true,  // END\n\t\t36:    true,  // HOME\n\t\t45:    true,  // INSERT\n\t\t46:    true,  // DELETE\n\t\t91:    true,  // LEFTWINDOWKEY\n\t\t92:    true,  // RIGHTWINDOWKEY\n\t\t93:    true,  // CONTEXTMENU\n\t\t112:    true,  //F1\n\t\t113:    true,  //F2\n\t\t114:    true,  //F3\n\t\t115:    true,  //F4\n\t\t116:    true,  //F5\n\t\t117:    true,  //F6\n\t\t118:    true,  //F7\n\t\t119:    true,  //F8\n\t\t120:    true,  //F9\n\t\t121:    true,  //F10\n\t\t122:    true,  //F11\n\t\t123:    true,  //F12\n\t\t144:    true,  //NUMLOCK\n\t\t145:    true,  //SCROLLLOCK\n\t},\n\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t\tthis._setPanOffset(map.options.keyboardPanOffset);\n\t\tthis._setZoomOffset(map.options.keyboardZoomOffset);\n\t\tthis.modifier = 0;\n\t\twindow.KeyboardShortcuts.initialize(map);\n\t},\n\n\n\taddHooks: function () {\n\t\tvar container = this._map._container;\n\n\t\t// make the container focusable by tabbing\n\t\tif (container.tabIndex === -1) {\n\t\t\tcontainer.tabIndex = '0';\n\t\t}\n\n\t\tL.DomEvent.on(this._map.getContainer(), 'keydown keyup keypress', this._onKeyDown, this);\n\t\tL.DomEvent.on(window.document, 'keydown', this._globalKeyEvent, this);\n\t},\n\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._map.getContainer(), 'keydown keyup keypress', this._onKeyDown, this);\n\t\tL.DomEvent.off(window.document, 'keydown', this._globalKeyEvent, this);\n\t},\n\n\t_ignoreKeyEvent: function(ev) {\n\t\tvar shift = ev.shiftKey ? UNOModifier.SHIFT : 0;\n\t\tif (shift && (ev.keyCode === this.keyCodes.INSERT || ev.keyCode === this.keyCodes.DELETE)) {\n\t\t\t// don't handle shift+insert, shift+delete\n\t\t\t// These are converted to 'cut', 'paste' events which are\n\t\t\t// automatically handled by us, so avoid double-handling\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t_setPanOffset: function (pan) {\n\t\tvar keys = {},\n\t\t    codes = this.navigationKeyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.left.length; i < len; i++) {\n\t\t\tkeys[codes.left[i]] = [-1 * pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.right.length; i < len; i++) {\n\t\t\tkeys[codes.right[i]] = [pan, 0];\n\t\t}\n\t\tfor (i = 0, len = codes.down.length; i < len; i++) {\n\t\t\tkeys[codes.down[i]] = [0, pan];\n\t\t}\n\t\tfor (i = 0, len = codes.up.length; i < len; i++) {\n\t\t\tkeys[codes.up[i]] = [0, -1 * pan];\n\t\t}\n\t},\n\n\t_setZoomOffset: function (zoom) {\n\t\tvar keys = this._zoomKeys = {},\n\t\t    codes = this.navigationKeyCodes,\n\t\t    i, len;\n\n\t\tfor (i = 0, len = codes.zoomIn.length; i < len; i++) {\n\t\t\tkeys[codes.zoomIn[i]] = zoom;\n\t\t}\n\t\tfor (i = 0, len = codes.zoomOut.length; i < len; i++) {\n\t\t\tkeys[codes.zoomOut[i]] = -zoom;\n\t\t}\n\t},\n\n\t// Convert javascript key codes to UNO key codes.\n\t_toUNOKeyCode: function (keyCode) {\n\t\treturn this.keymap[keyCode] || keyCode;\n\t},\n\n\t// _onKeyDown - called only as a DOM event handler\n\t// Calls _handleKeyEvent(), but only if the event doesn't have\n\t// a charCode property (set to something different than 0) - that ignores\n\t// any 'beforeinput', 'keypress' and 'input' events that would add\n\t// printable characters. Those are handled by TextInput.js.\n\t_onKeyDown: function (ev) {\n\t\tif (this._map.uiManager.isUIBlocked()\n\t\t\t|| (this._map._docLayer && (this._map._docLayer._docType === 'presentation' || this._map._docLayer._docType === 'drawing') && this._map._docLayer._preview.partsFocused === true)\n\t\t)\n\t\t\treturn;\n\n\t\tif (this._map._debug.logKeyboardEvents) {\n\t\t\twindow.app.console.log('keyboard handler:', ev.type, ev.key, ev.charCode, this._expectingInput, ev);\n\t\t}\n\n\t\tvar completeEvent = app.socket.createCompleteTraceEvent('L.Map.Keyboard._onKeyDown', { type: ev.type, charCode: ev.charCode });\n\n\t\tif (ev.charCode == 0) {\n\t\t\tthis._handleKeyEvent(ev);\n\t\t}\n\t\tif (this._map._docLayer)\n\t\t\tif (ev.shiftKey && ev.type === 'keydown')\n\t\t\t\tthis._map._docLayer.shiftKeyPressed = true;\n\t\t\telse if (ev.keyCode === this.keyCodes.SHIFT && ev.type === 'keyup')\n\t\t\t\tthis._map._docLayer.shiftKeyPressed = false;\n\t\tif (completeEvent)\n\t\t\tcompleteEvent.finish();\n\t},\n\n\t_globalKeyEvent: function(ev) {\n\t\tif (this._map.uiManager.isUIBlocked())\n\t\t\treturn;\n\n\t\tif (ev.shortCutActivated === true) {\n\t\t\twindow.app.console.log('Shortcut for: ' + ev.code + ' already handled');\n\t\t\treturn;\n\t\t}\n\n\t\tif (window.KeyboardShortcuts.processEvent(app.UI.language.fromURL, ev)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._map.jsdialog\n\t\t\t&& (this._map.jsdialog.hasDialogOpened() || this._map.jsdialog.hasSnackbarOpened() || this._map.jsdialog.hasDropdownOpened())\n\t\t\t&& this._map.jsdialog.handleKeyEvent(ev)) {\n\t\t\tev.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\telse if (this._map._docLayer && (this._map._docLayer._docType === 'presentation' || this._map._docLayer._docType === 'drawing') && this._map._docLayer._preview.partsFocused === true) {\n\n\t\t\tif (!this.modifier && (ev.keyCode === this.keyCodes.DOWN || ev.keyCode === this.keyCodes.UP ||\n\t\t\t\t               ev.keyCode === this.keyCodes.RIGHT || ev.keyCode === this.keyCodes.LEFT ||\n\t\t\t\t               ev.keyCode === this.keyCodes.PAGEDOWN || ev.keyCode === this.keyCodes.PAGEUP ||\n\t\t\t\t               ev.keyCode === this.keyCodes.DELETE || ev.keyCode === this.keyCodes.BACKSPACE)\n\t\t\t\t           && ev.type === 'keydown') {\n\n\t\t\t\tvar deletePart = (ev.keyCode === this.keyCodes.DELETE || ev.keyCode === this.keyCodes.BACKSPACE) ? true : false;\n\n\t\t\t\tif (!deletePart) {\n\t\t\t\t\tvar partToSelect = (ev.keyCode === this.keyCodes.UP || ev.keyCode === this.keyCodes.LEFT ||\n\t\t\t\t\t\t            ev.keyCode === this.keyCodes.PAGEUP) ? 'prev' : 'next';\n\n\t\t\t\t\tthis._map.deselectAll();\n\t\t\t\t\tthis._map.setPart(partToSelect);\n\t\t\t\t\tif (app.file.fileBasedView)\n\t\t\t\t\t\tthis._map._docLayer._checkSelectedPart();\n\t\t\t\t}\n\t\t\t\telse if (this._map.isEditMode() && !app.file.fileBasedView &&\n\t\t\t\t\t\tthis._map.jsdialog &&\n\t\t\t\t\t\t!this._map.jsdialog.hasDialogOpened()\n\t\t\t\t) {\n\t\t\t\t\tthis._map.deletePage(this._map._docLayer._selectedPart);\n\t\t\t\t}\n\t\t\t\tev.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (ev.ctrlKey) {\n\t\t\t\tif (!ev.altKey && ev.keyCode === this.keyCodes.HOME)\n\t\t\t\t\tthis._map.setPart(0);\n\t\t\t\telse if (!ev.altKey && ev.keyCode === this.keyCodes.END)\n\t\t\t\t\tthis._map.setPart(this._map._docLayer._parts - 1);\n\t\t\t\telse {\n\t\t\t\t\tthis._handleCtrlCommand(ev);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._map._docLayer._preview.partsFocused = false;\n\t\t\t}\n\t\t}\n\t\telse if (this._isCtrlKey(ev) && ev.keyCode === this.keyCodes.S) {\n\t\t\t// Save only when not read-only and when HideSaveOption is false.\n\t\t\tif (!this._map.isReadOnlyMode() && !this._map['wopi'].HideSaveOption) {\n\t\t\t\tthis._map.fire('postMessage', {msgId: 'UI_Save', args: { source: 'keyboard' }});\n\t\t\t\tif (!this._map._disableDefaultAction['UI_Save']) {\n\t\t\t\t\tthis._map.save(\n\t\t\t\t\t\tfalse /* An explicit save should terminate cell edit */,\n\t\t\t\t\t\tfalse /* An explicit save should save it again */,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tev.preventDefault();\n\t\t}\n\n\t},\n\n\t// _handleKeyEvent - checks if the given keyboard event shall trigger\n\t// a message to coolwsd, and calls the given keyEventFn(type, charcode, keycode)\n\t// callback if so.\n\t// Called from _onKeyDown\n\t_handleKeyEvent: function (ev, keyEventFn) {\n\t\tif (this._map.uiManager.isUIBlocked())\n\t\t\treturn;\n\n\t\tapp.idleHandler.notifyActive();\n\t\tif ((this._map.slideShow && this._map.slideShow.fullscreen) ||\n\t\t\t(this._map.slideShowPresenter && this._map.slideShowPresenter.isFullscreen())) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (ev.code === 'NumpadDecimal') this._map.numPadDecimalPressed = true;\n\t\telse this._map.numPadDecimalPressed = false;\n\n\t\tvar docLayer = this._map._docLayer;\n\n\t\t// if any key is pressed, we stop the following other users\n\t\tif (docLayer) this._map.userList.followUser(docLayer._viewId, false);\n\n\t\tif (window.KeyboardShortcuts.processEvent(app.UI.language.fromURL, ev)) {\n\t\t\tev.shortCutActivated = true;\n\t\t\treturn;\n\t\t}\n\t\tif (!keyEventFn && docLayer && docLayer.postKeyboardEvent) {\n\t\t\t// default is to post keyboard events on the document\n\t\t\tkeyEventFn = L.bind(docLayer.postKeyboardEvent, docLayer);\n\t\t}\n\n\t\tthis.modifier = 0;\n\t\tvar shift = ev.shiftKey ? UNOModifier.SHIFT : 0;\n\t\tvar ctrl = (ev.ctrlKey || ev.metaKey) ? UNOModifier.CTRL : 0;\n\t\tvar alt = ev.altKey ? UNOModifier.ALT : 0;\n\t\tvar location = ev.location;\n\t\tthis.modifier = shift | ctrl | alt;\n\n\t\t// On Windows, pressing AltGr = Alt + Ctrl\n\t\t// Presence of AltGr is detected if previous Ctrl + Alt 'location' === 2 (i.e right)\n\t\t// because Ctrl + Alt + <some char> won't give any 'location' information.\n\t\tif (ctrl && alt) {\n\t\t\tif (ev.type === 'keydown' && location === 2) {\n\t\t\t\tthis._prevCtrlAltLocation = location;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (location === 1) {\n\t\t\t\tthis._prevCtrlAltLocation = undefined;\n\t\t\t}\n\n\t\t\tif (this._prevCtrlAltLocation === 2 && location === 0) {\n\t\t\t\t// and we got the final character\n\t\t\t\tif (ev.type === 'keypress') {\n\t\t\t\t\tctrl = alt = this.modifier = 0;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Don't handle remnant 'keyup'\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (ctrl) {\n\t\t\tif (this._handleCtrlCommand(ev)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tvar charCode = ev.charCode;\n\t\tvar keyCode = ev.keyCode;\n\n\t\tvar DEFAULT =0;\n\t\t//var MAC=1; use this when you encounter a MAC value\n\n\t\tif ((this.modifier == UNOModifier.ALT || this.modifier == UNOModifier.SHIFT + UNOModifier.ALT) &&\n\t\t    keyCode >= this.keyCodes.NUM0[DEFAULT]) {\n\t\t\t// Presumably a Mac or iOS client accessing a \"special character\". Just ignore the alt modifier.\n\t\t\t// But don't ignore it for Alt + non-printing keys.\n\t\t\tthis.modifier -= alt;\n\t\t\talt = 0;\n\t\t}\n\n\t\tvar unoKeyCode = this._toUNOKeyCode(keyCode);\n\n\t\tif (this.modifier) {\n\t\t\tunoKeyCode |= this.modifier;\n\t\t\tif (ev.type !== 'keyup' && (this.modifier !== shift || (keyCode === this.keyCodes.SPACE && !app.file.textCursor.visible))) {\n\t\t\t\tif (keyEventFn) {\n\t\t\t\t\tkeyEventFn('input', charCode, unoKeyCode);\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this._map.stateChangeHandler._items['.uno:SlideMasterPage'] === 'true') {\n\t\t\tev.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._map.isEditMode()) {\n\t\t\tTileManager.resetPreFetching();\n\n\t\t\tif (this._ignoreKeyEvent(ev)) {\n\t\t\t\t// key ignored\n\t\t\t}\n\t\t\telse if (ev.type === 'keydown') {\n\t\t\t\tif (this.handleOnKeyDownKeys[keyCode] && charCode === 0) {\n\t\t\t\t\tif (keyEventFn) {\n\t\t\t\t\t\tkeyEventFn('input', charCode, unoKeyCode);\n\t\t\t\t\t\tif (!(this._map._textInput.hasAccessibilitySupport() && this._map._textInput.hasFocus() &&\n\t\t\t\t\t\t\t(keyCode === this.keyCodes.LEFT || keyCode === this.keyCodes.RIGHT))) {\n\t\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twindow.app.console.log('Map.Keyboard._handleKeyEvent: default not prevented for left or right arrow.');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this._map._debug.tileInvalidationsOn) {\n\t\t\t\t\tthis._map._debug.addTileInvalidationKeypress();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if ((ev.type === 'keypress') && (!this.handleOnKeyDownKeys[keyCode] || charCode !== 0)) {\n\t\t\t\tif (keyCode === this.keyCodes.BACKSPACE || keyCode === this.keyCodes.DELETE || keyCode === this.keyCodes.enter)\n\t\t\t\t{\n\t\t\t\t\t// handled generically in TextInput.js\n\t\t\t\t\twindow.app.console.log('Ignore backspace/delete/enter keypress');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (charCode === keyCode && charCode !== this.keyCodes.enter) {\n\t\t\t\t\t// Chrome sets keyCode = charCode for printable keys\n\t\t\t\t\t// while LO requires it to be 0\n\t\t\t\t\tkeyCode = 0;\n\t\t\t\t\tunoKeyCode = this._toUNOKeyCode(keyCode);\n\t\t\t\t}\n\t\t\t\tif (this._map._debug.tileInvalidationsOn) {\n\t\t\t\t\tthis._map._debug.addTileInvalidationKeypress();\n\t\t\t\t}\n\n\t\t\t\tif (keyEventFn) {\n\t\t\t\t\tkeyEventFn('input', charCode, unoKeyCode);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (ev.type === 'keyup') {\n\t\t\t\tif ((this.handleOnKeyDownKeys[keyCode] && charCode === 0) ||\n\t\t\t\t    (this.modifier) ||\n\t\t\t\t    unoKeyCode === UNOKey.RETURN) {\n\t\t\t\t\tif (keyEventFn) {\n\t\t\t\t\t\tkeyEventFn('up', charCode, unoKeyCode);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// was handled as textinput\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (keyCode === this.keyCodes.TAB) {\n\t\t\t\t// tab would change focus to other DOM elements\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t}\n\t\telse if (ev.type === 'keydown') {\n\t\t\tvar key = ev.keyCode;\n\t\t\tvar map = this._map;\n\t\t\tif (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', 'Home', 'End'].includes(ev.code)) {\n\t\t\t\tkeyEventFn('input', charCode, unoKeyCode);\n\t\t\t}\n\t\t\telse if (key in this._zoomKeys) {\n\t\t\t\tmap.setZoom(map.getZoom() + (ev.shiftKey ? 3 : 1) * this._zoomKeys[key], null, true /* animate? */);\n\t\t\t}\n\t\t}\n\n\t\tL.DomEvent.stopPropagation(ev);\n\t},\n\n\t_isCtrlKey: function (e) {\n\t\tif (window.ThisIsTheiOSApp || L.Browser.mac)\n\t\t\treturn e.metaKey;\n\t\telse\n\t\t\treturn e.ctrlKey;\n\t},\n\n\t// Given a DOM keyboard event that happened while the Control key was depressed,\n\t// triggers the appropriate action or coolwsd message.\n\t_handleCtrlCommand: function (e) {\n\n\t\tvar DEFAULT =0;\n\t\tvar MAC=1;\n\t\tif (this._map.uiManager.isUIBlocked())\n\t\t\treturn;\n\n\t\t// Control\n\t\tif (e.keyCode == this.keyCodes.CTRL)\n\t\t\treturn true;\n\n\t\tif (e.type !== 'keydown' && e.keyCode !== this.keyCodes.C[DEFAULT] && e.keyCode !== this.keyCodes.V[DEFAULT] && e.keyCode !== this.keyCodes.X[DEFAULT] &&\n\t\t/* Safari */ e.keyCode !== this.keyCodes.C[MAC] && e.keyCode !== this.keyCodes.V[MAC] && e.keyCode !== this.keyCodes.X[MAC]) {\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\t// Control + INSERT\n\t\tif (this._isCtrlKey(e) && e.keyCode === this.keyCodes.INSERT) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (e.keyCode !== this.keyCodes.C[DEFAULT] && e.keyCode !== this.keyCodes.V[DEFAULT] && e.keyCode !== this.keyCodes.X[DEFAULT] &&\n\t\t/* Safari */ e.keyCode !== this.keyCodes.C[MAC] && e.keyCode !== this.keyCodes.V[MAC] && e.keyCode !== this.keyCodes.X[MAC]) {\n\t\t\t// not copy or paste\n\t\t\te.preventDefault();\n\t\t}\n\n\t\t// CTRL + ALT + N for new document. This needs to be handled by the integrator.\n\t\tif (this._isCtrlKey(e) && e.altKey && e.keyCode === this.keyCodes.N) {\n\t\t\tthis._map.fire('postMessage', {msgId: 'UI_CreateFile', args: { DocumentType: this._map.getDocType() }});\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\t// CTRL + SHIFT + L is added to the core side for writer. Others can also be checked.\n\t\tif (this._isCtrlKey(e) && e.shiftKey && e.keyCode === this.keyCodes.L && this._map.getDocType() !== 'text' && this._map.getDocType() !== 'spreadsheet') {\n\t\t\tapp.socket.sendMessage('uno .uno:DefaultBullet');\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\t// CTRL + ALT + O to open a document. This needs to be handled by the integrator.\n\t\tif (this._isCtrlKey(e) && e.altKey && e.keyCode === this.keyCodes.O) {\n\t\t\tthis._map.fire('postMessage', { msgId: 'UI_OpenDocument' });\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._isCtrlKey(e) && e.shiftKey && e.key === '?') {\n\t\t\tthis._map.showHelp('keyboard-shortcuts-content');\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\t// Handles paste special. The \"Your browser\" thing seems to indicate that this code\n\t\t// snippet is relevant in a browser only.\n\t\tif (!window.ThisIsAMobileApp && e.ctrlKey && e.shiftKey && e.altKey && this.keyCodes.V.includes(e.keyCode)) {\n\t\t\tthis._map._clip._openPasteSpecialPopup();\n\t\t\treturn true;\n\t\t}\n\n\t\t// Handles unformatted paste\n\t\tif (this._isCtrlKey(e) && e.shiftKey && this.keyCodes.V.includes(e.keyCode)) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Collapse / expand notebookbar.\n\t\tif (this._isCtrlKey(e) && e.keyCode === this.keyCodes.F1) {\n\t\t\tif (this._map.uiManager.getCurrentMode() === 'notebookbar') {\n\t\t\t\tif (this._map.uiManager.isNotebookbarCollapsed())\n\t\t\t\t\tthis._map.uiManager.extendNotebookbar();\n\t\t\t\telse\n\t\t\t\t\tthis._map.uiManager.collapseNotebookbar();\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._isCtrlKey(e) && !e.shiftKey && e.keyCode === this.keyCodes.K) {\n\t\t\tthis._map.showHyperlinkDialog();\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (\n\t\t\t(this._isCtrlKey(e) && e.keyCode === this.keyCodes.Y) ||\n\t\t\t(this._isCtrlKey(e) && e.shiftKey && e.keyCode === this.keyCodes.Z)\n\t\t) {\n\t\t\tapp.socket.sendMessage('uno .uno:Redo');\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this._isCtrlKey(e) && e.keyCode === this.keyCodes.Z) {\n\t\t\tapp.socket.sendMessage('uno .uno:Undo');\n\t\t\te.preventDefault();\n\t\t\treturn true;\n\t\t}\n\n\t\tif (e.altKey || e.shiftKey) {\n\n\t\t\t// need to handle Ctrl + Alt + C separately for Firefox\n\t\t\t// Adding also CTRL + Alt + R combination for Safari users. R_MOD1_MOD2 combination is empty on the core side. So this should be safe.\n\t\t\tif ((this.keyCodes.C.includes(e.keyCode) || e.keyCode === this.keyCodes.R) && e.altKey) {\n\t\t\t\tthis._map.insertComment();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Ctrl + Alt\n\t\t\tif (!e.shiftKey) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\tcase this.keyCodes.NUM5[DEFAULT]: // 5\n\t\t\t\t\tapp.socket.sendMessage('uno .uno:Strikeout');\n\t\t\t\t\treturn true;\n\t\t\t\tcase this.keyCodes.F: // f but according to value it is F so I guess it is not MAC so safe to Give F\n\t\t\t\t\tapp.socket.sendMessage('uno .uno:InsertFootnote');\n\t\t\t\t\treturn true;\n\t\t\t\tcase this.keyCodes.C[DEFAULT]: // c\n\t\t\t\tcase this.keyCodes.M: // m\n\t\t\t\t\tthis._map.insertComment();\n\t\t\t\t\treturn true;\n\t\t\t\tcase this.keyCodes.D: // d\n\t\t\t\t\tapp.socket.sendMessage('uno .uno:InsertEndnote');\n\t\t\t\t\treturn true;\n\t\t\t\tcase this.keyCodes.pageUp:\n\t\t\t\tcase this.keyCodes.pageDown :\n\t\t\t\t\tif (this._map.getDocType() === 'spreadsheet') {\n\t\t\t\t\t\tvar currentSelectedPart = this._map._docLayer._selectedPart;\n\t\t\t\t\t\tvar parts = this._map._docLayer._parts;\n\t\t\t\t\t\tvar partToSelect = 0;\n\t\t\t\t\t\tthis._map._docLayer._clearReferences();\n\n\t\t\t\t\t\tif (e.keyCode === this.keyCodes.pageDown) {\n\t\t\t\t\t\t\tpartToSelect = currentSelectedPart != parts - 1 ? currentSelectedPart + 1 : 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tpartToSelect = currentSelectedPart != 0 ? currentSelectedPart - 1 : parts - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._map.setPart(parseInt(partToSelect), /*external:*/ false, /*calledFromSetPartHandler:*/ true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} else if (e.altKey) {\n\t\t\t\tswitch (e.keyCode) {\n\t\t\t\t\tcase this.keyCodes.D: // Ctrl + Shift + Alt + d for tile debugging mode\n\t\t\t\t\t\tthis._map._debug.toggle();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t\t/* Without specifying the key type, the messages are sent twice (both keydown/up) */\n\t\tif (e.type === 'keydown' && window.ThisIsAMobileApp) {\n\t\t\tif (this.keyCodes.C.includes(e.keyCode)) {\n\t\t\t\tapp.socket.sendMessage('uno .uno:Copy');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (this.keyCodes.V.includes(e.keyCode)) {\n\t\t\t\tapp.socket.sendMessage('uno .uno:Paste');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (this.keyCodes.X.includes(e.keyCode)) {\n\t\t\t\tapp.socket.sendMessage('uno .uno:Cut');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (window.ThisIsTheAndroidApp)\n\t\t\t\te.preventDefault();\n\t\t}\n\n\t\tswitch (e.keyCode) {\n\t\tcase this.keyCodes.NUM3[DEFAULT]: // 3\n\t\t\tif (this._map.getDocType() === 'spreadsheet') {\n\t\t\t\tapp.socket.sendMessage('uno .uno:SetOptimalColumnWidthDirect');\n\t\t\t\tapp.socket.sendMessage('commandvalues command=.uno:ViewRowColumnHeaders');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\tcase this.keyCodes.NUM5[DEFAULT]: // 5\n\t\t\tif (this._map.getDocType() === 'spreadsheet') {\n\t\t\t\tapp.socket.sendMessage('uno .uno:Strikeout');\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\tcase this.keyCodes.C[DEFAULT]: // 'C'\n\t\tcase this.keyCodes.X[DEFAULT]: // 'X'\n\t\tcase this.keyCodes.C[MAC]: // 'c' Since keydown+c as different value in mac so i had to update the mapping in keyCodes\n\t\tcase this.keyCodes.X[MAC]: // 'x' same reason as above\n\t\tcase this.keyCodes.LEFTWINDOWKEY[MAC]: // Left Cmd (Safari)\n\t\tcase this.keyCodes.RIGHTWINDOWKEY[MAC]: // Right Cmd (Safari)\n\t\t\t// we prepare for a copy or cut event\n\t\t\t// slide operations are handled differently avoid changing focus\n\t\t\tif (!this._map._docLayer._preview.partsFocused)\n\t\t\t\tthis._map.focus();\n\t\t\t// Not sure if the commented code is still used, so I didn't remove it.\n\t\t\t// Anyhow, by when editable area is populated with the focused paragraph\n\t\t\t// we can't select its content or on next editing the content is overwritten.\n\t\t\t// this._map._textInput.select();\n\t\t\treturn true;\n\t\tcase this.keyCodes.P: // p\n\t\t\tthis._map.print();\n\t\t\treturn true;\n\t\tcase this.keyCodes.S: // s\n\t\t\t// Handle save event in globalEventHandler\n\t\t\treturn true;\n\t\tcase this.keyCodes.V[DEFAULT]: // v\n\t\tcase this.keyCodes.V[MAC]: // v (Safari) needs a separate mapping in keyCodes\n\t\t\treturn true;\n\t\tcase this.keyCodes.F1: // f1\n\t\t\tapp.socket.sendMessage('uno .uno:NoteVisible');\n\t\t\treturn true;\n\t\tcase this.keyCodes.COMMA: // ,\n\t\t\tapp.socket.sendMessage('uno .uno:SubScript');\n\t\t\treturn true;\n\t\tcase this.keyCodes.PERIOD: // .\n\t\t\tapp.socket.sendMessage('uno .uno:SuperScript');\n\t\t\treturn true;\n\t\t}\n\t\tif (e.type === 'keypress' && (e.ctrlKey || e.metaKey) &&\n\t\t\t(this.keyCodes.C.includes(e.keyCode) ||this.keyCodes.V.includes(e.keyCode) || this.keyCodes.X.includes(e.keyCode))) {\n\t\t\t// need to handle this separately for Firefox\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n"]}