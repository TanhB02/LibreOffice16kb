{"version":3,"file":"docstatefunctions.js","sourceRoot":"","sources":["../../../../../../../../../TanhX/online/browser/src/docstatefunctions.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * Doc state functions.\n * This file is meant to be used for setting and getting the document states.\n */\n\n/* global app _ */\n\nwindow.addEventListener('load', function () {\n\tapp.calc.cellCursorRectangle = new app.definitions.simpleRectangle(\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t);\n\tapp.calc.cellAddress = new app.definitions.simplePoint(0, 0);\n\tapp.calc.splitCoordinate = new app.definitions.simplePoint(0, 0);\n\tapp.file.viewedRectangle = new app.definitions.simpleRectangle(0, 0, 0, 0);\n\tapp.file.textCursor.rectangle = new app.definitions.simpleRectangle(\n\t\t0,\n\t\t0,\n\t\t0,\n\t\t0,\n\t);\n\tapp.view.size = new app.definitions.simplePoint(0, 0);\n\tapp.file.size = new app.definitions.simplePoint(0, 0);\n\tapp.tile.size = new app.definitions.simplePoint(0, 0);\n\tapp.pixelsToTwips = 15;\n\tapp.twipsToPixels = 1 / app.pixelsToTwips;\n\tapp.tile.size.pX = app.tile.size.pY = 256;\n});\n\napp.getViewRectangles = function () {\n\tif (app.map._docLayer._splitPanesContext)\n\t\treturn app.map._docLayer._splitPanesContext.getViewRectangles();\n\telse return [app.file.viewedRectangle.clone()];\n};\n\n// ToDo: _splitPanesContext should be an app variable.\napp.isPointVisibleInTheDisplayedArea = function (twipsArray /* x, y */) {\n\tif (app.map._docLayer._splitPanesContext) {\n\t\tlet rectangles = app.map._docLayer._splitPanesContext.getViewRectangles();\n\t\tfor (let i = 0; i < rectangles.length; i++) {\n\t\t\tif (rectangles[i].containsPoint(twipsArray)) return true;\n\t\t}\n\t\treturn false;\n\t} else {\n\t\treturn app.file.viewedRectangle.containsPoint(twipsArray);\n\t}\n};\n\napp.isXVisibleInTheDisplayedArea = function (twipsX) {\n\tif (app.map._docLayer._splitPanesContext) {\n\t\tlet rectangles = app.map._docLayer._splitPanesContext.getViewRectangles();\n\t\tfor (let i = 0; i < rectangles.length; i++) {\n\t\t\tif (rectangles[i].containsX(twipsX)) return true;\n\t\t}\n\t\treturn false;\n\t} else {\n\t\treturn app.file.viewedRectangle.containsX(twipsX);\n\t}\n};\n\napp.isYVisibleInTheDisplayedArea = function (twipsY) {\n\tif (app.map._docLayer._splitPanesContext) {\n\t\tlet rectangles = app.map._docLayer._splitPanesContext.getViewRectangles();\n\t\tfor (let i = 0; i < rectangles.length; i++) {\n\t\t\tif (rectangles[i].containsY(twipsY)) return true;\n\t\t}\n\t\treturn false;\n\t} else {\n\t\treturn app.file.viewedRectangle.containsY(twipsY);\n\t}\n};\n\napp.isRectangleVisibleInTheDisplayedArea = function (\n\ttwipsArray /* x, y, width, height */,\n) {\n\tif (app.map._docLayer._splitPanesContext) {\n\t\tlet rectangles = app.map._docLayer._splitPanesContext.getViewRectangles();\n\t\tfor (let i = 0; i < rectangles.length; i++) {\n\t\t\tif (rectangles[i].intersectsRectangle(twipsArray)) return true;\n\t\t}\n\t\treturn false;\n\t} else {\n\t\treturn app.file.viewedRectangle.intersectsRectangle(twipsArray);\n\t}\n};\n\napp.isXOrdinateInFrozenPane = function (pixelX) {\n\tif (app.map._docLayer._splitPanesContext) {\n\t\tconst splitPos = app.map._docLayer._splitPanesContext.getSplitPos();\n\n\t\tif (pixelX < splitPos.x) return true;\n\t\telse return false;\n\t} else return false;\n};\n\napp.isYOrdinateInFrozenPane = function (pixelY) {\n\tif (app.map._docLayer._splitPanesContext) {\n\t\tconst splitPos = app.map._docLayer._splitPanesContext.getSplitPos();\n\n\t\tif (pixelY < splitPos.y) return true;\n\t\telse return false;\n\t} else return false;\n};\n\napp.isReadOnly = function () {\n\treturn app.file.readOnly;\n};\n\napp.getScale = function () {\n\treturn ((app.tile.size.pX / app.tile.size.x) * 15) / app.dpiScale;\n};\n\napp.setCursorVisibility = function (visible) {\n\tapp.file.textCursor.visible = visible;\n};\n\napp.isCommentEditingAllowed = function () {\n\treturn app.file.editComment;\n};\n\napp.setPermission = function (permission) {\n\tapp.file.permission = permission;\n\tif (permission === 'edit') {\n\t\tapp.file.readOnly = false;\n\t\tapp.file.editComment = true;\n\t} else if (permission === 'readonly') {\n\t\tapp.file.readOnly = true;\n\t\tapp.file.editComment = false;\n\t}\n};\n\napp.setCommentEditingPermission = function (isAllowed) {\n\tapp.file.editComment = isAllowed;\n};\n\napp.getPermission = function () {\n\treturn app.file.permission;\n};\n\napp.registerExportFormat = function (label, format) {\n\tvar duplicate = false;\n\tfor (var i = 0; i < app.file.exportFormats.length; i++) {\n\t\tif (\n\t\t\tapp.file.exportFormats[i].label == label &&\n\t\t\tapp.file.exportFormats[i].format == format\n\t\t) {\n\t\t\tduplicate = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (duplicate == false) {\n\t\tapp.file.exportFormats.push({ label: label, format: format });\n\t}\n};\n\napp.getFollowedViewId = function () {\n\treturn app.following.viewId;\n};\n\napp.setFollowingOff = function () {\n\tconsole.debug('user following: OFF');\n\tapp.following.mode = 'none';\n\tapp.following.viewId = -1;\n};\n\napp.setFollowingUser = function (viewId) {\n\tconsole.debug('user following: USER - ' + viewId);\n\tapp.following.mode = 'user';\n\tapp.following.viewId = viewId;\n};\n\napp.setFollowingEditor = function (viewId = -1) {\n\tconsole.debug('user following: EDITOR - ' + viewId);\n\tapp.following.mode = 'editor';\n\tapp.following.viewId = viewId;\n};\n\napp.isFollowingOff = function () {\n\treturn app.following.mode === 'none';\n};\n\napp.isFollowingUser = function () {\n\treturn app.following.mode === 'user';\n};\n\napp.isFollowingEditor = function () {\n\treturn app.following.mode === 'editor';\n};\n\napp.updateFollowingUsers = function () {\n\tconsole.debug('user following: update');\n\tvar isCellCursorVisible = app.calc.cellCursorVisible;\n\tvar isTextCursorVisible = app.file.textCursor.visible;\n\n\tif (isCellCursorVisible || isTextCursorVisible) {\n\t\tlet twipsArray = [];\n\t\tif (isCellCursorVisible)\n\t\t\ttwipsArray = [\n\t\t\t\tapp.calc.cellCursorRectangle.x2,\n\t\t\t\tapp.calc.cellCursorRectangle.y2,\n\t\t\t];\n\t\telse\n\t\t\ttwipsArray = [\n\t\t\t\tapp.file.textCursor.rectangle.x2,\n\t\t\t\tapp.file.textCursor.rectangle.y2,\n\t\t\t];\n\n\t\tconst cursorPositionInView =\n\t\t\tapp.isPointVisibleInTheDisplayedArea(twipsArray);\n\n\t\tif (\n\t\t\tparseInt(app.getFollowedViewId()) ===\n\t\t\t\tparseInt(app.map._docLayer._viewId) &&\n\t\t\t!cursorPositionInView\n\t\t) {\n\t\t\tapp.setFollowingOff();\n\t\t} else if (\n\t\t\tparseInt(app.getFollowedViewId()) === -1 &&\n\t\t\tcursorPositionInView\n\t\t) {\n\t\t\tapp.setFollowingUser(parseInt(app.map._docLayer._viewId));\n\t\t}\n\t}\n};\n\napp.showAsyncDownloadError = function (response, initialMsg) {\n\tconst reader = new FileReader();\n\tconst timeout = 10000;\n\treader.onload = function () {\n\t\tif (reader.result === 'wrong server') {\n\t\t\tinitialMsg += _(', cluster configuration error: mis-matching serverid');\n\t\t\tapp.map.uiManager.showSnackbar(initialMsg, '', null, timeout);\n\t\t} else {\n\t\t\tapp.map.uiManager.showSnackbar(initialMsg, '', null, timeout);\n\t\t}\n\t};\n\treader.readAsText(response);\n};\n\napp.calc.isRTL = function () {\n\tif (!app.map._docLayer || !app.map._docLayer._lastStatusJSON) return false;\n\n\tconst part =\n\t\tapp.map._docLayer._lastStatusJSON.parts[app.map._docLayer._selectedPart];\n\n\tif (part) return part.rtllayout !== 0;\n\telse return false;\n};\n\napp.setServerAuditFromCore = function (entries) {\n\tapp.serverAudit = entries;\n\tapp.map.fire('receivedserveraudit');\n};\n\napp.isExperimentalMode = function () {\n\tif (app.socket && app.socket.WSDServer && app.socket.WSDServer.Options)\n\t\treturn app.socket.WSDServer.Options.indexOf('E') !== -1;\n\treturn false;\n};\n\napp.calc.isPartHidden = function (part) {\n\tif (!app.map._docLayer || !app.map._docLayer._lastStatusJSON) return false;\n\tif (part >= app.map._docLayer._lastStatusJSON.parts.length) return false;\n\n\treturn app.map._docLayer._lastStatusJSON.parts[part].visible === 0; // ToDo: Move _lastStatusJSON into docstate.js\n};\n\napp.calc.isPartProtected = function (part) {\n\tif (!app.map._docLayer || !app.map._docLayer._lastStatusJSON) return false;\n\tif (part >= app.map._docLayer._lastStatusJSON.parts.length) return false;\n\n\treturn app.map._docLayer._lastStatusJSON.parts[part].protected === 1;\n};\n\napp.calc.isAnyPartHidden = function () {\n\tif (!app.map._docLayer || !app.map._docLayer._lastStatusJSON) return false;\n\n\tfor (let i = 0; i < app.map._docLayer._lastStatusJSON.parts.length; i++) {\n\t\tif (app.map._docLayer._lastStatusJSON.parts[i].visible === 0) return true;\n\t}\n\treturn false;\n};\n\napp.calc.getHiddenPartCount = function () {\n\tif (!app.map._docLayer || !app.map._docLayer._lastStatusJSON) return 0;\n\n\tlet count = 0;\n\n\tfor (let i = 0; i < app.map._docLayer._lastStatusJSON.parts.length; i++) {\n\t\tif (app.map._docLayer._lastStatusJSON.parts[i].visible === 0) count++;\n\t}\n\n\treturn count;\n};\n\napp.calc.getVisiblePartCount = function () {\n\tif (!app.map._docLayer || !app.map._docLayer._lastStatusJSON) return 0;\n\n\tlet count = 0;\n\n\tfor (let i = 0; i < app.map._docLayer._lastStatusJSON.parts.length; i++) {\n\t\tif (app.map._docLayer._lastStatusJSON.parts[i].visible === 1) count++;\n\t}\n\n\treturn count;\n};\n\napp.calc.getHiddenPartNameArray = function () {\n\tif (!app.map._docLayer || !app.map._docLayer._lastStatusJSON) return [];\n\n\tlet array = [];\n\n\tfor (let i = 0; i < app.map._docLayer._lastStatusJSON.parts.length; i++) {\n\t\tlet part = app.map._docLayer._lastStatusJSON.parts[i];\n\t\tif (part.visible === 0) array.push(part.name);\n\t}\n\n\treturn array;\n};\n\napp.impress.isSlideHidden = function (index) {\n\tif (app.impress.partList) {\n\t\tif (app.impress.partList.length > index)\n\t\t\treturn !app.impress.partList[index].visible;\n\t\telse {\n\t\t\tconsole.warn(\n\t\t\t\t'Index is bigger than the part count (isSlideHidden): ' + index,\n\t\t\t);\n\t\t\treturn true;\n\t\t}\n\t} else return false;\n};\n\napp.impress.areAllSlidesHidden = function () {\n\tif (app.impress.partList) {\n\t\tfor (let i = 0; i < app.impress.partList.length; i++) {\n\t\t\tif (app.impress.partList[i].visible === 1) return false;\n\t\t}\n\t\treturn true;\n\t} else return false;\n};\n\napp.impress.getSelectedSlidesCount = function () {\n\tlet count = 0;\n\n\tif (app.impress.partList) {\n\t\tfor (let i = 0; i < app.impress.partList.length; i++) {\n\t\t\tif (app.impress.partList[i].selected === 1) count++;\n\t\t}\n\t}\n\n\treturn count;\n};\n\napp.impress.getIndexFromSlideHash = function (hash) {\n\tif (app.impress.partList) {\n\t\tfor (let i = 0; i < app.impress.partList.length; i++) {\n\t\t\tif (app.impress.partList[i].hash === hash) return i;\n\t\t}\n\n\t\tconsole.warn('No part with hash (getIndexFromSlideHash): ' + hash);\n\n\t\treturn 0;\n\t} else return 0;\n};\n\napp.impress.isSlideSelected = function (index) {\n\tif (\n\t\tapp.impress.partList &&\n\t\tindex >= 0 &&\n\t\tindex < app.impress.partList.length\n\t) {\n\t\treturn app.impress.partList[index].selected === 1;\n\t} else return false;\n};\n"]}