{"version":3,"file":"CanvasSectionObject.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/canvas/CanvasSectionObject.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n// Used to initialize a new anonymous CanvasSectionObject from its properties.\ninterface SectionInitProperties {\n\tname: string;\n\tbackgroundColor?: string;\n\tborderColor?: string;\n\tanchor?: string | Array<any>;\n\tposition: Array<number>;\n\tsize: Array<number>;\n\texpand: string;\n\tprocessingOrder: number;\n\tdrawingOrder: number;\n\tzIndex: number;\n\tinteractable: boolean;\n\tshowSection?: boolean;\n\tsectionProperties?: any;\n}\n\n// This class will be used internally by CanvasSectionContainer.\nclass CanvasSectionObject {\n\tcontext: CanvasRenderingContext2D;\n\tmyTopLeft: Array<number> = [0, 0];\n\tdocumentTopLeft: Array<number> = [0, 0]; // Document top left will be updated by container.\n\tcontainerObject: CanvasSectionContainer = null;\n\tname: string = null;\n\tbackgroundColor: string = null; // Default is null (container's background color will be used).\n\tbackgroundOpacity: number = 1; // Valid when backgroundColor is valid.\n\tborderColor: string = null; // Default is null (no borders).\n\tboundToSection: string = null;\n\tanchor: Array<string> = [];\n\tdocumentObject: boolean; // If true, the section is a document object.\n\t// When section is a document object, its position should be the real position inside the document, in core pixels.\n\tisVisible: boolean = false; // Is section visible on the viewed area of the document? This property is valid for document objects. This is managed by the section container.\n\tshowSection: boolean = true; // Show / hide section.\n\tposition: Array<number> = [0, 0];\n\tisCollapsed: boolean;\n\tsize: Array<number> = [0, 0];\n\torigSizeHint: undefined | Array<number>; // This is used to preserve the original size provided on construct.\n\texpand: Array<string> = [];\n\tisLocated: boolean; // Location and size of the section computed yet?\n\tprocessingOrder: number;\n\tdrawingOrder: number;\n\tzIndex: number;\n\tinteractable: boolean = true;\n\tisAnimating: boolean = false;\n\twindowSection: boolean = false;\n\tsectionProperties: any = {};\n\tboundsList: Array<CanvasSectionObject> = []; // The sections those this section can propagate events to. Updated by container.\n\n\tonInitialize(): void { return; }\n\tonCursorPositionChanged(newPosition: any): void { return; }\n\tonCellAddressChanged(): void { return; }\n\tonMouseMove(point: Array<number>, dragDistance: Array<number>, e: MouseEvent): void { return; }\n\tonMouseDown(point: Array<number>, e: MouseEvent): void { return; }\n\tonMouseUp(point: Array<number>, e: MouseEvent): void { return; }\n\tsetShowSection(show: boolean): void { return; }\n\tonSectionShowStatusChange(): void { return; } /// Called when setShowSection is called.\n\tisSectionShown(): boolean { return; }\n\tonDocumentObjectVisibilityChange(): void { return; }\n\tonMouseEnter(point: Array<number>, e: MouseEvent): void { return; }\n\tonMouseLeave(point: Array<number>, e: MouseEvent): void { return; }\n\tonClick(point: Array<number>, e: MouseEvent): void { return; }\n\tonDoubleClick(point: Array<number>, e: MouseEvent): void { return; }\n\tonContextMenu(e?: MouseEvent): void { return; }\n\tonMouseWheel(point: Array<number>, delta: Array<number>, e: WheelEvent): void { return; }\n\tonMultiTouchStart(e: TouchEvent): void { return; }\n\tonMultiTouchMove(point: Array<number>, dragDistance: number, e: TouchEvent): void { return; }\n\tonMultiTouchEnd(e: TouchEvent): void { return; }\n\tonResize(): void { return; }\n\tonDraw(frameCount?: number, elapsedTime?: number): void { return; }\n\tonUpdateDOM(): void { return; } // Called before onDraw, to update the DOM if required.\n\tonDrawArea(area?: cool.Bounds, paneTopLeft?: cool.Point, canvasContext?: CanvasRenderingContext2D): void { return; } // area is the area to be painted using canvasContext.\n\tonAnimate(frameCount: number, elapsedTime: number): void { return; }\n\tonAnimationEnded(frameCount: number, elapsedTime: number): void { return; } // frameCount, elapsedTime. Sections that will use animation, have to have this function defined.\n\tonNewDocumentTopLeft(size: Array<number>): void { return; }\n\tonRemove(): void { return; } // This Function is called right before section is removed.\n\tsetDrawingOrder(drawingOrder: number): void { return; }\n\tsetZIndex(zIndex: number): void { return; }\n\tbindToSection(sectionName: string): void { return; }\n\tstopPropagating(): void { return; }\n\tstartAnimating(options: any): boolean { return; }\n\tresetAnimation(): void { return; }\n\tgetTestDiv(): HTMLDivElement { return; }\n\tsetPosition(x: number, y: number): void { return; } // Document objects only.\n\n\t// All below functions should be included in their respective section definitions (or other classes), not here.\n\tisCalcRTL(): boolean { return; }\n\tsetViewResolved(on: boolean): void { return; }\n\tsetView(on: boolean): void { return; }\n\tscrollVerticalWithOffset(offset: number): void { return; }\n\tremove(id: string): void { return; }\n\tdeleteThis(): void { return; }\n\tgetActiveEdit(): any { return; }\n\tisMobileCommentActive(): boolean { return false; }\n\tgetMobileCommentModalId(): string { return ''; }\n\trejectAllTrackedCommentChanges(): void { return; }\n\tremoveHighlighters(): void { return; }\n\tshowUsernamePopUp(): void { return; }\n\t_selectColumn (colNumber: number, modifier: number): void { return; }\n\t_selectRow (row: number, modifier: number): void { return; }\n\tinsertColumnBefore (index: number): void { return; }\n\tinsertRowAbove (index: number): void { return; }\n\tdeleteColumn (index: number): void { return; }\n\tdeleteRow (index: number): void { return; }\n\tresetStrokeStyle(): void { return; }\n\thasAnyComments(): boolean { return false; }\n\n\tpublic getLineWidth(): number {\n\t\tif (app.dpiScale > 1.0) {\n\t\t\treturn app.roundedDpiScale;\n\t\t} else {\n\t\t\treturn app.dpiScale;\n\t\t}\n\t}\n\n\tpublic getLineOffset(): number {\n\t\tif (app.dpiScale > 1.0) {\n\t\t\treturn app.roundedDpiScale % 2 === 0 ? 0 : 0.5;\n\t\t} else {\n\t\t\treturn 0.5;\n\t\t}\n\t}\n}\n\napp.definitions.canvasSectionObject = CanvasSectionObject;\n"]}