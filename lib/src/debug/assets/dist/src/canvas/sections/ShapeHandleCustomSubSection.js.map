{"version":3,"file":"ShapeHandleCustomSubSection.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/canvas/sections/ShapeHandleCustomSubSection.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB;;;;;;;;EAQE;;;;;;;;;;;;;;;;AAEF;;EAEE;AAEF;IAA0C,+CAAmB;IAM5D,qCAAa,oBAAyC,EAAE,WAAmB,EAAE,IAAc,EAAE,gBAAkC,EAAE,OAAY;QAA7I,YACO,iBAAO,SAYb;QAlBE,qBAAe,GAAW,CAAC,CAAC,SAAS,CAAC,yBAAyB,CAAC,eAAe,CAAC;QACnF,kBAAY,GAAW,CAAC,CAAC,SAAS,CAAC,yBAAyB,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,2CAA2C;QAC1H,YAAM,GAAW,CAAC,CAAC,SAAS,CAAC,yBAAyB,CAAC,MAAM,CAAC;QAC3D,oBAAc,GAAY,IAAI,CAAC;QAK3B,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACvB,KAAI,CAAC,IAAI,GAAG,WAAW,CAAC;QAExB,KAAI,CAAC,iBAAiB,CAAC,QAAQ,GAAG,gBAAgB,CAAC,KAAK,EAAE,CAAC;QAC3D,KAAI,CAAC,iBAAiB,CAAC,oBAAoB,GAAG,oBAAoB,CAAC;QACnE,KAAI,CAAC,iBAAiB,CAAC,OAAO,GAAG,OAAO,CAAC;QACzC,KAAI,CAAC,iBAAiB,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAElD,KAAI,CAAC,iBAAiB,CAAC,gBAAgB,GAAG,MAAM,CAAC;QACjD,KAAI,CAAC,iBAAiB,CAAC,OAAO,GAAiB,CAAC,QAAQ,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;;IACrG,CAAC;IAED,4CAAM,GAAN,UAAO,UAAmB,EAAE,WAAoB;QAC/C,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC;QAClC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;QACzB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;QAC7F,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;QACzB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;QACpB,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;IACvB,CAAC;IAED,kDAAY,GAAZ;QACC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;IAC1F,CAAC;IAED,kDAAY,GAAZ,UAAa,KAAe,EAAE,CAAa;QAC1C,GAAG,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC;QAC/B,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,GAAG,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC;QACzF,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,gBAAgB,CAAC;QACtF,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,CAAC;IACtC,CAAC;IAED,kDAAY,GAAZ,UAAa,KAAe,EAAE,CAAa;QAC1C,GAAG,CAAC,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC;QACzF,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,CAAC;IACtC,CAAC;IAED,iDAAW,GAAX,UAAY,KAAoB,EAAE,CAAa;QAC7C,MAAc,CAAC,aAAa,GAAG,IAAI,CAAC;IACtC,CAAC;IAED,+CAAS,GAAT,UAAU,KAAe,EAAE,CAAa;QACvC,IAAI,IAAI,CAAC,eAAe,CAAC,mBAAmB,EAAE,EAAE;YAC/C,IAAM,UAAU,GAAG;gBAClB,SAAS,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,EAAE,EAAE;gBACrE,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,aAAa,CAAC,EAAE;gBAC/F,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,aAAa,CAAC,EAAE;aAC/F,CAAC;YAEF,GAAG,CAAC,GAAG,CAAC,cAAc,CAAC,sBAAsB,EAAE,UAAU,CAAC,CAAC;YAE3D,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,CAAC,CAAC,eAAe,EAAE,CAAC;SACpB;QAEA,MAAc,CAAC,aAAa,GAAG,KAAK,CAAC;IACvC,CAAC;IAED,iDAAW,GAAX,UAAY,KAAoB,EAAE,YAA2B,EAAE,CAAa;QAC3E,IAAI,IAAI,CAAC,eAAe,CAAC,mBAAmB,EAAE,EAAE;YAC/C,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,CAAC,CAAC,eAAe,EAAE,CAAC;SACpB;IACF,CAAC;IACF,kCAAC;AAAD,CAAC,AA/ED,CAA0C,mBAAmB,GA+E5D;AAED,GAAG,CAAC,WAAW,CAAC,2BAA2B,GAAG,2BAA2B,CAAC","sourcesContent":["/* global Proxy _ */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n*/\n\n/*\n\tThis class is for custom handlers of shapes.\n*/\n\nclass ShapeHandleCustomSubSection extends CanvasSectionObject {\n    processingOrder: number = L.CSections.DefaultForDocumentObjects.processingOrder;\n\tdrawingOrder: number = L.CSections.DefaultForDocumentObjects.drawingOrder + 1; // Handle events before the parent section.\n\tzIndex: number = L.CSections.DefaultForDocumentObjects.zIndex;\n    documentObject: boolean = true;\n\n\tconstructor (parentHandlerSection: ShapeHandlesSection, sectionName: string, size: number[], documentPosition: cool.SimplePoint, ownInfo: any) {\n        super();\n\n        this.size = size;\n\t\tthis.name = sectionName;\n\n\t\tthis.sectionProperties.position = documentPosition.clone();\n\t\tthis.sectionProperties.parentHandlerSection = parentHandlerSection;\n\t\tthis.sectionProperties.ownInfo = ownInfo;\n\t\tthis.sectionProperties.previousCursorStyle = null;\n\n\t\tthis.sectionProperties.mousePointerType = 'grab';\n\t\tthis.sectionProperties.mapPane = (<HTMLElement>(document.querySelectorAll('.leaflet-map-pane')[0]));\n\t}\n\n\tonDraw(frameCount?: number, elapsedTime?: number): void {\n\t\tthis.context.fillStyle = 'yellow';\n\t\tthis.context.strokeStyle = 'black';\n\t\tthis.context.beginPath();\n\t\tthis.context.arc(this.size[0] * 0.5, this.size[1] * 0.5, this.size[0] * 0.5, 0, Math.PI * 2);\n\t\tthis.context.closePath();\n\t\tthis.context.fill();\n\t\tthis.context.stroke();\n\t}\n\n\tonInitialize(): void {\n\t\tthis.setPosition(this.sectionProperties.position.pX, this.sectionProperties.position.pY);\n\t}\n\n\tonMouseEnter(point: number[], e: MouseEvent) {\n\t\tapp.map.dontHandleMouse = true;\n\t\tthis.sectionProperties.previousCursorStyle = this.sectionProperties.mapPane.style.cursor;\n\t\tthis.sectionProperties.mapPane.style.cursor = this.sectionProperties.mousePointerType;\n\t\tthis.stopPropagating();\n\t\te.stopPropagation();\n\t\tthis.containerObject.requestReDraw();\n\t}\n\n\tonMouseLeave(point: number[], e: MouseEvent) {\n\t\tapp.map.dontHandleMouse = false;\n\t\tthis.sectionProperties.mapPane.style.cursor = this.sectionProperties.previousCursorStyle;\n\t\tthis.stopPropagating();\n\t\te.stopPropagation();\n\t\tthis.containerObject.requestReDraw();\n\t}\n\n\tonMouseDown(point: Array<number>, e: MouseEvent): void {\n\t\t(window as any).IgnorePanning = true;\n\t}\n\n\tonMouseUp(point: number[], e: MouseEvent): void {\n\t\tif (this.containerObject.isDraggingSomething()) {\n\t\t\tconst parameters = {\n\t\t\t\tHandleNum: { type: 'long', value: this.sectionProperties.ownInfo.id },\n\t\t\t\tNewPosX: { type: 'long', value: Math.round((point[0] + this.position[0]) * app.pixelsToTwips) },\n\t\t\t\tNewPosY: { type: 'long', value: Math.round((point[1] + this.position[1]) * app.pixelsToTwips) }\n\t\t\t};\n\n\t\t\tapp.map.sendUnoCommand('.uno:MoveShapeHandle', parameters);\n\n\t\t\tthis.stopPropagating();\n\t\t\te.stopPropagation();\n\t\t}\n\n\t\t(window as any).IgnorePanning = false;\n\t}\n\n\tonMouseMove(point: Array<number>, dragDistance: Array<number>, e: MouseEvent) {\n\t\tif (this.containerObject.isDraggingSomething()) {\n\t\t\tthis.stopPropagating();\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n}\n\napp.definitions.shapeHandleCustomSubSection = ShapeHandleCustomSubSection;\n"]}