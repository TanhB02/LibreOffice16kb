{"version":3,"file":"FocusCellSection.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/canvas/sections/FocusCellSection.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;;;;;;;;;;;;;;;;AAEhC;;;;;;;;GAQG;AAEH;;;;;;;;;EASE;AAEF;IAA+B,oCAAmB;IASjD;QAAA,YACC,iBAAO,SAMP;QAfD,UAAI,GAAW,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC;QAC1C,qBAAe,GAAW,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,eAAe,CAAC;QAChE,kBAAY,GAAW,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC;QAC1D,YAAM,GAAW,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC;QAC9C,oBAAc,GAAY,IAAI,CAAC;QAC/B,kBAAY,GAAY,KAAK,CAAC;QAM7B,KAAI,CAAC,iBAAiB,CAAC,eAAe,GAAG,IAAI,CAAC;QAC9C,KAAI,CAAC,iBAAiB,CAAC,YAAY,GAAG,IAAI,CAAC;QAC3C,KAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,SAAS,CAAC;QAC1C,KAAI,CAAC,iBAAiB,CAAC,MAAM,GAAG,QAAQ,CAAC;;IAC1C,CAAC;IAEM,+CAAoB,GAA3B;QACC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC;QACnD,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC;QACpD,IAAI,CAAC,WAAW,CACf,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,EAChC,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAChC,CAAC;IACH,CAAC;IAEc,oCAAmB,GAAlC;QACC,IAAI,gBAAgB,CAAC,QAAQ,KAAK,IAAI,EAAE;YACvC,gBAAgB,CAAC,QAAQ,GAAG,IAAI,gBAAgB,EAAE,CAAC;YACnD,GAAG,CAAC,gBAAgB,CAAC,UAAU,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;SAC3D;QAED,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW;YAAE,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAEnE,IAAI,CAAC,QAAQ,CAAC,oBAAoB,EAAE,CAAC;IACtC,CAAC;IAEa,qCAAoB,GAAlC;QACC,IAAI,gBAAgB,CAAC,QAAQ;YAC5B,gBAAgB,CAAC,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;IAClD,CAAC;IAEa,qCAAoB,GAAlC;QACC,IAAI,gBAAgB,CAAC,QAAQ;YAC5B,gBAAgB,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;aAC3C;YACJ,IAAI,CAAC,mBAAmB,EAAE,CAAC;SAC3B;IACF,CAAC;IAEM,iCAAM,GAAb;QACC,IAAM,KAAK,GAAG,gBAAgB,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC,gBAAgB,CACxE,wBAAwB,CACxB,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC;QAC/B,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,KAAK,CAAC;QAEjC,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC;QAE/B,IAAI,CAAC,OAAO,CAAC,QAAQ,CACpB,CAAC,EACD,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EACjB,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EACnC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAC7B,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,QAAQ,CACpB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EACjB,CAAC,EACD,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAC7B,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CACpC,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,CAAC,CAAC;QAC7B,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,CAAC,GAAG,GAAG,CAAC,QAAQ,CAAC;QAE1C,IAAI,CAAC,OAAO,CAAC,UAAU,CACtB,CAAC,EACD,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EACjB,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,EACnC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAC7B,CAAC;QAEF,IAAI,CAAC,OAAO,CAAC,UAAU,CACtB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EACjB,CAAC,EACD,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAC7B,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CACpC,CAAC;IACH,CAAC;IApFM,yBAAQ,GAAqB,IAAI,CAAC;IAqF1C,uBAAC;CAAA,AA5FD,CAA+B,mBAAmB,GA4FjD","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n\tSee CanvasSectionContainer.ts explanations about sections, event handlers and more.\n\n\tThis section is activated when user (currently) clicks on [View -> Focus Cell] button.\n\tWhen feature is activated, this section draws 2 rectangles:\n\t\t* One vertical that indicates the column of the cell cursor.\n\t\t* One horizontal that indicates the row of the cell cursor.\n\n\tSo the purpose is to visually indicate the cell cursor position in the document better.\n*/\n\nclass FocusCellSection extends CanvasSectionObject {\n\tname: string = L.CSections.FocusCell.name;\n\tprocessingOrder: number = L.CSections.FocusCell.processingOrder;\n\tdrawingOrder: number = L.CSections.FocusCell.drawingOrder;\n\tzIndex: number = L.CSections.FocusCell.zIndex;\n\tdocumentObject: boolean = true;\n\tinteractable: boolean = false;\n\tstatic instance: FocusCellSection = null;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.sectionProperties.columnRectangle = null;\n\t\tthis.sectionProperties.rowRectangle = null;\n\t\tthis.sectionProperties.maxCol = 268435455;\n\t\tthis.sectionProperties.maxRow = 20971124;\n\t}\n\n\tpublic onCellAddressChanged(): void {\n\t\tthis.size[0] = app.calc.cellCursorRectangle.pWidth;\n\t\tthis.size[1] = app.calc.cellCursorRectangle.pHeight;\n\t\tthis.setPosition(\n\t\t\tapp.calc.cellCursorRectangle.pX1,\n\t\t\tapp.calc.cellCursorRectangle.pY1,\n\t\t);\n\t}\n\n\tprivate static addFocusCellSection() {\n\t\tif (FocusCellSection.instance === null) {\n\t\t\tFocusCellSection.instance = new FocusCellSection();\n\t\t\tapp.sectionContainer.addSection(FocusCellSection.instance);\n\t\t}\n\n\t\tif (!this.instance.showSection) this.instance.setShowSection(true);\n\n\t\tthis.instance.onCellAddressChanged();\n\t}\n\n\tpublic static hideFocusCellSection() {\n\t\tif (FocusCellSection.instance)\n\t\t\tFocusCellSection.instance.setShowSection(false);\n\t}\n\n\tpublic static showFocusCellSection() {\n\t\tif (FocusCellSection.instance)\n\t\t\tFocusCellSection.instance.setShowSection(true);\n\t\telse {\n\t\t\tthis.addFocusCellSection();\n\t\t}\n\t}\n\n\tpublic onDraw() {\n\t\tconst style = getComputedStyle(document.documentElement).getPropertyValue(\n\t\t\t'--column-row-highlight',\n\t\t);\n\n\t\tthis.context.fillStyle = style;\n\t\tthis.context.strokeStyle = style;\n\n\t\tthis.context.globalAlpha = 0.3;\n\n\t\tthis.context.fillRect(\n\t\t\t0,\n\t\t\t-this.position[1],\n\t\t\tapp.calc.cellCursorRectangle.pWidth,\n\t\t\tthis.sectionProperties.maxCol,\n\t\t);\n\n\t\tthis.context.fillRect(\n\t\t\t-this.position[0],\n\t\t\t0,\n\t\t\tthis.sectionProperties.maxRow,\n\t\t\tapp.calc.cellCursorRectangle.pHeight,\n\t\t);\n\n\t\tthis.context.globalAlpha = 1;\n\t\tthis.context.lineWidth = 2 * app.dpiScale;\n\n\t\tthis.context.strokeRect(\n\t\t\t0,\n\t\t\t-this.position[1],\n\t\t\tapp.calc.cellCursorRectangle.pWidth,\n\t\t\tthis.sectionProperties.maxCol,\n\t\t);\n\n\t\tthis.context.strokeRect(\n\t\t\t-this.position[0],\n\t\t\t0,\n\t\t\tthis.sectionProperties.maxRow,\n\t\t\tapp.calc.cellCursorRectangle.pHeight,\n\t\t);\n\t}\n}\n"]}