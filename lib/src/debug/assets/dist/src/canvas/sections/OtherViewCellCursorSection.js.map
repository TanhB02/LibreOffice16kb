{"version":3,"file":"OtherViewCellCursorSection.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/canvas/sections/OtherViewCellCursorSection.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n// This is used for other views' cell cursors.\n\nclass OtherViewCellCursorSection extends CanvasSectionObject {\n    documentObject: boolean = true;\n    interactable: boolean = false; // We don't bother with events.\n    zIndex: number = L.CSections.ColumnHeader.zIndex;\n    drawingOrder: number = L.CSections.OtherViewCellCursor.drawingOrder;\n    processingOrder: number = L.CSections.OtherViewCellCursor.processingOrder;\n\n    static sectionNamePrefix = 'OtherViewCellCursorSection ';\n    static sectionPointers: Array<OtherViewCellCursorSection> = [];\n\n    constructor(viewId: number, rectangle: cool.SimpleRectangle, part: number) {\n        super();\n\n        this.size = [rectangle.pWidth, rectangle.pHeight];\n        this.position = [rectangle.pX1, rectangle.pY1];\n        this.sectionProperties.color = app.LOUtil.rgbToHex(app.LOUtil.getViewIdColor(viewId));\n        this.name = OtherViewCellCursorSection.sectionNamePrefix + viewId;\n\n        this.sectionProperties.viewId = viewId;\n        this.sectionProperties.part = part;\n\n        this.sectionProperties.popUpContainer = null;\n        this.sectionProperties.popUpShown = false;\n\n        this.sectionProperties.username = null;\n        this.sectionProperties.popUpTimer = null;\n    }\n\n    onDraw(frameCount?: number, elapsedTime?: number): void {\n        if (app.map._docLayer._isZooming)\n            return;\n\n        this.adjustPopUpPosition();\n\n        this.context.strokeStyle = this.sectionProperties.color;\n        this.context.lineWidth = 2;\n        this.context.strokeRect(-0.5, -0.5, this.size[0], this.size[1]);\n    }\n\n    checkMyVisibility() {\n        if (app.map._docLayer._selectedPart !== this.sectionProperties.part)\n            return false;\n        else\n            return true;\n    }\n\n    adjustPopUpPosition() {\n        const width = this.sectionProperties.popUpContainer.getBoundingClientRect().width;\n        const height = this.sectionProperties.popUpContainer.getBoundingClientRect().height;\n\n        const pos = [this.myTopLeft[0] / app.dpiScale + this.size[0] * 0.5 / app.dpiScale - (width * 0.5), (this.myTopLeft[1] / app.dpiScale) - (height + 15)];\n        this.sectionProperties.popUpContainer.style.left = pos[0] + 'px';\n        this.sectionProperties.popUpContainer.style.top = pos[1] + 'px';\n\n        if (!this.showSection)\n            this.hideUsernamePopUp();\n    }\n\n    onNewDocumentTopLeft(size: Array<number>): void {\n        this.adjustPopUpPosition();\n    }\n\n    prepareUsernamePopUp() {\n        if (this.sectionProperties.popUpContainer === null) {\n            const popUpContainer = document.createElement('div');\n\n            popUpContainer.className = 'username-pop-up';\n\n            const nameContainer = document.createElement('div');\n            popUpContainer.appendChild(nameContainer);\n\n            const nameParagraph = document.createElement('p');\n            nameContainer.appendChild(nameParagraph);\n            nameParagraph.textContent = this.sectionProperties.username;\n\n            const arrowDiv = document.createElement('div');\n            arrowDiv.className = 'arrow-div';\n            popUpContainer.appendChild(arrowDiv);\n\n            popUpContainer.style.backgroundColor = nameContainer.style.backgroundColor = this.sectionProperties.color;\n            arrowDiv.style.backgroundColor = nameParagraph.style.backgroundColor = this.sectionProperties.color;\n\n            document.getElementById('document-container').appendChild(popUpContainer);\n\n            this.sectionProperties.popUpContainer = popUpContainer;\n\n            this.hideUsernamePopUp();\n        }\n    }\n\n    clearPopUpTimer() {\n        if (this.sectionProperties.popUpTimer) {\n            clearTimeout(this.sectionProperties.popUpTimer);\n            this.sectionProperties.popUpTimer = null;\n        }\n    }\n\n    showUsernamePopUp() {\n        const textCursorSectionName = CursorHeaderSection.namePrefix + this.sectionProperties.viewId;\n\n        if (app.sectionContainer.doesSectionExist(textCursorSectionName))\n            return; // Don't show the popup if the cursor header is shown.\n\n        if (this.sectionProperties.popUpContainer && this.isVisible) {\n            this.adjustPopUpPosition();\n\n            this.sectionProperties.popUpShown = true;\n            this.sectionProperties.popUpContainer.style.display = '';\n\n            this.clearPopUpTimer();\n\n            this.sectionProperties.popUpTimer = setTimeout(() => {\n                this.hideUsernamePopUp();\n            }, 3000);\n        }\n    }\n\n    hideUsernamePopUp() {\n        if (this.sectionProperties.popUpContainer) {\n            this.sectionProperties.popUpShown = false;\n            if (this.sectionProperties.popUpContainer.style.display !== 'none')\n                this.sectionProperties.popUpContainer.style.display = 'none';\n        }\n        this.clearPopUpTimer();\n    }\n\n    onDocumentObjectVisibilityChange(): void {\n        if (this.sectionProperties.popUpShown && !this.isVisible)\n            this.hideUsernamePopUp();\n    }\n\n    public static addOrUpdateOtherViewCellCursor(viewId: number, username: string, rectangleData: Array<string>, part: number) {\n        let rectangle = new cool.SimpleRectangle(0, 0, 0, 0);\n        if (rectangleData)\n            rectangle = new app.definitions.simpleRectangle(parseInt(rectangleData[0]), parseInt(rectangleData[1]), parseInt(rectangleData[2]), parseInt(rectangleData[3]));\n\n        const sectionName = OtherViewCellCursorSection.sectionNamePrefix + viewId;\n        let section: OtherViewCellCursorSection;\n        let newSection = false;\n        if (app.sectionContainer.doesSectionExist(sectionName)) {\n            section = app.sectionContainer.getSectionWithName(sectionName) as OtherViewCellCursorSection;\n            section.sectionProperties.part = part;\n            section.size[0] = rectangle.pWidth;\n            section.size[1] = rectangle.pHeight;\n            section.setPosition(rectangle.pX1, rectangle.pY1);\n        }\n        else {\n            section = new OtherViewCellCursorSection(viewId, rectangle, part);\n            app.sectionContainer.addSection(section);\n            OtherViewCellCursorSection.sectionPointers.push(section);\n            newSection = true;\n        }\n\n        section.sectionProperties.username = username;\n        section.prepareUsernamePopUp();\n\n        section.setShowSection(section.checkMyVisibility());\n\n        if (section.showSection && !newSection)\n            section.showUsernamePopUp();\n\n        if (!section.showSection)\n            section.hideUsernamePopUp();\n\n        app.sectionContainer.requestReDraw();\n    }\n\n    public static removeView(viewId: number) {\n        const sectionName = OtherViewCellCursorSection.sectionNamePrefix + viewId;\n        if (app.sectionContainer.doesSectionExist(sectionName)) {\n            const section = app.sectionContainer.getSectionWithName(sectionName) as OtherViewCellCursorSection;\n            OtherViewCellCursorSection.sectionPointers.splice(OtherViewCellCursorSection.sectionPointers.indexOf(section), 1);\n            app.sectionContainer.removeSection(sectionName);\n            app.sectionContainer.requestReDraw();\n        }\n    }\n\n    public static updateVisibilities() {\n        for (let i = 0; i < OtherViewCellCursorSection.sectionPointers.length; i++) {\n            const section = OtherViewCellCursorSection.sectionPointers[i];\n            const newState = section.checkMyVisibility();\n\n            if (newState !== section.showSection) {\n                section.setShowSection(newState);\n                if (newState === false)\n                    section.hideUsernamePopUp();\n            }\n        }\n        app.sectionContainer.requestReDraw();\n    }\n\n    public static closePopups() {\n        for (let i = 0; i < OtherViewCellCursorSection.sectionPointers.length; i++)\n            OtherViewCellCursorSection.sectionPointers[i].hideUsernamePopUp();\n    }\n\n    public static getViewCursorSection(viewId: number) {\n        const name = OtherViewCellCursorSection.sectionNamePrefix + viewId;\n        return app.sectionContainer.getSectionWithName(name);\n    }\n\n    public static doesViewCursorExist(viewId: number) {\n        const name = OtherViewCellCursorSection.sectionNamePrefix + viewId;\n        return app.sectionContainer.doesSectionExist(name);\n    }\n\n    public static showPopUpForView(viewId: number) {\n        if (OtherViewCellCursorSection.doesViewCursorExist(viewId)) {\n            const section = OtherViewCellCursorSection.getViewCursorSection(viewId);\n            section.showUsernamePopUp();\n        }\n    }\n}\n\napp.definitions.otherViewCellCursorSection = OtherViewCellCursorSection;\n"]}