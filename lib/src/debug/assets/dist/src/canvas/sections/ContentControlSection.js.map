{"version":3,"file":"ContentControlSection.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/canvas/sections/ContentControlSection.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\ndeclare var L: any;\n\nnamespace cool {\n\nexport class ContentControlSection extends CanvasSectionObject {\n\tname: string = L.CSections.ContentControl.name;\n\tprocessingOrder: number = L.CSections.ContentControl.processingOrder;\n\tdrawingOrder: number = L.CSections.ContentControl.drawingOrder;\n\tzIndex: number = L.CSections.ContentControl.zIndex;\n\tinteractable: boolean = false;\n\tdocumentObject: boolean = true;\n\n\tmap: any;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.map = L.Map.THIS;\n\t\tthis.sectionProperties.json = null;\n\t\tthis.sectionProperties.datePicker = false;\n\t\tthis.sectionProperties.picturePicker = null;\n\t\tthis.sectionProperties.polygon = null;\n\t\tthis.sectionProperties.dropdownSection = null;\n\t\tthis.sectionProperties.dropdownMarkerWidth = 22;\n\t\tthis.sectionProperties.dropdownMarkerHeight = 22;\n\t}\n\n\tpublic onInitialize(): void {\n\t\tthis.map.on('darkmodechanged', this.changeBorderStyle, this);\n\n\t\tvar container = L.DomUtil.createWithId('div', 'datepicker');\n\t\tcontainer.style.zIndex = '12';\n\t\tcontainer.style.position = 'absolute';\n\t\tdocument.getElementById('document-container').appendChild(container);\n\t\tthis.sectionProperties.picturePicker = false;\n\t}\n\n\tprivate setDatePickerVisibility(visible: boolean): void {\n\t\tthis.sectionProperties.datePicker = visible;\n\n\t\tif (this.sectionProperties.dropdownSection)\n\t\t\tthis.sectionProperties.dropdownSection.sectionProperties.datePicker = visible;\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\tpublic drawContentControl(json: any) {\n\t\tthis.removeDropdownSection();\n\n\t\tthis.sectionProperties.json = json;\n\t\tthis.setDatePickerVisibility(false);\n\t\tthis.sectionProperties.picturePicker = false;\n\n\t\tif (json.date) {\n\t\t\t$.datepicker.setDefaults($.datepicker.regional[(<any>window).langParamLocale.language]);\n\t\t\t$('#datepicker').datepicker({\n\t\t\t\tonSelect: function (date: any, datepicker: any) {\n\t\t\t\t\tif (date != '') {\n\t\t\t\t\t\tapp.socket.sendMessage('contentcontrolevent type=date selected=' + date);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t$('#datepicker').hide();\n\t\t} else\n\t\t\t$('#datepicker').datepicker('destroy');\n\n\t\tif (json.action === 'show')\n\t\t\tthis.preparePolygon();\n\t\telse if (json.action === 'hide')\n\t\t\tthis.sectionProperties.polygon = null;\n\t\telse if (json.action === 'change-picture') {\n\t\t\tthis.sectionProperties.picturePicker = true;\n\t\t\tif (!this.map.wopi.EnableInsertRemoteImage)\n\t\t\t\tL.DomUtil.get('insertgraphic').click();\n\t\t\telse\n\t\t\t\tthis.map.fire('postMessage', {msgId: 'UI_InsertGraphic'});\n\t\t}\n\n\t\tthis.setPositionAndSize();\n\n\t\tif (this.sectionProperties.json.items || json.date) {\n\t\t\tthis.addDropDownSection();\n\n\t\t\tif (json.date) this.setDatePickerVisibility(true);\n\t\t}\n\n\t\tapp.sectionContainer.requestReDraw();\n\t}\n\n\tprivate setPositionAndSize (): void {\n\t\tif (!this.sectionProperties.json || !this.sectionProperties.json.rectangles)\n\t\t\treturn;\n\n\t\tvar rectangles: Array<number>[] = this.getRectangles(this.sectionProperties.json.rectangles);\n\n\t\tvar xMin: number = Infinity, yMin: number = Infinity, xMax: number = 0, yMax: number = 0;\n\t\tfor (var i = 0; i < rectangles.length; i++) {\n\t\t\tif (rectangles[i][0] < xMin)\n\t\t\t\txMin = rectangles[i][0];\n\n\t\t\tif (rectangles[i][1] < yMin)\n\t\t\t\tyMin = rectangles[i][1];\n\n\t\t\tif (rectangles[i][0] + rectangles[i][2] > xMax)\n\t\t\t\txMax = rectangles[i][0] + rectangles[i][2];\n\n\t\t\tif (rectangles[i][1] + rectangles[i][3] > yMax)\n\t\t\t\tyMax = rectangles[i][1] + rectangles[i][3];\n\t\t}\n\t\t// Rectangles are in twips. Convert them to core pixels.\n\t\txMin = Math.round(xMin * app.twipsToPixels);\n\t\tyMin = Math.round(yMin * app.twipsToPixels);\n\t\txMax = Math.round(xMax * app.twipsToPixels);\n\t\tyMax = Math.round(yMax * app.twipsToPixels);\n\n\t\tthis.setPosition(xMin, yMin); // This function is added by section container.\n\t\tthis.size = [xMax - xMin, yMax - yMin];\n\t\tif (this.size[0] < 5)\n\t\t\tthis.size[0] = 5;\n\t}\n\n\tpublic onResize (): void {\n\t\tthis.setPositionAndSize();\n\t}\n\n\tpublic preparePolygon(): void {\n\t\tif (!this.sectionProperties.json.rectangles)\n\t\t\treturn;\n\n\t\t// Parse rectangles first.\n\t\tconst rectangleArray = this.getRectangles(this.sectionProperties.json.rectangles);\n\n\t\tthis.sectionProperties.polygon = cool.rectanglesToPolygon(rectangleArray, app.twipsToPixels);\n\n\t\tthis.changeBorderStyle();\n\t}\n\n\tprivate drawPolygon(): void {\n\t\tthis.context.strokeStyle = this.sectionProperties.polygonColor;\n\t\tthis.context.beginPath();\n\t\tthis.context.moveTo(this.sectionProperties.polygon[0] - this.position[0], this.sectionProperties.polygon[0 + 1] - this.position[1]);\n\t\tfor (let i = 0; i < this.sectionProperties.polygon.length - 1; i++) {\n\t\t\tthis.context.lineTo(this.sectionProperties.polygon[i] - this.position[0], this.sectionProperties.polygon[i + 1] - this.position[1]);\n\t\t\ti += 1;\n\t\t}\n\t\tthis.context.closePath();\n\t\tthis.context.stroke();\n\t}\n\n\tpublic onDraw(): void {\n\t\tif (!this.sectionProperties.json)\n\t\t\treturn;\n\n\t\tif (this.sectionProperties.polygon)\n\t\t\tthis.drawPolygon();\n\n\t\tvar text:string = this.sectionProperties.json.alias;\n\t\tif (text) {\n\t\t\tvar rectangles: Array<number>[] = this.getRectangles(this.sectionProperties.json.rectangles);\n\t\t\tvar x: number = rectangles[rectangles.length-1][0] * app.twipsToPixels;\n\t\t\tvar y: number = rectangles[rectangles.length-1][1] * app.twipsToPixels;\n\n\t\t\t// fixed height for alias tag\n\t\t\tvar h: number = 20;\n\t\t\tvar startX: number = x - this.position[0] + 5;\n\t\t\tvar startY: number = y - this.position[1];\n\t\t\tvar padding: number = 10;\n\t\t\tvar fontStyle = getComputedStyle(document.body).getPropertyValue('--docs-font').split(',')[0].replace(/'/g, '');\n\t\t\tvar fontSize = getComputedStyle(document.body).getPropertyValue('--default-font-size');\n\t\t\tvar font = fontSize + ' ' + fontStyle;\n\t\t\tvar textWidth: number = app.util.getTextWidth(text, font) + padding;\n\n\t\t\t// draw rectangle with backgroundcolor\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.fillStyle = '#E6FFFF';\n\t\t\tthis.context.font = font;\n\t\t\tthis.context.fillRect(startX, startY - h, textWidth, h);\n\n\t\t\t// add text to the rectangle\n\t\t\tthis.context.textAlign = 'center';\n\t\t\tthis.context.textBaseline = 'middle';\n\t\t\tthis.context.fillStyle = '#026296';\n\t\t\tthis.context.fillText(text, startX + textWidth / 2, startY - h / 2);\n\n\t\t\t// draw borders around the rectangle\n\t\t\tthis.context.strokeStyle = '#026296';\n\t\t\tthis.context.lineWidth = app.dpiScale;\n\t\t\tthis.context.strokeRect(startX - 0.5, startY - h - 0.5, textWidth, h);\n\n\t\t}\n\t}\n\n\tpublic onNewDocumentTopLeft (): void {\n\t\tthis.setPositionAndSize();\n\t}\n\n\tprivate removeDropdownSection() {\n\t\tif (this.sectionProperties.dropdownSection)\n\t\t\tapp.sectionContainer.removeSection(this.sectionProperties.dropdownSection.name);\n\t}\n\n\tprivate addDropDownSection(): void {\n\t\tthis.sectionProperties.dropdownSection = new ContentControlDropdownSubSection(\n\t\t\t'dropdown' + String(Math.random()),\n\t\t\tnew cool.SimplePoint((this.position[0] + this.size[0]) * app.pixelsToTwips, (this.position[1]) * app.pixelsToTwips),\n\t\t\ttrue,\n\t\t\tthis.sectionProperties.dropdownMarkerWidth,\n\t\t\tthis.sectionProperties.dropdownMarkerHeight\n\t\t);\n\n\t\tthis.sectionProperties.dropdownSection.size[0] = this.sectionProperties.dropdownMarkerWidth * app.dpiScale;\n\t\tthis.sectionProperties.dropdownSection.size[1] = this.size[1];\n\t\tthis.sectionProperties.dropdownSection.sectionProperties.json = this.sectionProperties.json;\n\t\tthis.sectionProperties.dropdownSection.sectionProperties.parent = this;\n\t\tapp.sectionContainer.addSection(this.sectionProperties.dropdownSection);\n\t\tthis.sectionProperties.dropdownSection.adjustHTMLObjectPosition();\n\t\tthis.sectionProperties.dropdownSection.setShowSection(true);\n\t}\n\n\tprivate getRectangles(rect: string): Array<number>[] {\n\t\tvar rectangles: Array<number>[] = [];\n\t\t//convert string to number coordinates\n\t\tvar matches = rect.match(/\\d+/g);\n\t\tif (matches !== null) {\n\t\t\tfor (var i: number = 0; i < matches.length; i += 4) {\n\t\t\t\trectangles.push([parseInt(matches[i]), parseInt(matches[i + 1]), parseInt(matches[i + 2]), parseInt(matches[i + 3])]);\n\t\t\t}\n\t\t}\n\t\treturn rectangles;\n\t}\n\n\tprivate changeBorderStyle(): void {\n\t\tconst polygonColor = (<any>window).prefs.getBoolean('darkTheme') ? 'white' : 'black';\n\t\tif (this.sectionProperties.polygonColor !== polygonColor)\n\t\t\tthis.sectionProperties.polygonColor = polygonColor;\n\t}\n}\n\n}\n\napp.definitions.ContentControlSection = cool.ContentControlSection;\n\n"]}