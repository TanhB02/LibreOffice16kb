{"version":3,"file":"HRuler.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/HRuler.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8; fill-column: 100 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n/*\n * Ruler Handler\n/*\n * Ruler Handler\n\n * HRuler.ts\n *\n * Manages the horizontal ruler for displaying measurements and positioning.\n * Handles user interactions like scrolling and dragging, and renders grid lines/ticks.\n */\n\nclass HRuler extends Ruler {\n\t_firstLineMarker: HTMLDivElement;\n\t_pStartMarker: HTMLDivElement;\n\t_pEndMarker: HTMLDivElement;\n\t_rFace: HTMLDivElement;\n\t_markerVerticalLine: HTMLDivElement;\n\t_rWrapper: HTMLDivElement;\n\t_rMarginWrapper: HTMLDivElement;\n\t_rBPWrapper: HTMLDivElement;\n\t_rBPContainer: HTMLDivElement;\n\t_rTSContainer: CustomHTMLDivElement;\n\t_lMarginMarker: HTMLDivElement;\n\t_rMarginMarker: HTMLDivElement;\n\t_lMarginDrag: HTMLDivElement;\n\t_rMarginDrag: HTMLDivElement;\n\t_lToolTip: HTMLDivElement;\n\t_rToolTip: HTMLDivElement;\n\n\t// Hammer variable declaration\n\t_hammer: any;\n\t_firstLineHammer: any;\n\t_pEndHammer: any;\n\t_pStartHammer: any;\n\n\t_indentationElementId: string;\n\t_initialposition: number;\n\t_lastposition: number;\n\tcurrentPositionInTwips: number | null;\n\tcurrentTabStopIndex: number | null;\n\t_map: ReturnType<typeof L.map>;\n\n\toptions: Options;\n\n\tconstructor(map: ReturnType<typeof L.map>, options: Partial<Options>) {\n\t\tsuper(options);\n\t\tthis._map = map;\n\t\tObject.assign(this.options, options);\n\t\tthis.onAdd(); // VRuler created\n\t}\n\n\tonAdd() {\n\t\tthis._map.on('rulerupdate', this._updateOptions, this);\n\t\tthis._map.on('tabstoplistupdate', this._updateTabStops, this);\n\t\tthis._map.on('scrolllimits', this._updatePaintTimer, this);\n\t\tthis._map.on('moveend fixruleroffset', this._fixOffset, this);\n\t\tthis._map.on('updatepermission', this._changeInteractions, this);\n\t\tL.DomUtil.addClass(this._map.getContainer(), 'hasruler');\n\n\t\tconst container: HTMLDivElement = this._initLayout();\n\t\tconst corner: HTMLElement =\n\t\t\tthis._map._controlCorners[this.options.position];\n\n\t\tL.DomUtil.addClass(container, 'leaflet-control');\n\n\t\tif (this.options.position.indexOf('bottom') !== -1) {\n\t\t\tcorner.insertBefore(container, corner.firstChild);\n\t\t} else {\n\t\t\tcorner.appendChild(container);\n\t\t}\n\t}\n\n\tonRemove() {\n\t\tthis._map.off('rulerupdate', this._updateOptions, this);\n\t\tthis._map.off('tabstoplistupdate', this._updateTabStops, this);\n\t\tthis._map.off('scrolllimits', this._updatePaintTimer, this);\n\t\tthis._map.off('moveend fixruleroffset', this._fixOffset, this);\n\t\tthis._map.off('updatepermission', this._changeInteractions, this);\n\t}\n\n\t_changeInteractions(e: any) {\n\t\tif (this._lMarginDrag) {\n\t\t\tif (e.perm === 'edit') {\n\t\t\t\tthis._lMarginDrag.style.cursor = 'e-resize';\n\t\t\t\tthis._rMarginDrag.style.cursor = 'w-resize';\n\n\t\t\t\tif (!this.getWindowProperty<boolean>('ThisIsTheiOSApp')) {\n\t\t\t\t\tL.DomEvent.on(\n\t\t\t\t\t\tthis._rMarginDrag,\n\t\t\t\t\t\t'mousedown',\n\t\t\t\t\t\tthis._initiateDrag,\n\t\t\t\t\t\tthis,\n\t\t\t\t\t);\n\t\t\t\t\tL.DomEvent.on(\n\t\t\t\t\t\tthis._lMarginDrag,\n\t\t\t\t\t\t'mousedown',\n\t\t\t\t\t\tthis._initiateDrag,\n\t\t\t\t\t\tthis,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._lMarginDrag.style.cursor = 'default';\n\t\t\t\tthis._rMarginDrag.style.cursor = 'default';\n\n\t\t\t\tif (!this.getWindowProperty<boolean>('ThisIsTheiOSApp')) {\n\t\t\t\t\tL.DomEvent.off(\n\t\t\t\t\t\tthis._rMarginDrag,\n\t\t\t\t\t\t'mousedown',\n\t\t\t\t\t\tthis._initiateDrag,\n\t\t\t\t\t\tthis,\n\t\t\t\t\t);\n\t\t\t\t\tL.DomEvent.off(\n\t\t\t\t\t\tthis._lMarginDrag,\n\t\t\t\t\t\t'mousedown',\n\t\t\t\t\t\tthis._initiateDrag,\n\t\t\t\t\t\tthis,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t_initiateIndentationMarkers() {\n\t\t// First line indentation..\n\t\tthis._firstLineMarker = document.createElement('div');\n\t\tthis._firstLineMarker.id = 'lo-fline-marker';\n\t\tthis._firstLineMarker.classList.add('cool-ruler-indentation-marker-down');\n\t\tthis._rFace.appendChild(this._firstLineMarker);\n\n\t\t// Paragraph indentation..\n\t\tthis._pStartMarker = document.createElement('div');\n\t\tthis._pStartMarker.id = 'lo-pstart-marker';\n\t\tthis._pStartMarker.classList.add('cool-ruler-indentation-marker-up');\n\t\tthis._rFace.appendChild(this._pStartMarker);\n\n\t\t// Paragraph end..\n\t\tthis._pEndMarker = document.createElement('div');\n\t\tthis._pEndMarker.id = 'lo-pend-marker';\n\t\tthis._pEndMarker.classList.add('cool-ruler-indentation-marker-up');\n\t\tthis._rFace.appendChild(this._pEndMarker);\n\n\t\t// While one of the markers is being dragged, a vertical line should be visible in order to indicate the new position of the marker..\n\t\tthis._markerVerticalLine = L.DomUtil.create(\n\t\t\t'div',\n\t\t\t'cool-ruler-indentation-marker-center',\n\t\t);\n\t\tthis._rFace.appendChild(this._markerVerticalLine);\n\n\t\t// Now we have indentation markers. Next we should bind drag initializers to them..\n\t\t// We will use 3 hammers. 1 hammer is not usable for this case.\n\t\t// Hammer for first line indentation..\n\t\tthis._firstLineHammer = new Hammer(this._firstLineMarker);\n\t\tthis._firstLineHammer.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));\n\t\tthis._firstLineHammer.get('press').set({\n\t\t\ttime: 500,\n\t\t});\n\t\tthis._firstLineHammer.on(\n\t\t\t'panstart',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._initiateIndentationDrag(event);\n\t\t\t}),\n\t\t);\n\t\tthis._firstLineHammer.on(\n\t\t\t'panmove',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._moveIndentation(event);\n\t\t\t}),\n\t\t);\n\t\tthis._firstLineHammer.on(\n\t\t\t'panend',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: Event,\n\t\t\t) {\n\t\t\t\tthis._moveIndentationEnd(event);\n\t\t\t}),\n\t\t);\n\n\t\t// Hammer for paragraph start indentation..\n\t\tthis._pStartHammer = new Hammer(this._pStartMarker);\n\t\tthis._pStartHammer.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));\n\t\tthis._pStartHammer.get('press').set({\n\t\t\ttime: 500,\n\t\t});\n\t\tthis._pStartHammer.on(\n\t\t\t'panstart',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._initiateIndentationDrag(event);\n\t\t\t}),\n\t\t);\n\t\tthis._pStartHammer.on(\n\t\t\t'panmove',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._moveIndentation(event);\n\t\t\t}),\n\t\t);\n\t\tthis._pStartHammer.on(\n\t\t\t'panend',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: Event,\n\t\t\t) {\n\t\t\t\tthis._moveIndentationEnd(event);\n\t\t\t}),\n\t\t);\n\n\t\t// Hammer for paragraph end indentation..\n\t\tthis._pEndHammer = new Hammer(this._pEndMarker);\n\t\tthis._pEndHammer.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));\n\t\tthis._pEndHammer.get('press').set({\n\t\t\ttime: 500,\n\t\t});\n\t\tthis._pEndHammer.on(\n\t\t\t'panstart',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._initiateIndentationDrag(event);\n\t\t\t}),\n\t\t);\n\t\tthis._pEndHammer.on(\n\t\t\t'panmove',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._moveIndentation(event);\n\t\t\t}),\n\t\t);\n\t\tthis._pEndHammer.on(\n\t\t\t'panend',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: Event,\n\t\t\t) {\n\t\t\t\tthis._moveIndentationEnd(event);\n\t\t\t}),\n\t\t);\n\n\t\tL.DomEvent.on(\n\t\t\tthis._firstLineMarker,\n\t\t\t'mousedown',\n\t\t\t(window as typeof window & { touch: any }).touch.mouseOnly(\n\t\t\t\tthis._initiateIndentationDrag,\n\t\t\t),\n\t\t\tthis,\n\t\t);\n\t\tL.DomEvent.on(\n\t\t\tthis._pStartMarker,\n\t\t\t'mousedown',\n\t\t\t(window as typeof window & { touch: any }).touch.mouseOnly(\n\t\t\t\tthis._initiateIndentationDrag,\n\t\t\t),\n\t\t\tthis,\n\t\t);\n\t\tL.DomEvent.on(\n\t\t\tthis._pEndMarker,\n\t\t\t'mousedown',\n\t\t\t(window as typeof window & { touch: any }).touch.mouseOnly(\n\t\t\t\tthis._initiateIndentationDrag,\n\t\t\t),\n\t\t\tthis,\n\t\t);\n\t}\n\n\t_initLayout() {\n\t\tthis._rWrapper = L.DomUtil.create(\n\t\t\t'div',\n\t\t\t'cool-ruler leaflet-bar leaflet-control leaflet-control-custom',\n\t\t);\n\t\tthis._rWrapper.style.visibility = 'hidden';\n\n\t\t// We start it hidden rather than not initialzing at all.\n\t\t// It is due to rulerupdate command that comes from LOK.\n\t\t// If we delay its initialization, we can't calculate its margins and have to wait for another rulerupdate message to arrive.\n\t\tif (!this.options.showruler) {\n\t\t\tL.DomUtil.setStyle(this._rWrapper, 'display', 'none');\n\t\t}\n\t\tthis._rFace = L.DomUtil.create('div', 'cool-ruler-face', this._rWrapper);\n\t\tthis._rMarginWrapper = L.DomUtil.create(\n\t\t\t'div',\n\t\t\t'cool-ruler-marginwrapper',\n\t\t\tthis._rFace,\n\t\t);\n\t\t// BP => Break Points\n\t\tthis._rBPWrapper = L.DomUtil.create(\n\t\t\t'div',\n\t\t\t'cool-ruler-breakwrapper',\n\t\t\tthis._rFace,\n\t\t);\n\t\tthis._rBPContainer = L.DomUtil.create(\n\t\t\t'div',\n\t\t\t'cool-ruler-breakcontainer',\n\t\t\tthis._rBPWrapper,\n\t\t);\n\n\t\t// Tab stops\n\t\tthis._rTSContainer = L.DomUtil.create(\n\t\t\t'div',\n\t\t\t'cool-ruler-horizontal-tabstopcontainer',\n\t\t\tthis._rMarginWrapper,\n\t\t);\n\t\tL.DomEvent.on(\n\t\t\tthis._rTSContainer,\n\t\t\t'mousedown',\n\t\t\tthis._initiateTabstopDrag,\n\t\t\tthis,\n\t\t);\n\n\t\tthis._hammer = new Hammer(this._rTSContainer);\n\t\tthis._hammer.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));\n\t\tthis._hammer.get('press').set({\n\t\t\ttime: 500,\n\t\t});\n\t\tthis._hammer.on(\n\t\t\t'panstart',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._initiateTabstopDrag(event);\n\t\t\t}),\n\t\t);\n\t\tthis._hammer.on(\n\t\t\t'panmove',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._moveTabstop(event);\n\t\t\t}),\n\t\t);\n\t\tthis._hammer.on(\n\t\t\t'panend',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._endTabstopDrag(event);\n\t\t\t}),\n\t\t);\n\t\tthis._hammer.on(\n\t\t\t'press',\n\t\t\t(window as typeof window & { touch: any }).touch.touchOnly(function (\n\t\t\t\tevent: any,\n\t\t\t) {\n\t\t\t\tthis._onTabstopContainerLongPress(event);\n\t\t\t}),\n\t\t);\n\n\t\tthis._initiateIndentationMarkers();\n\n\t\treturn this._rWrapper;\n\t}\n\n\t_updateOptions(obj: Options) {\n\t\t// window.app.console.log('===> _updateOptions');\n\t\t// Note that the values for margin1, margin2 and leftOffset are not in any sane\n\t\t// units. See the comment in SwCommentRuler::CreateJsonNotification(). The values\n\t\t// are pixels for some virtual device in core, not related to the actual device this\n\t\t// is running on at all, passed through convertTwipToMm100(), i.e. multiplied by\n\t\t// approximately 1.76. Let's call these units \"arbitrary pixelish units\" in\n\t\t// comments here.\n\t\tthis.options.margin1 = obj['margin1'];\n\t\tthis.options.margin2 = obj['margin2'];\n\t\tthis.options.leftOffset = obj['leftOffset'];\n\n\t\t// pageWidth on the other hand *is* really in mm100.\n\t\tthis.options.pageWidth = obj['pageWidth'];\n\n\t\t// to be enabled only after adding support for other length units as well\n\t\t// this.options.unit = obj['unit'].trim();\n\n\t\tthis._updateBreakPoints();\n\n\t\tthis._rWrapper.style.visibility = '';\n\t}\n\n\t_updateParagraphIndentations() {\n\t\tvar items = this._map['stateChangeHandler'];\n\t\tvar state = items.getItemValue('.uno:LeftRightParaMargin');\n\n\t\tif (!state) return;\n\n\t\tthis.options.firstLineIndent = parseFloat(\n\t\t\tstate.firstline.replace(',', '.'),\n\t\t);\n\t\tthis.options.leftParagraphIndent = parseFloat(state.left.replace(',', '.'));\n\t\tthis.options.rightParagraphIndent = parseFloat(\n\t\t\tstate.right.replace(',', '.'),\n\t\t);\n\t\tthis.options.unit = state.unit;\n\n\t\tvar pxPerMm100 =\n\t\t\tthis._map._docLayer._docPixelSize.x / ((app.file.size.x * 2540) / 1440);\n\n\t\t// Conversion to mm100.\n\t\tif (this.options.unit === 'inch') {\n\t\t\tthis.options.firstLineIndent = this.options.firstLineIndent * 2540;\n\t\t\tthis.options.leftParagraphIndent =\n\t\t\t\tthis.options.leftParagraphIndent * 2540;\n\t\t\tthis.options.rightParagraphIndent =\n\t\t\t\tthis.options.rightParagraphIndent * 2540;\n\t\t}\n\n\t\tthis.options.firstLineIndent *= pxPerMm100;\n\t\tthis.options.leftParagraphIndent *= pxPerMm100;\n\t\tthis.options.rightParagraphIndent *= pxPerMm100;\n\n\t\t// Get navigatiosidebar width only when navigation sidebar is visible\n\t\tconst navigationsidebarWidth = app.showNavigator\n\t\t\t? this._getNavigationSidebarWidth()\n\t\t\t: 0;\n\n\t\t// rTSContainer is the reference element.\n\t\tconst pStartPosition =\n\t\t\tthis._rTSContainer.getBoundingClientRect().left +\n\t\t\tthis.options.leftParagraphIndent -\n\t\t\tnavigationsidebarWidth;\n\t\tconst fLinePosition = pStartPosition + this.options.firstLineIndent;\n\t\tconst pEndPosition =\n\t\t\tthis._rTSContainer.getBoundingClientRect().right -\n\t\t\tthis.options.rightParagraphIndent -\n\t\t\tnavigationsidebarWidth;\n\n\t\t// We calculated the positions. Now we should move them to left in order to make their sharp edge point to the right direction..\n\t\tthis._firstLineMarker.style.left =\n\t\t\tfLinePosition -\n\t\t\tthis._firstLineMarker.getBoundingClientRect().width / 2.0 +\n\t\t\t'px';\n\t\tthis._pStartMarker.style.left =\n\t\t\tpStartPosition -\n\t\t\tthis._pStartMarker.getBoundingClientRect().width / 2.0 +\n\t\t\t'px';\n\t\tthis._pEndMarker.style.left =\n\t\t\tpEndPosition -\n\t\t\tthis._pEndMarker.getBoundingClientRect().width / 2.0 +\n\t\t\t'px';\n\n\t\tthis._markerVerticalLine.style.top =\n\t\t\tthis._rTSContainer.getBoundingClientRect().bottom + 'px';\n\t}\n\n\t_updateTabStops(obj: {\n\t\ttabstops: Array<{ position: string; type: string }> | string;\n\t}) {\n\t\tthis.options.tabs = [];\n\t\tvar jsonTabstops = obj['tabstops'];\n\t\tif (jsonTabstops === '') return;\n\t\tif (typeof jsonTabstops === 'string' || jsonTabstops.length === 0) return;\n\n\t\tfor (const jsonTabstop of jsonTabstops) {\n\t\t\tthis.options.tabs.push({\n\t\t\t\tposition: parseInt(jsonTabstop.position),\n\t\t\t\tstyle: parseInt(jsonTabstop.type),\n\t\t\t});\n\t\t\tthis._updateBreakPoints();\n\t\t}\n\t}\n\n\t_updateBreakPoints() {\n\t\tif (this.options.margin1 == null || this.options.margin2 == null) return;\n\n\t\tvar lMargin, rMargin, wPixel, scale;\n\n\t\tlMargin = this.options.leftOffset;\n\n\t\t// This is surely bogus. We take pageWidth, which is in mm100, and subtract a value\n\t\t// that is in \"arbitrary pixelish units\". But the only thing rMargin is used for is\n\t\t// to calculate the width of the part of the ruler that goes out over the right side\n\t\t// of the window anyway (see the assignments to this._rMarginMarker.style.width and\n\t\t// this._rMarginDrag.style.width near the end of this function), so presumably it\n\t\t// doesn't matter that much what rMargin is.\n\t\trMargin =\n\t\t\tthis.options.pageWidth - (this.options.leftOffset + this.options.margin2);\n\n\t\tscale = this._map.getZoomScale(this._map.getZoom(), 10);\n\t\twPixel =\n\t\t\tthis._map._docLayer._docPixelSize.x - this.options.tileMargin * 2 * scale;\n\n\t\tthis._fixOffset();\n\n\t\tthis.options.DraggableConvertRatio = wPixel / this.options.pageWidth;\n\t\tthis._rFace.style.width = wPixel + 'px';\n\t\tthis._rBPContainer.style.marginLeft =\n\t\t\t-1 * (this.options.DraggableConvertRatio * (500 - (lMargin % 1000))) +\n\t\t\t1 +\n\t\t\t'px';\n\n\t\tvar numCounter = -1 * Math.floor(lMargin / 1000);\n\n\t\tL.DomUtil.removeChildNodes(this._rBPContainer);\n\n\t\t// this.options.pageWidth is in mm100, so the code here makes one ruler division per\n\t\t// centimetre.\n\t\t//\n\t\t// FIXME: Surely this should be locale-specific, we would want to use inches at\n\t\t// least in the US. (The ruler unit to use doesn't seem to be stored in the document\n\t\t// at least for .odt?)\n\t\tfor (var num = 0; num <= this.options.pageWidth / 1000 + 1; num++) {\n\t\t\tvar marker = L.DomUtil.create(\n\t\t\t\t'div',\n\t\t\t\t'cool-ruler-maj',\n\t\t\t\tthis._rBPContainer,\n\t\t\t);\n\t\t\t// The - 1 is to compensate for the left and right .5px borders of\n\t\t\t// cool-ruler-maj in leaflet.css.\n\t\t\tmarker.style.width = this.options.DraggableConvertRatio * 1000 - 1 + 'px';\n\t\t\tif (this.options.displayNumber) {\n\t\t\t\tif (numCounter !== 0) marker.innerText = Math.abs(numCounter++);\n\t\t\t\telse numCounter++;\n\t\t\t}\n\t\t}\n\n\t\t// The tabstops. Only draw user-created ones, with style RULER_TAB_LEFT,\n\t\t// RULER_TAB_RIGHT, RULER_TAB_CENTER, and RULER_TAB_DECIMAL. See <svtools/ruler.hxx>.\n\t\tL.DomUtil.removeChildNodes(this._rTSContainer);\n\n\t\tvar pxPerMm100 =\n\t\t\tthis._map._docLayer._docPixelSize.x / ((app.file.size.x * 2540) / 1440);\n\t\tthis._rTSContainer.tabStops = [];\n\t\tfor (\n\t\t\tvar tabstopIndex = 0;\n\t\t\ttabstopIndex < this.options.tabs.length;\n\t\t\ttabstopIndex++\n\t\t) {\n\t\t\tvar markerClass = null;\n\t\t\tvar currentTabstop: any = this.options.tabs[tabstopIndex];\n\t\t\tswitch (currentTabstop.style) {\n\t\t\t\tcase 0:\n\t\t\t\t\tmarkerClass = 'cool-ruler-tabstop-left';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tmarkerClass = 'cool-ruler-tabstop-right';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tmarkerClass = 'cool-ruler-tabstop-center';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 3:\n\t\t\t\t\tmarkerClass = 'cool-ruler-tabstop-decimal';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (markerClass != null) {\n\t\t\t\tmarker = L.DomUtil.create('div', markerClass, this._rTSContainer);\n\t\t\t\tvar positionPixel = currentTabstop.position * pxPerMm100;\n\t\t\t\tvar markerWidth = marker.offsetWidth;\n\t\t\t\tvar markerHalfWidth = markerWidth / 2.0;\n\t\t\t\tmarker.tabStopLocation = {\n\t\t\t\t\tleft: positionPixel - markerHalfWidth,\n\t\t\t\t\tcenter: positionPixel,\n\t\t\t\t\tright: positionPixel + markerHalfWidth,\n\t\t\t\t};\n\t\t\t\tmarker.style.left = marker.tabStopLocation.left + 'px';\n\t\t\t\tmarker.tabStopNumber = tabstopIndex;\n\t\t\t\tthis._rTSContainer.tabStops[tabstopIndex] = marker;\n\t\t\t\tmarker.style.cursor = 'move';\n\t\t\t}\n\t\t}\n\n\t\tif (!this.options.marginSet) {\n\t\t\tthis.options.marginSet = true;\n\t\t\tthis._lMarginMarker = L.DomUtil.create(\n\t\t\t\t'div',\n\t\t\t\t'cool-ruler-margin cool-ruler-left',\n\t\t\t\tthis._rFace,\n\t\t\t);\n\t\t\tthis._rMarginMarker = L.DomUtil.create(\n\t\t\t\t'div',\n\t\t\t\t'cool-ruler-margin cool-ruler-right',\n\t\t\t\tthis._rFace,\n\t\t\t);\n\t\t\tthis._lMarginDrag = L.DomUtil.create(\n\t\t\t\t'div',\n\t\t\t\t'cool-ruler-drag cool-ruler-left',\n\t\t\t\tthis._rMarginWrapper,\n\t\t\t);\n\t\t\tthis._lToolTip = L.DomUtil.create(\n\t\t\t\t'div',\n\t\t\t\t'cool-ruler-ltooltip',\n\t\t\t\tthis._lMarginDrag,\n\t\t\t);\n\t\t\tthis._rMarginDrag = L.DomUtil.create(\n\t\t\t\t'div',\n\t\t\t\t'cool-ruler-drag cool-ruler-right',\n\t\t\t\tthis._rMarginWrapper,\n\t\t\t);\n\t\t\tthis._rToolTip = L.DomUtil.create(\n\t\t\t\t'div',\n\t\t\t\t'cool-ruler-rtooltip',\n\t\t\t\tthis._rMarginDrag,\n\t\t\t);\n\t\t\tvar lMarginTooltipText = _('Left Margin');\n\t\t\tvar rMarginTooltipText = _('Right Margin');\n\n\t\t\tthis._lMarginDrag.dataset.title = lMarginTooltipText;\n\t\t\tthis._rMarginDrag.dataset.title = rMarginTooltipText;\n\t\t}\n\n\t\tthis._lMarginMarker.style.width =\n\t\t\tthis.options.DraggableConvertRatio * lMargin + 'px';\n\t\tthis._rMarginMarker.style.width =\n\t\t\tthis.options.DraggableConvertRatio * rMargin + 'px';\n\t\tthis._lMarginDrag.style.width =\n\t\t\tthis.options.DraggableConvertRatio * lMargin + 'px';\n\t\tthis._rMarginDrag.style.width =\n\t\t\tthis.options.DraggableConvertRatio * rMargin + 'px';\n\n\t\t// Put the _rTSContainer in the right place\n\t\tthis._rTSContainer.style.left =\n\t\t\tthis.options.DraggableConvertRatio * lMargin + 'px';\n\t\tthis._rTSContainer.style.right =\n\t\t\tthis.options.DraggableConvertRatio * rMargin + 'px';\n\n\t\tthis._updateParagraphIndentations();\n\n\t\tif (this.options.interactive) {\n\t\t\tthis._changeInteractions({ perm: 'edit' });\n\t\t} else {\n\t\t\tthis._changeInteractions({ perm: 'readonly' });\n\t\t}\n\t}\n\n\t_fixOffset() {\n\t\tif (!this._map.options.docBounds) return;\n\n\t\tconst rulerOffset =\n\t\t\t-app.file.viewedRectangle.cX1 + this.options.tileMargin * app.getScale();\n\n\t\tthis._rFace.style.marginInlineStart = rulerOffset + 'px';\n\n\t\tthis._updateParagraphIndentations();\n\t}\n\n\t_moveIndentation(e: any) {\n\t\tif (e.type === 'panmove') {\n\t\t\te.clientX = e.center.x;\n\t\t}\n\n\t\tvar element = document.getElementById(this._indentationElementId);\n\n\t\t// User is moving the cursor / their finger on the screen and we are moving the marker.\n\t\tvar newLeft =\n\t\t\tparseInt(element.style.left.replace('px', '')) +\n\t\t\te.clientX -\n\t\t\tthis._lastposition;\n\t\telement.style.left = String(newLeft) + 'px';\n\t\tthis._lastposition = e.clientX;\n\t\t// halfWidth..\n\t\tvar halfWidth =\n\t\t\t(element.getBoundingClientRect().right -\n\t\t\t\telement.getBoundingClientRect().left) *\n\t\t\t0.5;\n\t\tthis._markerVerticalLine.style.left = String(newLeft + halfWidth) + 'px';\n\t}\n\n\t_moveIndentationEnd(e: Event) {\n\t\tthis._map.rulerActive = false;\n\n\t\tif (e.type !== 'panend') {\n\t\t\tL.DomEvent.off(this._rFace, 'mousemove', this._moveIndentation, this);\n\t\t\tL.DomEvent.off(this._map, 'mouseup', this._moveIndentationEnd, this);\n\t\t}\n\n\t\tvar unoObj: Params = {},\n\t\t\tindentType = '';\n\n\t\t// Calculation step..\n\t\t// The new coordinate of element subject to indentation is sent as a percentage of the page width..\n\t\t// We need to calculate the percentage. Left margin (leftOffset) is not being added to the indentation (on the core part)..\n\t\t// We can use TabStopContainer's position as the reference point, as they share the same reference point..\n\t\tvar element = document.getElementById(this._indentationElementId);\n\n\t\tvar leftValue;\n\t\t// The halfWidth of the shape..\n\t\tvar halfWidth =\n\t\t\t(element.getBoundingClientRect().right -\n\t\t\t\telement.getBoundingClientRect().left) *\n\t\t\t0.5;\n\n\t\t// We need the pageWidth in pixels, so we can not use \"this.options.pageWidth\" here, since that's in mm..\n\t\tvar pageWidth = parseFloat(this._rFace.style.width.replace('px', ''));\n\n\t\tif (element.id === 'lo-fline-marker') {\n\t\t\tindentType = 'FirstLineIndent';\n\t\t\t// FirstLine indentation is always positioned according to the left indent..\n\t\t\t// We don't need to add halfWidth here..\n\t\t\tleftValue =\n\t\t\t\tparseFloat(this._firstLineMarker.style.left.replace('px', '')) -\n\t\t\t\tparseFloat(this._pStartMarker.style.left.replace('px', ''));\n\t\t} else if (element.id === 'lo-pstart-marker') {\n\t\t\tindentType = 'LeftParaIndent';\n\t\t\tleftValue =\n\t\t\t\telement.getBoundingClientRect().left -\n\t\t\t\tthis._rTSContainer.getBoundingClientRect().left +\n\t\t\t\thalfWidth;\n\t\t} else if (element.id === 'lo-pend-marker') {\n\t\t\tindentType = 'RightParaIndent';\n\t\t\t// Right marker is positioned from right, this is rightValue..\n\t\t\tleftValue =\n\t\t\t\tthis._rTSContainer.getBoundingClientRect().right -\n\t\t\t\telement.getBoundingClientRect().right +\n\t\t\t\thalfWidth;\n\t\t}\n\n\t\tleftValue = leftValue / pageWidth; // Now it's a percentage..\n\n\t\tif (indentType !== '') {\n\t\t\tunoObj[indentType] = { type: '', value: null };\n\t\t\tunoObj[indentType]['type'] = 'string';\n\t\t\tunoObj[indentType]['value'] = leftValue;\n\t\t\tapp.socket.sendMessage(\n\t\t\t\t'uno .uno:ParagraphChangeState ' + JSON.stringify(unoObj),\n\t\t\t);\n\t\t}\n\n\t\tthis._indentationElementId = '';\n\t\tthis._markerVerticalLine.style.display = 'none';\n\t}\n\n\t_initiateIndentationDrag(e: any) {\n\t\tif (\n\t\t\tthis.getWindowProperty<boolean>('ThisIsTheiOSApp') &&\n\t\t\t!this._map.isEditMode()\n\t\t)\n\t\t\treturn;\n\n\t\tthis._map.rulerActive = true;\n\n\t\tthis._indentationElementId =\n\t\t\te.target.id.trim() === '' ? e.target.parentNode.id : e.target.id;\n\n\t\tif (e.type !== 'panstart') {\n\t\t\tL.DomEvent.on(this._rFace, 'mousemove', this._moveIndentation, this);\n\t\t\tL.DomEvent.on(this._map, 'mouseup', this._moveIndentationEnd, this);\n\t\t} else {\n\t\t\te.clientX = e.center.x;\n\t\t}\n\n\t\tthis._initialposition = this._lastposition = e.clientX;\n\t\tthis._markerVerticalLine.style.display = 'block';\n\t\tthis._markerVerticalLine.style.left = this._lastposition + 'px';\n\t}\n\n\t_initiateDrag(e: any) {\n\t\tif (e.type === 'touchstart') {\n\t\t\tif (e.touches.length !== 1) return;\n\t\t\te.clientX = e.touches[0].clientX;\n\t\t}\n\n\t\tif (\n\t\t\tthis.getWindowProperty<boolean>('ThisIsTheiOSApp') &&\n\t\t\t!this._map.isEditMode()\n\t\t)\n\t\t\treturn;\n\n\t\tthis._map.rulerActive = true;\n\n\t\tvar dragableElem = e.srcElement || e.target;\n\t\tL.DomEvent.on(this._rFace, 'mousemove', this._moveMargin, this);\n\t\tL.DomEvent.on(this._map, 'mouseup', this._endDrag, this);\n\t\tthis._initialposition = e.clientX;\n\t\tthis._lastposition = this._initialposition;\n\n\t\tif (L.DomUtil.hasClass(dragableElem, 'cool-ruler-right')) {\n\t\t\tL.DomUtil.addClass(this._rMarginDrag, 'leaflet-drag-moving');\n\t\t\tthis._rFace.style.cursor = 'w-resize';\n\t\t} else {\n\t\t\tL.DomUtil.addClass(this._lMarginDrag, 'leaflet-drag-moving');\n\t\t\tthis._rFace.style.cursor = 'e-resize';\n\t\t}\n\t}\n\n\t_moveMargin(e: any) {\n\t\tif (e.type === 'touchmove') e.clientX = e.touches[0].clientX;\n\n\t\tthis._lastposition = e.clientX;\n\t\tvar posChange = e.clientX - this._initialposition;\n\t\tvar unit = this.options.unit ? this.options.unit : ' cm';\n\t\tif (L.DomUtil.hasClass(this._rMarginDrag, 'leaflet-drag-moving')) {\n\t\t\tvar rMargin =\n\t\t\t\tthis.options.pageWidth -\n\t\t\t\t(this.options.leftOffset + this.options.margin2);\n\t\t\tvar newPos = this.options.DraggableConvertRatio * rMargin - posChange;\n\t\t\tthis._rToolTip.style.display = 'block';\n\t\t\tthis._rToolTip.style.right = newPos - 25 + 'px';\n\t\t\tthis._rToolTip.innerText =\n\t\t\t\t(\n\t\t\t\t\tMath.round(\n\t\t\t\t\t\tthis.options.pageWidth / 100 -\n\t\t\t\t\t\t\tnewPos / (this.options.DraggableConvertRatio * 100),\n\t\t\t\t\t) / 10\n\t\t\t\t).toString() + unit;\n\t\t\tthis._rMarginDrag.style.width = newPos + 'px';\n\t\t} else {\n\t\t\tnewPos =\n\t\t\t\tthis.options.DraggableConvertRatio * this.options.leftOffset +\n\t\t\t\tposChange;\n\t\t\tthis._lToolTip.style.display = 'block';\n\t\t\tthis._lToolTip.style.left = newPos - 25 + 'px';\n\t\t\tthis._lToolTip.innerText =\n\t\t\t\t(\n\t\t\t\t\tMath.round(newPos / (this.options.DraggableConvertRatio * 100)) / 10\n\t\t\t\t).toString() + unit;\n\t\t\tthis._lMarginDrag.style.width = newPos + 'px';\n\t\t}\n\t}\n\n\t_endDrag(e: any) {\n\t\tthis._map.rulerActive = false;\n\n\t\tvar posChange;\n\t\tif (e.type === 'touchend')\n\t\t\tposChange = this._lastposition - this._initialposition;\n\t\telse posChange = e.originalEvent.clientX - this._initialposition;\n\t\tvar unoObj: Params = {},\n\t\t\tmarginType,\n\t\t\tfact;\n\n\t\tL.DomEvent.off(this._rFace, 'mousemove', this._moveMargin, this);\n\t\tL.DomEvent.off(this._map, 'mouseup', this._endDrag, this);\n\n\t\tif (L.DomUtil.hasClass(this._rMarginDrag, 'leaflet-drag-moving')) {\n\t\t\tmarginType = 'Margin2';\n\t\t\tfact = -1;\n\t\t\tL.DomUtil.removeClass(this._rMarginDrag, 'leaflet-drag-moving');\n\t\t\tthis._rToolTip.style.display = 'none';\n\t\t} else {\n\t\t\tmarginType = 'Margin1';\n\t\t\tfact = 1;\n\t\t\tL.DomUtil.removeClass(this._lMarginDrag, 'leaflet-drag-moving');\n\t\t\tthis._lToolTip.style.display = 'none';\n\t\t}\n\n\t\tthis._rFace.style.cursor = 'default';\n\n\t\tunoObj[marginType] = { type: '', value: null };\n\t\tunoObj[marginType]['type'] = 'string';\n\t\tunoObj[marginType]['value'] =\n\t\t\t(fact * posChange) /\n\t\t\t(this.options.DraggableConvertRatio * this.options.pageWidth);\n\t\tapp.socket.sendMessage(\n\t\t\t'uno .uno:RulerChangeState ' + JSON.stringify(unoObj),\n\t\t);\n\t}\n\n\t_getTabStopHit(tabstopContainer: TabStopContainer, pointX: number) {\n\t\tlet tabstop: TabStop | null = null;\n\t\tconst margin = 10;\n\t\tlet tabstopDiffFromCenter = 100000000; // just a big initial condition\n\n\t\tfor (let i = 0; i < tabstopContainer.tabStops.length; i++) {\n\t\t\tconst current = tabstopContainer.tabStops[i];\n\t\t\tconst location = current.tabStopLocation;\n\t\t\tif (\n\t\t\t\tpointX >= location.left - margin &&\n\t\t\t\tpointX <= location.right + margin\n\t\t\t) {\n\t\t\t\tconst diff = Math.abs(pointX - location.center);\n\t\t\t\tif (diff < tabstopDiffFromCenter) {\n\t\t\t\t\ttabstop = current;\n\t\t\t\t\ttabstopDiffFromCenter = diff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn tabstop;\n\t}\n\n\t_showTabstopContextMenu(position: number, tabstopNumber: number) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-this-alias\n\t\tvar self = this;\n\t\tthis.currentPositionInTwips = position;\n\t\tthis.currentTabStopIndex = tabstopNumber;\n\t\t$.contextMenu({\n\t\t\tselector: '.cool-ruler-horizontal-tabstopcontainer',\n\t\t\tclassName: 'cool-font',\n\t\t\titems: {\n\t\t\t\tinserttabstop: {\n\t\t\t\t\tname: _('Insert tabstop'),\n\t\t\t\t\tcallback: this._insertTabstop.bind(this),\n\t\t\t\t\tvisible: function () {\n\t\t\t\t\t\treturn self.currentPositionInTwips != null;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tremovetabstop: {\n\t\t\t\t\tname: _('Delete tabstop'),\n\t\t\t\t\tcallback: this._deleteTabstop.bind(this),\n\t\t\t\t\tvisible: function () {\n\t\t\t\t\t\treturn self.currentTabStopIndex != null;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\t_initiateTabstopDrag(event: any) {\n\t\t// window.app.console.log('===> _initiateTabstopDrag ' + event.type);\n\n\t\tvar tabstopContainer = null;\n\t\tvar pointX = null;\n\n\t\tif (event.type === 'panstart') {\n\t\t\ttabstopContainer = event.target;\n\t\t\tpointX = event.center.x - event.target.getBoundingClientRect().left;\n\t\t} else {\n\t\t\ttabstopContainer = event.currentTarget;\n\t\t\tpointX = event.layerX;\n\t\t}\n\t\ttabstopContainer.tabStopMarkerBeingDragged = null;\n\n\t\t// check if we hit any tabstop\n\t\tvar tabstop = this._getTabStopHit(tabstopContainer, pointX);\n\n\t\t// Check what to do when a mouse buttons is clicked, ignore touch\n\t\tif (event.type !== 'panstart') {\n\t\t\t// right-click inside tabstop container\n\t\t\tif (event.button === 2) {\n\t\t\t\tif (tabstop == null) {\n\t\t\t\t\tvar position = this._map._docLayer._pixelsToTwips({\n\t\t\t\t\t\tx: pointX,\n\t\t\t\t\t\ty: 0,\n\t\t\t\t\t}).x;\n\t\t\t\t\tthis._showTabstopContextMenu(position, null);\n\t\t\t\t} else {\n\t\t\t\t\tthis._showTabstopContextMenu(null, tabstop.tabStopNumber);\n\t\t\t\t}\n\t\t\t\tevent.stopPropagation();\n\t\t\t\treturn;\n\t\t\t} else if (event.button !== 0) {\n\t\t\t\tevent.stopPropagation(); // prevent handling of the mother event elsewhere\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (tabstop == null) {\n\t\t\treturn;\n\t\t}\n\n\t\ttabstopContainer.tabStopMarkerBeingDragged = tabstop;\n\t\ttabstopContainer.tabStopInitialPosiiton = pointX;\n\n\t\tif (\n\t\t\t!this.getWindowProperty<boolean>('ThisIsTheiOSApp') &&\n\t\t\tevent.pointerType !== 'touch'\n\t\t) {\n\t\t\tL.DomEvent.on(this._rTSContainer, 'mousemove', this._moveTabstop, this);\n\t\t\tL.DomEvent.on(this._rTSContainer, 'mouseup', this._endTabstopDrag, this);\n\t\t\tL.DomEvent.on(this._rTSContainer, 'mouseout', this._endTabstopDrag, this);\n\t\t}\n\t}\n\n\t_moveTabstop(event: any) {\n\t\tvar tabstopContainer = null;\n\t\tvar pointX = null;\n\n\t\tif (event.type === 'panmove') {\n\t\t\ttabstopContainer = event.target;\n\t\t\tpointX = event.center.x - event.target.getBoundingClientRect().left;\n\t\t} else {\n\t\t\ttabstopContainer = event.currentTarget;\n\t\t\tpointX = event.layerX;\n\t\t}\n\n\t\tif (tabstopContainer === null) return;\n\t\tvar marker = tabstopContainer.tabStopMarkerBeingDragged;\n\t\tif (marker === null) return;\n\n\t\t//window.app.console.log('===> _moveTabstop ' + event.type);\n\n\t\tvar pixelDiff = pointX - tabstopContainer.tabStopInitialPosiiton;\n\t\tmarker.style.left = marker.tabStopLocation.left + pixelDiff + 'px';\n\t}\n\n\t_endTabstopDrag(event: any) {\n\t\t//window.app.console.log('===> _endTabstopDrag ' + event.type);\n\n\t\tvar tabstopContainer = null;\n\t\tvar pointX = null;\n\t\tif (event.type === 'panend') {\n\t\t\ttabstopContainer = event.target;\n\t\t\tpointX = event.center.x - event.target.getBoundingClientRect().left;\n\t\t} else {\n\t\t\ttabstopContainer = event.currentTarget;\n\t\t\tpointX = event.layerX;\n\t\t}\n\n\t\tif (tabstopContainer === null) return;\n\t\tvar marker = tabstopContainer.tabStopMarkerBeingDragged;\n\t\tif (marker === null) return;\n\n\t\tif (event.type == 'mouseout') {\n\t\t\tmarker.style.left = marker.tabStopLocation.left + 'px';\n\t\t} else {\n\t\t\tvar positionTwip = this._map._docLayer._pixelsToTwips({\n\t\t\t\tx: pointX,\n\t\t\t\ty: 0,\n\t\t\t}).x;\n\t\t\tvar params = {\n\t\t\t\tIndex: {\n\t\t\t\t\ttype: 'int32',\n\t\t\t\t\tvalue: marker.tabStopNumber,\n\t\t\t\t},\n\t\t\t\tPosition: {\n\t\t\t\t\ttype: 'int32',\n\t\t\t\t\tvalue: positionTwip,\n\t\t\t\t},\n\t\t\t\tRemove: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\tvalue: false,\n\t\t\t\t},\n\t\t\t};\n\t\t\tthis._map.sendUnoCommand('.uno:ChangeTabStop', params);\n\t\t}\n\t\tL.DomEvent.off(this._rTSContainer, 'mousemove', this._moveTabstop, this);\n\t\tL.DomEvent.off(this._rTSContainer, 'mouseup', this._endTabstopDrag, this);\n\t\tL.DomEvent.off(this._rTSContainer, 'mouseout', this._endTabstopDrag, this);\n\t}\n\n\t_onTabstopContainerLongPress(event: any) {\n\t\tvar tabstopContainer = event.target;\n\t\tvar pointX = event.center.x - tabstopContainer.getBoundingClientRect().left;\n\t\tvar pointXTwip = this._map._docLayer._pixelsToTwips({ x: pointX, y: 0 }).x;\n\t\tvar tabstop = this._getTabStopHit(tabstopContainer, pointX);\n\n\t\tif (window.mode.isMobile() || window.mode.isTablet()) {\n\t\t\tif (tabstop == null) {\n\t\t\t\tthis.currentPositionInTwips = pointXTwip;\n\t\t\t\tthis.currentTabStopIndex = null;\n\t\t\t\tthis._insertTabstop();\n\t\t\t} else {\n\t\t\t\tthis.currentPositionInTwips = null;\n\t\t\t\tthis.currentTabStopIndex = tabstop.tabStopNumber;\n\t\t\t\tthis._deleteTabstop();\n\t\t\t}\n\t\t} else {\n\t\t\tvar tabstopNumber = null;\n\t\t\tif (tabstop != null) {\n\t\t\t\ttabstopNumber = tabstop.tabStopNumber;\n\t\t\t\tpointXTwip = null;\n\t\t\t}\n\t\t\tthis._showTabstopContextMenu(pointXTwip, tabstopNumber);\n\t\t}\n\t}\n\n\t_deleteTabstop() {\n\t\tif (this.currentTabStopIndex != null) {\n\t\t\tvar params = {\n\t\t\t\tIndex: {\n\t\t\t\t\ttype: 'int32',\n\t\t\t\t\tvalue: this.currentTabStopIndex,\n\t\t\t\t},\n\t\t\t\tPosition: {\n\t\t\t\t\ttype: 'int32',\n\t\t\t\t\tvalue: 0,\n\t\t\t\t},\n\t\t\t\tRemove: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\tvalue: true,\n\t\t\t\t},\n\t\t\t};\n\t\t\tthis._map.sendUnoCommand('.uno:ChangeTabStop', params);\n\t\t\tthis.currentTabStopIndex = null;\n\t\t}\n\t}\n\n\t_insertTabstop() {\n\t\tif (this.currentPositionInTwips != null) {\n\t\t\tvar params = {\n\t\t\t\tIndex: {\n\t\t\t\t\ttype: 'int32',\n\t\t\t\t\tvalue: -1,\n\t\t\t\t},\n\t\t\t\tPosition: {\n\t\t\t\t\ttype: 'int32',\n\t\t\t\t\tvalue: this.currentPositionInTwips,\n\t\t\t\t},\n\t\t\t\tRemove: {\n\t\t\t\t\ttype: 'boolean',\n\t\t\t\t\tvalue: false,\n\t\t\t\t},\n\t\t\t};\n\t\t\tthis._map.sendUnoCommand('.uno:ChangeTabStop', params);\n\t\t\tthis.currentPositionInTwips = null;\n\t\t}\n\t}\n\n\t_getNavigationSidebarWidth() {\n\t\t// Consider navigations sidebar width to place marker at correct position\n\t\tconst presentationControlsWrapper: HTMLDivElement = document.querySelector(\n\t\t\t'#navigation-sidebar',\n\t\t);\n\t\tlet presentationControlsWrapperWidth: number = 0;\n\n\t\tif (presentationControlsWrapper)\n\t\t\tpresentationControlsWrapperWidth =\n\t\t\t\tpresentationControlsWrapper.getBoundingClientRect().width;\n\t\treturn presentationControlsWrapperWidth;\n\t}\n}\n"]}