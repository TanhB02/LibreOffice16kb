{"version":3,"file":"Control.MobileWizard.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.MobileWizard.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * L.Control.MobileWizard - main container can contain few MobileWizardWindows\n */\n\n/* global app $ */\nL.Control.MobileWizard = L.Control.extend({\n\n\tinitialize: function (options) {\n\t\tL.setOptions(this, options);\n\t},\n\n\tonAdd: function (map) {\n\t\tthis.map = map;\n\n\t\t// for the moment, the mobile-wizard is mobile phone only\n\t\tif (!window.mode.isMobile())\n\t\t\treturn;\n\n\t\tthis.contents = [];\n\n\t\tmap.on('mobilewizard', this._onMobileWizard, this);\n\t\tmap.on('closemobilewizard', this._closeWizard, this);\n\t\tmap.on('showwizardsidebar', this._showWizardSidebar, this);\n\t\tmap.on('mobilewizardback', this.goLevelUp, this);\n\t\tmap.on('resize', this._onResize, this);\n\t\tmap.on('jsdialogupdate', this.onJSUpdate, this);\n\t\tmap.on('jsdialogaction', this.onJSAction, this);\n\n\t\tthis._setupBackButton();\n\t},\n\n\tonRemove: function() {\n\t\tthis.map.off('mobilewizard', this._onMobileWizard, this);\n\t\tthis.map.off('closemobilewizard', this._closeWizard, this);\n\t\tthis.map.off('showwizardsidebar', this._showWizardSidebar, this);\n\t\tthis.map.off('mobilewizardback', this.goLevelUp, this);\n\t\tthis.map.off('resize', this._onResize, this);\n\t\tthis.map.off('jsdialogupdate', this.onJSUpdate, this);\n\t\tthis.map.off('jsdialogaction', this.onJSAction, this);\n\t},\n\n\t_setupBackButton: function() {\n\t\tthis.backButton = $('#mobile-wizard-back');\n\t\tthis.backButton.click(function() { history.back(); });\n\t},\n\n\t_showWizardSidebar: function(event) {\n\t\tthis.map.showSidebar = true;\n\t\tif (!event || !event.noRefresh)\n\t\t\tthis._refreshSidebar();\n\t},\n\n\t_closeWizard: function() {\n\t\tvar items = this.contents.length;\n\t\twhile (items--)\n\t\t\tthis.removeWindow(this.contents[0]);\n\t},\n\n\t_hideWizard: function() {\n\t\t$('.jsdialog-overlay').remove();\n\n\t\t// dialog\n\t\tif (this.map.dialog.hasDialogInMobilePanelOpened()) {\n\t\t\t// TODO: use jsdialog approach\n\t\t\tthis.map.dialog._onDialogClose(window.mobileDialogId, true);\n\t\t\twindow.mobileDialogId = undefined;\n\t\t}\n\n\t\tif (window.commentWizard === true && app.sectionContainer) {\n\t\t\tapp.sectionContainer.getSectionWithName(L.CSections.CommentList.name).removeHighlighters();\n\t\t}\n\n\t\tif (!this.contents.length)\n\t\t\t$('#mobile-wizard').hide();\n\n\t\tdocument.getElementById('mobile-wizard').classList.remove('menuwizard');\n\t\tdocument.getElementById('mobile-wizard').classList.remove('shapeswizard');\n\t\tif (!document.getElementById('document-container').classList.contains('landscape')) {\n\t\t\tvar pcw = document.getElementById('presentation-controls-wrapper');\n\t\t\tif (pcw)\n\t\t\t\tpcw.style.display = 'block';\n\t\t}\n\n\t\tif (this.map.isEditMode()) {\n\t\t\t$('#toolbar-down').show();\n\t\t}\n\t\tif (window.ThisIsTheAndroidApp)\n\t\t\twindow.postMobileMessage('MOBILEWIZARD hide');\n\n\t\tthis.map.showSidebar = false;\n\t\tthis._isActive = false;\n\t\tthis._dialogid = '';\n\t\tthis._currentPath = [];\n\n\t\twindow.pageMobileWizard = false;\n\n\t\tif (window.mobileWizard === true)\n\t\t\twindow.mobileWizard = false;\n\n\t\tif (window.insertionMobileWizard === true)\n\t\t\twindow.insertionMobileWizard = false;\n\n\t\tif (window.pageMobileWizard === true)\n\t\t\twindow.pageMobilewizard = false;\n\n\t\tif (window.commentWizard === true)\n\t\t\twindow.commentWizard = false;\n\n\t\tthis._updateToolbarItemStateByClose();\n\n\t\tif (!this.map.hasFocus()) {\n\t\t\tthis.map.focus();\n\t\t}\n\n\t\tif (this.map.uiManager.sheetsBar)\n\t\t\tthis.map.uiManager.sheetsBar.show();\n\t},\n\n\tisOpen: function() {\n\t\treturn $('#mobile-wizard').is(':visible');\n\t},\n\n\t_updateToolbarItemStateByClose: function() {\n\t\tconst mobileWizard = document.getElementById('mobile_wizard');\n\t\tif (window.mobileWizard === false && mobileWizard && mobileWizard.classList.contains('selected'))\n\t\t\tmobileWizard.classList.remove('selected');\n\n\t\tconst insertionMobileWizard = document.getElementById('insertion_mobile_wizard');\n\t\tif (window.insertionMobileWizard === false && insertionMobileWizard && insertionMobileWizard.classList.contains('selected'))\n\t\t\tinsertionMobileWizard.classList.remove('selected');\n\n\t\tconst commentWizard = document.getElementById('comment_wizard');\n\t\tif (window.commentWizard === false && commentWizard && commentWizard.classList.contains('selected'))\n\t\t\tcommentWizard.classList.remove('selected');\n\t},\n\n\tgoLevelDown: function(contentToShow, options) {\n\t\tif (this.contents.length)\n\t\t\tthis.contents[this.contents.length - 1].goLevelDown(contentToShow, options);\n\t},\n\n\tgoLevelUp: function() {\n\t\tif (this.contents.length)\n\t\t\tthis.contents[this.contents.length - 1].goLevelUp();\n\t},\n\n\t_onResize: function() {\n\t\tL.DomUtil.updateElementsOrientation(['mobile-wizard', 'mobile-wizard-content']);\n\t},\n\n\tselectedTab: function(tabText) {\n\t\tvar topWindow = this.contents.length ? this.contents[this.contents.length - 1] : null;\n\t\tif (topWindow)\n\t\t\ttopWindow.selectedTab(tabText);\n\t},\n\n\t_getContentForWindowId: function(id) {\n\t\tfor (var i in this.contents) {\n\t\t\tif (this.contents[i].id === 'mobile-wizard-content-' + id)\n\t\t\t\treturn this.contents[i];\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t_refreshSidebar: function(ms) {\n\t\tms = ms !== undefined ? ms : 400;\n\t\tsetTimeout(function () {\n\t\t\tvar message = 'dialogevent ' +\n\t\t\t    (window.sidebarId !== undefined ? window.sidebarId : -1) +\n\t\t\t    ' {\"id\":\"-1\"}';\n\t\t\tapp.socket.sendMessage(message);\n\t\t}, ms);\n\t},\n\n\t_onMobileWizard: function(data) {\n\t\tvar callback = data.callback;\n\t\tdata = data.data;\n\t\tif (data) {\n\t\t\tvar existingWindow = this._getContentForWindowId(data.id);\n\t\t\tif (existingWindow) {\n\t\t\t\texistingWindow._onMobileWizard(data, callback);\n\t\t\t} else {\n\t\t\t\tvar newWindow = L.control.mobileWizardWindow(this, 'mobile-wizard-content-' + data.id);\n\t\t\t\tfor (var i in this.contents)\n\t\t\t\t\tthis.contents[i].hideWindow();\n\t\t\t\tthis.contents.push(newWindow);\n\t\t\t\tthis.map.addControl(newWindow);\n\t\t\t\tnewWindow._onMobileWizard(data, callback);\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveWindow: function(window) {\n\t\tvar pos = this.contents.indexOf(window);\n\t\tif (pos >= 0) {\n\t\t\tvar wasPopup = false;\n\t\t\t// popup was closed so go level up in parent\n\t\t\tif (pos > 0 && this.contents[pos].isPopup) {\n\t\t\t\twasPopup = true;\n\t\t\t}\n\n\t\t\tthis.map.removeControl(window);\n\t\t\tthis.contents.splice(pos, 1);\n\t\t\tif (this.contents.length) {\n\t\t\t\tvar parentWindow = this.contents[this.contents.length - 1];\n\t\t\t\tparentWindow.showWindow();\n\t\t\t\tif (wasPopup)\n\t\t\t\t\tparentWindow.goLevelUp();\n\t\t\t}\n\t\t\tthis._hideWizard();\n\t\t}\n\t},\n\n\tonJSUpdate: function (e) {\n\t\tvar data = e.data;\n\n\t\tif (data.jsontype === 'notebookbar')\n\t\t\treturn;\n\n\t\tvar existingWindow = this._getContentForWindowId(data.id);\n\t\tif (existingWindow) {\n\t\t\texistingWindow.onJSUpdate(e);\n\t\t}\n\t},\n\n\tonJSAction: function (e) {\n\t\tvar data = e.data;\n\n\t\tif (data.jsontype === 'notebookbar')\n\t\t\treturn;\n\n\t\tvar existingWindow = this._getContentForWindowId(data.id);\n\t\tif (existingWindow) {\n\t\t\texistingWindow.onJSAction(e);\n\t\t}\n\t},\n});\n\nL.control.mobileWizard = function (options) {\n\treturn new L.Control.MobileWizard(options);\n};\n"]}