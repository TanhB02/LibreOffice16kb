{"version":3,"file":"Control.LanguageDialog.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.LanguageDialog.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * L.Control.LanguageDialog used for spellchecking language\n */\n\n/* global _ app */\nL.Control.LanguageDialog = L.Control.extend({\n\n\tonAdd: function (map) {\n\t\tthis.map = map;\n\t\tmap.on('morelanguages', this._onLanguageDialog, this);\n\t},\n\n\tonRemove: function (map) {\n\t\tmap.off('morelanguages', this._onLanguageDialog, this);\n\t},\n\n\t_onItemSelected: function(language) {\n\t\tvar unoCommand = '.uno:LanguageStatus?Language:string=' + this.applyTo + '_' + language;\n\t\tthis.map.sendUnoCommand(unoCommand, null, true);\n\t},\n\n\t_getSelectedLanguage: function() {\n\t\tvar languageAndCode = this._map['stateChangeHandler'].getItemValue('.uno:LanguageStatus');\n\t\tvar split = languageAndCode.split(';');\n\t\tvar language = '';\n\t\tif (split.length > 1)\n\t\t\tlanguage = split[0];\n\t\telse\n\t\t\twindow.app.console.error('Language not found');\n\t\treturn language;\n\t},\n\n\t_onLanguageDialog: function(e) {\n\t\tvar languageEntries = [];\n\t\tthis.selectedLanguage = this._getSelectedLanguage();\n\n\t\tswitch (e.applyto) {\n\t\tcase 'all':\n\t\t\tthis.applyTo = 'Default';\n\t\t\tbreak;\n\t\tcase 'paragraph':\n\t\t\tthis.applyTo = 'Paragraph';\n\t\t\tbreak;\n\t\tcase 'selection':\n\t\t\tthis.applyTo = 'Current';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthis.applyTo = 'Default';\n\t\t\tbreak;\n\t\t}\n\n\t\tlanguageEntries.push({\n\t\t\tcolumns: [ { text: _('None (Do not check spelling)') } ],\n\t\t\trow: 'LANGUAGE_NONE',\n\t\t\tselected: 'LANGUAGE_NONE' === this.selectedLanguage\n\t\t});\n\n\t\tvar that = this;\n\t\tapp.languages.forEach(function (language) {\n\t\t\tlanguageEntries.push({\n\t\t\t\tcolumns: [ { text: language.neutral } ],\n\t\t\t\trow: language.neutral,\n\t\t\t\tselected: language.neutral === that.selectedLanguage\n\t\t\t});\n\t\t});\n\n\t\tvar data = {\n\t\t\tid: 'LanguageDialog',\n\t\t\tdialogid: 'LanguageDialog',\n\t\t\ttype: 'dialog',\n\t\t\ttitle: _('Select language'),\n\t\t\tjsontype: 'dialog',\n\t\t\tresponses: [\n\t\t\t\t{\n\t\t\t\t\tid: 'ok',\n\t\t\t\t\tresponse: 1\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'cancel',\n\t\t\t\t\tresponse: 0\n\t\t\t\t},\n\t\t\t],\n\t\t\tchildren: [\n\t\t\t\t{\n\t\t\t\t\tid: 'LanguageDialog-mainbox',\n\t\t\t\t\ttype: 'container',\n\t\t\t\t\tvertical: true,\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttype: 'treelistbox',\n\t\t\t\t\t\t\tid: 'languages',\n\t\t\t\t\t\t\theaders: [ { text: _('Language') } ],\n\t\t\t\t\t\t\tentries: languageEntries\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'LanguageDialog-buttonbox',\n\t\t\t\t\t\t\ttype: 'buttonbox',\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: 'cancel',\n\t\t\t\t\t\t\t\t\ttype: 'pushbutton',\n\t\t\t\t\t\t\t\t\ttext: _('Cancel'),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tid: 'ok',\n\t\t\t\t\t\t\t\t\t'has_default': true,\n\t\t\t\t\t\t\t\t\ttype: 'pushbutton',\n\t\t\t\t\t\t\t\t\ttext: _('OK'),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tvertical: false,\n\t\t\t\t\t\t\tlayoutstyle: 'end'\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tvar dialogBuildEvent = {\n\t\t\tdata: data,\n\t\t\tcallback: this._onAction.bind(this),\n\t\t};\n\n\t\tthis.map.fire(window.mode.isMobile() ? 'mobilewizard' : 'jsdialog', dialogBuildEvent);\n\t},\n\n\t_onAction: function (element, action, data, index) {\n\t\tif (element === 'responsebutton' && data.id === 'ok')\n\t\t\tthis._onItemSelected(this.selectedLanguage);\n\t\telse if (element === 'treeview') {\n\t\t\tif (action == 'select')\n\t\t\t\tthis.selectedLanguage = index;\n\t\t\treturn;\n\t\t}\n\n\t\tvar closeEvent = {\n\t\t\tdata: {\n\t\t\t\taction: 'close',\n\t\t\t\tid: 'LanguageDialog',\n\t\t\t}\n\t\t};\n\t\tthis.map.fire(window.mode.isMobile() ? 'closemobilewizard' : 'jsdialog', closeEvent);\n\t}\n});\n\nL.control.languageDialog = function (options) {\n\treturn new L.Control.LanguageDialog(options);\n};\n"]}