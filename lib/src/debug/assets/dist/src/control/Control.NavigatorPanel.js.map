{"version":3,"file":"Control.NavigatorPanel.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.NavigatorPanel.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n/*\n * JSDialog.NavigatorPanel\n */\n\n/* global app */\nclass NavigatorPanel extends SidebarBase {\n\tnavigationPanel: HTMLElement;\n\tfloatingNavIcon: HTMLElement;\n\tpresentationControlsWrapper: HTMLElement;\n\tnavigatorDockWrapper: HTMLElement;\n\tcloseNavButton: HTMLElement;\n\n\tconstructor(map: any, options: SidebarOptions) {\n\t\tsuper(map, options, SidebarType.Navigator);\n\t}\n\n\tonAdd(map: ReturnType<typeof L.map>) {\n\t\tsuper.onAdd(map);\n\t\tthis.map.on('navigator', this.onNavigator, this);\n\t\tthis.map.on('doclayerinit', this.onDocLayerInit, this);\n\t\tthis.navigationPanel = document.getElementById(`navigation-sidebar`);\n\t\tthis.floatingNavIcon = document.getElementById(`navigator-floating-icon`);\n\t\tthis.presentationControlsWrapper = this.navigationPanel.querySelector(\n\t\t\t'#presentation-controls-wrapper',\n\t\t);\n\t\tthis.navigatorDockWrapper = this.navigationPanel.querySelector(\n\t\t\t'#navigator-dock-wrapper',\n\t\t);\n\t\tthis.map.on(\n\t\t\t'zoomend',\n\t\t\tthis.handleFloatingButtonVisibilityOnZoomChange,\n\t\t\tthis,\n\t\t);\n\t}\n\n\tonRemove() {\n\t\tsuper.onRemove();\n\t\tthis.map.off('navigator');\n\t\tthis.map.off('zoomend');\n\t\tthis.map.off('doclayerinit');\n\t}\n\n\tonDocLayerInit() {\n\t\tconst allowedDocTypes = ['presentation', 'drawing'];\n\t\t// for presentation show slide sorter navigation panel by default\n\t\tif (\n\t\t\tallowedDocTypes.includes(app.map.getDocType()) &&\n\t\t\t!window.mode.isMobile()\n\t\t) {\n\t\t\t// Navigator panel should be visible and by default we should open slide sorter in case of impress/draw\n\t\t\tthis.showNavigationPanel();\n\t\t}\n\t}\n\n\tinitializeNavigator(docType: string) {\n\t\t// Create navigation container\n\t\tconst navContainer = L.DomUtil.create(\n\t\t\t'div',\n\t\t\t'navigation-options-container',\n\t\t);\n\t\tnavContainer.id = 'navigation-options-wrapper';\n\n\t\t// For calc we do not need to add floating icon\n\t\tif (docType !== 'spreadsheet') {\n\t\t\t// Create floating navigation button\n\t\t\tthis.createFloatingNavigatorBtn();\n\n\t\t\t// Insert floatingNavIcon right after navigatorPanel\n\t\t\tthis.navigationPanel.insertAdjacentElement(\n\t\t\t\t'afterend',\n\t\t\t\tthis.floatingNavIcon,\n\t\t\t);\n\t\t}\n\n\t\t// Create header section\n\t\tvar navHeader = L.DomUtil.create('div', 'navigation-header', navContainer);\n\n\t\tvar navTitle = L.DomUtil.create('span', 'navigation-title', navHeader);\n\t\tnavTitle.textContent = _('Navigation');\n\n\t\t// Create a wrapper div\n\t\tconst closeNavWrapper = L.DomUtil.create(\n\t\t\t'div',\n\t\t\t'close-navigation-wrapper',\n\t\t\tnavHeader,\n\t\t);\n\n\t\t// Create the close button inside the div\n\t\tthis.closeNavButton = L.DomUtil.create(\n\t\t\t'span',\n\t\t\t'close-navigation-button',\n\t\t\tcloseNavWrapper,\n\t\t);\n\t\tconst closeNavigationText = _('Close Navigation');\n\t\tthis.closeNavButton.setAttribute('aria-label', closeNavigationText);\n\t\tthis.closeNavButton.setAttribute('data-cooltip', closeNavigationText);\n\t\tL.control.attachTooltipEventListener(this.closeNavButton, this.map);\n\t\tthis.closeNavButton.setAttribute('tabindex', '0');\n\n\t\tthis.closeNavButton.addEventListener(\n\t\t\t'click',\n\t\t\tfunction () {\n\t\t\t\tthis.closeNavigation();\n\t\t\t\tif (app.showNavigator) {\n\t\t\t\t\tapp.map.sendUnoCommand('.uno:Navigator');\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t);\n\n\t\tif (this.map.isPresentationOrDrawing()) {\n\t\t\tvar navOptions = L.DomUtil.create('div', 'navigation-tabs', navContainer);\n\t\t\tnavOptions.id = 'navigation-options';\n\n\t\t\t// Create Slide Sorter tab\n\t\t\tvar slideSorterTab = L.DomUtil.create('div', 'tab selected', navOptions);\n\t\t\tslideSorterTab.id = 'tab-slide-sorter';\n\t\t\tslideSorterTab.textContent = _('Slides');\n\n\t\t\t// Create Navigator tab\n\t\t\tvar navigatorTab = L.DomUtil.create('div', 'tab', navOptions);\n\t\t\tnavigatorTab.id = 'tab-navigator';\n\t\t\tnavigatorTab.textContent = _('Outline');\n\n\t\t\t// Tab Click Event Listener\n\t\t\t[slideSorterTab, navigatorTab].forEach((tab) => {\n\t\t\t\ttab.addEventListener(\n\t\t\t\t\t'click',\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\tthis.switchNavigationTab(tab.id);\n\t\t\t\t\t}.bind(this),\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\tif (this.navigationPanel) {\n\t\t\t// Insert navigation container as the first child & navHeader as next-child of navigator-panel\n\t\t\tthis.navigationPanel.prepend(navContainer);\n\t\t\tthis.navigationPanel.prepend(navHeader);\n\t\t}\n\t}\n\n\tcreateFloatingNavigatorBtn() {\n\t\t// Get or create the main wrapper div\n\t\tthis.floatingNavIcon.className =\n\t\t\t'notebookbar unoNavigator unospan-view-navigator unotoolbutton visible';\n\t\tthis.floatingNavIcon.setAttribute('tabindex', '-1');\n\t\tconst navigatorText = _('Navigator');\n\t\tthis.floatingNavIcon.setAttribute('data-cooltip', navigatorText);\n\t\tL.control.attachTooltipEventListener(this.floatingNavIcon, this.map);\n\n\t\t// Create the button wrapper (square container)\n\t\tconst buttonWrapper = document.createElement('div');\n\t\tbuttonWrapper.className = 'navigator-btn-wrapper'; // Class for styling\n\t\tbuttonWrapper.setAttribute('aria-label', navigatorText);\n\n\t\t// Create the button\n\t\tconst button = document.createElement('button');\n\t\tbutton.className = 'ui-content unobutton';\n\t\tbutton.id = 'floating-navigator';\n\t\tbutton.accessKey = 'ZN';\n\t\tbutton.setAttribute('aria-pressed', 'false');\n\n\t\t// Create the image inside the button\n\t\tconst img = document.createElement('img');\n\t\tapp.LOUtil.setImage(img, 'lc_navigator.svg', this.map);\n\n\t\t// Append elements\n\t\tbutton.appendChild(img);\n\t\tbuttonWrapper.appendChild(button);\n\t\tthis.floatingNavIcon.appendChild(buttonWrapper);\n\n\t\t// Click event\n\t\tthis.floatingNavIcon.addEventListener(\n\t\t\t'click',\n\t\t\tfunction () {\n\t\t\t\tthis.showNavigationPanel();\n\t\t\t\tif (app.map.isPresentationOrDrawing()) {\n\t\t\t\t\tthis.switchNavigationTab('tab-slide-sorter');\n\t\t\t\t} else {\n\t\t\t\t\tapp.map.sendUnoCommand('.uno:Navigator');\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t);\n\t}\n\n\tonNavigator(data: FireEvent) {\n\t\tvar navigatorData = data.data;\n\t\tthis.builder.setWindowId(navigatorData.id);\n\t\t$(this.container).empty();\n\n\t\tif (\n\t\t\tnavigatorData.action === 'close' ||\n\t\t\twindow.app.file.disableSidebar ||\n\t\t\tthis.map.isReadOnlyMode()\n\t\t) {\n\t\t\tthis.closeSidebar();\n\t\t} else if (navigatorData.children) {\n\t\t\tif (navigatorData.children.length) {\n\t\t\t\tthis.onResize();\n\t\t\t}\n\n\t\t\tthis.markNavigatorTreeView(navigatorData);\n\n\t\t\tthis.builder.build(this.container, [navigatorData]);\n\t\t\t// There is case where user can directly click navigator from notebookbar view option\n\t\t\t// in that case we first show the navigation panel and then switch to tab view\n\t\t\tthis.showNavigationPanel();\n\t\t\t$('#navigator-dock-wrapper').show(200);\n\t\t\tapp.showNavigator = true;\n\t\t\t// this will update the indentation marks for elements like ruler\n\t\t\tapp.map.fire('fixruleroffset');\n\t\t\tif (app.map.isPresentationOrDrawing()) {\n\t\t\t\tthis.switchNavigationTab('tab-navigator');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.closeSidebar();\n\t\t}\n\t}\n\n\tcloseSidebar() {\n\t\tthis.closeNavigation();\n\t\tapp.showNavigator = false;\n\t\tsuper.closeSidebar();\n\t}\n\n\t// Function to handle tab click\n\tswitchNavigationTab(tabId: string) {\n\t\t// Remove 'selected' class from all tabs\n\t\tthis.navigationPanel\n\t\t\t.querySelectorAll('.navigation-tabs .tab')\n\t\t\t.forEach((t) => t.classList.remove('selected'));\n\n\t\t// Add 'selected' class to the clicked tab\n\t\tthis.navigationPanel.querySelector('#' + tabId).classList.add('selected');\n\n\t\t// Toggle visibility based on tabId\n\t\tif (tabId === 'tab-slide-sorter') {\n\t\t\tthis.presentationControlsWrapper.style.display = 'block';\n\t\t\tthis.navigatorDockWrapper.style.display = 'none';\n\t\t} else {\n\t\t\tif (!app.showNavigator) app.map.sendUnoCommand('.uno:Navigator');\n\t\t\tthis.presentationControlsWrapper.style.display = 'none';\n\t\t\tthis.navigatorDockWrapper.style.display = 'block';\n\t\t}\n\t}\n\n\thandleFloatingButtonVisibilityOnZoomChange() {\n\t\t// Handle special case for impress as the view there is landscape so better to hide Floating Nav ICON on lower zoom compare to other app\n\t\tif (\n\t\t\tthis.map.getZoom() >= 14 ||\n\t\t\t(this.map.getZoom() >= 13 && this.map.getDocType() === 'presentation')\n\t\t) {\n\t\t\tthis.floatingNavIcon.classList.remove('visible');\n\t\t} else if (!this.navigationPanel.classList.contains('visible')) {\n\t\t\tthis.floatingNavIcon.classList.add('visible');\n\t\t}\n\t}\n\n\tshowNavigationPanel() {\n\t\tthis.navigationPanel.classList.add('visible');\n\t\tthis.floatingNavIcon.classList.remove('visible');\n\t}\n\n\tcloseNavigation() {\n\t\tthis.navigationPanel.classList.remove('visible');\n\t\tthis.floatingNavIcon.classList.add('visible');\n\t\tthis.handleFloatingButtonVisibilityOnZoomChange(); // on close panel we should check if we can display nav icon or not based on zoom level\n\t}\n}\n\nJSDialog.NavigatorPanel = function (map: any, options: SidebarOptions) {\n\treturn new NavigatorPanel(map, options);\n};\n"]}