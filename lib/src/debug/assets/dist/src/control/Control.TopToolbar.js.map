{"version":3,"file":"Control.TopToolbar.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.TopToolbar.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n/*\n * JSDialog.TopToolbar - component of top toolbar in compact mode\n */\n\n/* global $ JSDialog _ _UNO app */\nclass TopToolbar extends JSDialog.Toolbar {\n\tconstructor(map) {\n\t\tsuper(map, 'toolbar-up');\n\t\tthis.stylesSelectValue = null;\n\n\t\tmap.on('doclayerinit', this.onDocLayerInit, this);\n\t\tthis.onUpdatePermission = this.onUpdatePermission.bind(this);\n\t\tapp.events.on('updatepermission', this.onUpdatePermission);\n\t\tmap.on('wopiprops', this.onWopiProps, this);\n\t\tmap.on('commandstatechanged', this.onCommandStateChanged, this);\n\t\tapp.events.on('contextchange', this.onContextChange.bind(this));\n\n\t\tif (!window.mode.isMobile()) {\n\t\t\tmap.on('updatetoolbarcommandvalues', this.updateCommandValues, this);\n\t\t}\n\t}\n\n\tonRemove() {\n\t\tif (this.parentContainer) {\n\t\t\tthis.parentContainer.outerHTML = '';\n\t\t\tthis.parentContainer = null;\n\t\t}\n\n\t\tthis.map.off('doclayerinit', this.onDocLayerInit, this);\n\t\tapp.events.off('updatepermission', this.onUpdatePermission);\n\t\tthis.map.off('wopiprops', this.onWopiProps, this);\n\t\tthis.map.off('commandstatechanged', this.onCommandStateChanged, this);\n\n\t\tif (!window.mode.isMobile()) {\n\t\t\tthis.map.off('updatetoolbarcommandvalues', this.updateCommandValues, this);\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.parentContainer = L.DomUtil.get('toolbar-up');\n\n\t\t// In case it contains garbage\n\t\tif (this.parentContainer) {\n\t\t\tthis.parentContainer.outerHTML = '';\n\t\t\tthis.parentContainer = null;\n\t\t}\n\n\t\t// Use original template as provided by server\n\t\t$('#toolbar-logo').after(this.map.toolbarUpTemplate.cloneNode(true));\n\t\tthis.parentContainer = L.DomUtil.get('toolbar-up');\n\t\tL.DomUtil.addClass(this.parentContainer, 'ui-toolbar');\n\t}\n\n\tcallback(objectType, eventType, object, data, builder) {\n\t\tif (object.id === 'fontnamecombobox' || object.id === 'fontsizecombobox' || object.id === 'styles') {\n\t\t\t// managed by non-JSDialog code\n\t\t\treturn;\n\t\t}\n\n\t\tthis.builder._defaultCallbackHandler(objectType, eventType, object, data, builder);\n\t}\n\n\tonStyleSelect(e) {\n\t\tvar style = e.target.value;\n\t\tif (style.startsWith('.uno:')) {\n\t\t\tthis.map.sendUnoCommand(style);\n\t\t}\n\t\telse if (this.map.getDocType() === 'text') {\n\t\t\tthis.map.applyStyle(style, 'ParagraphStyles');\n\t\t}\n\t\telse if (this.map.getDocType() === 'spreadsheet') {\n\t\t\tthis.map.applyStyle(style, 'CellStyles');\n\t\t}\n\t\telse if (this.map.getDocType() === 'presentation' || this.map.getDocType() === 'drawing') {\n\t\t\tthis.map.applyLayout(style);\n\t\t}\n\t\tthis.map.focus();\n\t}\n\n\tonContextChange(event) {\n\t\tthis.updateVisibilityForToolbar(event.detail.context);\n\t}\n\n\t// mobile:false means hide it both for normal Online used from a mobile phone browser, and in a mobile app on a mobile phone\n\t// mobilebrowser:false means hide it for normal Online used from a mobile browser, but don't hide it in a mobile app\n\t// tablet:true means show it in normal Online from a tablet browser, and in a mobile app on a tablet\n\t// tablet:false means hide it in normal Online used from a tablet browser, and in a mobile app on a tablet\n\n\t// hidden means display:none\n\t// invisible means visibility:hidden\n\n\tgetToolItems() {\n\t\tvar items = [\n\t\t\t{type: 'customtoolitem',  id: 'closemobile', desktop: false, mobile: false, tablet: true, visible: false},\n\t\t\t{type: 'customtoolitem',  id: 'save', command: 'save', text: _UNO('.uno:Save'), lockUno: '.uno:Save'},\n\t\t\t{type: 'customtoolitem',  id: 'print', command: 'print', text: _UNO('.uno:Print', 'text'), mobile: false, tablet: false, lockUno: '.uno:Print'},\n\t\t\t{type: 'menubutton',  id: 'printoptions',  command: 'printoptions', noLabel: true, text: _UNO('.uno:Print', 'text'), mobile: false, tablet: false, lockUno: '.uno:Print',\n\t\t\t\tmenu: [\n\t\t\t\t\t{id: 'print-active-sheet', action: 'print-active-sheet', text: _('Active Sheet')},\n\t\t\t\t\t{id: 'print-all-sheets', action: 'print-all-sheets', text: _('All Sheets')},\n\t\t\t\t]\n\t\t\t},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'savebreak', mobile: false},\n\t\t\t{type: 'toolitem',  id: 'undo', text: _UNO('.uno:Undo'), command: '.uno:Undo', mobile: false},\n\t\t\t{type: 'toolitem',  id: 'redo', text: _UNO('.uno:Redo'), command: '.uno:Redo', mobile: false},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'redobreak', mobile: false, tablet: false,},\n\t\t\t{type: 'toolitem',  id: 'formatpaintbrush', text: _UNO('.uno:FormatPaintbrush'), command: '.uno:FormatPaintbrush', mobile: false},\n\t\t\t{type: 'toolitem',  id: 'reset', text: _UNO('.uno:ResetAttributes', 'text'), visible: false, command: '.uno:ResetAttributes', mobile: false},\n\t\t\t{type: 'toolitem',  id: 'resetimpress', class: 'unoResetAttributes', text: _UNO('.uno:SetDefault', 'presentation', 'true'), visible: false, command: '.uno:SetDefault', mobile: false},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breakreset', invisible: true, mobile: false, tablet: false,},\n\t\t\t{type: 'listbox', id: 'styles', text: _('Default Style'), desktop: true, mobile: false, tablet: false},\n\t\t\t{type: 'listbox', id: 'fontnamecombobox', text: 'Carlito', command: '.uno:CharFontName', mobile: false},\n\t\t\t{type: 'listbox', id: 'fontsizecombobox', text: '12 pt', command: '.uno:FontHeight', mobile: false,},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breakfontsizes', invisible: true, mobile: false, tablet: false},\n\t\t\t{type: 'toolitem',  id: 'bold', text: _UNO('.uno:Bold'), command: '.uno:Bold'},\n\t\t\t{type: 'toolitem',  id: 'italic', text: _UNO('.uno:Italic'), command: '.uno:Italic'},\n\t\t\t{type: 'toolitem',  id: 'underline', text: _UNO('.uno:Underline'), command: '.uno:Underline'},\n\t\t\t{type: 'toolitem',  id: 'strikeout', text: _UNO('.uno:Strikeout'), command: '.uno:Strikeout'},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breakformatting'},\n\t\t\t{type: 'colorlistbox',  id: 'fontcolorwriter:ColorPickerMenu', command: '.uno:FontColor', text: _UNO('.uno:FontColor'), visible: false, lockUno: '.uno:FontColor'},\n\t\t\t{type: 'colorlistbox',  id: 'fontcolor:ColorPickerMenu', command: '.uno:Color', text: _UNO('.uno:FontColor'), lockUno: '.uno:FontColor'},\n\t\t\t{type: 'colorlistbox',  id: 'backcolor:ColorPickerMenu', command: '.uno:CharBackColor', text: _UNO('.uno:CharBackColor', 'text'), visible: false, lockUno: '.uno:CharBackColor'},\n\t\t\t{type: 'colorlistbox',  id: 'backgroundcolor:ColorPickerMenu', command: '.uno:BackgroundColor', text: _UNO('.uno:BackgroundColor'), visible: false, lockUno: '.uno:BackgroundColor'},\n\t\t\t{type: 'separator', orientation: 'vertical' , id: 'breakcolor', mobile:false},\n\t\t\t{type: 'toolitem',  id: 'leftpara',  command: '.uno:LeftPara', text: _UNO('.uno:LeftPara', '', true), visible: false},\n\t\t\t{type: 'toolitem',  id: 'centerpara',  command: '.uno:CenterPara', text: _UNO('.uno:CenterPara', '', true), visible: false},\n\t\t\t{type: 'toolitem',  id: 'rightpara',  command: '.uno:RightPara', text: _UNO('.uno:RightPara', '', true), visible: false},\n\t\t\t{type: 'toolitem',  id: 'justifypara', command: '.uno:JustifyPara', text: _UNO('.uno:JustifyPara', '', true), visible: false, unosheet: ''},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breakpara', visible: false},\n\t\t\t{type: 'menubutton',  id: 'setborderstyle:BorderStyleMenu', noLabel: true, command: '.uno:SetBorderStyle', text: _('Borders'), visible: false},\n\t\t\t{type: 'toolitem',  id: 'togglemergecells', text: _UNO('.uno:ToggleMergeCells', 'spreadsheet', true), visible: false, command: '.uno:ToggleMergeCells'},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breakmergecells', visible: false},\n\t\t\t{type: 'menubutton', id: 'textalign', command: 'justifypara', noLabel: true, text: _UNO('.uno:TextAlign'), visible: false, lockUno: '.uno:TextAlign',\n\t\t\t\tmenu: [\n\t\t\t\t\t{id: 'alignleft', text: _UNO('.uno:AlignLeft', 'spreadsheet', true), icon: 'alignleft', uno: '.uno:AlignLeft'},\n\t\t\t\t\t{id: 'alignhorizontalcenter', text: _UNO('.uno:AlignHorizontalCenter', 'spreadsheet', true), icon: 'alignhorizontal', uno: '.uno:AlignHorizontalCenter'},\n\t\t\t\t\t{id: 'alignright', text: _UNO('.uno:AlignRight', 'spreadsheet', true), icon: 'alignright', uno: '.uno:AlignRight'},\n\t\t\t\t\t{id: 'alignblock', text: _UNO('.uno:AlignBlock', 'spreadsheet', true), icon: 'alignblock', uno: '.uno:AlignBlock'},\n\t\t\t\t\t{type: 'separator'},\n\t\t\t\t\t{id: 'aligntop', text: _UNO('.uno:AlignTop', 'spreadsheet', true), icon: 'aligntop', uno: '.uno:AlignTop'},\n\t\t\t\t\t{id: 'alignvcenter', text: _UNO('.uno:AlignVCenter', 'spreadsheet', true), icon: 'alignvcenter', uno: '.uno:AlignVCenter'},\n\t\t\t\t\t{id: 'alignbottom', text: _UNO('.uno:AlignBottom', 'spreadsheet', true), icon: 'alignbottom', uno: '.uno:AlignBottom'},\n\t\t\t\t]},\n\t\t\t{type: 'menubutton',  id: 'linespacing',  command: 'linespacing', noLabel: true, text: _UNO('.uno:FormatSpacingMenu'), visible: false, lockUno: '.uno:FormatSpacingMenu',\n\t\t\t\tmenu: [\n\t\t\t\t\t{id: 'spacepara1', text: _UNO('.uno:SpacePara1'), uno: '.uno:SpacePara1'},\n\t\t\t\t\t{id: 'spacepara15', text: _UNO('.uno:SpacePara15'), uno: '.uno:SpacePara15'},\n\t\t\t\t\t{id: 'spacepara2', text: _UNO('.uno:SpacePara2'), uno: '.uno:SpacePara2'},\n\t\t\t\t\t{type: 'separator'},\n\t\t\t\t\t{id: 'paraspaceincrease', text: _UNO('.uno:ParaspaceIncrease'), uno: '.uno:ParaspaceIncrease'},\n\t\t\t\t\t{id: 'paraspacedecrease', text: _UNO('.uno:ParaspaceDecrease'), uno: '.uno:ParaspaceDecrease'}\n\t\t\t\t],\n\t\t\t},\n\t\t\t{type: 'toolitem',  id: 'wraptextbutton', text: _UNO('.uno:WrapText', 'spreadsheet', true), visible: false, command: '.uno:WrapText'},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breakspacing', visible: false},\n\t\t\t{type: 'toolitem',  id: 'defaultnumbering', text: _UNO('.uno:DefaultNumbering', '', true), visible: false, command: '.uno:DefaultNumbering'},\n\t\t\t{type: 'toolitem',  id: 'defaultbullet', text: _UNO('.uno:DefaultBullet', '', true), visible: false, command: '.uno:DefaultBullet'},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breakbullet', visible: false},\n\t\t\t{type: 'toolitem',  id: 'incrementindent', text: _UNO('.uno:IncrementIndent', '', true), command: '.uno:IncrementIndent', visible: false},\n\t\t\t{type: 'toolitem',  id: 'decrementindent', text: _UNO('.uno:DecrementIndent', '', true), command: '.uno:DecrementIndent', visible: false},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breakindent', visible: false},\n\t\t\t{type: 'menubutton', id: 'conditionalformatdialog:ConditionalFormatMenu', noLabel: true, text: _UNO('.uno:ConditionalFormatMenu', 'spreadsheet', true), visible: false, lockUno: '.uno:ConditionalFormatMenu'},\n\t\t\t{type: 'toolitem',  id: 'sortascending', text: _UNO('.uno:SortAscending', 'spreadsheet', true), command: '.uno:SortAscending', visible: false},\n\t\t\t{type: 'toolitem',  id: 'sortdescending', text: _UNO('.uno:SortDescending', 'spreadsheet', true), command: '.uno:SortDescending', visible: false},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breaksorting', visible: false},\n\t\t\t{type: 'toolitem',  id: 'numberformatcurrency', text: _UNO('.uno:NumberFormatCurrency', 'spreadsheet', true), visible: false, command: '.uno:NumberFormatCurrency'},\n\t\t\t{type: 'toolitem',  id: 'numberformatpercent', text: _UNO('.uno:NumberFormatPercent', 'spreadsheet', true), visible: false, command: '.uno:NumberFormatPercent'},\n\t\t\t{type: 'toolitem',  id: 'numberformatdecdecimals', text: _UNO('.uno:NumberFormatDecDecimals', 'spreadsheet', true), visible: false, command: '.uno:NumberFormatDecDecimals'},\n\t\t\t{type: 'toolitem',  id: 'numberformatincdecimals', text: _UNO('.uno:NumberFormatIncDecimals', 'spreadsheet', true), visible: false, command: '.uno:NumberFormatIncDecimals'},\n\t\t\t{type: 'separator', orientation: 'vertical',   id: 'break-number', visible: false},\n\t\t\t{type: 'button', id: 'gridvisible', img: 'gridvisible', hint: _UNO('.uno:GridVisible'), uno: 'GridVisible', hidden: true},\n\t\t\t{type: 'button', id: 'griduse', img: 'griduse', hint: _UNO('.uno:GridUse'), uno: 'GridUse', hidden: true},\n\t\t\t{type: 'menubutton',  id: 'inserttable:InsertTableMenu', command: 'inserttable', noLabel: true, text: _('Insert table'), visible: false, lockUno: '.uno:InsertTable'},\n\t\t\t{type: 'menubutton', id: 'menugraphic:InsertImageMenu', noLabel: true, command: '.uno:InsertGraphic', text: _UNO('.uno:InsertGraphic', '', true), visible: false, lockUno: '.uno:InsertGraphic'},\n\t\t\t{type: 'toolitem',  id: 'insertobjectchart', text: _UNO('.uno:InsertObjectChart', '', true), command: '.uno:InsertObjectChart'},\n\t\t\t{type: 'menubutton',  id: 'insertshapes:InsertShapesMenu', command: '.uno:BasicShapes', noLabel: true, text: _('Insert shapes')},\n\t\t\t{type: 'toolitem',  id: 'insertline', text: _UNO('.uno:Line', '', true), command: '.uno:Line'},\n\t\t\t{type: 'menubutton',  id: 'insertconnectors:InsertConnectorsMenu', command: 'connector', noLabel: true, text: _('Insert connectors'), visible: false},\n\t\t\t{type: 'separator', orientation: 'vertical',   id: 'breakinsert', desktop: true},\n\t\t\t{type: 'customtoolitem',  id: 'inserttextbox', text: _UNO('.uno:Text', '', true), command: 'inserttextbox', visible: false},\n\t\t\t{type: 'customtoolitem',  id: 'insertannotation', text: _UNO('.uno:InsertAnnotation', '', true), visible: false, lockUno: '.uno:InsertAnnotation'},\n\t\t\t{type: 'customtoolitem',  id: 'inserthyperlink',  command: 'inserthyperlink', text: _UNO('.uno:HyperlinkDialog', '', true), lockUno: '.uno:HyperlinkDialog'},\n\t\t\t{type: 'toolitem',  id: 'insertsymbol', text: _UNO('.uno:InsertSymbol', '', true), command: '.uno:InsertSymbol'},\n\t\t\t{type: 'spacer', id: 'topspacer'},\n\t\t\t{type: 'separator', orientation: 'vertical', id: 'breaksidebar', visible: false},\n\t\t\t{type: 'toolitem',  id: 'sidebar', text: _UNO('.uno:Sidebar', '', true), command: '.uno:SidebarDeck.PropertyDeck', visible: false},\n\t\t\t{type: 'toolitem',  id: 'modifypage', text: _UNO('.uno:ModifyPage', 'presentation', true), command: '.uno:ModifyPage', visible: false},\n\t\t\t{type: 'toolitem',  id: 'slidechangewindow', text: _UNO('.uno:SlideChangeWindow', 'presentation', true), command: '.uno:SlideChangeWindow', visible: false},\n\t\t\t{type: 'toolitem',  id: 'customanimation', text: _UNO('.uno:CustomAnimation', 'presentation', true), command: '.uno:CustomAnimation', visible: false},\n\t\t\t{type: 'toolitem',  id: 'masterslidespanel', text: _UNO('.uno:MasterSlidesPanel', 'presentation', true), command: '.uno:MasterSlidesPanel', visible: false},\n\t\t\t{type: 'customtoolitem',  id: 'fold', text: _('Hide Menu'), desktop: true, mobile: false, visible: true},\n\t\t\t{type: 'customtoolitem',  id: 'hamburger-tablet', desktop: false, mobile: false, tablet: true, iosapptablet: false, visible: false},\n\t\t];\n\n\t\tthis.customItems.forEach((customButton) => {\n\t\t\tvar found = items.find((item) => {\n\t\t\t\treturn item.id.toLowerCase() === customButton.beforeId.toLowerCase();\n\t\t\t});\n\n\t\t\tvar position = items.indexOf(found);\n\n\t\t\tcustomButton.items.forEach((item) => {\n\t\t\t\titems.splice(position, 0, item);\n\t\t\t});\n\t\t});\n\n\t\treturn items;\n\t}\n\n\tupdateControlsState() {\n\t\tif (this.map['stateChangeHandler']) {\n\t\t\tvar items = this.map['stateChangeHandler'].getItems();\n\t\t\tif (items) {\n\t\t\t\tfor (var item in items) {\n\t\t\t\t\tthis.processStateChangedCommand(item, items[item]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcreate() {\n\t\tthis.reset();\n\n\t\tvar items = this.getToolItems();\n\t\tthis.builder.build(this.parentContainer, items);\n\n\t\tJSDialog.MakeScrollable(this.parentContainer, this.parentContainer.querySelector('div'));\n\t\tJSDialog.RefreshScrollables();\n\n\t\tif (this.map.isRestrictedUser()) {\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tvar it = items[i];\n\t\t\t\tvar item = $('#' + it.id)[0];\n\t\t\t\tthis.map.hideRestrictedItems(it, item, item);\n\t\t\t}\n\t\t}\n\n\t\tif (this.map.isLockedUser()) {\n\t\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\t\tvar it = items[i];\n\t\t\t\tvar item = $('#' + it.id)[0];\n\t\t\t\tthis.map.disableLockedItem(it, item, item);\n\t\t\t}\n\t\t}\n\n\t\tthis.map.createFontSelector('#fontnamecombobox-input');\n\n\t\t// on mode switch NB -> Compact\n\t\tif (this.map._docLoadedOnce)\n\t\t\tthis.onDocLayerInit();\n\n\t\t// if app opens direct in compact mode then we need to set the saveState first\n\t\tthis.map.saveState = new app.definitions.saveState(this.map);\n\t}\n\n\tonDocLayerInit() {\n\t\tvar docType = this.map.getDocType();\n\n\t\tswitch (docType) {\n\t\tcase 'spreadsheet':\n\t\t\tif (this.parentContainer) {\n\t\t\t\t['reset', 'textalign', 'wraptextbutton', 'breakspacing', 'insertannotation', 'conditionalformatdialog',\n\t\t\t\t\t'numberformatcurrency', 'numberformatpercent',\n\t\t\t\t\t'numberformatincdecimals', 'numberformatdecdecimals', 'break-number', 'togglemergecells', 'breakmergecells',\n\t\t\t\t\t'setborderstyle', 'sortascending', 'sortdescending', 'breaksorting', 'backgroundcolor', 'breaksidebar', 'sidebar', 'printoptions'\n\t\t\t\t].forEach((id) => {\n\t\t\t\t\tthis.showItem(id, true);\n\t\t\t\t});\n\n\t\t\t\tthis.showItem('print', false);\n\t\t\t\tthis.showItem('styles', false);\n\t\t\t}\n\n\t\t\t$('#toolbar-wrapper').addClass('spreadsheet');\n\t\t\tif (window.mode.isTablet()) {\n\t\t\t\t$(this.map.options.documentContainer).addClass('tablet');\n\t\t\t\t$('#toolbar-wrapper').addClass('tablet');\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'text':\n\t\t\tif (this.parentContainer) {\n\t\t\t\t['fontcolorwriter', 'reset', 'leftpara', 'centerpara', 'rightpara', 'justifypara', 'breakpara', 'linespacing',\n\t\t\t\t\t'breakspacing', 'defaultbullet', 'defaultnumbering', 'breakbullet', 'incrementindent', 'decrementindent',\n\t\t\t\t\t'breakindent', 'inserttable', 'insertannotation', 'backcolor', 'breaksidebar', 'sidebar'\n\t\t\t\t].forEach((id) => {\n\t\t\t\t\tthis.showItem(id, true);\n\t\t\t\t});\n\n\t\t\t\tthis.showItem('printoptions', false);\n\t\t\t\tthis.showItem('fontcolor', false);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'presentation':\n\t\t\t// Fill the style select box if not yet filled\n\t\t\tif ($('#styles-input')[0] && $('#styles-input')[0].length === 1) {\n\t\t\t\tvar data = [''];\n\t\t\t\t// Inserts a separator element\n\t\t\t\tdata = data.concat({text: '\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500', enabled: false});\n\n\t\t\t\tL.Styles.impressLayout.forEach(function(layout) {\n\t\t\t\t\tdata = data.concat({id: layout.id, text: _(layout.text)});\n\t\t\t\t}, this);\n\n\t\t\t\t$('#styles-input').select2({\n\t\t\t\t\tdata: data,\n\t\t\t\t\tplaceholder: _UNO('.uno:LayoutStatus', 'presentation')\n\t\t\t\t});\n\t\t\t\t$('#styles-input').on('select2:select', this.onStyleSelect.bind(this));\n\t\t\t}\n\n\t\t\tif (this.parentContainer) {\n\t\t\t\t['resetimpress', 'breaksidebar', 'modifypage',\n\t\t\t\t\t'leftpara', 'centerpara', 'rightpara', 'justifypara', 'breakpara', 'linespacing',\n\t\t\t\t\t'gridvisible', 'griduse',\n\t\t\t\t\t'breakspacing', 'defaultbullet', 'defaultnumbering', 'breakbullet', 'inserttextbox', 'inserttable',  'insertannotation', 'backcolor',\n\t\t\t\t\t'breaksidebar', 'modifypage', 'slidechangewindow', 'customanimation', 'masterslidespanel', 'navigator'\n\t\t\t\t].forEach((id) => {\n\t\t\t\t\tthis.showItem(id, true);\n\t\t\t\t});\n\n\t\t\t\tthis.showItem('printoptions', false);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'drawing':\n\t\t\tif (this.parentContainer) {\n\t\t\t\t['leftpara', 'centerpara', 'rightpara', 'justifypara', 'breakpara', 'linespacing', 'gridvisible', 'griduse',\n\t\t\t\t\t'breakspacing', 'defaultbullet', 'defaultnumbering', 'breakbullet', 'inserttextbox', 'inserttable', 'backcolor',\n\t\t\t\t\t'breaksidebar', 'sidebar', 'insertconnectors'\n\t\t\t\t].forEach((id) => {\n\t\t\t\t\tthis.showItem(id, true);\n\t\t\t\t});\n\n\t\t\t\tthis.showItem('printoptions', false);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\tthis.updateVisibilityForToolbar();\n\n\t\tthis.map.createFontSizeSelector('#fontsizecombobox-input');\n\n\t\tJSDialog.RefreshScrollables();\n\t}\n\n\tonUpdatePermission(e) {\n\t\tif (e.detail.perm === 'edit') {\n\t\t\t// Enable list boxes\n\t\t\t$('#styles-input').prop('disabled', false);\n\t\t\t$('#fontnamecombobox-input').prop('disabled', false);\n\t\t\t$('#fontsizecombobox-input').prop('disabled', false);\n\t\t} else {\n\t\t\t// Disable list boxes\n\t\t\t$('#styles-input').prop('disabled', true);\n\t\t\t$('#fontnamecombobox-input').prop('disabled', true);\n\t\t\t$('#fontsizecombobox-input').prop('disabled', true);\n\t\t}\n\t}\n\n\tonWopiProps(e) {\n\t\tif (e.HideSaveOption) {\n\t\t\tthis.showItem('save', false);\n\t\t}\n\t\tif (e.HidePrintOption) {\n\t\t\tthis.showItem('print', false);\n\t\t}\n\n\t\t// On desktop we only have Save and Print buttons before the first\n\t\t// splitter/break. Hide the splitter if we hid both save and print.\n\t\t// TODO: Apply the same logic to mobile/tablet to avoid beginning with a splitter.\n\t\tif (window.mode.isDesktop() && e.HideSaveOption && e.HidePrintOption) {\n\t\t\tthis.showItem('savebreak', false);\n\t\t}\n\n\t\tif (this.parentContainer) {\n\t\t\tif (e.EnableInsertRemoteImage || !e.DisableInsertLocalImage) {\n\t\t\t\tthis.showItem('menugraphic', true);\n\t\t\t} else {\n\t\t\t\tthis.showItem('menugraphic', false);\n\t\t\t}\n\t\t}\n\t}\n\n\t// TODO: create dedicated widget for styles listbox\n\tupdateCommandValues(e) {\n\t\tvar data = [];\n\t\tvar commandValues;\n\t\t// 1) For .uno:StyleApply\n\t\t// we need an empty option for the place holder to work\n\t\tif (e.commandName === '.uno:StyleApply') {\n\t\t\tvar styles = [];\n\t\t\tvar topStyles = [];\n\t\t\tcommandValues = this.map.getToolbarCommandValues(e.commandName);\n\t\t\tif (typeof commandValues === 'undefined')\n\t\t\t\treturn;\n\t\t\tvar commands = commandValues.Commands;\n\t\t\tif (commands && commands.length > 0) {\n\n\t\t\t\tcommands.forEach(function (command) {\n\t\t\t\t\tvar translated = command.text;\n\t\t\t\t\tif (L.Styles.styleMappings[command.text]) {\n\t\t\t\t\t\t// if it's in English, translate it\n\t\t\t\t\t\ttranslated = L.Styles.styleMappings[command.text].toLocaleString();\n\t\t\t\t\t}\n\t\t\t\t\tdata = data.concat({id: command.id, text: translated });\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tif (this.map.getDocType() === 'text') {\n\t\t\t\tstyles = commandValues.ParagraphStyles.slice(7);\n\t\t\t\ttopStyles = commandValues.ParagraphStyles.slice(0, 7);\n\t\t\t}\n\t\t\telse if (this.map.getDocType() === 'spreadsheet') {\n\t\t\t\tstyles = commandValues.CellStyles;\n\t\t\t}\n\t\t\telse if (this.map.getDocType() === 'presentation') {\n\t\t\t\t// styles are not applied for presentation\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (topStyles.length > 0) {\n\t\t\t\t// Inserts a separator element\n\t\t\t\tdata = data.concat({text: '\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500', enabled: false});\n\n\t\t\t\ttopStyles.forEach(function (style) {\n\t\t\t\t\tdata = data.concat({id: style, text: L.Styles.styleMappings[style].toLocaleString()});\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tif (styles !== undefined && styles.length > 0) {\n\t\t\t\t// Inserts a separator element\n\t\t\t\tdata = data.concat({text: '\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500', enabled: false});\n\n\t\t\t\tstyles.forEach(function (style) {\n\t\t\t\t\tvar localeStyle;\n\t\t\t\t\tif (style.startsWith('outline')) {\n\t\t\t\t\t\tvar outlineLevel = style.split('outline')[1];\n\t\t\t\t\t\tlocaleStyle = 'Outline'.toLocaleString() + ' ' + outlineLevel;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocaleStyle = L.Styles.styleMappings[style];\n\t\t\t\t\t\tlocaleStyle = localeStyle === undefined ? style : localeStyle.toLocaleString();\n\t\t\t\t\t}\n\n\t\t\t\t\tdata = data.concat({id: style, text: localeStyle});\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\t$('#styles-input').select2({\n\t\t\t\tdata: data,\n\t\t\t\tplaceholder: _('Style')\n\t\t\t});\n\t\t\t$('#styles-input').val(this.stylesSelectValue).trigger('change');\n\t\t\t$('#styles-input').on('select2:select', this.onStyleSelect.bind(this));\n\t\t}\n\t}\n\n\tprocessStateChangedCommand(commandName, state) {\n\t\tvar found = false;\n\n\t\tif (commandName === '.uno:StyleApply') {\n\t\t\tif (!state) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For impress documents, no styles is supported.\n\t\t\tif (this.map.getDocType() === 'presentation') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$('#styles-input option').each(function () {\n\t\t\t\tvar value = this.value;\n\t\t\t\t// For writer we get UI names; ideally we should be getting only programmatic ones\n\t\t\t\t// For eg: 'Text body' vs 'Text Body'\n\t\t\t\t// (likely to be fixed in core to make the pattern consistent)\n\t\t\t\tif (state && value.toLowerCase() === state.toLowerCase()) {\n\t\t\t\t\tstate = value;\n\t\t\t\t\tfound = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (!found) {\n\t\t\t\t// we need to add the size\n\t\t\t\t$('#styles-input')\n\t\t\t\t\t.append($('<option></option>')\n\t\t\t\t\t\t.text(state));\n\t\t\t}\n\n\t\t\tthis.stylesSelectValue = state;\n\t\t\t$('#styles-input').val(state).trigger('change');\n\t\t}\n\n\t\twindow.processStateChangedCommand(commandName, state);\n\t}\n\n\tonCommandStateChanged(e) {\n\t\tthis.processStateChangedCommand(e.commandName, e.state);\n\t}\n};\n\nJSDialog.TopToolbar = function (map) {\n\treturn new TopToolbar(map);\n};\n"]}