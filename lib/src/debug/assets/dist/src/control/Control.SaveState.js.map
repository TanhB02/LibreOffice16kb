{"version":3,"file":"Control.SaveState.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.SaveState.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;AAChC;;;;;;;;GAQG;AAEH;;;EAGE;AAEF;IAKC,6EAA6E;IAC7E,mBAAY,GAAQ;QACnB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QAC/C,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;IACvD,CAAC;IAED,qCAAqC;IACrC,oCAAgB,GAAhB;QACC,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE;YAAE,OAAO;QAEnC,kEAAkE;QAClE,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;YACpD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;YAC9C,sDAAsD;YACtD,IAAM,UAAU,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;YAC/B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,cAAc,EAAE,OAAI,UAAU,OAAG,CAAC,CAAC;YAClE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACrC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,0BAA0B;YACxE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,CAAC,qBAAqB;SACpE;IACF,CAAC;IAED,oCAAoC;IACpC,mCAAe,GAAf;QAAA,iBAeC;QAdA,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE;YAAE,OAAO;QACnC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;YACrD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACxC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,yBAAyB;YAC1E,qDAAqD;YACrD,IAAM,SAAS,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC;YAC7B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,cAAc,EAAE,OAAI,SAAS,OAAG,CAAC,CAAC;YACjE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACpC,6DAA6D;YAC7D,UAAU,CAAC;gBACV,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;gBACvC,KAAI,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,oBAAoB;YAC/D,CAAC,EAAE,IAAI,CAAC,CAAC;SACT;IACF,CAAC;IAED,sCAAkB,GAAlB;QACC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QACxC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QACvC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,yBAAyB;QAC1E,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,UAAU,CAAC,CAAC,CAAC,oBAAoB;QAC9D,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;IACF,gBAAC;AAAD,CAAC,AArDD,IAqDC;AAED,GAAG,CAAC,WAAW,CAAC,SAAS,GAAG,SAAS,CAAC","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\nThis file defines the SaveState class, which handles the logic for managing the document's save state.\nIt controls the display of the saving status, saved status, and triggers the associated animations and icon changes.\n*/\n\nclass SaveState {\n\tmap: any;\n\tsaveEle: HTMLElement;\n\tsaveIconEl: HTMLElement;\n\n\t// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\tconstructor(map: any) {\n\t\tthis.map = map;\n\t\tthis.saveEle = document.getElementById('save');\n\t\tthis.saveIconEl = document.querySelector('#save img');\n\t}\n\n\t// Function to show the saving status\n\tshowSavingStatus(): void {\n\t\tif (window.mode.isMobile()) return;\n\n\t\t// Only do saving animation if any content is modified in document\n\t\tif (this.saveEle.classList.contains('savemodified')) {\n\t\t\tthis.saveEle.classList.remove('savemodified');\n\t\t\t// Dynamically set the content string for saving state\n\t\t\tconst savingText = _('Saving');\n\t\t\tthis.saveEle.style.setProperty('--save-state', `\"${savingText}\"`);\n\t\t\tthis.saveEle.classList.add('saving');\n\t\t\tthis.saveIconEl.classList.add('rotate-icon'); // Start the icon rotation\n\t\t\tthis.saveEle.setAttribute('disabled', 'true'); // Disable the button\n\t\t}\n\t}\n\n\t// Function to show the saved status\n\tshowSavedStatus(): void {\n\t\tif (window.mode.isMobile()) return;\n\t\tif (!this.saveEle.classList.contains('savemodified')) {\n\t\t\tthis.saveEle.classList.remove('saving');\n\t\t\tthis.saveIconEl.classList.remove('rotate-icon'); // Stop the icon rotation\n\t\t\t// Dynamically set the content string for saved state\n\t\t\tconst savedText = _('Saved');\n\t\t\tthis.saveEle.style.setProperty('--save-state', `\"${savedText}\"`);\n\t\t\tthis.saveEle.classList.add('saved');\n\t\t\t// Add some delay to show \"saved\" status, then hide this info\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.saveEle.classList.remove('saved');\n\t\t\t\tthis.saveEle.removeAttribute('disabled'); // Enable the button\n\t\t\t}, 2000);\n\t\t}\n\t}\n\n\tshowModifiedStatus(): void {\n\t\tthis.saveEle.classList.remove('saving');\n\t\tthis.saveEle.classList.remove('saved');\n\t\tthis.saveIconEl.classList.remove('rotate-icon'); // Stop the icon rotation\n\t\tthis.saveEle.removeAttribute('disabled'); // Enable the button\n\t\tthis.saveEle.classList.add('savemodified');\n\t}\n}\n\napp.definitions.saveState = SaveState;\n"]}