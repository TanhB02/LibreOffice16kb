{"version":3,"file":"Toolbar.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Toolbar.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8; fill-column: 100 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * Toolbar handler\n */\n\n/* global app $ window brandProductName DocUtil GraphicSelection _ */\n\nL.Map.include({\n\n\t// a mapping of uno commands to more readable toolbar items\n\tunoToolbarCommands: [\n\t\t'.uno:StyleApply',\n\t\t'.uno:CharFontName'\n\t],\n\n\t_modalDialogOptions: {\n\t\toverlayClose:true,\n\t\topacity: 80,\n\t\toverlayCss: {\n\t\t\tbackgroundColor : '#000'\n\t\t},\n\t\tcontainerCss: {\n\t\t\toverflow : 'hidden',\n\t\t\tbackgroundColor : '#fff',\n\t\t\tpadding : '20px',\n\t\t\tborder : '2px solid #000'\n\t\t}\n\t},\n\n\tonFontSelect: function(e) {\n\t\tvar font = e.target.value;\n\t\tthis.applyFont(font);\n\t\tthis.focus();\n\t},\n\n\t_getCurrentFontName: function() {\n\t\treturn this['stateChangeHandler'].getItemValue('.uno:CharFontName');\n\t},\n\n\tcreateFontSelector: function(nodeSelector) {\n\t\tvar that = this;\n\n\t\tvar fontcombobox = $(nodeSelector);\n\t\tif (!fontcombobox.hasClass('select2')) {\n\t\t\tfontcombobox.select2({\n\t\t\t\tplaceholder: _('Font')\n\t\t\t});\n\t\t}\n\n\t\tvar createSelector = function() {\n\t\t\tvar commandValues = that.getToolbarCommandValues('.uno:CharFontName');\n\n\t\t\tvar data = []; // reset data in order to avoid that the font select box is populated with styles, too.\n\t\t\t// Old browsers like IE11 et al don't like Object.keys with\n\t\t\t// empty arguments\n\t\t\tif (typeof commandValues === 'object') {\n\t\t\t\tdata = data.concat(Object.keys(commandValues));\n\t\t\t}\n\t\t\tfontcombobox.empty();\n\t\t\tfor (var i = 0; i < data.length; ++i) {\n\t\t\t\tif (!data[i]) continue;\n\t\t\t\tvar option = document.createElement('option');\n\t\t\t\toption.text = data[i];\n\t\t\t\toption.value = data[i];\n\t\t\t\tfontcombobox.append(option);\n\t\t\t}\n\t\t\tfontcombobox.on('select2:select', that.onFontSelect.bind(that));\n\n\t\t\tfontcombobox.val(that._getCurrentFontName()).trigger('change');\n\t\t};\n\n\t\tcreateSelector();\n\n\t\tvar onCommandStateChanged = function(e) {\n\t\t\tvar commandName = e.commandName;\n\n\t\t\tif (commandName !== '.uno:CharFontName')\n\t\t\t\treturn;\n\n\t\t\tvar state = e.state;\n\t\t\tvar found = false;\n\t\t\tfontcombobox.children('option').each(function () {\n\t\t\t\tvar value = this.value;\n\t\t\t\tif (value.toLowerCase() === state.toLowerCase()) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!found && state) {\n\t\t\t\tfontcombobox\n\t\t\t\t\t.append($('<option></option>')\n\t\t\t\t\t\t.text(state));\n\t\t\t}\n\n\t\t\tfontcombobox.val(state).trigger('change');\n\t\t};\n\n\t\tvar onFontListChanged = function(e) {\n\t\t\tif (e.commandName === '.uno:CharFontName')\n\t\t\t\tcreateSelector();\n\t\t};\n\n\t\tthis.off('commandstatechanged', onCommandStateChanged);\n\t\tthis.on('commandstatechanged', onCommandStateChanged);\n\t\tthis.off('updatetoolbarcommandvalues', onFontListChanged);\n\t\tthis.on('updatetoolbarcommandvalues', onFontListChanged);\n\t},\n\n\tonFontSizeSelect: function(e) {\n\t\tthis.applyFontSize(e.target.value);\n\t\tthis.focus();\n\t},\n\n\tcreateFontSizeSelector: function(nodeSelector) {\n\t\tvar data = [6, 7, 8, 9, 10, 10.5, 11, 12, 13, 14, 15, 16, 18, 20,\n\t\t\t22, 24, 26, 28, 32, 36, 40, 44, 48, 54, 60, 66, 72, 80, 88, 96];\n\n\t\tvar fontsizecombobox = $(nodeSelector);\n\t\tif (!fontsizecombobox.hasClass('select2')) {\n\t\t\tfontsizecombobox.select2({\n\t\t\t\tdropdownAutoWidth: true,\n\t\t\t\twidth: 'auto',\n\t\t\t\tplaceholder: _('Font Size'),\n\t\t\t\t//Allow manually entered font size.\n\t\t\t\tcreateTag: function(query) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: query.term,\n\t\t\t\t\t\ttext: query.term,\n\t\t\t\t\t\ttag: true\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\ttags: true,\n\t\t\t\tsorter: function(data) { return data.sort(function(a, b) {\n\t\t\t\t\treturn parseFloat(a.text) - parseFloat(b.text);\n\t\t\t\t});}\n\t\t\t});\n\t\t}\n\n\t\tfontsizecombobox.empty();\n\t\tfor (var i = 0; i < data.length; ++i) {\n\t\t\tvar option = document.createElement('option');\n\t\t\toption.text = data[i];\n\t\t\toption.value = data[i];\n\t\t\tfontsizecombobox.append(option);\n\t\t}\n\t\tfontsizecombobox.off('select2:select', this.onFontSizeSelect.bind(this)).on('select2:select', this.onFontSizeSelect.bind(this));\n\n\t\tvar onCommandStateChanged = function(e) {\n\t\t\tvar commandName = e.commandName;\n\n\t\t\tif (commandName !== '.uno:FontHeight')\n\t\t\t\treturn;\n\n\t\t\tvar state = e.state;\n\t\t\tvar found = false;\n\n\t\t\tif (state === '0') {\n\t\t\t\tstate = '';\n\t\t\t}\n\n\t\t\tfontsizecombobox.children('option').each(function (i, e) {\n\t\t\t\tif ($(e).text() === state) {\n\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!found) {\n\t\t\t\t// we need to add the size\n\t\t\t\tfontsizecombobox\n\t\t\t\t\t.append($('<option>')\n\t\t\t\t\t\t.text(state).val(state));\n\t\t\t}\n\n\t\t\tfontsizecombobox.val(state).trigger('change');\n\t\t};\n\n\t\tthis.off('commandstatechanged', onCommandStateChanged);\n\t\tthis.on('commandstatechanged', onCommandStateChanged);\n\t},\n\n\tapplyFont: function (fontName) {\n\t\tif (!fontName)\n\t\t\treturn;\n\t\tif (this.isEditMode()) {\n\t\t\tvar msg = 'uno .uno:CharFontName {' +\n\t\t\t\t'\"CharFontName.FamilyName\": ' +\n\t\t\t\t\t'{\"type\": \"string\", \"value\": \"' + fontName + '\"}}';\n\t\t\tapp.socket.sendMessage(msg);\n\t\t}\n\t},\n\n\tapplyFontSize: function (fontSize) {\n\t\tif (this.isEditMode()) {\n\t\t\tvar msg = 'uno .uno:FontHeight {' +\n\t\t\t\t'\"FontHeight.Height\": ' +\n\t\t\t\t'{\"type\": \"float\", \"value\": \"' + fontSize + '\"}}';\n\t\t\tapp.socket.sendMessage(msg);\n\t\t}\n\t},\n\n\tgetToolbarCommandValues: function (command) {\n\t\tif (this._docLayer) {\n\t\t\treturn this._docLayer._toolbarCommandValues[command];\n\t\t}\n\n\t\treturn undefined;\n\t},\n\n\tdownloadAs: function (name, format, options, id) {\n\t\tif (this._fatal) {\n\t\t\treturn;\n\t\t}\n\n\t\tid = id || 'export'; // not any special download, simple export\n\n\t\tif ((id === 'print' && this['wopi'].DisablePrint) ||\n\t\t\t(id === 'export' && this['wopi'].DisableExport)) {\n\t\t\tthis.hideBusy();\n\t\t\treturn;\n\t\t}\n\n\t\tif (format === undefined || format === null) {\n\t\t\tformat = '';\n\t\t}\n\t\tif (options === undefined || options === null) {\n\t\t\toptions = '';\n\t\t}\n\n\t\t// printing: don't export form fields, irrelevant, and can be buggy\n\t\t// comments are irrelevant, too\n\t\tif (id === 'print' && format === 'pdf' && options === '')\n\t\t\toptions = '{\\\"ExportFormFields\\\":{\\\"type\\\":\\\"boolean\\\",\\\"value\\\":\\\"false\\\"},' +\n\t\t\t\t\t\t'\\\"ExportNotes\\\":{\\\"type\\\":\\\"boolean\\\",\\\"value\\\":\\\"false\\\"}}';\n\n\t\t// download: don't export comments into PDF by default\n\t\tif (id == 'export' && format === 'pdf' && options === '')\n\t\t\toptions = '{\\\"ExportNotes\\\":{\\\"type\\\":\\\"boolean\\\",\\\"value\\\":\\\"false\\\"}}';\n\n\t\tif (!window.ThisIsAMobileApp)\n\t\t\tthis.showBusy(_('Downloading...'), false);\n\n\t\tapp.socket.sendMessage('downloadas ' +\n\t\t\t'name=' + encodeURIComponent(name) + ' ' +\n\t\t\t'id=' + id + ' ' +\n\t\t\t'format=' + format + ' ' +\n\t\t\t'options=' + options);\n\t},\n\n\tprint: function (options) {\n\t\tif (window.ThisIsTheiOSApp || window.ThisIsTheAndroidApp) {\n\t\t\twindow.postMobileMessage('PRINT');\n\t\t} else {\n\t\t\tthis.showBusy(_('Downloading...'), false);\n\t\t\tthis.downloadAs('print.pdf', 'pdf', options, 'print');\n\t\t}\n\t},\n\n\tsaveAs: function (url, format, options) {\n\t\tif (url === undefined || url == null) {\n\t\t\treturn;\n\t\t}\n\t\tif (format === undefined || format === null) {\n\t\t\tformat = '';\n\t\t}\n\t\tif (options === undefined || options === null) {\n\t\t\toptions = '';\n\t\t}\n\n\t\tthis.showBusy(_('Saving...'), false);\n\t\tapp.socket.sendMessage('saveas ' +\n\t\t\t'url=wopi:' + encodeURIComponent(url) + ' ' +\n\t\t\t'format=' + format + ' ' +\n\t\t\t'options=' + options);\n\t},\n\n\texportAs: function (url) {\n\t\tif (url === undefined || url == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tapp.socket.sendMessage('exportas url=wopi:' + encodeURIComponent(url));\n\t},\n\n\trenameFile: function (filename) {\n\t\tif (!filename) {\n\t\t\treturn;\n\t\t}\n\t\tthis.showBusy(_('Renaming...'), false);\n\t\tapp.socket.sendMessage('renamefile filename=' + encodeURIComponent(filename));\n\t},\n\n\tapplyStyle: function (style, familyName) {\n\t\tif (!style || !familyName) {\n\t\t\tthis.fire('error', {cmd: 'setStyle', kind: 'incorrectparam'});\n\t\t\treturn;\n\t\t}\n\t\tif (this.isEditMode()) {\n\t\t\tvar msg = 'uno .uno:StyleApply {' +\n\t\t\t\t\t'\"Style\":{\"type\":\"string\", \"value\": \"' + style + '\"},' +\n\t\t\t\t\t'\"FamilyName\":{\"type\":\"string\", \"value\":\"' + familyName + '\"}' +\n\t\t\t\t\t'}';\n\t\t\tapp.socket.sendMessage(msg);\n\t\t}\n\t},\n\n\tapplyLayout: function (layout) {\n\t\tif (!layout) {\n\t\t\tthis.fire('error', {cmd: 'setLayout', kind: 'incorrectparam'});\n\t\t\treturn;\n\t\t}\n\t\tif (this.isEditMode()) {\n\t\t\tvar msg = 'uno .uno:AssignLayout {' +\n\t\t\t\t\t'\"WhatPage\":{\"type\":\"unsigned short\", \"value\": \"' + this.getCurrentPartNumber() + '\"},' +\n\t\t\t\t\t'\"WhatLayout\":{\"type\":\"unsigned short\", \"value\": \"' + layout + '\"}' +\n\t\t\t\t\t'}';\n\t\t\tapp.socket.sendMessage(msg);\n\t\t}\n\t},\n\n\tsave: function(dontTerminateEdit, dontSaveIfUnmodified, extendedData) {\n\t\tthis.fire('updatemodificationindicator', { status: 'SAVING' });\n\n\t\tvar msg = 'save' +\n\t\t\t\t\t' dontTerminateEdit=' + (dontTerminateEdit ? 1 : 0) +\n\t\t\t\t\t' dontSaveIfUnmodified=' + (dontSaveIfUnmodified ? 1 : 0);\n\n\t\tif (extendedData !== undefined) {\n\t\t\tmsg += ' extendedData=' + extendedData;\n\t\t}\n\n\t\tapp.socket.sendMessage(msg);\n\t},\n\n\tmessageNeedsToBeRedirected: function(command) {\n\t\tif (command === '.uno:EditHyperlink') {\n\t\t\tvar that = this;\n\t\t\tsetTimeout(function () { that.showHyperlinkDialog(); }, 500);\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tsendUnoCommand: function (command, json, force) {\n\t\tif (command.indexOf('.uno:') < 0 && command.indexOf('vnd.sun.star.script') < 0)\n\t\t\tconsole.error('Trying to send uno command without prefix: \"' + command + '\"');\n\n\t\tif ((command.startsWith('.uno:Sidebar') && !command.startsWith('.uno:SidebarShow')) ||\n\t\t\tcommand.startsWith('.uno:SlideChangeWindow') || command.startsWith('.uno:CustomAnimation') ||\n\t\t\tcommand.startsWith('.uno:MasterSlidesPanel') || command.startsWith('.uno:ModifyPage') ||\n\t\t\tcommand.startsWith('.uno:SidebarDeck') || command.startsWith('.uno:EditStyle')) {\n\n\t\t\t// sidebar control is present only in desktop/tablet case\n\t\t\tif (this.sidebar) {\n\t\t\t\tif (this.sidebar.isVisible()) {\n\t\t\t\t\tthis.sidebar.setupTargetDeck(command);\n\t\t\t\t} else {\n\t\t\t\t\t// we don't know which deck was active last, show first then switch if needed\n\t\t\t\t\tapp.socket.sendMessage('uno .uno:SidebarShow');\n\n\t\t\t\t\tthis.sidebar.setupTargetDeck(command);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar isAllowedInReadOnly = false;\n\t\tvar allowedCommands = ['.uno:Save', '.uno:WordCountDialog',\n\t\t\t'.uno:Signature', '.uno:PrepareSignature', '.uno:DownloadSignature', '.uno:InsertSignatureLine',\n\t\t\t'.uno:ShowResolvedAnnotations',\n\t\t\t'.uno:ToolbarMode?Mode:string=notebookbar_online.ui', '.uno:ToolbarMode?Mode:string=Default',\n\t\t\t'.uno:ExportToEPUB', '.uno:ExportToPDF', '.uno:ExportDirectToPDF', '.uno:MoveKeepInsertMode', '.uno:ShowRuler'];\n\t\tif (app.isCommentEditingAllowed()) {\n\t\t\tallowedCommands.push('.uno:InsertAnnotation','.uno:DeleteCommentThread', '.uno:DeleteAnnotation', '.uno:DeleteNote',\n\t\t\t\t'.uno:DeleteComment', '.uno:ReplyComment', '.uno:ReplyToAnnotation', '.uno:PromoteComment', '.uno:ResolveComment',\n\t\t\t\t'.uno:ResolveCommentThread', '.uno:ResolveComment', '.uno:EditAnnotation', '.uno:ExportToEPUB', '.uno:ExportToPDF',\n\t\t\t\t'.uno:ExportDirectToPDF');\n\n\t\t\tconst graphicInfo = GraphicSelection.extraInfo;\n\t\t\tif (graphicInfo && graphicInfo.isSignature)\n\t\t\t{\n\t\t\t\t// If the just added signature line shape is selected, allow\n\t\t\t\t// moving/resizing it.\n\t\t\t\tallowedCommands.push('.uno:TransformDialog', '.uno:MoveShapeHandle');\n\t\t\t}\n\t\t}\n\n\t\tfor (var i in allowedCommands) {\n\t\t\tif (allowedCommands[i] === command) {\n\t\t\t\tisAllowedInReadOnly = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tvar map = this;\n\n\t\tif (command.startsWith('.uno:SpellOnline')) {\n\t\t\tvar val = map['stateChangeHandler'].getItemValue('.uno:SpellOnline');\n\n\t\t\t// proceed if the toggle button is pressed\n\t\t\tif (val && (json === undefined || json === null)) {\n\t\t\t\t // because it is toggle, state has to be the opposite\n\t\t\t\tvar state = !(val === 'true');\n\t\t\t\twindow.prefs.set('SpellOnline', state);\n\t\t\t}\n\t\t}\n\n\t\tif (this.uiManager.isUIBlocked())\n\t\t\treturn;\n\t\tif ((this.dialog.hasOpenedDialog() || (this.jsdialog && this.jsdialog.hasDialogOpened()))\n\t\t\t&& !command.startsWith('.uno:ToolbarMode') && !force) {\n\t\t\tconsole.debug('Cannot execute: ' + command + ' when dialog is opened.');\n\t\t\tthis.dialog.blinkOpenDialog();\n\t\t} else if ((this.isEditMode() || isAllowedInReadOnly) && !this.messageNeedsToBeRedirected(command)) {\n\t\t\tapp.socket.sendMessage('uno ' + command + (json ? ' ' + JSON.stringify(json) : ''));\n\t\t\t// user interaction turns off the following of other users\n\t\t\tif (map.userList && map._docLayer && map._docLayer._viewId)\n\t\t\t\tmap.userList.followUser(map._docLayer._viewId, /* do instant scroll */ false);\n\t\t}\n\t},\n\n\ttoggleCommandState: function (unoState) {\n\t\tif (this.isEditMode()) {\n\t\t\tif (!unoState.startsWith('.uno:')) {\n\t\t\t\tunoState = '.uno:' + unoState;\n\t\t\t}\n\t\t\tthis.sendUnoCommand(unoState);\n\t\t}\n\t},\n\n\tinsertGraphic: function (file) {\n\t\tthis.fire('insertgraphic', {file: file});\n\t},\n\n\tinsertMultimedia: function (file) {\n\t\tthis.fire('insertmultimedia', {file: file});\n\t},\n\n\tinsertURL: function (url, urltype) {\n\t\tthis.fire('inserturl', {url: url, urltype: urltype});\n\t},\n\n\tselectBackground: function (file) {\n\t\tthis.fire('selectbackground', {file: file});\n\t},\n\n\tonHelpOpen: function(id, map, productName) {\n\t\tvar i;\n\t\t// Display keyboard shortcut or online help\n\t\tif (id === 'keyboard-shortcuts-content') {\n\t\t\tdocument.getElementById('online-help-content').classList.add('hide');\n\t\t\t// Display help according to document opened\n\t\t\tif (map.getDocType() === 'text') {\n\t\t\t\tdocument.getElementById('text-shortcuts').classList.add('show');\n\t\t\t}\n\t\t\telse if (map.getDocType() === 'spreadsheet') {\n\t\t\t\tdocument.getElementById('spreadsheet-shortcuts').classList.add('show');\n\t\t\t}\n\t\t\telse if (map.getDocType() === 'presentation') {\n\t\t\t\tdocument.getElementById('presentation-shortcuts').classList.add('show');\n\t\t\t}\n\t\t\telse if (map.getDocType() === 'drawing') {\n\t\t\t\tdocument.getElementById('drawing-shortcuts').classList.add('show');\n\t\t\t}\n\t\t} else /* id === 'online-help' */ {\n\t\t\tdocument.getElementById('keyboard-shortcuts-content').classList.add('hide');\n\t\t\tif (window.socketProxy) {\n\t\t\t\tvar helpdiv = document.getElementById('online-help-content');\n\t\t\t\tvar imgList = helpdiv.querySelectorAll('img');\n\t\t\t\tfor (var p = 0; p < imgList.length; p++) {\n\t\t\t\t\tvar imgSrc = imgList[p].src;\n\t\t\t\t\timgSrc = imgSrc.substring(imgSrc.indexOf('/images'));\n\t\t\t\t\timgList[p].src = window.makeWsUrl('/browser/dist'+ imgSrc);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Display help according to document opened\n\t\t\tif (map.getDocType() === 'text') {\n\t\t\t\tvar x = document.getElementsByClassName('text');\n\t\t\t\tfor (i = 0; i < x.length; i++) {\n\t\t\t\t\tx[i].classList.add('show');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (map.getDocType() === 'spreadsheet') {\n\t\t\t\tx = document.getElementsByClassName('spreadsheet');\n\t\t\t\tfor (i = 0; i < x.length; i++) {\n\t\t\t\t\tx[i].classList.add('show');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (map.getDocType() === 'presentation' || map.getDocType() === 'drawing') {\n\t\t\t\tx = document.getElementsByClassName('presentation');\n\t\t\t\tfor (i = 0; i < x.length; i++) {\n\t\t\t\t\tx[i].classList.add('show');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar contentElement = document.getElementById(id);\n\n\t\t// Let's translate\n\t\tvar max;\n\t\tvar translatableContent = contentElement.querySelectorAll('h1');\n\t\tfor (i = 0, max = translatableContent.length; i < max; i++) {\n\t\t\ttranslatableContent[i].innerHTML = translatableContent[i].innerHTML.toLocaleString();\n\t\t}\n\t\ttranslatableContent = contentElement.querySelectorAll('h2');\n\t\tfor (i = 0, max = translatableContent.length; i < max; i++) {\n\t\t\ttranslatableContent[i].innerHTML = translatableContent[i].innerHTML.toLocaleString();\n\t\t}\n\t\ttranslatableContent = contentElement.querySelectorAll('h3');\n\t\tfor (i = 0, max = translatableContent.length; i < max; i++) {\n\t\t\ttranslatableContent[i].innerHTML = translatableContent[i].innerHTML.toLocaleString();\n\t\t}\n\t\ttranslatableContent = contentElement.querySelectorAll('h4');\n\t\tfor (i = 0, max = translatableContent.length; i < max; i++) {\n\t\t\ttranslatableContent[i].innerHTML = translatableContent[i].innerHTML.toLocaleString();\n\t\t}\n\t\ttranslatableContent = contentElement.querySelectorAll('td');\n\t\tfor (i = 0, max = translatableContent.length; i < max; i++) {\n\t\t\tvar orig = translatableContent[i].innerHTML;\n\t\t\tvar trans = translatableContent[i].innerHTML.toLocaleString();\n\t\t\t// Try harder to get translation of keyboard shortcuts (html2po trims starting <kbd> and ending </kbd>)\n\t\t\tif (orig === trans && orig.indexOf('kbd') != -1) {\n\t\t\t\tvar trimmedOrig = orig.replace(/^(<kbd>)/,'').replace(/(<\\/kbd>$)/,'');\n\t\t\t\tvar trimmedTrans = trimmedOrig.toLocaleString();\n\t\t\t\tif (trimmedOrig !== trimmedTrans) {\n\t\t\t\t\ttrans = '<kbd>' + trimmedTrans + '</kbd>';\n\t\t\t\t}\n\t\t\t}\n\t\t\ttranslatableContent[i].innerHTML = trans;\n\t\t}\n\t\ttranslatableContent = contentElement.querySelectorAll('p');\n\t\tfor (i = 0, max = translatableContent.length; i < max; i++) {\n\t\t\ttranslatableContent[i].innerHTML = translatableContent[i].innerHTML.toLocaleString();\n\t\t}\n\t\ttranslatableContent = contentElement.querySelectorAll('button'); // TOC\n\t\tfor (i = 0, max = translatableContent.length; i < max; i++) {\n\t\t\ttranslatableContent[i].innerHTML = translatableContent[i].innerHTML.toLocaleString();\n\t\t}\n\n\t\t//translatable screenshots\n\t\tvar supportedLanguage = ['de', 'fr', 'it', 'es', 'pt-BR'];\n\t\tvar currentLanguage = String.locale;\n\t\tif (supportedLanguage.indexOf(currentLanguage) >= 0) {\n\t\t\ttranslatableContent = $(contentElement.querySelectorAll('.screenshot img'));\n\n\t\t\tfor (i = 0, max = translatableContent.length; i < max; i++) {\n\t\t\t\ttranslatableContent[i].src = translatableContent[i].src.replace('/en/', '/'+currentLanguage+'/');\n\t\t\t}\n\t\t}\n\n\t\t// Substitute {productname} in Online Help and replace special Mac key names\n\t\tif (id === 'online-help-content') {\n\t\t\tvar productNameContent = contentElement.querySelectorAll('span.productname');\n\t\t\tfor (i = 0, max = productNameContent.length; i < max; i++) {\n\t\t\t\tproductNameContent[i].innerHTML = productNameContent[i].innerHTML.replace('{productname}', productName);\n\t\t\t}\n\t\t\tdocument.getElementById('online-help-content').innerHTML = app.util.replaceCtrlAltInMac(document.getElementById('online-help-content').innerHTML);\n\t\t}\n\t\tif (id === 'keyboard-shortcuts-content') {\n\t\t\tdocument.getElementById('keyboard-shortcuts-content').innerHTML = app.util.replaceCtrlAltInMac(document.getElementById('keyboard-shortcuts-content').innerHTML);\n\t\t}\n\t\tvar searchInput = document.getElementById('online-help-search-input');\n\t\tsearchInput.setAttribute('placeholder',_('Search'));\n\t\tsearchInput.setAttribute('aria-label',_('Search'));\n\t\tsearchInput.focus(); // auto focus on user input field\n\t\tvar helpContentParent = document.getElementsByClassName('ui-dialog-content')[0];\n\t\tvar startFilter = false;\n\t\tvar isAnyMatchingContent = false;\n\t\tsearchInput.addEventListener('input', function () {\n\t\t\t// Hide all elements within the #online-help-content on first key stroke/at start of filter content\n\t\t\tif (!startFilter || !isAnyMatchingContent) {\n\t\t\t\thelpContentParent.style.backgroundColor = 'var(--color-background-dark) !important';\n\t\t\t\t// Hide all <p> tags within .text, .spreadsheet, or .presentation sections\n\t\t\t\tdocument.querySelectorAll('#online-help-content > *:not(a), .link-section p, .product-header').forEach(function (element) {\n\t\t\t\t\t// Check if the element has class text, spreadsheet, or presentation\n\t\t\t\t\tif (!element.classList.contains('text') && !element.classList.contains('spreadsheet') && !element.classList.contains('presentation')) {\n\t\t\t\t\t\tthis.hide(element);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this));\n\n\t\t\t\tstartFilter = true;\n\t\t\t}\n\t\t\tvar searchTerm = searchInput.value.trim();\n\t\t\t// Reset highlighting and visibility if search term is empty\n\t\t\tif (searchTerm === '') {\n\t\t\t\tthis.resetFilterResults();\n\t\t\t\tstartFilter = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.filterResults(searchTerm, isAnyMatchingContent, id);\n\t\t\t}\n\t\t}.bind(this));\n\n\n\t\tconst onlineHelpContent = document.getElementById('online-help-content');\n\t\tconst buttons = onlineHelpContent.querySelectorAll('.scroll-button');\n\n\t\tbuttons.forEach((button) => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tconst targetId = button.dataset.target;\n\t\t\t\tif (targetId) {\n\t\t\t\t\tconst targetElement = document.getElementById(`${targetId}`);\n\t\t\t\t\tif (targetElement) {\n\t\t\t\t\t\ttargetElement.scrollIntoView();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\n\tfilterResults: function (searchTerm, isAnyMatchingContent, id) {\n\n\t\tvar mainDiv = document.getElementById(id);\n\t\t// Combine query parameters to select main sections\n\t\tvar mainSectionsQuery = '.section:not(div.text .section, div.spreadsheet .section, div.presentation .section)';\n\t\tvar docType = this.getDocType() === 'drawing' ? 'presentation' : this.getDocType();\n\t\tmainSectionsQuery += ', div.' + docType + ' .section';\n\n\t\t// Select main sections elements within the mainDiv\n\t\tvar mainSections = mainDiv.querySelectorAll(mainSectionsQuery);\n\t\tisAnyMatchingContent = false;\n\n\t\t// Loop through each main section\n\t\tmainSections.forEach(function (mainSection) {\n\t\t\t// check header text matches or not\n\t\t\tvar headerText = mainSection.querySelector('.section-header').textContent.toLowerCase();\n\t\t\tvar containsTermInHeader = headerText.includes(searchTerm.toLowerCase());\n\t\t\t// check main section text matches or not\n\t\t\tvar sectionText = mainSection.textContent.toLowerCase();\n\t\t\tvar containsTerm = sectionText.includes(searchTerm.toLowerCase());\n\n\t\t\t//sub-section text matches or not\n\t\t\tvar subSections = mainSection.querySelectorAll('.sub-section');\n\t\t\tvar subSectionContainsTerm = false;\n\n\t\t\t// if text matching with the main header then display full main section\n\t\t\tif (containsTermInHeader) {\n\t\t\t\t// first need to reset display of subsection\n\t\t\t\tsubSections.forEach(function(subSection) {\n\t\t\t\t\tmainSection.style.backgroundColor = '';\n\t\t\t\t\tmainSection.style.paddingInline = '';\n\t\t\t\t\tmainSection.style.borderRadius = '';\n\t\t\t\t\tthis.show(subSection);\n\t\t\t\t}.bind(this));\n\t\t\t\tmainSection.style.backgroundColor = 'var(--color-background-lighter)';\n\t\t\t\tmainSection.style.paddingInline = '12px';\n\t\t\t\tmainSection.style.borderRadius = 'var(--border-radius-large)';\n\t\t\t\tthis.show(mainSection);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// else Loop through each sub-section and display subsections with matching text has search term\n\t\t\t\tsubSections.forEach(function (subSection) {\n\t\t\t\t\t// Highlight matching sub-sections\n\t\t\t\t\tif (subSection.textContent.toLowerCase().includes(searchTerm.toLowerCase())) {\n\t\t\t\t\t\tsubSection.style.color = 'var(--color-text-darker)';\n\t\t\t\t\t\tthis.show(subSection);\n\t\t\t\t\t\tmainSection.style.backgroundColor = 'var(--color-background-lighter)';\n\t\t\t\t\t\tmainSection.style.paddingInline = '12px';\n\t\t\t\t\t\tmainSection.style.borderRadius = 'var(--border-radius-large)';\n\t\t\t\t\t\t// make sure main section of matched subsection is visible\n\t\t\t\t\t\tthis.show(mainSection);\n\t\t\t\t\t\tsubSectionContainsTerm = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsubSection.style.color = ''; // Remove previous highlighting\n\t\t\t\t\t\tthis.hide(subSection);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this));\n\t\t\t}\n\n\t\t\tif (!subSectionContainsTerm && !containsTerm) {\n\t\t\t\tthis.hide(mainSection);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tisAnyMatchingContent = true;\n\t\t\t}\n\n\t\t}.bind(this));\n\n\t\tif (!isAnyMatchingContent) {\n\t\t\tthis.resetFilterResults();\n\t\t\t$('#online-help-search-input').addClass('search-not-found');\n\t\t\tsetTimeout(function () {\n\t\t\t\t$('#online-help-search-input').removeClass('search-not-found');\n\t\t\t}, 800);\n\t\t}\n\t},\n\n\tresetFilterResults: function () {\n\t\tvar helpContentParent = document.getElementsByClassName('ui-dialog-content')[0];\n\t\thelpContentParent.style.backgroundColor='';\n\t\t// Select main sections and make it visible\n\t\tvar mainSections = document.querySelectorAll('.section');\n\t\tmainSections.forEach(function(mainSection) {\n\t\t\tmainSection.style.backgroundColor = '';\n\t\t\tthis.show(mainSection);\n\n\t\t\tvar subSections = mainSection.querySelectorAll('.sub-section');\n\t\t\tsubSections.forEach(function(subSection) {\n\t\t\t\tthis.show(subSection);\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\n\t\t// select all event scroll elements, main-header elements, product header elements and make visible to user if search term is empty\n\t\tdocument.querySelectorAll('.m-v-0, .product-header, .help-dialog-header').forEach(function(element) {\n\t\t\tthis.show(element);\n\t\t\telement.style.backgroundColor = '';\n\t\t}.bind(this));\n\t},\n\n\tshow: function(element) {\n\t\telement.classList.remove('hide');\n\t\telement.classList.add('show');\n\t},\n\n\thide: function(element) {\n\t\telement.classList.remove('show');\n\t\telement.classList.add('hide');\n\t},\n\n\t_doOpenHelpFile: function(data, id, map) {\n\t\tlet productName;\n\t\tif (window.ThisIsAMobileApp) {\n\t\t\tproductName = window.MobileAppName;\n\t\t} else {\n\t\t\tproductName = (typeof brandProductName !== 'undefined') ? brandProductName : 'Collabora Online Development Edition (unbranded)';\n\t\t}\n\n\t\tmap.uiManager.showYesNoButton(id + '-box', productName, '', _('OK'), null, null, null, true);\n\t\tapp.layoutingService.appendLayoutingTask(() => {\n\t\t\tconst box = document.getElementById(id + '-box');\n\t\t\tconst innerDiv = L.DomUtil.create('div', '', null);\n\t\t\tbox.insertBefore(innerDiv, box.firstChild);\n\t\t\tinnerDiv.innerHTML = data;\n\n\t\t\tthis.onHelpOpen(id, map, productName);\n\t\t});\n\t},\n\n\tshowHelp: function(id) {\n\t\tvar map = this;\n\t\tif (window.ThisIsAMobileApp) {\n\t\t\tmap._doOpenHelpFile(window.HelpFile, id, map);\n\t\t\treturn;\n\t\t}\n\t\tvar helpLocation = 'cool-help.html';\n\t\tif (window.socketProxy)\n\t\t\thelpLocation = window.makeWsUrl('/browser/dist/' + helpLocation);\n\t\t$.get(helpLocation, function(data) {\n\t\t\tmap._doOpenHelpFile(data, id, map);\n\t\t});\n\t},\n\n\tshowLOAboutDialog: function() {\n\t\tthis.aboutDialog.show();\n\t},\n\n\textractContent: function(html) {\n\t\thtml = DocUtil.stripHTML(html);\n\t\tvar parser = new DOMParser;\n\t\treturn parser.parseFromString(html, 'text/html').documentElement.getElementsByTagName('body')[0].textContent;\n\t},\n\n\tmakeURLFromStr: function(str) {\n\t\tstr = str.trim();\n\t\tconst lowerStr = str.toLowerCase();\n\n\t\tif (!(lowerStr.startsWith('http://') || lowerStr.startsWith('https://') ||\n\t\t\t  lowerStr.startsWith('ftp://') || lowerStr.startsWith('mailto:'))) {\n\t\t\t// Regular expression to test if the string is an email address\n\t\t\tconst emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\t\t\tif (emailPattern.test(str))\n\t\t\t\tstr = 'mailto:' + str;\n\t\t\telse\n\t\t\t\tstr = 'http://' + str;\n\t\t}\n\t\treturn str;\n\t},\n\n\t_createAndRunHyperlinkDialog: function(defaultText, defaultLink) {\n\t\tvar map = this;\n\t\tvar id = 'hyperlink';\n\t\tvar title = _('Insert hyperlink');\n\n\t\tlet focusId = 'hyperlink-link-box-input';\n\t\tif (defaultText === '') {\n\t\t\tfocusId = 'hyperlink-text-box';\n\t\t}\n\n\t\tvar dialogId = 'modal-dialog-' + id;\n\t\tvar json = map.uiManager._modalDialogJSON(id, title, true, [\n\t\t\t{\n\t\t\t\tid: 'hyperlink-text-box-label',\n\t\t\t\ttype: 'fixedtext',\n\t\t\t\ttext: _('Text'),\n\t\t\t\tlabelFor: 'hyperlink-text-box'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'hyperlink-text-box',\n\t\t\t\ttype: 'multilineedit',\n\t\t\t\ttext: defaultText,\n\t\t\t\tlabelledBy: 'hyperlink-text-box-label'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'hyperlink-link-box-label',\n\t\t\t\ttype: 'fixedtext',\n\t\t\t\ttext: _('Link'),\n\t\t\t\tlabelFor: 'hyperlink-link-box'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'hyperlink-link-box',\n\t\t\t\ttype: 'edit',\n\t\t\t\ttext: defaultLink,\n\t\t\t\tlabelledBy: 'hyperlink-link-box-label'\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'buttonbox',\n\t\t\t\tenabled: true,\n\t\t\t\tchildren: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'response-cancel',\n\t\t\t\t\t\ttype: 'pushbutton',\n\t\t\t\t\t\ttext: _('Cancel'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'response-ok',\n\t\t\t\t\t\ttype: 'pushbutton',\n\t\t\t\t\t\ttext: _('OK'),\n\t\t\t\t\t\t'has_default': true,\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tvertical: false,\n\t\t\t\tlayoutstyle: 'end'\n\t\t\t},\n\t\t], focusId);\n\n\t\tmap.uiManager.showModal(json, [\n\t\t\t{id: 'response-ok', func: function() {\n\t\t\t\tvar text = document.getElementById('hyperlink-text-box');\n\t\t\t\tvar link = document.getElementById('hyperlink-link-box-input');\n\n\t\t\t\tif (link.value != '') {\n\t\t\t\t\tif (!text.value || text.value === '')\n\t\t\t\t\t\ttext.value = link.value;\n\n\t\t\t\t\tvar command = {\n\t\t\t\t\t\t'Hyperlink.Text': {\n\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\tvalue: text.value\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Hyperlink.URL': {\n\t\t\t\t\t\t\ttype: 'string',\n\t\t\t\t\t\t\tvalue: map.makeURLFromStr(link.value)\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tmap.sendUnoCommand('.uno:SetHyperlink', command, true);\n\t\t\t\t}\n\n\t\t\t\tmap.uiManager.closeModal(dialogId);\n\t\t\t}}\n\t\t]);\n\t},\n\n\tgetTextForLink: function() {\n\t\tvar map = this;\n\t\tvar text = '';\n\t\tif (this.hyperlinkUnderCursor && this.hyperlinkUnderCursor.text) {\n\t\t\ttext = this.hyperlinkUnderCursor.text;\n\t\t} else if (this._clip && this._clip._selectionType == 'text') {\n\t\t\tif (map['stateChangeHandler'].getItemValue('.uno:Copy') === 'enabled') {\n\t\t\t\tif (L.Browser.clipboardApiAvailable) {\n\t\t\t\t\t// Async copy, trigger fetching the text selection.\n\t\t\t\t\tapp.socket.sendMessage('gettextselection mimetype=text/html,text/plain;charset=utf-8');\n\t\t\t\t} else {\n\t\t\t\t\ttext = this.extractContent(this._clip._selectionContent);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this._docLayer._selectedTextContent) {\n\t\t\ttext = this.extractContent(this._docLayer._selectedTextContent);\n\t\t}\n\t\treturn text;\n\t},\n\n\tshowHyperlinkDialog: function() {\n\t\tif (this.getDocType() === 'spreadsheet') {\n\t\t\t// show native core dialog\n\t\t\t// in case we try to edit email EditHyperlink doesn't work\n\t\t\tthis.sendUnoCommand('.uno:HyperlinkDialog');\n\t\t\treturn;\n\t\t}\n\n\t\tvar text = this.getTextForLink();\n\t\tvar link = '';\n\t\tif (this.hyperlinkUnderCursor && this.hyperlinkUnderCursor.link)\n\t\t\tlink = this.hyperlinkUnderCursor.link;\n\n\t\tthis._createAndRunHyperlinkDialog(text ? text.replace(/^[\\n\\r]+|[\\n\\r]+$/g, '') : '', link);\n\t},\n\n\tcancelSearch: function() {\n\t\tvar toolbar = window.mode.isMobile() ? app.map.mobileSearchBar: app.map.statusBar;\n\t\tvar searchInput = L.DomUtil.get('search-input');\n\t\tapp.searchService.resetSelection();\n\t\tif (toolbar) {\n\t\t\ttoolbar.showItem('cancelsearch', false);\n\t\t\ttoolbar.enableItem('searchprev', false);\n\t\t\ttoolbar.enableItem('searchnext', false);\n\t\t}\n\t\tsearchInput.value = '';\n\t\tif (window.mode.isMobile()) {\n\t\t\tsearchInput.focus();\n\t\t\t// odd, but on mobile we need to invoke it twice\n\t\t\ttoolbar.showItem('cancelsearch', false);\n\t\t}\n\n\t\tthis._onGotFocus();\n\t},\n\n\topenRevisionHistory: function () {\n\t\tvar map = this;\n\t\t// if we are being loaded inside an iframe, ask\n\t\t// our host to show revision history mode\n\t\tmap.fire('postMessage', {msgId: 'rev-history', args: {Deprecated: true}});\n\t\tmap.fire('postMessage', {msgId: 'UI_FileVersions'});\n\t},\n\topenShare: function () {\n\t\tvar map = this;\n\t\tmap.fire('postMessage', {msgId: 'UI_Share'});\n\t},\n\topenSaveAs: function (format) {\n\t\tvar map = this;\n\t\tmap.fire('postMessage', {msgId: 'UI_SaveAs', args: {format: format}});\n\t},\n\n\tonFormulaBarFocus: function() {\n\t\tif (window.mode.isMobile() === true) {\n\t\t\tvar mobileTopBar = this.mobileTopBar;\n\t\t\tmobileTopBar.showItem('undo', false);\n\t\t\tmobileTopBar.showItem('redo', false);\n\t\t\tmobileTopBar.showItem('cancelformula', true);\n\t\t\tmobileTopBar.showItem('acceptformula', true);\n\t\t} else {\n\t\t\tvar jsdialogFormulabar = this.formulabar;\n\t\t\tjsdialogFormulabar.hide('startformula');\n\t\t\tjsdialogFormulabar.hide('AutoSumMenu');\n\t\t\tjsdialogFormulabar.show('cancelformula');\n\t\t\tjsdialogFormulabar.show('acceptformula');\n\t\t}\n\t},\n\n\tonFormulaBarBlur: function() {\n\t\tvar map = this;\n\n\t\tif (window.mode.isMobile() && this.isEditMode()) {\n\t\t\tvar mobileTopBar = map.mobileTopBar;\n\t\t\tmobileTopBar.showItem('cancelformula', false);\n\t\t\tmobileTopBar.showItem('acceptformula', false);\n\t\t\tmobileTopBar.showItem('undo', true);\n\t\t\tmobileTopBar.showItem('redo', true);\n\t\t} else {\n\t\t\tvar jsdialogFormulabar = map.formulabar;\n\t\t\tjsdialogFormulabar.hide('cancelformula');\n\t\t\tjsdialogFormulabar.hide('acceptformula');\n\t\t\tjsdialogFormulabar.show('startformula');\n\t\t\tjsdialogFormulabar.show('AutoSumMenu');\n\t\t}\n\n\t\t$('#AutoSumMenu-button').css('margin-inline', '0');\n\t\t$('#AutoSumMenu .unoarrow').css('margin', '0');\n\n\t\tmap.formulabar.blurField();\n\t\t$('#addressInput input').blur();\n\t},\n\n\tformulabarBlur: function() {\n\t\tif (!this.uiManager.isAnyDialogOpen())\n\t\t\tthis.focus();\n\t},\n\n\tformulabarFocus: function() {\n\t\tthis.formulabar.focusField();\n\t},\n\n\tformulabarSetDirty: function() {\n\t\tif (this.formulabar)\n\t\t\tthis.formulabar.dirty = true;\n\t},\n});\n"]}