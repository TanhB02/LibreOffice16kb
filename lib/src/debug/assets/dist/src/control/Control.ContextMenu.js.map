{"version":3,"file":"Control.ContextMenu.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.ContextMenu.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8; fill-column: 100 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n/*\n * Control.ContextMenu\n */\n\n/* global $ _ _UNO app GraphicSelection */\nL.Control.ContextMenu = L.Control.extend({\n\toptions: {\n\t\tSEPARATOR: '---------',\n\t\t/*\n\t\t * Enter UNO commands that should appear in the context menu.\n\t\t * Entering a UNO command under `general' would enable it for all types\n\t\t * of documents. If you do not want that, whitelist it in document specific filter.\n\t\t *\n\t\t * UNOCOMMANDS_EXTRACT_START <- don't remove this line, it's used by unocommands.py\n\t\t */\n\t\twhitelist: {\n\t\t\t/*\n\t\t\t * UNO commands for menus are not available sometimes. Presence of Menu commands\n\t\t\t * in following list is just for reference and ease of locating uno command\n\t\t\t * from context menu structure.\n\t\t\t */\n\t\t\tgeneral: ['Cut', 'Copy', 'Paste', 'PasteSpecial', 'Delete',\n\t\t\t\t\t  'FormatPaintbrush', 'ResetAttributes',\n\t\t\t\t\t  'NumberingStart', 'ContinueNumbering', 'IncrementLevel', 'DecrementLevel',\n\t\t\t\t\t  'OpenHyperlinkOnCursor', 'EditHyperlink', 'CopyHyperlinkLocation', 'RemoveHyperlink',\n\t\t\t\t\t  'AnchorMenu', 'SetAnchorToPage', 'SetAnchorToPara', 'SetAnchorAtChar',\n\t\t\t\t\t  'SetAnchorToChar', 'SetAnchorToFrame', 'Crop',\n\t\t\t\t\t  'WrapMenu', 'WrapOff', 'WrapOn', 'WrapIdeal', 'WrapLeft', 'WrapRight', 'WrapThrough',\n\t\t\t\t\t  'WrapThroughTransparencyToggle', 'WrapContour', 'WrapAnchorOnly',\n\t\t\t\t\t  'ConvertMenu', 'ChangeBezier',\n\t\t\t\t\t  'DistributeHorzCenter', 'DistributeHorzDistance','DistributeHorzLeft','DistributeHorzRight',\n\t\t\t\t\t  'DistributeVertBottom', 'DistributeVertCenter', 'DistributeVertDistance', 'DistributeVertTop',\n\t\t\t\t\t  'ArrangeFrameMenu', 'ArrangeMenu', 'BringToFront', 'ObjectForwardOne', 'ObjectBackOne', 'SendToBack',\n\t\t\t\t\t  'RotateMenu', 'RotateLeft', 'RotateRight', 'TransformDialog', 'FormatLine', 'FormatArea',\n\t\t\t\t\t  'FormatChartArea', 'InsertTitles', 'InsertRemoveAxes',\n\t\t\t\t\t  'DeleteLegend', 'DiagramType', 'DataRanges', 'DiagramData', 'View3D',\n\t\t\t\t\t  'FormatWall', 'FormatFloor', 'FormatLegend', 'FormatTitle', 'FormatDataSeries',\n\t\t\t\t\t  'FormatAxis', 'FormatMajorGrid', 'FormatMinorGrid', 'FormatDataLabels',\n\t\t\t\t\t  'FormatDataLabel', 'FormatDataPoint', 'FormatMeanValue', 'FormatXErrorBars', 'FormatYErrorBars',\n\t\t\t\t\t  'FormatTrendline', 'FormatTrendlineEquation', 'FormatSelection', 'FormatStockLoss',\n\t\t\t\t\t  'FormatStockGain', 'InsertDataLabel', 'InsertDataLabels' , 'DeleteDataLabel', 'DeleteDataLabels', 'ResetDataPoint',\n\t\t\t\t\t  'InsertTrendline', 'InsertMeanValue', 'InsertXErrorBars' , 'InsertYErrorBars', 'ResetAllDataPoints' , 'DeleteAxis',\n\t\t\t\t\t  'InsertAxisTitle', 'InsertMinorGrid', 'InsertMajorGrid' , 'InsertAxis', 'DeleteMajorGrid' , 'DeleteMinorGrid',\n\t\t\t\t\t  'SpellCheckIgnoreAll', 'LanguageStatus', 'SpellCheckApplySuggestion', 'PageDialog',\n\t\t\t\t\t  'CompressGraphic', 'GraphicDialog', 'InsertCaptionDialog',\n\t\t\t\t\t  'AnimationEffects', 'ExecuteAnimationEffect',\n\t\t\t\t\t  'NextTrackedChange', 'PreviousTrackedChange', 'RejectTrackedChange', 'AcceptTrackedChange', 'ReinstateTrackedChange', 'InsertAnnotation'],\n\n\t\t\ttext: ['TableInsertMenu',\n\t\t\t\t   'InsertRowsBefore', 'InsertRowsAfter', 'InsertColumnsBefore', 'InsertColumnsAfter',\n\t\t\t\t   'TableDeleteMenu', 'SetObjectToBackground', 'SetObjectToForeground',\n\t\t\t\t   'DeleteRows', 'DeleteColumns', 'DeleteTable', 'EditCurrentRegion',\n\t\t\t\t   'MergeCells', 'SetOptimalColumnWidth', 'SetOptimalRowHeight',\n\t\t\t\t   'UpdateCurIndex','RemoveTableOf',\n\t\t\t\t   'ReplyComment', 'DeleteComment', 'DeleteAuthor', 'DeleteAllNotes',\n\t\t\t\t   'SpellingAndGrammarDialog', 'FontDialog', 'FontDialogForParagraph', 'TableDialog',\n\t\t\t\t   'SpellCheckIgnore', 'FrameDialog', 'UnfloatFrame', 'ContentControlProperties', 'DeleteContentControl',\n\t\t\t\t   'AddToWordbook'],\n\n\t\t\tspreadsheet: ['MergeCells', 'SplitCell', 'InsertCell', 'DeleteCell',\n\t\t\t\t      'RecalcPivotTable', 'DataDataPilotRun', 'DeletePivotTable',\n\t\t\t\t      'FormatCellDialog', 'DeleteNote', 'SetAnchorToCell', 'SetAnchorToCellResize',\n\t\t\t\t      'FormatSparklineMenu', 'InsertSparkline', 'DeleteSparkline', 'DeleteSparklineGroup',\n\t\t\t\t      'EditSparklineGroup', 'EditSparkline', 'GroupSparklines', 'UngroupSparklines', 'AutoFill'],\n\n\t\t\tpresentation: ['SetDefault'],\n\t\t\tdrawing: []\n\t\t},\n\t\t// UNOCOMMANDS_EXTRACT_END <- don't remove this line, it's used by unocommands.py\n\n\t\t// This blacklist contains those menu items which should be disabled on mobile\n\t\t// phones even if they are allowed in general. We need to have only those items here\n\t\t// which are also part of the whitelist, otherwise the menu items are not visible\n\t\t// anyway.\n\n\t\t// For clarity, please keep this list in sections that are sorted in the same order\n\t\t// as the items appear in the whitelist arrays above. Also keep items on separate\n\t\t// lines as in the arrays above.\n\t\tmobileBlackList: [\n\t\t\t// general\n\t\t\t'PasteSpecial',\n\t\t\t'TransformDialog', 'FormatLine', 'FormatArea',\n\t\t\t'InsertTitles', 'InsertRemoveAxes',\n\t\t\t'DiagramType', 'DataRanges',\n\t\t\t'FormatWall', 'FormatDataSeries', 'FormatXErrorBars', 'FormatYErrorBars',\n\t\t\t'FormatDataPoint', 'FormatAxis', 'FormatMajorGrid', 'FormatMinorGrid',\n\t\t\t'InsertTrendline', 'InsertXErrorBars' , 'InsertYErrorBars', 'FormatChartArea',\n\t\t\t'FormatMeanValue', 'DiagramData', 'FormatLegend', 'FormatTrendline',\n\t\t\t'FormatTrendlineEquation', 'FormatStockLoss', 'FormatStockGain', 'LanguageStatus',\n\t\t\t'PageDialog',\n\t\t\t// text\n\t\t\t'SpellingAndGrammarDialog', 'FontDialog', 'FontDialogForParagraph',\n\t\t\t// spreadsheet\n\t\t\t'FormatCellDialog', 'DataDataPilotRun',\n\t\t\t'GroupSparklines', 'UngroupSparklines', 'AutoFill'\n\t\t]\n\t},\n\n\n\n\tonAdd: function (map) {\n\t\tthis._prevMousePos = null;\n\t\tthis._autoFillContextMenu = false;\n\n\t\tmap._contextMenu = this;\n\t\tmap.on('locontextmenu', this._onContextMenu, this);\n\t\tmap.on('mousedown', this._onMouseDown, this);\n\t\tmap.on('mouseup', this._onMouseUp, this);\n\t\tmap.on('keydown', this._onKeyDown, this);\n\t\tmap.on('closepopups', this._onClosePopup, this);\n\t},\n\n\t_onClosePopup: function () {\n\n\t\tif (this._autoFillContextMenu) {\n\t\t\tthis._autoFillContextMenu = false;\n\t\t\tapp.map._docLayer._resetReferencesMarks();\n\t\t}\n\n\t\t$.contextMenu('destroy', '.leaflet-layer');\n\t\tthis.hasContextMenu = false;\n\t},\n\n\t_onMouseDown: function(e) {\n\t\tthis._prevMousePos = {x: e.originalEvent.pageX, y: e.originalEvent.pageY};\n\n\t\tthis._onClosePopup();\n\t},\n\n\t_onMouseUp: function (e) {\n\t\tthis._currMousePos = { x: e.originalEvent.pageX, y: e.originalEvent.pageY };\n\t},\n\n\t_onKeyDown: function(e) {\n\t\tif (e.originalEvent.keyCode === 27 /* ESC */) {\n\t\t\t$.contextMenu('destroy', '.leaflet-layer');\n\t\t\tthis.hasContextMenu = false;\n\t\t}\n\t},\n\n\t_onContextMenu: function(obj) {\n\t\tvar map = this._map;\n\t\tif (!map.isEditMode()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.hasContextMenu) {\n\t\t\tthis._onClosePopup();\n\t\t}\n\n\t\tthis._amendContextMenuData(obj);\n\n\t\tvar contextMenu = this._createContextMenuStructure(obj);\n\n\t\tif (Object.keys(contextMenu).length == 0) {\n\t\t\t// We can sometimes end up filtering out everything in the menu ... in this case, there's nothing to display\n\t\t\treturn;\n\t\t}\n\n\t\tvar spellingContextMenu = false;\n\t\tvar autoFillContextMenu = false;\n\t\tfor (var menuItem in contextMenu) {\n\t\t\tif (menuItem.indexOf('.uno:SpellCheckIgnore') !== -1) {\n\t\t\t\tspellingContextMenu = true;\n\t\t\t\tbreak;\n\t\t\t} else if (menuItem.indexOf('.uno:AutoFill') !== -1) {\n\t\t\t\t// we should close the autofill preview popup before open autofill context menu\n\t\t\t\tmap.fire('closeautofillpreviewpopup');\n\t\t\t\tthis._autoFillContextMenu = autoFillContextMenu = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (window.mode.isMobile()) {\n\t\t\twindow.contextMenuWizard = true;\n\t\t\tvar menuData = L.Control.JSDialogBuilder.getMenuStructureForMobileWizard(contextMenu, true, '');\n\t\t\tmap.fire('mobilewizard', {data: menuData});\n\t\t} else {\n\t\t\tL.installContextMenu({\n\t\t\t\tselector: '.leaflet-layer',\n\t\t\t\tclassName: 'cool-font on-the-fly-context-menu',\n\t\t\t\ttrigger: 'none',\n\t\t\t\tzIndex: 1500,\n\t\t\t\tbuild: function() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcallback: function(key) {\n\t\t\t\t\t\t\tif (key === '.uno:InsertAnnotation') {\n\t\t\t\t\t\t\t\tapp.map.insertComment();\n\t\t\t\t\t\t\t} else if (map._clip === undefined || !map._clip.filterExecCopyPaste(key)) {\n\t\t\t\t\t\t\t\tmap.sendUnoCommand(key);\n\t\t\t\t\t\t\t\t// For spelling context menu we need to remove selection\n\t\t\t\t\t\t\t\tif (spellingContextMenu)\n\t\t\t\t\t\t\t\t\tmap._docLayer._clearSelections();\n\t\t\t\t\t\t\t\t// Give the stolen focus back to map\n\t\t\t\t\t\t\t\tmap.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\titems: contextMenu\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tshow: function (opt) {\n\t\t\t\t\t\tvar $menu = opt.$menu;\n\t\t\t\t\t\t$menu.attr('tabindex', 0); // Make the context menu focusable\n\t\t\t\t\t},\n\t\t\t\t\tactivated: function (opt) {\n\t\t\t\t\t\tif (autoFillContextMenu) {\n\t\t\t\t\t\t\tvar $layer = opt.$layer;\n\t\t\t\t\t\t\t$layer.css('pointer-events', 'none'); // disable mouse clicks for the layer\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\thide: function() {\n\t\t\t\t\t\tif(autoFillContextMenu)\n\t\t\t\t\t\t\tapp.map._docLayer._resetReferencesMarks();\n\t\t\t\t\t\tmap.focus();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (autoFillContextMenu)\n\t\t\t\t$('.leaflet-layer').contextMenu(this._currMousePos);\n\t\t\telse\n\t\t\t\t$('.leaflet-layer').contextMenu(this._prevMousePos);\n\t\t\t$('.context-menu-root').focus();\n\t\t\tthis.hasContextMenu = true;\n\t\t}\n\t},\n\n\t_amendContextMenuData: function(obj) {\n\t\t// Add a 'delete' entry  for graphic selection on desktop and mobile device (in browser or app).\n\t\tif (GraphicSelection.hasActiveSelection()) {\n\t\t\tvar insertIndex = -1;\n\t\t\tobj.menu.forEach(function(item, index) {\n\t\t\t\tif (item.command === '.uno:Paste') {\n\t\t\t\t\tinsertIndex = index + 1;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (insertIndex != -1) {\n\t\t\t\tobj.menu.splice(insertIndex, 0,\n\t\t\t\t\t{ text: _('Delete'), type: 'command', command: '.uno:Delete', enabled: true });\n\t\t\t}\n\t\t}\n\t},\n\n\t_createContextMenuStructure: function(obj) {\n\t\tvar docType = this._map.getDocType();\n\t\tvar contextMenu = {};\n\t\tvar sepIdx = 1, itemName;\n\t\tvar subMenuIdx = 1;\n\t\tvar isLastItemText = false;\n\t\tfor (var idx in obj.menu) {\n\t\t\tvar item = obj.menu[idx];\n\t\t\tif (item.enabled === 'false') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the command was hidden with the Hide_Command postmessage...\n\t\t\tif (this._map.uiManager.hiddenCommands[item.command]) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// reduce Paste Special submenu\n\t\t\tif (item.type === 'menu' && item.text && item.text.replace('~', '') === 'Paste Special'\n\t\t\t\t&& item.menu && item.menu.length) {\n\t\t\t\titem.text = _('Paste Special');\n\t\t\t\titem.command = '.uno:PasteSpecial';\n\t\t\t\titem.type = item.menu[0].type;\n\t\t\t\titem.menu = undefined;\n\t\t\t}\n\n\t\t\tif (item.type === 'command' && item.text && item.text.replace('~', '') === 'Copy Cells') {\n\t\t\t\titem.text = _('Copy Cells');\n\t\t\t\titem.command = '.uno:AutoFill?Copy:bool=true';\n\t\t\t}\n\n\t\t\tif (item.type === 'command' && item.text && item.text.replace('~', '') === 'Fill Series') {\n\t\t\t\titem.text = _('Fill Series');\n\t\t\t\titem.command = '.uno:AutoFill?Copy:bool=false';\n\t\t\t}\n\n\t\t\tif (item.type === 'separator') {\n\t\t\t\tif (isLastItemText) {\n\t\t\t\t\tcontextMenu['sep' + sepIdx++] = this.options.SEPARATOR;\n\t\t\t\t}\n\t\t\t\tisLastItemText = false;\n\t\t\t}\n\t\t\telse if (item.type === 'command') {\n\t\t\t\t// Only show whitelisted items\n\t\t\t\t// Command name (excluding '.uno:') starts from index = 5\n\t\t\t\tvar commandName = item.command.substring(5);\n\n\t\t\t\t// Command might have paramateres (e.g. .uno:SpellCheckIgnore?Type:string=Grammar)\n\t\t\t\tvar hasParam = false;\n\t\t\t\tif (commandName.indexOf('?')!== -1) {\n\t\t\t\t\tcommandName = commandName.substring(0, commandName.indexOf('?'));\n\t\t\t\t\thasParam = true;\n\t\t\t\t}\n\n\t\t\t\t// We use a special character dialog in spelling context menu with a parameter\n\t\t\t\tif (commandName === 'FontDialog' && !hasParam)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif (commandName !== 'None' &&\n\t\t\t\t\tthis.options.whitelist.general.indexOf(commandName) === -1 &&\n\t\t\t\t\t!(docType === 'text' && this.options.whitelist.text.indexOf(commandName) !== -1) &&\n\t\t\t\t\t!(docType === 'spreadsheet' && this.options.whitelist.spreadsheet.indexOf(commandName) !== -1) &&\n\t\t\t\t\t!(docType === 'presentation' && this.options.whitelist.presentation.indexOf(commandName) !== -1) &&\n\t\t\t\t\t!(docType === 'drawing' && this.options.whitelist.drawing.indexOf(commandName) !== -1)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (window.mode.isMobile() && this.options.mobileBlackList.indexOf(commandName) !== -1)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif (commandName == 'None' && !item.text)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif (hasParam || commandName === 'None' || commandName === 'FontDialogForParagraph' || commandName === 'Delete' || commandName == 'PasteSpecial') {\n\t\t\t\t\t// These commands have a custom item.text, don't overwrite\n\t\t\t\t\t// that with a label based on 'item.command'.\n\t\t\t\t\titemName = window.removeAccessKey(item.text);\n\t\t\t\t\titemName = itemName.replace(' ', '\\u00a0');\n\t\t\t\t} else {\n\t\t\t\t\t// Get the translated text associated with the command\n\t\t\t\t\titemName = _UNO(item.command, docType, true);\n\t\t\t\t}\n\n\t\t\t\tvar toSnakeCase = function (text) {\n\t\t\t\t\treturn text.replace(/[ _]/gi, '-').replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n\t\t\t\t};\n\n\t\t\t\tcontextMenu[item.command] = {\n\t\t\t\t\t// Using 'click' and <a href='#' is vital for copy/paste security context.\n\t\t\t\t\tname: (window.mode.isMobile() ? _(itemName) : '<a href=\"#\" class=\"context-menu-link ' + toSnakeCase(commandName) + '\">' + _(itemName) + '</a'),\n\t\t\t\t\tisHtmlName: true,\n\t\t\t\t};\n\n\t\t\t\tif (item.checktype === 'checkmark') {\n\t\t\t\t\tif (item.checked === 'true') {\n\t\t\t\t\t\tcontextMenu[item.command]['icon'] = 'lo-checkmark';\n\t\t\t\t\t}\n\t\t\t\t} else if (item.checktype === 'radio') {\n\t\t\t\t\tif (item.checked === 'true') {\n\t\t\t\t\t\tcontextMenu[item.command]['icon'] = 'radio';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tisLastItemText = true;\n\t\t\t} else if (item.type === 'menu') {\n\t\t\t\titemName = item.text;\n\t\t\t\tvar submenu = this._createContextMenuStructure(item);\n\t\t\t\t// ignore submenus with all items disabled\n\t\t\t\tif (Object.keys(submenu).length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcontextMenu['submenu' + subMenuIdx++] = {\n\t\t\t\t\tname: _(itemName).replace(/\\(~[A-Za-z]\\)/, '').replace('~', ''),\n\t\t\t\t\tcommand: item.command,\n\t\t\t\t\titems: submenu\n\t\t\t\t};\n\t\t\t\tisLastItemText = true;\n\t\t\t}\n\t\t}\n\n\t\t// Remove separator, if present, at the end\n\t\tvar lastItem = Object.keys(contextMenu)[Object.keys(contextMenu).length - 1];\n\t\tif (lastItem !== undefined && lastItem.startsWith('sep')) {\n\t\t\tdelete contextMenu[lastItem];\n\t\t}\n\n\t\treturn contextMenu;\n\t},\n\n    // Prevents right mouse button's mouseup event from triggering menu item accidentally.\n    stopRightMouseUpEvent: function() {\n        var menuItems = document.getElementsByClassName('context-menu-item');\n\n        for (var i = 0 ; i < menuItems.length; i++) {\n            menuItems[i].addEventListener('mouseup', function(e) {\n                if (e.button == 2) // Is a right mouse button event?\n                    e.stopPropagation();\n            });\n        }\n    }\n});\n\nL.control.contextMenu = function (options) {\n\treturn new L.Control.ContextMenu(options);\n};\n\n// Using 'click' and <a href='#' is vital for copy/paste security context.\nL.installContextMenu = function(options) {\n\tvar rewrite = function(items) {\n\t\tif (items === undefined)\n\t\t\treturn;\n\t\tvar keys = Object.keys(items);\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tvar key = keys[i];\n\t\t\tif (items[key] === undefined)\n\t\t\t\tcontinue;\n\t\t\tif (!items[key].isHtmlName) {\n\t\t\t\t// window.app.console.log('re-write name ' + items[key].name);\n\t\t\t\titems[key].name = '<a href=\"#\" class=\"context-menu-link\">' + items[key].name + '</a>';\n\t\t\t\titems[key].isHtmlName = true;\n\t\t\t}\n\t\t\trewrite(items[key].items);\n\t\t}\n\t};\n\trewrite(options.items);\n\n\tif (document.documentElement.dir === 'rtl') {\n\t\toptions.positionSubmenu = function($menu) {\n\t\t\tif (typeof $menu === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$menu.css('right', 'auto');\n\t\t\t$.contextMenu.defaults.positionSubmenu.call(this, $menu);\n\t\t\t$menu.css('right', $menu.css('left'));\n\t\t};\n\t}\n\t$.contextMenu(options);\n};\n"]}