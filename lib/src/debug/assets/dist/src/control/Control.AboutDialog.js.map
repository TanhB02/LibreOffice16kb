{"version":3,"file":"Control.AboutDialog.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.AboutDialog.ts"],"names":[],"mappings":"AAAA,oBAAoB;AACpB,gCAAgC;AAqBhC;IAGC,qBAAY,GAAQ;QACnB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IAChB,CAAC;IAEO,6CAAuB,GAA/B,UAAgC,CAAM;QACrC,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,EAAE;YACnB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;SACzB;IACF,CAAC;IAEO,+BAAS,GAAjB,UAAkB,OAAoB;QACrC,IAAM,QAAQ,GAAG,OAAO,CAAC,aAAa,CAAC,mBAAmB,CAAC,CAAC;QAC5D,IAAI,QAAQ;YAAE,QAAQ,CAAC,EAAE,IAAI,SAAS,CAAC;QAEvC,IAAM,UAAU,GAAG,OAAO,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC;QACjE,IAAI,UAAU;YAAE,UAAU,CAAC,EAAE,IAAI,SAAS,CAAC;IAC5C,CAAC;IAEO,iDAA2B,GAAnC,UAAoC,OAAoB;QACvD,IAAM,QAAQ,GAAG,OAAO,CAAC,aAAa,CACrC,0BAA0B,CACX,CAAC;QACjB,IAAI,QAAQ;YAAE,QAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QAE9C,IAAM,UAAU,GAAG,OAAO,CAAC,aAAa,CACvC,6BAA6B,CACd,CAAC;QACjB,IAAI,UAAU;YAAE,UAAU,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;IACnD,CAAC;IAEM,0BAAI,GAAX;QACC,IAAM,SAAS,GAAG,MAAa,CAAC;QAChC,iFAAiF;QACjF,+CAA+C;QAC/C,oFAAoF;QAEpF,IAAM,aAAa,GAAG,cAAc,CAAC;QACrC,gEAAgE;QAChE,IAAM,OAAO,GAAgB,QAAQ;aACnC,cAAc,CAAC,aAAa,CAAC;aAC7B,SAAS,CAAC,IAAI,CAAgB,CAAC;QACjC,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;QAEhC;;;;UAIE;QACF,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;QACxB,IAAI,CAAC,2BAA2B,CAAC,OAAO,CAAC,CAAC,CAAC,sEAAsE;QAEjH,IAAI,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE;YACvC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAuB,CAAC,OAAO;gBACjE;oBACC,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,2BAA2B,CAAC,CAAC;oBACpD,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,UAAU,CAAC,+BAA+B,EAAE,KAAK,CAAC,CAAC;gBACtE,CAAC,CAAC;SACH;QAED,uCAAuC;QACvC,IAAI,WAAW,CAAC;QAChB,IAAI,SAAS,CAAC,gBAAgB,EAAE;YAC/B,WAAW,GAAG,SAAS,CAAC,aAAa,CAAC;SACtC;aAAM;YACN,WAAW;gBACV,OAAO,gBAAgB,KAAK,QAAQ,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC;oBAClE,CAAC,CAAC,gBAAgB;oBAClB,CAAC,CAAC,kDAAkD,CAAC;SACvD;QACD,IAAI,UAAU,GACb,OAAO,eAAe,KAAK,QAAQ,IAAI,eAAe,CAAC,MAAM,GAAG,CAAC;YAChE,CAAC,CAAC,eAAe;YACjB,CAAC,CAAC,oCAAoC,CAAC;QAEzC,IAAM,kBAAkB,GAAG,OAAO,CAAC,aAAa,CAC/C,eAAe,CACA,CAAC;QACjB,kBAAkB,CAAC,SAAS,GAAG,WAAW,CAAC;QAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,CACpB,UAAU;YACT,WAAW;iBACT,KAAK,CAAC,QAAQ,CAAC;iBACf,IAAI,CAAC,GAAG,CAAC;iBACT,WAAW,EAAE,CAChB,CAAC;QAEF,IAAI,aAAa,GAAG,CAAC,CAAC,6CAA6C,CAAC,CAAC;QACrE,IAAI,kBAAkB,CAAC;QACvB,IAAI,CAAC,SAAS,CAAC,gBAAgB;YAC9B,kBAAkB;gBACjB,WAAW;oBACX,WAAW,CAAC,UAAU,CAAC;oBACvB,oBAAoB;oBACpB,WAAW;oBACX,MAAM,CAAC;;YACJ,kBAAkB,GAAG,WAAW,CAAC;QAEtC,IAAM,oBAAoB,GAAG,OAAO,CAAC,aAAa,CACjD,iBAAiB,CACF,CAAC;QACjB,IAAI,oBAAoB;YACvB,oBAAoB,CAAC,SAAS,GAAG,aAAa,CAAC,OAAO,CACrD,eAAe,EACf,kBAAkB,CAClB,CAAC;QAEH,IAAM,gBAAgB,GAAG,OAAO,CAAC,aAAa,CAC7C,aAAa,CACE,CAAC;QACjB,IAAI,SAAS,CAAC,WAAW;YAAE,gBAAgB,CAAC,SAAS,GAAG,CAAC,CAAC,cAAc,CAAC,CAAC;QAE1E,IAAI,SAAS,CAAC,cAAc,EAAE;YAC7B,IAAM,iBAAiB,GAAG,OAAO,CAAC,aAAa,CAC9C,aAAa,CACE,CAAC;YACjB,iBAAiB,CAAC,SAAS,GAAG,cAAc,GAAG,SAAS,CAAC,UAAU,CAAC;YACpE,IAAI,SAAS,CAAC,gBAAgB,EAAE;gBAC/B,IAAM,eAAe,GAAG,OAAO,CAAC,aAAa,CAC5C,WAAW,CACI,CAAC;gBACjB,eAAe,CAAC,SAAS;oBACxB,CAAC,CAAC,YAAY,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC;aACvD;SACD;QAED,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,eAAe,CACjC,aAAa,GAAG,MAAM,EACtB,WAAW,EACX,EAAE,EACF,CAAC,CAAC,IAAI,CAAC,EACP,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,IAAI,CACJ,CAAC;QAEF,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;IACvC,CAAC;IAED,8BAAQ,GAAR,UAAS,aAAqB,EAAE,OAAoB;QAApD,iBA4CC;QA3CA,IAAI,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,aAAa,GAAG,MAAM,CAAC,CAAC;QAE1D,iCAAiC;QACjC,IAAI,CAAC,GAAG,EAAE;YACT,UAAU,CAAC;gBACV,KAAI,CAAC,QAAQ,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;YACvC,CAAC,EAAE,EAAE,CAAC,CAAC;YACP,OAAO;SACP;QAED,IAAI,QAAQ,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;QACjD,GAAG,CAAC,YAAY,CAAC,QAAQ,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC;QAC3C,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QAE9B,IAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;QAEvD,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACxE,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACtE,IAAI,CAAC,aAAa,CAAC,kBAAkB,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC;QAClE,IAAM,eAAe,GAAG,CAAC,CAAC,yCAAyC,CAAC,CAAC;QACrE,IAAI,WAAW,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CACjC,QAAQ,EACR,wBAAwB,EACxB,IAAI,CACJ,CAAC;QACF,WAAW,CAAC,YAAY,CAAC,IAAI,EAAE,0CAA0C,CAAC,CAAC;QAC3E,WAAW,CAAC,YAAY,CAAC,YAAY,EAAE,eAAe,CAAC,CAAC;QACxD,WAAW,CAAC,YAAY,CAAC,cAAc,EAAE,eAAe,CAAC,CAAC;QAC1D,IAAI,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;QAC9C,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,aAAa,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QAClD,WAAW,CAAC,SAAS;YACpB,YAAY,GAAG,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,+BAA+B,CAAC;QACvE,WAAW,CAAC,gBAAgB,CAC3B,OAAO,EACP,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,CAC1C,CAAC;QACF,CAAC,CAAC,OAAO,CAAC,0BAA0B,CAAC,WAAW,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QAC5D,IAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CACpC,yCAAyC,CACzC,CAAC;QACF,IAAI,OAAO,EAAE;YACZ,OAAO,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;SAC5B;IACF,CAAC;IAEO,2CAAqB,GAA7B,UAA8B,CAAgB;QAC7C,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE;YAClB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;SACzB;aAAM,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,EAAE;YACzB,mEAAmE;YACnE,gEAAgE;YAChE,oEAAoE;YACpE,+CAA+C;YAC/C,EAAE;YACF,kEAAkE;YAClE,mEAAmE;YACnE,wBAAwB;YAExB,GAAG,CAAC,MAAM,CAAC,6BAA6B;gBACvC,CAAC,GAAG,CAAC,MAAM,CAAC,6BAA6B,CAAC;YAE3C,IAAM,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC,6BAA6B;gBAC3D,CAAC,CAAC,SAAS;gBACX,CAAC,CAAC,SAAS,CAAC;YAEb,GAAG,CAAC,MAAM,CAAC,WAAW,CAAC,uBAAuB,GAAG,WAAW,CAAC,CAAC;YAE9D,IAAI,mBAAmB,SAAA,CAAC;YACxB,IAAI,WAAW,KAAK,SAAS;gBAC5B,mBAAmB,GAAG,4BAA4B,CAAC;iBAC/C,IAAI,WAAW,KAAK,SAAS;gBACjC,mBAAmB,GAAG,iCAAiC,CAAC;iBACpD,IAAI,WAAW,KAAK,OAAO;gBAC/B,mBAAmB,GAAG,kCAAkC,CAAC;;gBACrD,mBAAmB,GAAG,WAAW,CAAC;YAEvC,OAAO,CAAC,KAAK,CAAC,aAAa,GAAG,mBAAmB,CAAC,CAAC;SACnD;IACF,CAAC;IAEO,gDAA0B,GAAlC;QACC,IAAI,IAAI,GACP,mBAAmB;YACnB,IAAI,CAAC,uBAAuB,CAAC,iBAAiB,CAAC;YAC/C,IAAI,CAAC;QACN,IAAI;YACH,iBAAiB,GAAG,IAAI,CAAC,uBAAuB,CAAC,eAAe,CAAC,GAAG,IAAI,CAAC;QAC1E,IAAI,IAAI,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;QAC5E,IAAI;YACH,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;QACxE,IAAI;YACH,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC;QAC1E,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;QAEpC,IAAI,SAAS,CAAC,SAAS,IAAI,MAAM,CAAC,eAAe,EAAE;YAClD,SAAS,CAAC,SAAS;iBACjB,SAAS,CAAC,IAAI,CAAC;iBACf,IAAI,CACJ;gBACC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;gBAC/C,IAAI,CAAC,gCAAgC,EAAE,CAAC;YACzC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CACZ;iBACA,KAAK,CAAC,UAAU,KAAK;gBACrB,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,KAAK,CAAC,CAAC;YACjE,CAAC,CAAC,CAAC;SACJ;aAAM;YACN,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;YAClD,QAAQ,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;YACrC,QAAQ,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC;YAC7B,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC;YACtB,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YACpC,QAAQ,CAAC,MAAM,EAAE,CAAC;YAClB,IAAI;gBACH,QAAQ,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;gBAC7B,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;gBAC/C,IAAI,CAAC,gCAAgC,EAAE,CAAC;aACxC;YAAC,OAAO,KAAK,EAAE;gBACf,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,KAAK,CAAC,CAAC;aAChE;oBAAS;gBACT,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;aACpC;SACD;IACF,CAAC;IAEO,sDAAgC,GAAxC;QAAA,iBAeC;QAdA,IAAM,OAAO,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,YAAY,CAC9B,qCAAqC,EACrC,IAAI,EACJ,IAAI,EACJ,OAAO,CACP,CAAC;QACF,IAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CACxC,iDAAiD,CACjD,CAAC;QACF,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,EAAE,wBAAwB,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QACpE,UAAU,CAAC;YACV,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,EAAE,aAAa,EAAE,KAAI,CAAC,GAAG,CAAC,CAAC;QAC1D,CAAC,EAAE,OAAO,CAAC,CAAC;IACb,CAAC;IAEO,6CAAuB,GAA/B,UAAgC,SAAiB;QAChD,IAAM,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;QAC1D,IAAI,WAAW,GAAG,cAAc,CAAC,SAAS,CAAC;QAE3C,IAAM,YAAY,GAAG,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QACrD,IAAI,YAAY,GAAG,CAAC,CAAC,EAAE;YACtB,WAAW;gBACV,WAAW,CAAC,KAAK,CAAC,CAAC,EAAE,YAAY,CAAC;oBAClC,GAAG;oBACH,WAAW,CAAC,KAAK,CAAC,YAAY,CAAC;oBAC/B,GAAG,CAAC;SACL;QAED,OAAO,WAAW,CAAC;IACpB,CAAC;IACF,kBAAC;AAAD,CAAC,AA5SD,IA4SC;AAED,sBAAsB;AACtB,QAAQ,CAAC,WAAW,GAAG,UAAC,GAAQ;IAC/B,OAAO,IAAI,WAAW,CAAC,GAAG,CAAC,CAAC;AAC7B,CAAC,CAAC","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * AboutDialog - implements Help - About dialog with version and warnings\n */\n\ndeclare var JSDialog: any;\ndeclare var brandProductName: any;\ndeclare var brandProductURL: any;\ndeclare var sanitizeUrl: any;\n\nclass AboutDialog {\n\tmap: any;\n\n\tconstructor(map: any) {\n\t\tthis.map = map;\n\t}\n\n\tprivate aboutDialogClickHandler(e: any) {\n\t\tif (e.detail === 3) {\n\t\t\tthis.map._debug.toggle();\n\t\t}\n\t}\n\n\tprivate adjustIDs(content: HTMLElement) {\n\t\tconst servedBy = content.querySelector(':scope #served-by');\n\t\tif (servedBy) servedBy.id += '-cloned';\n\n\t\tconst wopiHostId = content.querySelector(':scope #wopi-host-id');\n\t\tif (wopiHostId) wopiHostId.id += '-cloned';\n\t}\n\n\tprivate hideElementsHiddenByDefault(content: HTMLElement) {\n\t\tconst servedBy = content.querySelector(\n\t\t\t':scope #served-by-cloned',\n\t\t) as HTMLElement;\n\t\tif (servedBy) servedBy.style.display = 'none';\n\n\t\tconst wopiHostId = content.querySelector(\n\t\t\t':scope #wopi-host-id-cloned',\n\t\t) as HTMLElement;\n\t\tif (wopiHostId) wopiHostId.style.display = 'none';\n\t}\n\n\tpublic show() {\n\t\tconst windowAny = window as any;\n\t\t// Just as a test to exercise the Async Trace Event functionality, uncomment this\n\t\t// line and the asyncTraceEvent.finish() below.\n\t\t// var asyncTraceEvent = app.socket.createAsyncTraceEvent('cool-showLOAboutDialog');\n\n\t\tconst aboutDialogId = 'about-dialog';\n\t\t// Move the div sitting in 'body' as content and make it visible\n\t\tconst content: HTMLElement = document\n\t\t\t.getElementById(aboutDialogId)\n\t\t\t.cloneNode(true) as HTMLElement;\n\t\tcontent.style.display = 'block';\n\n\t\t/*\n\t\t\tNow we copied the about dialog content which was already in the document, hidden.\n\t\t\tThis copied content also includes the IDs. So we have now duplicate IDs for elements, which is contrary to HTML rules.\n\t\t\tLet's modify the IDs of such elements and add \"-cloned\" at the end.\n\t\t*/\n\t\tthis.adjustIDs(content);\n\t\tthis.hideElementsHiddenByDefault(content); // Now we can safely hide the elements that we want hidden by default.\n\n\t\tif (content.querySelector('#js-dialog')) {\n\t\t\t(content.querySelector('#js-dialog') as HTMLAnchorElement).onclick =\n\t\t\t\tfunction () {\n\t\t\t\t\tapp.socket.sendMessage('uno .uno:WidgetTestDialog');\n\t\t\t\t\tapp.map.uiManager.closeModal('modal-dialog-about-dialog-box', false);\n\t\t\t\t};\n\t\t}\n\n\t\t// fill product-name and product-string\n\t\tlet productName;\n\t\tif (windowAny.ThisIsAMobileApp) {\n\t\t\tproductName = windowAny.MobileAppName;\n\t\t} else {\n\t\t\tproductName =\n\t\t\t\ttypeof brandProductName === 'string' && brandProductName.length > 0\n\t\t\t\t\t? brandProductName\n\t\t\t\t\t: 'Collabora Online Development Edition (unbranded)';\n\t\t}\n\t\tvar productURL =\n\t\t\ttypeof brandProductURL === 'string' && brandProductURL.length > 0\n\t\t\t\t? brandProductURL\n\t\t\t\t: 'https://collaboraonline.github.io/';\n\n\t\tconst productNameElement = content.querySelector(\n\t\t\t'#product-name',\n\t\t) as HTMLElement;\n\t\tproductNameElement.innerText = productName;\n\t\tcontent.classList.add(\n\t\t\t'product-' +\n\t\t\t\tproductName\n\t\t\t\t\t.split(/[ ()]+/)\n\t\t\t\t\t.join('-')\n\t\t\t\t\t.toLowerCase(),\n\t\t);\n\n\t\tvar productString = _('This version of {productname} is powered by');\n\t\tvar productNameWithURL;\n\t\tif (!windowAny.ThisIsAMobileApp)\n\t\t\tproductNameWithURL =\n\t\t\t\t'<a href=\"' +\n\t\t\t\tsanitizeUrl(productURL) +\n\t\t\t\t'\" target=\"_blank\">' +\n\t\t\t\tproductName +\n\t\t\t\t'</a>';\n\t\telse productNameWithURL = productName;\n\n\t\tconst productStringElement = content.querySelector(\n\t\t\t'#product-string',\n\t\t) as HTMLElement;\n\t\tif (productStringElement)\n\t\t\tproductStringElement.innerText = productString.replace(\n\t\t\t\t'{productname}',\n\t\t\t\tproductNameWithURL,\n\t\t\t);\n\n\t\tconst slowProxyElement = content.querySelector(\n\t\t\t'#slow-proxy',\n\t\t) as HTMLElement;\n\t\tif (windowAny.socketProxy) slowProxyElement.innerText = _('\"Slow Proxy\"');\n\n\t\tif (windowAny.indirectSocket) {\n\t\t\tconst routeTokenElement = content.querySelector(\n\t\t\t\t'#routeToken',\n\t\t\t) as HTMLElement;\n\t\t\trouteTokenElement.innerText = 'RouteToken: ' + windowAny.routeToken;\n\t\t\tif (windowAny.geolocationSetup) {\n\t\t\t\tconst timezoneElement = content.querySelector(\n\t\t\t\t\t'#timeZone',\n\t\t\t\t) as HTMLElement;\n\t\t\t\ttimezoneElement.innerText =\n\t\t\t\t\t_('Time zone:') + ' ' + app.socket.WSDServer.TimeZone;\n\t\t\t}\n\t\t}\n\n\t\tthis.map.uiManager.showYesNoButton(\n\t\t\taboutDialogId + '-box',\n\t\t\tproductName,\n\t\t\t'',\n\t\t\t_('OK'),\n\t\t\tnull,\n\t\t\tnull,\n\t\t\tnull,\n\t\t\ttrue,\n\t\t);\n\n\t\tthis.showImpl(aboutDialogId, content);\n\t}\n\n\tshowImpl(aboutDialogId: string, content: HTMLElement) {\n\t\tvar box = document.getElementById(aboutDialogId + '-box');\n\n\t\t// TODO: do it JSDialog native...\n\t\tif (!box) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.showImpl(aboutDialogId, content);\n\t\t\t}, 10);\n\t\t\treturn;\n\t\t}\n\n\t\tvar innerDiv = L.DomUtil.create('div', '', null);\n\t\tbox.insertBefore(innerDiv, box.firstChild);\n\t\tinnerDiv.appendChild(content);\n\n\t\tvar form = document.getElementById('about-dialog-box');\n\n\t\tform.addEventListener('click', this.aboutDialogClickHandler.bind(this));\n\t\tform.addEventListener('keyup', this.aboutDialogKeyHandler.bind(this));\n\t\tform.querySelector('#coolwsd-version').querySelector('a').focus();\n\t\tconst copyVersionText = _('Copy all version information in English');\n\t\tvar copyVersion = L.DomUtil.create(\n\t\t\t'button',\n\t\t\t'ui-pushbutton jsdialog',\n\t\t\tnull,\n\t\t);\n\t\tcopyVersion.setAttribute('id', 'modal-dialog-about-dialog-box-copybutton');\n\t\tcopyVersion.setAttribute('aria-label', copyVersionText);\n\t\tcopyVersion.setAttribute('data-cooltip', copyVersionText);\n\t\tvar img = L.DomUtil.create('img', null, null);\n\t\tapp.LOUtil.setImage(img, 'lc_copy.svg', this.map);\n\t\tcopyVersion.innerHTML =\n\t\t\t'<img src=\"' + sanitizeUrl(img.src) + '\" width=\"18px\" height=\"18px\">';\n\t\tcopyVersion.addEventListener(\n\t\t\t'click',\n\t\t\tthis.copyVersionInfoToClipboard.bind(this),\n\t\t);\n\t\tL.control.attachTooltipEventListener(copyVersion, this.map);\n\t\tvar aboutOk = document.getElementById(\n\t\t\t'modal-dialog-about-dialog-box-yesbutton',\n\t\t);\n\t\tif (aboutOk) {\n\t\t\taboutOk.before(copyVersion);\n\t\t}\n\t}\n\n\tprivate aboutDialogKeyHandler(e: KeyboardEvent) {\n\t\tif (e.key === 'd') {\n\t\t\tthis.map._debug.toggle();\n\t\t} else if (e.key === 'l') {\n\t\t\t// L toggles the Online logging level between the default (whatever\n\t\t\t// is set in coolwsd.xml or on the coolwsd command line) and the\n\t\t\t// most verbose a client is allowed to set (which also can be set in\n\t\t\t// coolwsd.xml or on the coolwsd command line).\n\t\t\t//\n\t\t\t// In a typical developer \"make run\" setup, the default is \"trace\"\n\t\t\t// so there is nothing more verbose. But presumably it is different\n\t\t\t// in production setups.\n\n\t\t\tapp.socket.threadLocalLoggingLevelToggle =\n\t\t\t\t!app.socket.threadLocalLoggingLevelToggle;\n\n\t\t\tconst newLogLevel = app.socket.threadLocalLoggingLevelToggle\n\t\t\t\t? 'verbose'\n\t\t\t\t: 'default';\n\n\t\t\tapp.socket.sendMessage('loggingleveloverride ' + newLogLevel);\n\n\t\t\tlet logLevelInformation;\n\t\t\tif (newLogLevel === 'default')\n\t\t\t\tlogLevelInformation = 'default (from coolwsd.xml)';\n\t\t\telse if (newLogLevel === 'verbose')\n\t\t\t\tlogLevelInformation = 'most verbose (from coolwsd.xml)';\n\t\t\telse if (newLogLevel === 'terse')\n\t\t\t\tlogLevelInformation = 'least verbose (from coolwsd.xml)';\n\t\t\telse logLevelInformation = newLogLevel;\n\n\t\t\tconsole.debug('Log level: ' + logLevelInformation);\n\t\t}\n\t}\n\n\tprivate copyVersionInfoToClipboard() {\n\t\tlet text =\n\t\t\t'COOLWSD version: ' +\n\t\t\tthis.getVersionInfoFromClass('coolwsd-version') +\n\t\t\t'\\n';\n\t\ttext +=\n\t\t\t'LOKit version: ' + this.getVersionInfoFromClass('lokit-version') + '\\n';\n\t\ttext += 'Served by: ' + document.getElementById('os-info').innerText + '\\n';\n\t\ttext +=\n\t\t\t'Server ID: ' + document.getElementById('coolwsd-id').innerText + '\\n';\n\t\ttext +=\n\t\t\t'WOPI host: ' + document.getElementById('wopi-host-id').innerText + '\\n';\n\t\ttext = text.replace(/\\u00A0/g, ' ');\n\n\t\tif (navigator.clipboard && window.isSecureContext) {\n\t\t\tnavigator.clipboard\n\t\t\t\t.writeText(text)\n\t\t\t\t.then(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\twindow.console.log('Text copied to clipboard');\n\t\t\t\t\t\tthis.contentHasBeenCopiedShowSnackbar();\n\t\t\t\t\t}.bind(this),\n\t\t\t\t)\n\t\t\t\t.catch(function (error) {\n\t\t\t\t\twindow.console.error('Error copying text to clipboard:', error);\n\t\t\t\t});\n\t\t} else {\n\t\t\tvar textArea = document.createElement('textarea');\n\t\t\ttextArea.style.position = 'absolute';\n\t\t\ttextArea.style.opacity = '0';\n\t\t\ttextArea.value = text;\n\t\t\tdocument.body.appendChild(textArea);\n\t\t\ttextArea.select();\n\t\t\ttry {\n\t\t\t\tdocument.execCommand('copy');\n\t\t\t\twindow.console.log('Text copied to clipboard');\n\t\t\t\tthis.contentHasBeenCopiedShowSnackbar();\n\t\t\t} catch (error) {\n\t\t\t\twindow.console.error('Error copying text to clipboard:', error);\n\t\t\t} finally {\n\t\t\t\tdocument.body.removeChild(textArea);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate contentHasBeenCopiedShowSnackbar() {\n\t\tconst timeout = 1000;\n\t\tthis.map.uiManager.showSnackbar(\n\t\t\t'Version information has been copied',\n\t\t\tnull,\n\t\t\tnull,\n\t\t\ttimeout,\n\t\t);\n\t\tconst copybutton = document.querySelector(\n\t\t\t'#modal-dialog-about-dialog-box-copybutton > img',\n\t\t);\n\t\tapp.LOUtil.setImage(copybutton, 'lc_clipboard-check.svg', this.map);\n\t\tsetTimeout(() => {\n\t\t\tapp.LOUtil.setImage(copybutton, 'lc_copy.svg', this.map);\n\t\t}, timeout);\n\t}\n\n\tprivate getVersionInfoFromClass(className: string) {\n\t\tconst versionElement = document.getElementById(className);\n\t\tlet versionInfo = versionElement.innerText;\n\n\t\tconst gitHashIndex = versionInfo.indexOf('git hash');\n\t\tif (gitHashIndex > -1) {\n\t\t\tversionInfo =\n\t\t\t\tversionInfo.slice(0, gitHashIndex) +\n\t\t\t\t'(' +\n\t\t\t\tversionInfo.slice(gitHashIndex) +\n\t\t\t\t')';\n\t\t}\n\n\t\treturn versionInfo;\n\t}\n}\n\n// Initiate the class.\nJSDialog.aboutDialog = (map: any) => {\n\treturn new AboutDialog(map);\n};\n"]}