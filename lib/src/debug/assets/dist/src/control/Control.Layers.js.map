{"version":3,"file":"Control.Layers.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.Layers.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/* global app */\n/*\n * L.Control.Layers is a control to allow users to switch between different layers on the map.\n */\n\nL.Control.Layers = L.Control.extend({\n\toptions: {\n\t\tcollapsed: true,\n\t\tposition: 'topright',\n\t\tautoZIndex: true,\n\t\thideSingleBase: false\n\t},\n\n\tinitialize: function (baseLayers, overlays, options) {\n\t\tL.setOptions(this, options);\n\n\t\tthis._layers = {};\n\t\tthis._lastZIndex = 0;\n\t\tthis._handlingClick = false;\n\n\t\tfor (var i in baseLayers) {\n\t\t\tthis._addLayer(baseLayers[i], i);\n\t\t}\n\n\t\tfor (i in overlays) {\n\t\t\tthis._addLayer(overlays[i], i, true);\n\t\t}\n\t},\n\n\tonAdd: function () {\n\t\tthis._initLayout();\n\t\tthis._update();\n\n\t\treturn this._container;\n\t},\n\n\tremoveLayer: function (layer) {\n\t\tlayer.off('add remove', this._onLayerChange, this);\n\n\t\tdelete this._layers[app.util.stamp(layer)];\n\t\treturn this._update();\n\t},\n\n\t_initLayout: function () {\n\t\tvar className = 'leaflet-control-layers',\n\t\t    container = this._container = L.DomUtil.create('div', className);\n\n\t\t// makes this work on IE touch devices by stopping it from firing a mouseout event when the touch is released\n\t\tcontainer.setAttribute('aria-haspopup', true);\n\n\t\tL.DomEvent\n\t\t\t.disableMouseClickPropagation(container)\n\t\t\t.disableScrollPropagation(container);\n\t\tL.DomEvent.on(container, 'click', window.touch.touchOnly(L.DomEvent.stopPropagation));\n\n\t\tvar form = this._form = L.DomUtil.create('form', className + '-list');\n\n\t\tif (this.options.collapsed) {\n\t\t\tif (!L.Browser.android) {\n\t\t\t\tL.DomEvent.on(container, {\n\t\t\t\t\tmouseenter: this._expand,\n\t\t\t\t\tmouseleave: this._collapse\n\t\t\t\t}, this);\n\t\t\t}\n\n\t\t\tvar link = this._layersLink = L.DomUtil.create('a', className + '-toggle', container);\n\t\t\tlink.href = '#';\n\t\t\tlink.title = 'Layers';\n\n\t\t\tL.DomEvent\n\t\t\t\t.on(link, 'click', window.touch.touchOnly(L.DomEvent.stop))\n\t\t\t\t.on(link, 'click', window.touch.touchOnly(this._expand), this);\n\t\t\tL.DomEvent.on(link, 'focus', window.touch.mouseOnly(this._expand), this);\n\n\t\t\t// work around for Firefox Android issue https://github.com/Leaflet/Leaflet/issues/2033\n\t\t\tL.DomEvent.on(form, 'click', function () {\n\t\t\t\tsetTimeout(L.bind(this._onInputClick, this), 0);\n\t\t\t}, this);\n\n\t\t\tthis._map.on('click', this._collapse, this);\n\t\t\t// TODO keyboard accessibility\n\t\t} else {\n\t\t\tthis._expand();\n\t\t}\n\n\t\tthis._baseLayersList = L.DomUtil.create('div', className + '-base', form);\n\t\tthis._separator = L.DomUtil.create('div', className + '-separator', form);\n\t\tthis._overlaysList = L.DomUtil.create('div', className + '-overlays', form);\n\n\t\tcontainer.appendChild(form);\n\t},\n\n\t_addLayer: function (layer, name, overlay) {\n\t\tlayer.on('add remove', this._onLayerChange, this);\n\n\t\tvar id = app.util.stamp(layer);\n\n\t\tthis._layers[id] = {\n\t\t\tlayer: layer,\n\t\t\tname: name,\n\t\t\toverlay: overlay\n\t\t};\n\n\t\tif (this.options.autoZIndex && layer.setZIndex) {\n\t\t\tthis._lastZIndex++;\n\t\t\tlayer.setZIndex(this._lastZIndex);\n\t\t}\n\t},\n\n\t_update: function () {\n\t\tif (!this._container) { return this; }\n\n\t\tL.DomUtil.empty(this._baseLayersList);\n\t\tL.DomUtil.empty(this._overlaysList);\n\n\t\tvar baseLayersPresent, overlaysPresent, i, obj, baseLayersCount = 0;\n\n\t\tfor (i in this._layers) {\n\t\t\tobj = this._layers[i];\n\t\t\tthis._addItem(obj);\n\t\t\toverlaysPresent = overlaysPresent || obj.overlay;\n\t\t\tbaseLayersPresent = baseLayersPresent || !obj.overlay;\n\t\t\tbaseLayersCount += !obj.overlay ? 1 : 0;\n\t\t}\n\n\t\t// Hide base layers section if there's only one layer.\n\t\tif (this.options.hideSingleBase) {\n\t\t\tbaseLayersPresent = baseLayersPresent && baseLayersCount > 1;\n\t\t\tthis._baseLayersList.style.display = baseLayersPresent ? '' : 'none';\n\t\t}\n\n\t\tthis._separator.style.display = overlaysPresent && baseLayersPresent ? '' : 'none';\n\n\t\treturn this;\n\t},\n\n\t_onLayerChange: function (e) {\n\t\tif (!this._handlingClick) {\n\t\t\tthis._update();\n\t\t}\n\n\t\tvar overlay = this._layers[app.util.stamp(e.target)].overlay;\n\n\t\tvar type = overlay ?\n\t\t\t(e.type === 'add' ? 'overlayadd' : 'overlayremove') :\n\t\t\t(e.type === 'add' ? 'baselayerchange' : null);\n\n\t\tif (type) {\n\t\t\tthis._map.fire(type, e.target);\n\t\t}\n\t},\n\n\t// IE7 bugs out if you create a radio dynamically, so you have to do it this hacky way (see http://bit.ly/PqYLBe)\n\t_createRadioElement: function (name, checked) {\n\n\t\tvar radioHtml = '<input type=\"radio\" class=\"leaflet-control-layers-selector\" name=\"' +\n\t\t\t\tname + '\"' + (checked ? ' checked=\"checked\"' : '') + '/>';\n\n\t\tvar radioFragment = document.createElement('div');\n\t\tradioFragment.innerHTML = radioHtml;\n\n\t\treturn radioFragment.firstChild;\n\t},\n\n\t_addItem: function (obj) {\n\t\tvar label = document.createElement('label'),\n\t\t    checked = this._map.hasLayer(obj.layer),\n\t\t    input;\n\n\t\tif (obj.overlay) {\n\t\t\tinput = document.createElement('input');\n\t\t\tinput.type = 'checkbox';\n\t\t\tinput.className = 'leaflet-control-layers-selector';\n\t\t\tinput.defaultChecked = checked;\n\t\t} else {\n\t\t\tinput = this._createRadioElement('leaflet-base-layers', checked);\n\t\t}\n\n\t\tinput.layerId = app.util.stamp(obj.layer);\n\n\t\tL.DomEvent.on(input, 'click', this._onInputClick, this);\n\n\t\tvar name = document.createElement('span');\n\t\tname.innerHTML = ' ' + obj.name;\n\n\t\tlabel.appendChild(input);\n\t\tlabel.appendChild(name);\n\n\t\tvar container = obj.overlay ? this._overlaysList : this._baseLayersList;\n\t\tcontainer.appendChild(label);\n\n\t\treturn label;\n\t},\n\n\t_onInputClick: function () {\n\t\tvar inputs = this._form.getElementsByTagName('input'),\n\t\t    input, layer, hasLayer;\n\t\tvar addedLayers = [],\n\t\t    removedLayers = [];\n\n\t\tthis._handlingClick = true;\n\n\t\tfor (var i = 0, len = inputs.length; i < len; i++) {\n\t\t\tinput = inputs[i];\n\t\t\tlayer = this._layers[input.layerId].layer;\n\t\t\thasLayer = this._map.hasLayer(layer);\n\n\t\t\tif (input.checked && !hasLayer) {\n\t\t\t\taddedLayers.push(layer);\n\n\t\t\t} else if (!input.checked && hasLayer) {\n\t\t\t\tremovedLayers.push(layer);\n\t\t\t}\n\t\t}\n\n\t\t// Bugfix issue 2318: Should remove all old layers before readding new ones\n\t\tfor (i = 0; i < removedLayers.length; i++) {\n\t\t\tthis._map.removeLayer(removedLayers[i]);\n\t\t}\n\t\tfor (i = 0; i < addedLayers.length; i++) {\n\t\t\tthis._map.addLayer(addedLayers[i]);\n\t\t}\n\n\t\tthis._handlingClick = false;\n\n\t\tthis._map.focus();\n\t},\n\n\t_expand: function () {\n\t\tL.DomUtil.addClass(this._container, 'leaflet-control-layers-expanded');\n\t},\n\n\t_collapse: function () {\n\t\tL.DomUtil.removeClass(this._container, 'leaflet-control-layers-expanded');\n\t}\n});\n\nL.control.layers = function (baseLayers, overlays, options) {\n\treturn new L.Control.Layers(baseLayers, overlays, options);\n};\n"]}