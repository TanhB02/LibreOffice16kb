{"version":3,"file":"Control.Notebookbar.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/control/Control.Notebookbar.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * L.Control.Notebookbar - container for tabbed menu on the top of application\n */\n\n/* global $ _ _UNO JSDialog app */\nL.Control.Notebookbar = L.Control.extend({\n\n\t_currentScrollPosition: 0,\n\t_showNotebookbar: false,\n\t_RTL: false,\n\t_lastContext: null,\n\n\tcontainer: null,\n\tbuilder: null,\n\n\tHOME_TAB_ID: 'Home-tab-label',\n\n\tadditionalShortcutButtons: [],\n\n\tonAdd: function (map) {\n\t\t// log and test window.ThisIsTheiOSApp = true;\n\t\tthis.map = map;\n\t\tthis.additionalShortcutButtons = [];\n\t\tthis._currentScrollPosition = 0;\n\t\tvar docType = this._map.getDocType();\n\n\t\tif (document.documentElement.dir === 'rtl')\n\t\t\tthis._RTL = true;\n\n\t\tthis.builder = new L.control.notebookbarBuilder({windowId: -2, mobileWizard: this, map: map, cssClass: 'notebookbar', useSetTabs: true});\n\t\tthis.map.on('commandstatechanged', this.builder.onCommandStateChanged, this.builder);\n\n\t\t// remove old toolbar\n\t\tvar toolbar = L.DomUtil.get('toolbar-up');\n\t\tif (toolbar)\n\t\t\ttoolbar.outerHTML = '';\n\n\t\t// create toolbar from template\n\t\t$('#toolbar-logo').after(this.map.toolbarUpTemplate.cloneNode(true));\n\t\tthis.parentContainer = L.DomUtil.get('toolbar-up');\n\n\t\tthis.loadTab(this.getFullJSON(this.HOME_TAB_ID));\n\n\t\tthis.onContextChange = this.onContextChange.bind(this);\n\t\tapp.events.on('contextchange', this.onContextChange);\n\t\tthis.map.on('notebookbar', this.onNotebookbar, this);\n\t\tapp.events.on('updatepermission', this.onUpdatePermission.bind(this));\n\t\tthis.map.on('jsdialogupdate', this.onJSUpdate, this);\n\t\tthis.map.on('jsdialogaction', this.onJSAction, this);\n\t\tthis.map.on('statusbarchanged', this.onStatusbarChange, this);\n\t\tthis.map.on('rulerchanged', this.onRulerChange, this);\n\t\tthis.map.on('darkmodechanged', this.onDarkModeToggleChange, this);\n\t\tthis.map.on('showannotationschanged', this.onShowAnnotationsChange, this);\n\t\tthis.map.on('a11ystatechanged', this.onAccessibilityToggleChange, this);\n\t\tif (docType === 'presentation') {\n\t\t\tthis.map.on('updateparts', this.onSlideHideToggle, this);\n\t\t\tthis.map.on('toggleslidehide', this.onSlideHideToggle, this);\n\t\t}\n\n\t\tthis.initializeInCore();\n\n\t\t$('#toolbar-wrapper').addClass('hasnotebookbar');\n\t\t$('.main-nav').addClass('hasnotebookbar');\n\t\tthis.floatingNavIcon = document.querySelector('.navigator-btn-wrapper');\n\t\tif (this.floatingNavIcon)\n\t\t\tthis.floatingNavIcon.classList.add('hasnotebookbar');\n\t\tdocument.getElementById('document-container').classList.add('notebookbar-active');\n\n\t\tvar docLogoHeader = L.DomUtil.create('div', '');\n\t\tdocLogoHeader.id = 'document-header';\n\n\t\tvar iconClass = 'document-logo';\n\t\tvar iconTooltip;\n\t\tif (docType === 'text') {\n\t\t\ticonClass += ' writer-icon-img';\n\t\t\ticonTooltip = 'Writer';\n\t\t} else if (docType === 'spreadsheet') {\n\t\t\ticonClass += ' calc-icon-img';\n\t\t\ticonTooltip = 'Calc';\n\t\t} else if (docType === 'presentation') {\n\t\t\ticonClass += ' impress-icon-img';\n\t\t\ticonTooltip = 'Impress';\n\t\t} else if (docType === 'drawing') {\n\t\t\ticonClass += ' draw-icon-img';\n\t\t\ticonTooltip = 'Draw';\n\t\t}\n\t\tvar docLogo = L.DomUtil.create('div', iconClass, docLogoHeader);\n\t\t$(docLogo).data('id', 'document-logo');\n\t\t$(docLogo).data('type', 'action');\n\t\tdocLogo.setAttribute('data-cooltip', iconTooltip);\n\t\tL.control.attachTooltipEventListener(docLogo, this.map);\n\t\t$('.main-nav').prepend(docLogoHeader);\n\t\tvar isDarkMode = window.prefs.getBoolean('darkTheme');\n\t\tif (!isDarkMode)\n\t\t\t$('#invertbackground').hide();\n\n\t\tvar that = this;\n\t\tvar retryNotebookbarInit = function() {\n\t\t\tif (!that.isInitializedInCore()) {\n\t\t\t\t// if notebookbar doesn't have any welded controls it can trigger false alarm here\n\t\t\t\twindow.app.console.warn('notebookbar might be not initialized, retrying');\n\t\t\t\tthat.initializeInCore();\n\t\t\t\tthat.retry = setTimeout(retryNotebookbarInit, 3000);\n\t\t\t}\n\t\t};\n\n\t\tthis.retry = setTimeout(retryNotebookbarInit, 3000);\n\t},\n\n\tonRemove: function() {\n\t\tclearTimeout(this.retry);\n\t\tthis.resetInCore();\n\t\tthis.map.off('commandstatechanged', this.builder.onCommandStateChanged, this.builder);\n\t\tthis.map.off('notebookbar');\n\t\tthis.map.off('jsdialogupdate', this.onJSUpdate, this);\n\t\tthis.map.off('jsdialogaction', this.onJSAction, this);\n\t\tapp.events.off('contextchange', this.onContextChange);\n\t\t$('.main-nav #document-header').remove();\n\t\t$('.main-nav').removeClass('hasnotebookbar');\n\t\t$('#toolbar-wrapper').removeClass('hasnotebookbar');\n\t\tif (this.floatingNavIcon)\n\t\t\tthis.floatingNavIcon.classList.remove('hasnotebookbar');\n\t\t$('.main-nav #document-header').remove();\n\t\tthis.clearNotebookbar();\n\t},\n\n\tisInitializedInCore: function() {\n\t\treturn this._isNotebookbarLoadedOnCore;\n\t},\n\n\tinitializeInCore: function() {\n\t\tthis.map.sendUnoCommand('.uno:ToolbarMode?Mode:string=notebookbar_online.ui');\n\t},\n\n\tresetInCore: function() {\n\t\tthis._isNotebookbarLoadedOnCore = false;\n\t\tthis.map.sendUnoCommand('.uno:ToolbarMode?Mode:string=Default');\n\t},\n\n\tonJSUpdate: function (e) {\n\t\tvar data = e.data;\n\n\t\tif (data.jsontype !== 'notebookbar')\n\t\t\treturn;\n\n\t\tif (!this.container)\n\t\t\treturn;\n\n\t\tif (!this.builder)\n\t\t\treturn;\n\n\t\tthis._isNotebookbarLoadedOnCore = true;\n\n\t\tthis.builder.updateWidget(this.container, data.control);\n\t},\n\n\tonJSAction: function (e) {\n\t\tvar data = e.data;\n\n\t\tif (data.jsontype !== 'notebookbar')\n\t\t\treturn;\n\n\t\tif (!this.builder)\n\t\t\treturn;\n\n\t\tif (!this.container)\n\t\t\treturn;\n\n\t\tthis._isNotebookbarLoadedOnCore = true;\n\n\t\tthis.builder.executeAction(this.container, data.data);\n\t},\n\n\tonUpdatePermission: function(e) {\n\t\tif (e.detail.perm === 'edit') {\n\t\t\tthis._showNotebookbar = true;\n\t\t\tthis.showTabs();\n\t\t\t$('.main-nav').removeClass('readonly');\n\t\t} else {\n\t\t\tthis.hideTabs();\n\t\t}\n\t},\n\n\tonNotebookbar: function(data) {\n\t\tthis._isNotebookbarLoadedOnCore = true;\n\t\t// setup id for events\n\t\tthis.builder.setWindowId(data.id);\n\t},\n\n\tshowTabs: function() {\n\t\t$('.ui-tabs.notebookbar').show();\n\t\t$('.notebookbar-shortcuts-bar').show();\n\t\tthis.extend();\n\t\t$(window).resize();\n\t},\n\n\thideTabs: function() {\n\t\t$('.ui-tabs.notebookbar').hide();\n\t\t$('.notebookbar-shortcuts-bar').hide();\n\t\t$('.main-nav').addClass('readonly');\n\t\tthis.collapse();\n\t},\n\n\tcollapse: function() {\n\t\tif (this._showNotebookbar !== false) this.map.uiManager.collapseNotebookbar();\n\t},\n\n\textend: function() {\n\t\tif (this._showNotebookbar !== false) this.map.uiManager.extendNotebookbar();\n\t},\n\n\tisCollapsed: function() {\n\t\treturn this.map.uiManager.isNotebookbarCollapsed();\n\t},\n\n\tclearNotebookbar: function() {\n\t\t$('.root-container.notebookbar').remove();\n\t\t$('.notebookbar-tabs-container').remove();\n\t\t$('.notebookbar-shortcuts-bar').remove();\n\t\t$(this.container).remove();\n\t},\n\n\tloadTab: function(tabJSON) {\n\t\tthis.clearNotebookbar();\n\n\t\tthis.container = L.DomUtil.create('div', 'notebookbar-scroll-wrapper', this.parentContainer);\n\n\t\tJSDialog.MakeScrollable(this.parentContainer, this.container);\n\n\t\tthis.builder.build(this.container, [tabJSON]);\n\n\t\tif (this._showNotebookbar === false)\n\t\t\tthis.hideTabs();\n\n\t\tif (window.mode.isDesktop() || window.mode.isTablet())\n\t\t\tthis.createOptionsSection();\n\n\t\tthis.scrollToLastPositionIfNeeded();\n\t},\n\n\tsetTabs: function(tabs) {\n\t\tvar container = L.DomUtil.create('div', 'notebookbar-tabs-container');\n\t\tcontainer.appendChild(tabs);\n\t\tfor (let tab of tabs.children) {\n\t\t\tif (tab.id.endsWith('-tab-label')) {\n\t\t\t\tlet name = tab.id.substring(0, tab.id.length - 10);\n\t\t\t\tif (!this.map.uiManager.isTabVisible(name)) {\n\t\t\t\t\t$(tab).hide();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t$('#document-titlebar').before(container);\n\t\tthis.createShortcutsBar();\n\t},\n\n\tselectedTab: function() {\n\t\t// implement in child classes\n\t},\n\n\tgetTabs: function() {\n\t\t// implement in child classes\n\t\treturn [];\n\t},\n\n\tgetTabsJSON: function() {\n\t\t// implement in child classes\n\t\treturn [];\n\t},\n\n\tgetShortcutsBarData: function() {\n\t\tvar hasSave = !this._map['wopi'].HideSaveOption;\n\t\treturn [\n\t\t\t{\n\t\t\t\t'id': 'shortcutstoolbox',\n\t\t\t\t'type': 'toolbox',\n\t\t\t\t'children': [\n\t\t\t\t\thasSave ? {\n\t\t\t\t\t\t'id': 'save',\n\t\t\t\t\t\t'type': 'toolitem',\n\t\t\t\t\t\t'text': _('Save'),\n\t\t\t\t\t\t'command': '.uno:Save',\n\t\t\t\t\t\t'accessKey': '1',\n\t\t\t\t\t\t'isCustomTooltip': true\n\t\t\t\t\t} : {}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\t},\n\n\tcreateShortcutsBar: function() {\n\t\tvar shortcutsBar = L.DomUtil.create('div', 'notebookbar-shortcuts-bar');\n\t\t$('#main-menu-state').after(shortcutsBar);\n\n\t\tvar shortcutsBarData = this.getShortcutsBarData();\n\t\tvar toolitems = shortcutsBarData[0].children;\n\n\t\tfor (var i in this.additionalShortcutButtons) {\n\t\t\tvar item = this.additionalShortcutButtons[i];\n\t\t\ttoolitems.push(item);\n\t\t}\n\n\t\tfor (var j in toolitems) {\n\t\t\titem = toolitems[j];\n\t\t\tvar hidden = false;\n\t\t\tvar commands = this.map._extractCommand(item);\n\t\t\tcommands.forEach(function(command) {\n\t\t\t\tif (!this.map.uiManager.isCommandVisible(command)) {\n\t\t\t\t\ttoolitems.splice(j, 1);\n\t\t\t\t\thidden = true;\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tif (hidden) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (!this.map.uiManager.isButtonVisible(item.id)) {\n\t\t\t\ttoolitems.splice(j, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.builder.build(shortcutsBar, shortcutsBarData);\n\n\t\t//create SaveState object after addition of shortcut bar in UI\n\t\tthis.map.saveState = new app.definitions.saveState(this.map);\n\t},\n\n\treloadShortcutsBar: function() {\n\t\t$('.notebookbar-shortcuts-bar').remove();\n\t\tthis.createShortcutsBar();\n\t},\n\n\tinsertButtonToShortcuts: function(button) {\n\t\tfor (var i in this.additionalShortcutButtons) {\n\t\t\tvar item = this.additionalShortcutButtons[i];\n\t\t\tif (item.id === button.id)\n\t\t\t\treturn;\n\t\t}\n\n\t\tvar isUnoCommand = button.unoCommand && button.unoCommand.indexOf('.uno:') >= 0;\n\t\tif (button.unoCommand && !isUnoCommand)\n\t\t\tbutton.unoCommand = '.uno:' + button.unoCommand;\n\n\t\tthis.additionalShortcutButtons.push(\n\t\t\t{\n\t\t\t\tid: button.id,\n\t\t\t\ttype: 'toolitem',\n\t\t\t\ttext: button.label ? button.label : (button.hint ? _(button.hint) : ' '),\n\t\t\t\ticon: button.imgurl,\n\t\t\t\tcommand: button.unoCommand,\n\t\t\t\taccessKey: button.accessKey ? button.accessKey: null,\n\t\t\t\tpostmessage: button.unoCommand ? undefined : true,\n\t\t\t\tcssClass: 'integrator-shortcut'\n\t\t\t}\n\t\t);\n\n\t\tthis.reloadShortcutsBar();\n\t},\n\n\tshowNotebookbarButton: function(buttonId, show) {\n\t\tvar button = $(this.container).find('#' + buttonId);\n\t\tif (button) {\n\t\t\tif (show) {\n\t\t\t\tbutton.show();\n\t\t\t} else {\n\t\t\t\tbutton.hide();\n\t\t\t}\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tshowNotebookbarCommand: function(commandId, show) {\n\t\tvar cssClass;\n\t\tif (commandId.indexOf('.uno:') == 0) {\n\t\t\tcssClass = 'uno' + commandId.substring(5);\n\t\t} else {\n\t\t\tcssClass = commandId;\n\t\t}\n\t\tvar button = $(this.container).find('div.' + cssClass);\n\t\tif (button) {\n\t\t\tif (show) {\n\t\t\t\tbutton.show();\n\t\t\t} else {\n\t\t\t\tbutton.hide();\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\tsetCurrentScrollPosition: function() {\n\t\tthis._currentScrollPosition = $(this.container).scrollLeft();\n\t},\n\n\tscrollToLastPositionIfNeeded: function() {\n\t\tvar rootContainer = $(this.container).children('div').get(0);\n\n\t\tif (this._currentScrollPosition && $(rootContainer).outerWidth() > $(window).width()) {\n\t\t\t$(this.container).animate({ scrollLeft: this._currentScrollPosition }, 0);\n\t\t} else {\n\t\t\tJSDialog.RefreshScrollables();\n\t\t}\n\t},\n\n\tshouldIgnoreContextChange(contexts, appId) {\n\t\t// New -> old context name pairs.\n\t\tlet ignored = [['NotesPage', 'DrawPage'], ['DrawPage', 'NotesPage']];\n\t\tif (appId === 'com.sun.star.text.TextDocument') {\n\t\t\tignored.push(['Text', '']);\n\t\t}\n\n\t\tfor (let i = 0; i < ignored.length; i++) {\n\t\t\tif (contexts[0] === ignored[i][0] && contexts[1] === ignored[i][1])\n\t\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\trefreshContextTabsVisibility: function() {\n\t\tthis.updateTabsVisibilityForContext(this._lastContext);\n\t},\n\n\tupdateButtonVisibilityForContext: function (context, tabId) {\n\t\tconst tabsJSON = this.getTabsJSON();\n\t\tconst splitTabId = tabId.split('-');\n\t\tif (splitTabId.length !== 3)\n\t\t\treturn;\n\n\t\tconst tabName = splitTabId[0];\n\t\tconst toShow = [];\n\t\tconst toHide = [];\n\n\t\ttabsJSON.forEach((tabContent) => {\n\t\t\tif (!tabContent || !tabContent.children[0] || !tabContent.children[0].children) return;\n\n\t\t\tconst tabPageId = tabContent.children[0].id;\n\t\t\tconst tabPageName = tabPageId.split('-')[0];\n\t\t\tif (tabPageName !== tabName)\n\t\t\t\treturn;\n\n\t\t\tconst children = tabContent.children[0].children;\n\t\t\tconst requiredContext = context || 'default';\n\n\t\t\tchildren.forEach((item) => {\n\t\t\t\tif (!item.context) return;\n\n\t\t\t\tif (item.context.indexOf(requiredContext) >= 0) {\n\t\t\t\t\ttoShow.push(item.command.replace('.uno:', ''));\n\t\t\t\t} else {\n\t\t\t\t\ttoHide.push(item.command.replace('.uno:', ''));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\ttoHide.forEach((item) => {\n\t\t\tthis.showButton(item, false);\n\t\t});\n\t\ttoShow.forEach((item) => {\n\t\t\tthis.showButton(item, true);\n\t\t});\n\t},\n\n\tshowButton: function (id, show) {\n\t\tif (!id) return;\n\n\t\tthis.builder.executeAction(this.parentContainer, {\n\t\t\tcontrol_id: id,\n\t\t\tcontrol: { id: id },\n\t\t\taction_type: show ? 'show' : 'hide',\n\t\t});\n\n\t\tJSDialog.RefreshScrollables();\n\t},\n\n\tupdateTabsVisibilityForContext: function(requestedContext) {\n\t\tvar tabs = this.getTabs();\n\t\tvar contextTab = null;\n\t\tvar defaultTab = null;\n\t\tlet alreadySelected = null;\n\t\t// Currently selected tab name, part of the element's ID.\n\t\tlet currentlySelectedTabName = null;\n\t\tfor (var tab in tabs) {\n\t\t\tvar tabElement = $('#' + tabs[tab].name + '-tab-label');\n\t\t\tif (tabElement.hasClass('selected')) {\n\t\t\t\tcurrentlySelectedTabName = tabs[tab].name;\n\t\t\t}\n\t\t\tif (tabs[tab].context) {\n\t\t\t\ttabElement.hide();\n\t\t\t\tvar contexts = tabs[tab].context.split('|');\n\t\t\t\tfor (var context in contexts) {\n\t\t\t\t\t// Check the tab isn't hidden.\n\t\t\t\t\tif (!this.map.uiManager.isTabVisible(tabs[tab].name)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (contexts[context] === requestedContext) {\n\t\t\t\t\t\ttabElement.show();\n\t\t\t\t\t\ttabElement.removeClass('hidden');\n\t\t\t\t\t\tif (!tabElement.hasClass('selected'))\n\t\t\t\t\t\t\tcontextTab = tabElement;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\talreadySelected = tabElement;\n\t\t\t\t\t} else if (contexts[context] === 'default') {\n\t\t\t\t\t\ttabElement.show();\n\t\t\t\t\t\tif (!tabElement.hasClass('selected'))\n\t\t\t\t\t\t\tdefaultTab = tabElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (!this.map.uiManager.isTabVisible(tabs[tab].name)) {\n\t\t\t\t// There is no context, but we check if the tab is hidden\n\t\t\t\ttabElement.hide();\n\t\t\t} else {\n\t\t\t\ttabElement.show();\n\t\t\t}\n\t\t}\n\n\t\tif (alreadySelected) {\n\t\t\tconst tabId = alreadySelected.attr('id');\n\t\t\tthis.updateButtonVisibilityForContext(requestedContext, tabId);\n\t\t\treturn;\n\t\t}\n\n\t\tif (contextTab) {\n\t\t\t// Switch to the tab of the context, unless we currently show the review tab\n\t\t\t// for text documents, where jumping to the next change would possibly\n\t\t\t// switch to the Home or Table tabs, which is not wanted.\n\t\t\tvar docType = this._map.getDocType();\n\t\t\tif (docType !== 'text' || currentlySelectedTabName !== 'Review') {\n\t\t\t\tcontextTab.click();\n\t\t\t}\n\t\t\tconst tabId = contextTab.attr('id');\n\t\t\tthis.updateButtonVisibilityForContext(requestedContext, tabId);\n\t\t\treturn;\n\t\t}\n\n\t\tif (defaultTab) {\n\t\t\tdefaultTab.click();\n\t\t\tconst tabId = defaultTab.attr('id');\n\t\t\tthis.updateButtonVisibilityForContext(requestedContext, tabId);\n\t\t\treturn;\n\t\t}\n\t},\n\n\tonContextChange: function(event) {\n\t\tconst detail = event.detail;\n\t\tif (detail.appId !== detail.oldAppId) {\n\t\t\tvar childrenArray = undefined; // Use buttons provided by specific Control.Notebookbar implementation by default\n\t\t\tif (detail.appId === 'com.sun.star.formula.FormulaProperties') {\n\t\t\t\tchildrenArray = [\n\t\t\t\t\t{\n\t\t\t\t\t\t'type': 'toolitem',\n\t\t\t\t\t\t'text': _UNO('.uno:SidebarDeck.ElementsDeck', '', true),\n\t\t\t\t\t\t'command': '.uno:SidebarDeck.ElementsDeck'\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t\tthis.createOptionsSection(childrenArray);\n\t\t}\n\n\t\tif (detail.context === detail.oldContext)\n\t\t\treturn;\n\n\t\tif (this.shouldIgnoreContextChange([detail.context, detail.oldContext], detail.appId))\n\t\t\treturn;\n\n\t\tthis.updateTabsVisibilityForContext(detail.context);\n\t\tthis._lastContext = detail.context;\n\t},\n\n\tonSlideHideToggle: function() {\n\t\tif (!app.impress.isSlideHidden(this.map.getCurrentPartNumber()))\n\t\t\t$('#showslide').hide();\n\t\telse\n\t\t\t$('#showslide').show();\n\n\t\tif (app.impress.isSlideHidden(this.map.getCurrentPartNumber()))\n\t\t\t$('#hideslide').hide();\n\t\telse\n\t\t\t$('#hideslide').show();\n\t},\n\n\tonStatusbarChange: function() {\n\t\tif (this.map.uiManager.isStatusBarVisible()) {\n\t\t\t$('#showstatusbar').addClass('selected');\n\t\t}\n\t\telse {\n\t\t\t$('#showstatusbar').removeClass('selected');\n\t\t}\n\t},\n\n\tonRulerChange: function() {\n\t\tif (this.map.uiManager.isRulerVisible()) {\n\t\t\t$('#showruler').addClass('selected');\n\t\t}\n\t\telse {\n\t\t\t$('#showruler').removeClass('selected');\n\t\t}\n\t},\n\n\tonDarkModeToggleChange: function() {\n\t\tif (window.prefs.getBoolean('darkTheme')) {\n\t\t\t$('#invertbackground').show();\n\t\t}\n\t\telse {\n\t\t\t$('#invertbackground').hide();\n\t\t}\n\t},\n\n\tonShowAnnotationsChange: function(e) {\n\t\tif (e.state === 'true')\n\t\t{\n\t\t\t$('#review-show-resolved-annotations').removeClass('disabled');\n\t\t\t$('#review-show-resolved-annotations').attr('disabled', false);\n\t\t\t$('#review-show-resolved-annotations-button').attr('disabled', false);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('#review-show-resolved-annotations').addClass('disabled');\n\t\t\t$('#review-show-resolved-annotations').attr('disabled', true);\n\t\t\t$('#review-show-resolved-annotations-button').attr('disabled', true);\n\t\t}\n\t},\n\n\tonAccessibilityToggleChange: function() {\n\t\tif (window.prefs.getBoolean('accessibilityState')) {\n\t\t\t$('#togglea11ystate').addClass('selected');\n\t\t} else {\n\t\t\t$('#togglea11ystate').removeClass('selected');\n\t\t}\n\t\tif (this._map && this._map._lockAccessibilityOn) {\n\t\t\t$('#togglea11ystate').addClass('disabled');\n\t\t\t$('#togglea11ystate').attr('disabled', true);\n\t\t\t$('#togglea11ystate-button').attr('disabled', true);\n\t\t}\n\t},\n\n\tbuildOptionsSectionData: function(childrenArray) {\n\t\treturn [\n\t\t\t{\n\t\t\t\t'id': 'optionscontainer',\n\t\t\t\t'type': 'container',\n\t\t\t\t'children': [\n\t\t\t\t\t{\n\t\t\t\t\t\t'id': 'optionstoolboxdown',\n\t\t\t\t\t\t'type': 'toolbox',\n\t\t\t\t\t\t'children': childrenArray\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\t},\n\n\tgetOptionsSectionData: function() {\n\t\treturn this.buildOptionsSectionData(this.getDefaultToolItems());\n\t},\n\n\tgetDefaultToolItems: function() {\n\t\tconst optionsToolItems = [\n\t\t\t{\n\t\t\t\t'type': 'toolitem',\n\t\t\t\t'text': _UNO('.uno:Sidebar', '', true),\n\t\t\t\t'command': '.uno:SidebarDeck.PropertyDeck',\n\t\t\t\t'accessibility': { focusBack: false, combination: 'ZB', de: null },\n\t\t\t\t'useInLineLabelsForUnoButtons': false,\n\t\t\t},\n\t\t];\n\n\t\tif (this._map && this._map['wopi'].EnableShare) {\n\t\t\toptionsToolItems.push({\n\t\t\t\t'type': 'customtoolitem',\n\t\t\t\t'text': _('Share'),\n\t\t\t\t'command': 'shareas',\n\t\t\t\t'accessibility': { focusBack: false, combination: 'ZS', de: null }\n\t\t\t});\n\t\t}\n\n\t\treturn optionsToolItems;\n\t},\n\n\tcreateOptionsSection: function(childrenArray) {\n\t\t$('.notebookbar-options-section').remove();\n\n\t\tvar optionsSection = L.DomUtil.create('div', 'notebookbar-options-section');\n\t\t$(optionsSection).insertBefore('#closebuttonwrapperseparator');\n\n\t\tvar builderOptions = {\n\t\t\tmobileWizard: this,\n\t\t\tmap: this.map,\n\t\t\tcssClass: 'notebookbar',\n\t\t};\n\n\t\tvar builder = new L.control.notebookbarBuilder(builderOptions);\n\t\tif (childrenArray === undefined)\n\t\t\tchildrenArray = this.getOptionsSectionData();\n\t\tbuilder.build(optionsSection, childrenArray);\n\t},\n});\n"]}