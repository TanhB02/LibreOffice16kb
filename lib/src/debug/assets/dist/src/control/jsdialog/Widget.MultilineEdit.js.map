{"version":3,"file":"Widget.MultilineEdit.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/control/jsdialog/Widget.MultilineEdit.js"],"names":[],"mappings":"AAAA,gCAAgC;AAChC;;;;;;;;GAQG;AAEH;;;;;;;;;;;;;;;;GAgBG;AAEH,qBAAqB;AAErB,SAAS,oBAAoB,CAAC,IAAI,EAAE,OAAO;IAC1C,IAAI,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;IACnC,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC;IAE/B,IAAI,SAAS,GAAG,QAAQ,GAAG,GAAG,GAAG,MAAM,CAAC;IACxC,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,eAAe,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;AACrE,CAAC;AAED,SAAS,qBAAqB,CAAC,eAAe,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ;IACtE,IAAI,WAAW,GAAG,UAAU,CAAC;IAC7B,IAAI,IAAI,CAAC,eAAe;QACvB,WAAW,GAAG,KAAK,CAAC;SAChB,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,OAAO,IAAI,IAAI,CAAC,MAAM,KAAK,KAAK,CAAC;QACzE,WAAW,GAAG,GAAG,CAAC;IAEnB,IAAI,IAAI,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,WAAW,EAAE,cAAc,GAAG,OAAO,CAAC,OAAO,CAAC,QAAQ,EAAE,eAAe,CAAC,CAAC;IACrG,IAAI,IAAI,CAAC,eAAe;QACvB,IAAI,CAAC,YAAY,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;IAE9C,IAAI,WAAW,KAAK,UAAU;QAC7B,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACvC,IAAI,WAAW,KAAK,GAAG,EAAE;QAC7B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;QACzD,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACjD;SAAM,IAAI,WAAW,KAAK,KAAK,EAAE;QACjC,IAAI,IAAI,CAAC,IAAI;YACZ,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC;;YAE3B,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAClD;IAED,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;IAElB,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;QAC3B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;KACrB;IAED,SAAS,mBAAmB;QAC3B,IAAI,QAAQ;YACX,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEtB,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAC9D,UAAU,CAAC,cAAc,oBAAoB,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACrE,CAAC;IAED,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;IACpD,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,mBAAmB,CAAC,CAAC,CAAC,oEAAoE;IAE1H,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,UAAU,KAAK;QAC/C,IAAI,IAAI,CAAC,QAAQ,EAAE;YAClB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,OAAO;SACP;QAED,oBAAoB,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAC7C,CAAC,CAAC,CAAC;IAEH,IAAI,IAAI,CAAC,MAAM;QACd,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;IAEpC,OAAO,KAAK,CAAC;AACd,CAAC;AAED,QAAQ,CAAC,aAAa,GAAG,UAAU,eAAe,EAAE,IAAI,EAAE,OAAO;IAChE,IAAI,cAAc,GAAG,qBAAqB,CAAC,eAAe,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;IAC3E,OAAO,cAAc,CAAC;AACvB,CAAC,CAAC","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * JSDialog.MultilineEdit - text field with multiple lines and scrollbar\n *\n * Example JSON:\n * {\n *     id: 'id',\n *     type: 'multilineedit',\n *     text: 'text content\\nsecond line',\n *     html: '<a href=\"hyperlink\">hyperlink</a>' // only if contenteditable is true\n *     cursor: true,\n *     contenteditable: false\n *     enabled: false\n * }\n *\n * 'cursor' specifies if user can type into the field or it is readonly\n * 'enabled' editable field can be temporarily disabled\n */\n\n/* global JSDialog */\n\nfunction _sendSimpleSelection(edit, builder) {\n\tvar startPos = edit.selectionStart;\n\tvar endPos = edit.selectionEnd;\n\n\tvar selection = startPos + ';' + endPos;\n\tbuilder.callback('edit', 'textselection', edit, selection, builder);\n}\n\nfunction _multiLineEditControl(parentContainer, data, builder, callback) {\n\tvar controlType = 'textarea';\n\tif (data.contenteditable)\n\t\tcontrolType = 'div';\n\telse if (data.cursor && (data.cursor === 'false' || data.cursor === false))\n\t\tcontrolType = 'p';\n\n\tlet edit = L.DomUtil.create(controlType, 'ui-textarea ' + builder.options.cssClass, parentContainer);\n\tif (data.contenteditable)\n\t\tedit.setAttribute('contenteditable', 'true');\n\n\tif (controlType === 'textarea')\n\t\tedit.value = builder._cleanText(data.text);\n\telse if (controlType === 'p') {\n\t\tdata.text = data.text.replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\n\t\tedit.textContent = builder._cleanText(data.text);\n\t} else if (controlType === 'div') {\n\t\tif (data.html)\n\t\t\tedit.innerHTML = data.html;\n\t\telse\n\t\t\tedit.textContent = builder._cleanText(data.text);\n\t}\n\n\tedit.id = data.id;\n\n\tif (data.enabled === false) {\n\t\tedit.disabled = true;\n\t}\n\n\tfunction _keyupChangeHandler() {\n\t\tif (callback)\n\t\t\tcallback(this.value);\n\n\t\tbuilder.callback('edit', 'change', edit, this.value, builder);\n\t\tsetTimeout(function () { _sendSimpleSelection(edit, builder); }, 0);\n\t}\n\n\tedit.addEventListener('keyup', _keyupChangeHandler);\n\tedit.addEventListener('change', _keyupChangeHandler); // required despite keyup as, e.g., iOS paste does not trigger keyup\n\n\tedit.addEventListener('mouseup', function (event) {\n\t\tif (edit.disabled) {\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\t_sendSimpleSelection(event.target, builder);\n\t});\n\n\tif (data.hidden)\n\t\tL.DomUtil.addClass(edit, 'hidden');\n\n\treturn false;\n}\n\nJSDialog.multilineEdit = function (parentContainer, data, builder) {\n\tvar buildInnerData = _multiLineEditControl(parentContainer, data, builder);\n\treturn buildInnerData;\n};\n"]}