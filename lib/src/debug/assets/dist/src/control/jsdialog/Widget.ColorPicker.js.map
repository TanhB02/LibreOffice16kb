{"version":3,"file":"Widget.ColorPicker.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/control/jsdialog/Widget.ColorPicker.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * JSDialog.ColorPicker - color picker for desktop\n */\n\ndeclare var JSDialog: any;\n\ninterface ColorPaletteWidgetData {\n\tid: string;\n\tcommand: string;\n}\n\ninterface ThemeColor {\n\tValue: string;\n\tName: string;\n\tData: {\n\t\tThemeIndex: number;\n\t\tTransformations: { Type: string; Value: number }[];\n\t};\n}\n\ntype ColorEntry = {\n\thexCode: string;\n\tname: string;\n};\n\ntype ColorItem = string;\ntype CoreColorPalette = Array<Array<{ Value: ColorItem }>>;\ntype ColorPalette = Array<Array<ColorItem>>;\n\nfunction findColorName(hexCode: string): string {\n\tconst color = window.app.colorNames.find(\n\t\t(c: ColorEntry) => c.hexCode.toLowerCase() === hexCode.toLowerCase(),\n\t);\n\treturn color ? color.name : _('Unknown color');\n}\n\nfunction getCurrentPaletteName(): string {\n\tconst palette = window.prefs.get('colorPalette');\n\n\tif (\n\t\tpalette === undefined ||\n\t\twindow.app.colorPalettes[palette] === undefined\n\t) {\n\t\treturn 'StandardColors';\n\t}\n\n\treturn palette;\n}\n\n// TODO: we don't need to use that format now - simplify?\nfunction toW2Palette(corePalette: CoreColorPalette): ColorPalette {\n\tconst pal: ColorPalette = [];\n\n\tif (!corePalette) return pal;\n\n\tfor (let i = 0; i < corePalette.length; i++) {\n\t\tconst row = [];\n\t\tfor (let j = 0; j < corePalette[i].length; j++) {\n\t\t\trow.push(String(corePalette[i][j].Value).toUpperCase());\n\t\t}\n\t\tpal.push(row);\n\t}\n\treturn pal;\n}\n\nfunction generatePalette(paletteName: string) {\n\tconst colorPalette = toW2Palette(\n\t\twindow.app.colorPalettes[paletteName].colors,\n\t);\n\tconst customColorRow = window.prefs.get('customColor');\n\tconst recentRow = window.prefs.get('recentColor');\n\n\tif (customColorRow !== undefined) {\n\t\tcolorPalette.push(JSON.parse(customColorRow));\n\t} else {\n\t\tcolorPalette.push(['F2F2F2', 'F2F2F2', 'F2F2F2', 'F2F2F2', 'F2F2F2']); // custom colors (up to 4)\n\t}\n\n\tif (recentRow !== undefined) {\n\t\tcolorPalette.push(JSON.parse(recentRow));\n\t} else {\n\t\tcolorPalette.push([\n\t\t\t'F2F2F2',\n\t\t\t'F2F2F2',\n\t\t\t'F2F2F2',\n\t\t\t'F2F2F2',\n\t\t\t'F2F2F2',\n\t\t\t'F2F2F2',\n\t\t\t'F2F2F2',\n\t\t\t'F2F2F2',\n\t\t]); // recent colors (up to 8)\n\t}\n\n\treturn colorPalette;\n}\n\nfunction createColor(\n\tparentContainer: HTMLElement,\n\tbuilder: JSBuilder,\n\tcolorItem: ColorItem,\n\tindex: string,\n\tthemeData: any,\n\twidgetData: ColorPaletteWidgetData,\n\tisCurrent: boolean,\n\tthemeColors: ThemeColor[],\n): Element {\n\tconst color = L.DomUtil.create(\n\t\t'div',\n\t\tbuilder.options.cssClass + ' ui-color-picker-entry',\n\t\tparentContainer,\n\t);\n\tcolor.style.backgroundColor = '#' + colorItem;\n\tcolor.setAttribute('name', colorItem);\n\tcolor.setAttribute('index', index);\n\tcolor.tabIndex = 0;\n\tcolor.innerHTML = isCurrent ? '&#149;' : '&#160;';\n\tif (themeData) color.setAttribute('theme', themeData);\n\n\t// Set color tooltips\n\tvar colorTooltip;\n\tconst found = themeColors.find(\n\t\t(item: ThemeColor) => item.Value.toLowerCase() === colorItem.toLowerCase(),\n\t);\n\tif (found) colorTooltip = found.Name;\n\telse if (window.app.colorNames) colorTooltip = findColorName(colorItem);\n\telse colorTooltip = _('Unknown color');\n\n\tcolor.setAttribute('data-cooltip', colorTooltip);\n\n\t// Assuming 'color' is your target HTMLElement\n\tcolor.addEventListener('click', (event: MouseEvent) => {\n\t\thandleColorSelection(\n\t\t\tevent.target as HTMLElement, // The clicked element\n\t\t\tbuilder, // Pass the builder object\n\t\t\twidgetData, // Pass the widget data\n\t\t);\n\t});\n\tcolor.addEventListener('keydown', (event: KeyboardEvent) => {\n\t\tif (event.code === 'Enter') {\n\t\t\thandleColorSelection(\n\t\t\t\tevent.target as HTMLElement, // The clicked element\n\t\t\t\tbuilder, // Pass the builder object\n\t\t\t\twidgetData, // Pass the widget data\n\t\t\t);\n\t\t}\n\t});\n\tL.control.attachTooltipEventListener(color, builder.map);\n\n\treturn color;\n}\n\nfunction handleColorSelection(\n\ttarget: HTMLElement,\n\tbuilder: JSBuilder,\n\twidgetData: ColorPaletteWidgetData,\n) {\n\tconst palette = generatePalette(getCurrentPaletteName());\n\tconst colorCode = target.getAttribute('name');\n\tconst themeData = target.getAttribute('theme');\n\n\tif (colorCode != null) {\n\t\tJSDialog.sendColorCommand(builder, widgetData, colorCode, themeData);\n\t\tbuilder.callback(\n\t\t\t'colorpicker',\n\t\t\t'hidedropdown',\n\t\t\twidgetData,\n\t\t\tthemeData ? themeData : colorCode,\n\t\t\tbuilder,\n\t\t);\n\t} else {\n\t\tJSDialog.sendColorCommand(builder, widgetData, 'transparent');\n\t\tbuilder.callback(\n\t\t\t'colorpicker',\n\t\t\t'hidedropdown',\n\t\t\twidgetData,\n\t\t\t'transparent',\n\t\t\tbuilder,\n\t\t);\n\t}\n\t// Update the recent colors list\n\tconst recentRow = palette[palette.length - 1];\n\tif (recentRow.indexOf(colorCode) !== -1)\n\t\trecentRow.splice(recentRow.indexOf(colorCode), 1);\n\trecentRow.unshift(colorCode);\n\twindow.prefs.set('recentColor', JSON.stringify(recentRow));\n}\n\nfunction createAutoColorButton(\n\tparentContainer: HTMLElement,\n\tdata: ColorPaletteWidgetData,\n\tbuilder: JSBuilder,\n) {\n\t// Create a div container for the button\n\tconst buttonContainer = L.DomUtil.create(\n\t\t'div',\n\t\t'auto-color-button-container',\n\t\tparentContainer,\n\t);\n\n\tconst hasTransparent =\n\t\tdata.command !== '.uno:FontColor' && data.command !== '.uno:Color';\n\tconst buttonText = hasTransparent ? _('No fill') : _('Automatic');\n\tconst autoButton = L.DomUtil.create(\n\t\t'button',\n\t\tbuilder.options.cssClass + ' ui-pushbutton auto-color-button',\n\t\tbuttonContainer, // Append button to the newly created div\n\t);\n\tautoButton.id = 'transparent-color-button';\n\tautoButton.innerText = buttonText;\n\tautoButton.tabIndex = '0';\n\tautoButton.focus();\n\n\tautoButton.addEventListener('click', () => {\n\t\tJSDialog.sendColorCommand(builder, data, 'transparent');\n\t\tbuilder.callback('colorpicker', 'hidedropdown', data, '-1', builder);\n\t});\n}\n\nfunction createPaletteSwitch(\n\tparentContainer: HTMLElement,\n\tbuilder: JSBuilder,\n): HTMLSelectElement {\n\tconst paletteListbox = L.DomUtil.create(\n\t\t'div',\n\t\tbuilder.options.cssClass + ' ui-listbox-container color-palette-selector',\n\t\tparentContainer,\n\t);\n\tconst listbox = L.DomUtil.create(\n\t\t'select',\n\t\tbuilder.options.cssClass + ' ui-listbox',\n\t\tpaletteListbox,\n\t);\n\n\tlistbox.setAttribute('aria-labelledby', 'color-palette');\n\tlistbox.setAttribute('tabindex', '0');\n\n\tfor (const i in window.app.colorPalettes) {\n\t\tconst paletteOption = L.DomUtil.create('option', '', listbox);\n\t\tif (i === getCurrentPaletteName())\n\t\t\tpaletteOption.setAttribute('selected', 'selected');\n\t\tpaletteOption.value = i;\n\t\tpaletteOption.innerText = window.app.colorPalettes[i].name;\n\t}\n\n\tL.DomUtil.create(\n\t\t'span',\n\t\tbuilder.options.cssClass + ' ui-listbox-arrow',\n\t\tpaletteListbox,\n\t);\n\n\treturn listbox;\n}\n\nfunction updatePalette(\n\tpaletteName: string,\n\tdata: ColorPaletteWidgetData,\n\tbuilder: JSBuilder,\n\tpaletteContainer: HTMLElement,\n\tcustomContainer: HTMLElement,\n\trecentContainer: HTMLElement,\n) {\n\tconst hexColor = String(JSDialog.getCurrentColor(data, builder));\n\tconst currentColor: ColorItem = hexColor.toUpperCase().replace('#', '');\n\n\tconst palette = generatePalette(paletteName);\n\tconst detailedPalette = window.app.colorPalettes[paletteName].colors;\n\tconst themeColors: ThemeColor[] =\n\t\twindow.app.colorPalettes['ThemeColors'].colors.flat();\n\n\tpaletteContainer.style.gridTemplateRows =\n\t\t'repeat(' + (palette.length - 2) + ', auto)';\n\tpaletteContainer.style.gridTemplateColumns =\n\t\t'repeat(' + palette[0].length + ', auto)';\n\n\tpaletteContainer.replaceChildren();\n\tfor (let i = 0; i < palette.length - 2; i++) {\n\t\tfor (let j = 0; j < palette[i].length; j++) {\n\t\t\tconst themeData = detailedPalette[i][j].Data\n\t\t\t\t? JSON.stringify(detailedPalette[i][j].Data)\n\t\t\t\t: undefined;\n\n\t\t\tcreateColor(\n\t\t\t\tpaletteContainer,\n\t\t\t\tbuilder,\n\t\t\t\tpalette[i][j],\n\t\t\t\ti + ':' + j,\n\t\t\t\tthemeData,\n\t\t\t\tdata,\n\t\t\t\tcurrentColor == palette[i][j],\n\t\t\t\tthemeColors,\n\t\t\t);\n\t\t}\n\t}\n\n\tcustomContainer.replaceChildren();\n\n\tconst customInput = L.DomUtil.create('input', '', customContainer);\n\tcustomInput.placeholder = '#FFF000';\n\tcustomInput.maxlength = 7;\n\tcustomInput.type = 'text';\n\n\tcustomInput.addEventListener('change', () => {\n\t\tlet color = customInput.value;\n\t\tif (color.indexOf('#') === 0) color = color.substr(1);\n\n\t\tif (color.length != 6) {\n\t\t\tcustomInput.value = '';\n\t\t\treturn;\n\t\t}\n\n\t\tconst customColorRow = palette[palette.length - 2];\n\t\tif (customColorRow.indexOf(color) !== -1) {\n\t\t\tcustomColorRow.splice(customColorRow.indexOf(color), 1);\n\t\t}\n\t\tcustomColorRow.unshift(color.toUpperCase());\n\t\twindow.prefs.set('customColor', JSON.stringify(customColorRow));\n\t\tupdatePalette(\n\t\t\tpaletteName,\n\t\t\tdata,\n\t\t\tbuilder,\n\t\t\tpaletteContainer,\n\t\t\tcustomContainer,\n\t\t\trecentContainer,\n\t\t);\n\t});\n\n\tconst customColors = palette[palette.length - 2];\n\tfor (let i = 0; i < customColors.length && i < 4; i++) {\n\t\tcreateColor(\n\t\t\tcustomContainer,\n\t\t\tbuilder,\n\t\t\tcustomColors[i],\n\t\t\t'8:' + i,\n\t\t\tundefined,\n\t\t\tdata,\n\t\t\tcurrentColor == customColors[i],\n\t\t\tthemeColors,\n\t\t);\n\t}\n\n\trecentContainer.replaceChildren();\n\tconst recentColors = palette[palette.length - 1];\n\tfor (let i = 0; i < recentColors.length && i < 8; i++) {\n\t\tcreateColor(\n\t\t\trecentContainer,\n\t\t\tbuilder,\n\t\t\trecentColors[i],\n\t\t\t'9:' + i,\n\t\t\tundefined,\n\t\t\tdata,\n\t\t\tcurrentColor == recentColors[i],\n\t\t\tthemeColors,\n\t\t);\n\t}\n}\n\nJSDialog.colorPicker = function (\n\tparentContainer: Element,\n\tdata: ColorPaletteWidgetData,\n\tbuilder: JSBuilder,\n) {\n\tconst container = L.DomUtil.create('div', 'ui-color-picker', parentContainer);\n\tcontainer.id = data.id;\n\tcontainer.tabIndex = '-1'; // focus should be on first element in grid for color picker\n\n\tcreateAutoColorButton(container, data, builder);\n\n\tconst listbox = createPaletteSwitch(container, builder);\n\n\tconst paletteContainer = L.DomUtil.create(\n\t\t'div',\n\t\tbuilder.options.cssClass + ' ui-color-picker-palette',\n\t\tcontainer,\n\t);\n\n\tconst customContainer = L.DomUtil.createWithId(\n\t\t'div',\n\t\t'ui-color-picker-custom',\n\t\tcontainer,\n\t);\n\n\tconst recentLabel = L.DomUtil.create('label', '', container);\n\trecentLabel.innerText = _('Recent');\n\trecentLabel.htmlFor = 'ui-color-picker-recent';\n\n\tconst recentContainer = L.DomUtil.createWithId(\n\t\t'div',\n\t\t'ui-color-picker-recent',\n\t\tcontainer,\n\t);\n\n\tupdatePalette(\n\t\tgetCurrentPaletteName(),\n\t\tdata,\n\t\tbuilder,\n\t\tpaletteContainer,\n\t\tcustomContainer,\n\t\trecentContainer,\n\t);\n\n\tlistbox.addEventListener('change', () => {\n\t\tconst newPaletteName = listbox.value;\n\t\twindow.prefs.set('colorPalette', newPaletteName);\n\t\tupdatePalette(\n\t\t\tnewPaletteName,\n\t\t\tdata,\n\t\t\tbuilder,\n\t\t\tpaletteContainer,\n\t\t\tcustomContainer,\n\t\t\trecentContainer,\n\t\t);\n\t});\n\n\tJSDialog.MakeFocusCycle(container);\n\n\treturn false;\n};\n"]}