{"version":3,"file":"Util.ModalHelper.js","sourceRoot":"","sources":["../../../../../../../../../../../TanhX/online/browser/src/control/jsdialog/Util.ModalHelper.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * Copyright the Collabora Online contributors.\n *\n * SPDX-License-Identifier: MPL-2.0\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n */\n\n/*\n * JSDialog.ModalHelper - helper functions for manipulating modals built using jsdialog\n */\n\n/* global JSDialog app */\n\nvar modalIdPretext = 'modal-dialog-';\n\n/// Returns generated (or to be generated) id for the modal container.\nfunction generateModalId(givenId) {\n\treturn modalIdPretext + givenId;\n}\n\nfunction sendJSON(json) {\n\tif (!app.socket)\n\t\treturn;\n\n\tapp.socket._onMessage({textMsg: 'jsdialog: ' + JSON.stringify(json)});\n}\n\nfunction setMessageInModal(id, msg1) {\n\tvar dialogId = generateModalId(id);\n\n\tvar json = {\n\t\tid: dialogId,\n\t\tjsontype: 'dialog',\n\t\ttype: 'modalpopup',\n\t\taction: 'update',\n\t\tcontrol: {\n\t\t\tid: 'info-modal-label1',\n\t\t\ttype: 'fixedtext',\n\t\t\ttext: msg1\n\t\t}\n\t};\n\n\tsendJSON(json);\n}\n\nfunction enableButtonInModal(id, buttonId, enable) {\n\tvar dialogId = generateModalId(id);\n\n\tvar json = {\n\t\tid: dialogId,\n\t\tjsontype: 'dialog',\n\t\ttype: 'modalpopup',\n\t\taction: 'action',\n\t\tdata: {\n\t\t\t'control_id': buttonId,\n\t\t\t'action_type': (enable ? 'enable' : 'disable')\n\t\t}\n\t};\n\n\tsendJSON(json);\n}\n\n// check if user already set 'do not show again' option for a modal\nfunction shouldShowAgain(id) {\n    return window.prefs.getBoolean(`UIShowAgain_${id}`, true);\n}\n\nfunction setShowAgain(id, state) {\n    window.prefs.set(`UIShowAgain_${id}`, state);\n}\n\n// helper to avoid using long list of optional parameters\nfunction showInfoModalWithOptions(id, options) {\n\tif (app.map) {\n\t\tvar title = options.title;\n\t\tvar message1 = options.messages.length ? options.messages[0] : undefined;\n\t\tvar message2 = options.messages.length > 1 ? options.messages[1] : undefined;\n\t\t//TODO: handle dynamic number of options.messages\n\t\tvar buttonText = options.buttons && options.buttons.length ? options.buttons[0].text : undefined;\n\t\tvar callback = options.buttons && options.buttons.length ? options.buttons[0].callback : undefined;\n\t\t//TODO: handle dynamic number of buttons with callback\n\t\tvar withCancel = options.withCancel;\n\t\tvar focusId = options.focusId;\n\n\t\t// TODO: move showInfoModal internals here\n\t\tapp.map.uiManager.showInfoModal(id, title, message1, message2, buttonText,\n\t\t\tcallback, withCancel, focusId);\n\t}\n}\n\n// check the widget is a modalpopup or in a modalpopup parent.\nfunction isWidgetInModalPopup(widgetData) {\n\n\tif (widgetData.type == 'modalpopup')\n\t\treturn true;\n\n\twhile (widgetData.parent) {\n\t\twidgetData = widgetData.parent;\n\t\tif (widgetData.type == 'modalpopup')\n\t\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nJSDialog.generateModalId = generateModalId;\nJSDialog.sendJSON = sendJSON;\nJSDialog.setMessageInModal = setMessageInModal;\nJSDialog.enableButtonInModal = enableButtonInModal;\nJSDialog.shouldShowAgain = shouldShowAgain;\nJSDialog.setShowAgain = setShowAgain;\nJSDialog.showInfoModalWithOptions = showInfoModalWithOptions;\nJSDialog.isWidgetInModalPopup = isWidgetInModalPopup;\n"]}