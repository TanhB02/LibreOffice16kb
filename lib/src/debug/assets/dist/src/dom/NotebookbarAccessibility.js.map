{"version":3,"file":"NotebookbarAccessibility.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/dom/NotebookbarAccessibility.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n\tThis class is used for managing the accessibility keys of notebookbar control.\n*/\n\n/* global JSDialog app NotebookbarAccessibilityDefinitions _ */\n\n/*\n\tThis class relies on following id convention (example for \"Home\" tab):\n\t\t* Tab button id: \"Home-etc...\"\n\t\t* Tab content container id: \"Home-container\"\n*/\nvar NotebookbarAccessibility = function() {\n\n\tthis.initialized = false;\n\n\tthis.activeTabPointers = {\n\t\tid: '',\n\t\tcontentList: [],\n\t\tinfoBoxList: []\n\t},\n\n\tthis.definitions = new NotebookbarAccessibilityDefinitions();\n\tthis.tabInfoList = null; // This is to be fetched from NotebookbarAccessibilityDefinitions class at initialization.\n\tthis.combination = null;\n\tthis.filteredItem = null;\n\tthis.state = 0; // 0: User needs to select a tab. 1: User needs to either select an access key of tab content, or navigate by arrow keys.\n\n\tthis.addInfoBox = function(anchorElement) {\n\t\tvar visible = anchorElement.id.replace('-button', '');\n\t\tvisible = document.getElementById(visible);\n\n\t\tif (visible)\n\t\t\tvisible = visible.style.display !== 'none';\n\n\t\tif (visible) {\n\t\t\tvar infoBox = document.createElement('div');\n\t\t\tinfoBox.classList.add('accessibility-info-box');\n\t\t\tinfoBox.textContent = anchorElement.accessKey;\n\t\t\tvar rectangle = anchorElement.getBoundingClientRect();\n\t\t\tinfoBox.style.top = (rectangle.bottom - 5) + 'px';\n\t\t\tinfoBox.style.left = rectangle.left + 'px';\n\t\t\tdocument.body.appendChild(infoBox);\n\n\t\t\treturn infoBox;\n\t\t}\n\t\telse {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tthis.setupAcceleratorsForCurrentTab = function(id) {\n\t\tif (id === undefined)\n\t\t\tid = this.activeTabPointers.id;\n\n\t\tthis.removeAllInfoBoxes();\n\n\t\tthis.activeTabPointers.id = id;\n\t\tthis.activeTabPointers.contentList = this.tabInfoList[id].contentList;\n\t\tthis.activeTabPointers.infoBoxList = [];\n\n\t\tfor (var i = 0; i < this.activeTabPointers.contentList.length; i++) {\n\t\t\tvar element = document.getElementById(this.activeTabPointers.contentList[i].id);\n\t\t\tif (element && element.offsetParent !== null) {\n\t\t\t\telement.accessKey = this.activeTabPointers.contentList[i].combination;\n\t\t\t\tthis.activeTabPointers.infoBoxList.push(this.addInfoBox(element));\n\t\t\t}\n\t\t\telse if(!element) // element is null\n\t\t\t\tconsole.warn('NotebookbarAccessibility: Element with id ' + this.activeTabPointers.contentList[i].id + ' doesn\\'t exist.');\n\t\t}\n\t};\n\n\t/*\n\t\tWe want to show the accelerator info boxes if no JSDialog is open.\n\t\tWhen a JSDialog is open, we will underline the accelerator keys of the dialog.\n\t*/\n\tthis.mayShowAcceleratorInfoBoxes = false;\n\tthis.onDocumentKeyDown = function(event) {\n\t\t\t if (this.initialized && (event.keyCode === 18 || (event.keyCode === 18 && event.shiftKey))) {\n\t\t\t\tthis.mayShowAcceleratorInfoBoxes = true;\n\t\t\t}\n\t};\n\n\tthis.onDocumentKeyUp = function(event) {\n\t\tif (this.initialized) {\n\t\t\tif (app.map && app.map.jsdialog && app.map.jsdialog.hasDialogOpened()) {\n\t\t\t\tif (event.keyCode === 18)\n\t\t\t\t\tdocument.body.classList.remove('activate-underlines');\n\t\t\t}\n\t\t\telse if (this.mayShowAcceleratorInfoBoxes && (event.keyCode === 18 || (event.keyCode === 18 && event.shiftKey))) { // 18: Alt key.\n\t\t\t\tthis.resetState();\n\t\t\t\tthis.setTabDescription(this.getCurrentSelectedTab());\n\t\t\t\tthis.addTabAccelerators();\n\t\t\t\tthis.accessibilityInputElement.focus();\n\t\t\t}\n\t\t\telse if (event.keyCode === 16) // ShiftLeft.\n\t\t\t\treturn; // Ignore shift key.\n\t\t\telse {\n\t\t\t\tthis.resetState();\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.onInputFocus = function() {\n\t\tthis.addTabFocus();\n\t\tdocument.body.classList.add('activate-info-boxes');\n\t};\n\n\tthis.onInputBlur = function() {\n\t\tdocument.body.classList.remove('activate-info-boxes');\n\t\tthis.removeFocusFromTab();\n\t\tthis.resetState();\n\t};\n\n\tthis.isAllFilteredOut = function() {\n\t\tvar count = document.querySelectorAll('.accessibility-info-box:not(.filtered_out)');\n\t\tcount = count.length;\n\t\treturn count === 0;\n\t};\n\n\tthis.filterOutNonMatchingInfoBoxes = function() {\n\t\tvar keyList = document.getElementsByClassName('accessibility-info-box');\n\n\t\tfor (var i = 0; i < keyList.length; i++)\n\t\t\tkeyList[i].classList.remove('filtered_out');\n\n\t\tif (this.combination !== null) {\n\t\t\tfor (var i = 0; i < keyList.length; i++) {\n\t\t\t\tif (!keyList[i].textContent.startsWith(this.combination))\n\t\t\t\t\tkeyList[i].classList.add('filtered_out');\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.checkTabAccelerators = function() {\n\t\tfor (var tabId in this.tabInfoList) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(this.tabInfoList, tabId)) {\n\t\t\t\tvar element = document.getElementById(tabId);\n\t\t\t\tif (element && !element.classList.contains('hidden')) {\n\t\t\t\t\tif (this.tabInfoList[tabId].combination === this.combination) {\n\t\t\t\t\t\tthis.filteredItem = this.tabInfoList[tabId];\n\t\t\t\t\t\tthis.filteredItem.id = tabId;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.checkContentAccelerators = function() {\n\t\tfor (var i = 0; i < this.activeTabPointers.contentList.length; i++) {\n\t\t\tvar item = this.activeTabPointers.contentList[i];\n\t\t\tif (this.combination === item.combination) {\n\t\t\t\tthis.filteredItem = this.activeTabPointers.contentList[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.checkCombinationAgainstAcccelerators = function() {\n\t\tthis.filteredItem = null;\n\n\t\tif (this.state === 0)\n\t\t\tthis.checkTabAccelerators();\n\t\telse if (this.state === 1)\n\t\t\tthis.checkContentAccelerators();\n\t};\n\n\tthis.clickOnFilteredItem = function() {\n\t\tvar itemWasClicked = false;\n\n\t\tif (this.filteredItem !== null) {\n\t\t\tvar element = document.getElementById(this.filteredItem.id);\n\t\t\tif (element) {\n\t\t\t\t// menu button - prioritize dropdown arrow\n\t\t\t\tvar dropdownArrow = element.querySelector('.arrowbackground');\n\t\t\t\tif (dropdownArrow) {\n\t\t\t\t\telement = dropdownArrow;\n\t\t\t\t}\n\n\t\t\t\tif (this.state === 0) {\n\t\t\t\t\tthis.removeFocusFromTab();\n\t\t\t\t\telement.click();\n\t\t\t\t\tthis.addTabFocus();\n\t\t\t\t\tthis.setupAcceleratorsForCurrentTab(element.id);\n\t\t\t\t\tthis.combination = null;\n\t\t\t\t\tthis.accessibilityInputElement.value = '';\n\t\t\t\t\tthis.setTabDescription(element);\n\t\t\t\t\tthis.accessibilityInputElement.focus();\n\t\t\t\t\tthis.state = 1;\n\t\t\t\t}\n\t\t\t\telse if (this.state === 1) {\n\t\t\t\t\titemWasClicked = true;\n\t\t\t\t\tthis.setTabItemDescription(element);\n\t\t\t\t\telement.click();\n\t\t\t\t\tif (this.filteredItem && this.filteredItem.focusBack === true) {\n\t\t\t\t\t\tthis.focusToMap();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.filteredItem = null;\n\t\t}\n\t\telse\n\t\t\tthis.focusToMap();\n\n\t\treturn itemWasClicked;\n\t};\n\n\tthis.addTabFocus = function() {\n\t\tvar element = this.getCurrentSelectedTab();\n\t\tif (element) {\n\t\t\telement.classList.add('add-focus-to-tab');\n\t\t}\n\t};\n\n\tthis.removeFocusFromTab = function() {\n\t\tvar element = this.getCurrentSelectedTab();\n\t\tif (element) {\n\t\t\telement.classList.remove('add-focus-to-tab');\n\t\t}\n\t};\n\n\tthis.focusToMap = function () {\n\t\tapp.map.focus();\n\t\tthis.mayShowAcceleratorInfoBoxes = false;\n\t\tthis.removeFocusFromTab();\n\t};\n\n\tthis.getCurrentSelectedTab = function() {\n\t\treturn document.querySelector('button.ui-tab.notebookbar.selected');\n\t};\n\n\tthis.setTabDescription = function(tabElem) {\n\t\tvar tabDescr = tabElem ? _('{0} tab selected').replace('{0}', tabElem.textContent) : '';\n\t\tthis.accessibilityInputElement.setAttribute('aria-description', tabDescr);\n\t};\n\n\tthis.setTabItemDescription = function(element) {\n\t\tvar descr = '';\n\t\tif (element) {\n\t\t\tvar button = element.hasAttribute('alt') ? element : element.querySelector('button[alt]');\n\t\t\tif (button) {\n\t\t\t\tdescr = button.getAttribute('alt');\n\t\t\t}\n\t\t}\n\t\tthis.accessibilityInputElement.setAttribute('aria-description', descr);\n\t};\n\n\tthis.getCurrentSelectedTabPage = function() {\n\t\treturn document.querySelector('div.ui-content.level-0.notebookbar:not(.hidden)');\n\t};\n\n\tthis.resetState = function() {\n\t\tthis.removeAllInfoBoxes();\n\t\tthis.state = 0;\n\t\tthis.accessibilityInputElement.value = '';\n\t\tthis.accessibilityInputElement.setAttribute('aria-description', '');\n\t\tthis.combination = null;\n\t\tthis.mayShowAcceleratorInfoBoxes = false;\n\t\tthis.filteredItem = null;\n\t\tfor (var i = 0; i < this.activeTabPointers.contentList.length; i++) {\n\t\t\tif (document.getElementById(this.activeTabPointers.contentList[i].id))\n\t\t\t\tdocument.getElementById(this.activeTabPointers.contentList[i].id).accessKey = null;\n\t\t\telse\n\t\t\t\tconsole.warn('Accessibility - no element with id:' + this.activeTabPointers.contentList[i].id);\n\t\t}\n\t};\n\n\tthis.onInputKeyDown = function(event) {\n\t\tif (event.ctrlKey) {\n\t\t\tthis.resetState();\n\t\t}\n\t};\n\n\tthis.onInputKeyUp = function(event) {\n\t\tvar key = event.key.toUpperCase();\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (key === 'ESCAPE' || key === 'ALT') {\n\t\t\tif (this.combination === null)\n\t\t\t\tthis.focusToMap();\n\t\t\telse {\n\t\t\t\tthis.resetState();\n\t\t\t}\n\t\t}\n\t\telse if (event.keyCode === 16) // ShiftLeft.\n\t\t\treturn; // Ignore shift key.\n\t\telse if (key === 'ARROWUP') {\n\t\t\t// Try to set focus on tab button.\n\t\t\tthis.removeFocusFromTab();\n\t\t\tvar currentSelectedTabButton = this.getCurrentSelectedTab();\n\t\t\tcurrentSelectedTabButton.focus();\n\t\t}\n\t\telse if (key === 'ARROWDOWN') {\n\t\t\t// Try to set focus on the first button of the tab content.\n\t\t\tvar currentSelectedTabPage = this.getCurrentSelectedTabPage();\n\t\t\tvar firstSelectableElement = JSDialog.FindFocusableElement(currentSelectedTabPage,'next');\n\t\t\tfirstSelectableElement.focus();\n\t\t}\n\t\telse if (key === 'ARROWRIGHT') {\n\t\t\tthis.getNextTab('right');\n\t\t}\n\t\telse if (key === 'ARROWLEFT') {\n\t\t\tthis.getNextTab('left');\n\t\t}\n\t\telse {\n\t\t\tif (this.combination === null) {\n\t\t\t\tthis.combination = key;\n\t\t\t\tthis.checkCombinationAgainstAcccelerators();\n\t\t\t\tthis.filterOutNonMatchingInfoBoxes();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.combination += key;\n\t\t\t\tthis.checkCombinationAgainstAcccelerators();\n\t\t\t\tthis.filterOutNonMatchingInfoBoxes();\n\t\t\t}\n\t\t\t// If item was clicked - don't focus the map to keep focus on dropdowns\n\t\t\tif (this.filteredItem !== null && this.clickOnFilteredItem())\n\t\t\t\treturn;\n\t\t\t// So we checked the pressed key against available combinations. If there is no match, focus back to map.\n\t\t\tif (this.isAllFilteredOut() === true)\n\t\t\t\tthis.focusToMap();\n\t\t}\n\t};\n\n\tthis.getNextTab = function(move) {\n\t\tvar currentSelectedTab = this.getCurrentSelectedTab();\n\t\tvar isLeftMovement = move === 'left'? true : false;\n\t\tvar tab = isLeftMovement ? currentSelectedTab.previousElementSibling : currentSelectedTab.nextElementSibling;\n\t\tif (!tab) {\n\t\t\tvar tabs = document.querySelectorAll('.ui-tab.notebookbar:not(.hidden)');\n\t\t\ttab = isLeftMovement ? tabs[tabs.length - 1] : tabs[0];\n\t\t}\n\t\twhile (tab) {\n\t\t\tif (!tab.classList.contains('hidden')) {\n\t\t\t\t// Found the next element without the \"hidden\" class\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\ttab = isLeftMovement ? tab.previousElementSibling : tab.nextElementSibling;\n\t\t}\n\t\tthis.removeFocusFromTab();\n\t\ttab.click();\n\t\ttab.focus();\n\t};\n\n\tthis.removeAllInfoBoxes = function() {\n\t\tvar infoBoxes = document.getElementsByClassName('accessibility-info-box');\n\t\tfor (var i = infoBoxes.length - 1; i > -1; i--) {\n\t\t\tdocument.body.removeChild(infoBoxes[i]);\n\t\t}\n\t};\n\n\tthis.addTabAccelerators = function() {\n\t\t// Remove all info boxes first.\n\t\tthis.removeAllInfoBoxes();\n\t\tthis.tabInfoList = this.definitions.getDefinitions();\n\t\tfor (var tabId in this.tabInfoList) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(this.tabInfoList, tabId)) {\n\t\t\t\tvar element = document.getElementById(tabId);\n\t\t\t\tif (element && element.offsetParent !== null) {\n\t\t\t\t\telement.accessKey = this.tabInfoList[tabId].combination;\n\t\t\t\t\tthis.addInfoBox(element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.initTabListeners = function() {\n\t\tObject.keys(this.tabInfoList).forEach(function(tabId) {\n\t\t\tvar element = document.getElementById(tabId);\n\t\t\tif (element) {\n\t\t\t\telement.addEventListener('keydown', function(event) {\n\t\t\t\t\tif (event.key === 'Alt') {\n\t\t\t\t\t  // focus back to document\n\t\t\t\t\t  this.focusToMap();\n\t\t\t\t\t}\n\t\t\t\t  }.bind(this));\n\t\t\t}\n\t\t}.bind(this));\n\t};\n\n\tthis.initAccessibilityInputElement = function() {\n\t\t// Create an input element for catching the events and prevent document from catching them.\n\t\tthis.accessibilityInputElement = document.createElement('input');\n\t\t// type = 'submit' prevents the screen reader to report something like: \"editable blank\",\n\t\t// when <alt> is pressed, since at start the input field is empty and obviously editable;\n\t\t// note that an input element with type 'submit' still receives keyboard events\n\t\tthis.accessibilityInputElement.type = 'submit';\n\t\t// role = 'tablist' prevents the screen reader to report \"Submit button\" when <alt> is pressed\n\t\t// screen reader uses to report 'tablist' role as 'tab control'\n\t\tthis.accessibilityInputElement.setAttribute('role', 'tablist');\n\t\tthis.accessibilityInputElement.style.width = this.accessibilityInputElement.style.height = '0';\n\t\tthis.accessibilityInputElement.id = 'accessibilityInputElement';\n\t\tthis.accessibilityInputElement.onfocus = this.onInputFocus.bind(this);\n\t\tthis.accessibilityInputElement.onblur = this.onInputBlur.bind(this);\n\t\tthis.accessibilityInputElement.onkeyup = this.onInputKeyUp.bind(this);\n\t\tthis.accessibilityInputElement.onkeydown = this.onInputKeyDown.bind(this);\n\t\tthis.accessibilityInputElement.autocomplete = 'off';\n\n\t\tvar container = document.createElement('div');\n\t\tcontainer.style.width = container.style.height = '0';\n\t\tcontainer.style.overflow = 'hidden';\n\t\tcontainer.appendChild(this.accessibilityInputElement);\n\n\t\tdocument.body.insertBefore(container, document.body.firstChild);\n\t};\n\n\tthis.initialize = function() {\n\t\tsetTimeout(function() {\n\t\t\tif (window.mode.isDesktop() && !this.initialized) {\n\t\t\t\tif (document.body.dataset.userinterfacemode === 'notebookbar') {\n\t\t\t\t\tthis.tabInfoList = this.definitions.getDefinitions();\n\n\t\t\t\t\tif (this.tabInfoList !== null) {\n\t\t\t\t\t\tthis.initTabListeners();\n\t\t\t\t\t\tthis.initAccessibilityInputElement();\n\t\t\t\t\t\tthis.initialized = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this), 3000);\n\t};\n};\n\napp.definitions.NotebookbarAccessibility = NotebookbarAccessibility;\n\napp.UI.notebookbarAccessibility = new app.definitions.NotebookbarAccessibility();\n"]}