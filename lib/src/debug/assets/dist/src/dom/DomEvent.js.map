{"version":3,"file":"DomEvent.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/dom/DomEvent.js"],"names":[],"mappings":"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","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/* global app */\n/*\n * L.DomEvent contains functions for working with DOM events.\n * Inspired by John Resig, Dean Edwards and YUI addEvent implementations.\n */\n\nvar eventsKey = '_leaflet_events';\n\nL.DomEvent = {\n\n\ton: function (obj, types, fn, context) {\n\n\t\tif (typeof types === 'object') {\n\t\t\tfor (var type in types) {\n\t\t\t\tthis._on(obj, type, types[type], fn);\n\t\t\t}\n\t\t} else {\n\t\t\ttypes = app.util.splitWords(types);\n\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\n\t\t\t\tthis._on(obj, types[i], fn, context);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\toff: function (obj, types, fn, context) {\n\n\t\tif (typeof types === 'object') {\n\t\t\tfor (var type in types) {\n\t\t\t\tthis._off(obj, type, types[type], fn);\n\t\t\t}\n\t\t} else {\n\t\t\ttypes = app.util.splitWords(types);\n\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\n\t\t\t\tthis._off(obj, types[i], fn, context);\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_on: function (obj, type, fn, context) {\n\t\tvar id = type + app.util.stamp(fn) + (context ? '_' + app.util.stamp(context) : '');\n\n\t\tif (obj[eventsKey] && obj[eventsKey][id]) { return this; }\n\n\t\tvar handler = function (e) {\n\t\t\treturn fn.call(context || obj, e || window.event);\n\t\t};\n\n\t\tvar originalHandler = handler;\n\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {\n\t\t\tthis.addPointerListener(obj, type, handler, id);\n\n\t\t} else if ((type === 'dblclick') && this.addDoubleTapListener) {\n\t\t\tthis.addDoubleTapListener(obj, window.touch.touchOnly(handler), id);\n\n\t\t} else if (type === 'trplclick' || type === 'qdrplclick') {\n\t\t\tthis.addMultiClickListener(obj, handler, id, type);\n\n\t\t} else if ('addEventListener' in obj) {\n\n\t\t\tif (type === 'mousewheel') {\n\t\t\t\tobj.addEventListener('DOMMouseScroll', handler, false);\n\t\t\t\tobj.addEventListener(type, handler, false);\n\n\t\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\n\t\t\t\thandler = function (e) {\n\t\t\t\t\te = e || window.event;\n\t\t\t\t\tif (L.DomEvent._checkMouse(obj, e)) {\n\t\t\t\t\t\toriginalHandler(e);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tobj.addEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);\n\n\t\t\t} else {\n\t\t\t\tif (type === 'click' && L.Browser.android) {\n\t\t\t\t\thandler = function (e) {\n\t\t\t\t\t\treturn L.DomEvent._filterClick(e, originalHandler);\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tobj.addEventListener(type, handler, false);\n\t\t\t}\n\n\t\t} else if ('attachEvent' in obj) {\n\t\t\tobj.attachEvent('on' + type, handler);\n\t\t}\n\n\t\tobj[eventsKey] = obj[eventsKey] || {};\n\t\tobj[eventsKey][id] = handler;\n\n\t\treturn this;\n\t},\n\n\t_off: function (obj, type, fn, context) {\n\n\t\tvar id = type + app.util.stamp(fn) + (context ? '_' + app.util.stamp(context) : ''),\n\t\t    handler = obj[eventsKey] && obj[eventsKey][id];\n\n\t\tif (!handler) { return this; }\n\n\t\tif (L.Browser.pointer && type.indexOf('touch') === 0) {\n\t\t\tthis.removePointerListener(obj, type, id);\n\n\t\t} else if ((type === 'dblclick') && this.removeDoubleTapListener) {\n\t\t\tthis.removeDoubleTapListener(obj, id);\n\n\t\t} else if (type === 'trplclick' || type === 'qdrplclick') {\n\t\t\tthis.removeMultiClickListener(obj, id, type);\n\n\t\t} else if ('removeEventListener' in obj) {\n\n\t\t\tif (type === 'mousewheel') {\n\t\t\t\tobj.removeEventListener('DOMMouseScroll', handler, false);\n\t\t\t\tobj.removeEventListener(type, handler, false);\n\n\t\t\t} else {\n\t\t\t\tobj.removeEventListener(\n\t\t\t\t\ttype === 'mouseenter' ? 'mouseover' :\n\t\t\t\t\t\ttype === 'mouseleave' ? 'mouseout' : type, handler, false);\n\t\t\t}\n\n\t\t} else if ('detachEvent' in obj) {\n\t\t\tobj.detachEvent('on' + type, handler);\n\t\t}\n\n\t\tobj[eventsKey][id] = null;\n\n\t\treturn this;\n\t},\n\n\tstopPropagation: function (e) {\n\n\t\tif (e.stopPropagation) {\n\t\t\te.stopPropagation();\n\t\t} else {\n\t\t\te.cancelBubble = true;\n\t\t}\n\t\tL.DomEvent._skipped(e);\n\n\t\treturn this;\n\t},\n\n\tdisableMouseClickPropagation: function (el) {\n\t\tvar stop = window.touch.mouseOnly(L.DomEvent.stopPropagation);\n\n\t\tL.DomEvent.on(el, L.Draggable.START.join(' '), stop);\n\n\t\treturn L.DomEvent.on(el, {\n\t\t\tclick: window.touch.mouseOnly(L.DomEvent._fakeStop),\n\t\t\tdblclick: stop\n\t\t});\n\t},\n\n\tdisableScrollPropagation: function (el) {\n\t\treturn L.DomEvent.on(el, 'mousewheel MozMousePixelScroll', L.DomEvent.stopPropagation);\n\t},\n\n\tdisableClickPropagation: function (el) {\n\t\tvar stop = L.DomEvent.stopPropagation;\n\n\t\tL.DomEvent.on(el, L.Draggable.START.join(' '), stop);\n\n\t\treturn L.DomEvent.on(el, {\n\t\t\tclick: L.DomEvent._fakeStop,\n\t\t\tdblclick: stop\n\t\t});\n\t},\n\n\tpreventDefault: function (e) {\n\n\t\tif (e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\te.returnValue = false;\n\t\t}\n\t\treturn this;\n\t},\n\n\tstop: function (e) {\n\t\treturn L.DomEvent\n\t\t\t.preventDefault(e)\n\t\t\t.stopPropagation(e);\n\t},\n\n\tgetMousePosition: function (e, container) {\n\t\tif (!container) {\n\t\t\tif (e.clientX === undefined && e.touches !== undefined)\n\t\t\t\treturn new L.Point(e.touches[0].clientX, e.touches[0].clientY);\n\n\t\t\treturn new L.Point(e.clientX, e.clientY);\n\t\t}\n\n\t\tvar rect = container.getBoundingClientRect(), // constant object\n\t\t    left = rect.left,\n\t\t    top = rect.top;\n\n\t\t// iframe mouse coordinates are relative to the frame area\n\t\t// `target`: body element of the iframe; `currentTarget`: content window of the iframe\n\t\tif (e.currentTarget && e.currentTarget.frameElement\n\t\t\t&& L.DomUtil.hasClass(e.currentTarget.frameElement, 'resize-detector')) {\n\t\t\tleft = top = 0;\n\t\t}\n\n\t\t// When called for a touchend event, at least in WebKit on iOS and Safari, the\n\t\t// touches array will be of zero length. Probably it is a programming logic error to\n\t\t// even call this function for a touchend event, as by definition no finger is\n\t\t// touching the screen any longer then and thus there is no \"mouse position\". But\n\t\t// let's just least guard against an unhandled exception for now.\n\t\tif (e.clientX === undefined && e.touches !== undefined && e.touches.length > 0)\n\t\t\treturn new L.Point(\n\t\t\t\te.touches[0].clientX - left - container.clientLeft,\n\t\t\t\te.touches[0].clientY - top - container.clientTop);\n\t\telse if (e.clientX === undefined && e.changedTouches !== undefined && e.changedTouches.length > 0)\n\t\t\treturn new L.Point(\n\t\t\t\te.changedTouches[0].clientX - left - container.clientLeft,\n\t\t\t\te.changedTouches[0].clientY - top - container.clientTop);\n\n\t\treturn new L.Point(\n\t\t\te.clientX - left - container.clientLeft,\n\t\t\te.clientY - top - container.clientTop);\n\t},\n\n\tgetWheelDelta: function (e) {\n\n\t\tvar delta = 0;\n\n\t\tif (e.wheelDelta) {\n\t\t\tdelta = e.wheelDelta / 120;\n\t\t}\n\t\tif (e.detail) {\n\t\t\tdelta = -e.detail / 3;\n\t\t}\n\t\treturn delta;\n\t},\n\n\t_skipEvents: {},\n\n\t_fakeStop: function (e) {\n\t\t// fakes stopPropagation by setting a special event flag, checked/reset with L.DomEvent._skipped(e)\n\t\tL.DomEvent._skipEvents[e.type] = true;\n\t},\n\n\t_skipped: function (e) {\n\t\tvar skipped = this._skipEvents[e.type];\n\t\t// reset when checking, as it's only used in map container and propagates outside of the map\n\t\tthis._skipEvents[e.type] = false;\n\t\treturn skipped;\n\t},\n\n\t// check if element really left/entered the event target (for mouseenter/mouseleave)\n\t_checkMouse: function (el, e) {\n\n\t\tvar related = e.relatedTarget;\n\n\t\tif (!related) { return true; }\n\n\t\ttry {\n\t\t\twhile (related && (related !== el)) {\n\t\t\t\trelated = related.parentNode;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (related !== el);\n\t},\n\n\t// this is a horrible workaround for a bug in Android where a single touch triggers two click events\n\t_filterClick: function (e, handler) {\n\t\tvar timeStamp = (e.timeStamp || e.originalEvent.timeStamp),\n\t\t    elapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);\n\n\t\t// are they closer together than 500ms yet more than 100ms?\n\t\t// Android typically triggers them ~300ms apart while multiple listeners\n\t\t// on the same event should be triggered far faster;\n\t\t// or check if click is simulated on the element, and if it is, reject any non-simulated events\n\n\t\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {\n\t\t\tL.DomEvent.stop(e);\n\t\t\treturn;\n\t\t}\n\t\tL.DomEvent._lastClick = timeStamp;\n\n\t\thandler(e);\n\t}\n};\n\nL.DomEvent.addListener = L.DomEvent.on;\nL.DomEvent.removeListener = L.DomEvent.off;\n"]}