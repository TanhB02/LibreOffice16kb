{"version":3,"file":"DomEvent.MultiClick.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/dom/DomEvent.MultiClick.js"],"names":[],"mappings":"AAAA,gCAAgC;AAChC;;;GAGG;AAEH,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,QAAQ,EAAE;IAEpB,qBAAqB,EAAE,UAAU,GAAG,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI;QACtD,IAAI,IAAI,GAAG,EAAE,EACT,KAAK,GAAG,GAAG,CAAC;QAEhB,SAAS,OAAO,CAAC,CAAC;YACjB,IAAI,GAAG,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;YACrB,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAI,IAAI,EAAE;gBACT,KAAK,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;aAC7C;YAED,IAAI,SAAS,GAAG,CAAC,KAAK,GAAG,CAAC,IAAI,KAAK,IAAI,KAAK,CAAC,CAAC;YAE9C,IAAI,SAAS,GAAG,KAAK,CAAC;YACtB,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,EAAE;gBACjC,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;gBAC3D,SAAS,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,MAAM,IAAI,KAAK,CAAC,CAAC;aAC5C;YAED,IAAI,SAAS,EAAE;gBAEd,IAAI,OAAO,GAAG,KAAK,CAAC;gBACpB,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,SAAS,EAAE;oBACjC,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBAC3D,OAAO,GAAG,CAAC,MAAM,GAAG,CAAC,IAAI,MAAM,IAAI,KAAK,CAAC,CAAC;iBAC1C;gBAED,+DAA+D;gBAC/D,kEAAkE;gBAClE,0CAA0C;gBAC1C,IAAI,IAAI,GAAG;oBACV,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,WAAW;oBAC1C,OAAO,EAAE,CAAC,CAAC,OAAO;oBAClB,OAAO,EAAE,CAAC,CAAC,OAAO;oBAClB,MAAM,EAAE,CAAC,CAAC,MAAM;oBAChB,MAAM,EAAE,CAAC,CAAC,MAAM;oBAChB,WAAW,EAAE,CAAC,CAAC,WAAW;oBAC1B,YAAY,EAAE,CAAC,YAAY,UAAU;iBACrC,CAAC;gBAEF,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI;oBACpB,OAAO,CAAC,IAAI,CAAC,CAAC;aACf;YAED,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACf,OAAO,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACvB,IAAI,CAAC,KAAK,EAAE,CAAC;aACb;QACF,CAAC;QAED,GAAG,CAAC,gBAAgB,GAAG,EAAE,CAAC,GAAG,OAAO,CAAC;QAErC,GAAG,CAAC,gBAAgB,CAAC,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;QAC9C,OAAO,IAAI,CAAC;IACb,CAAC;IAED,wBAAwB,EAAE,UAAU,GAAG,EAAE,EAAE;QAC1C,GAAG,CAAC,mBAAmB,CAAC,OAAO,EAAE,GAAG,CAAC,gBAAgB,GAAG,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAEpE,OAAO,IAAI,CAAC;IACb,CAAC;CACD,CAAC,CAAC","sourcesContent":["/* -*- js-indent-level: 8 -*- */\n/*\n * Extends the event handling code with triple and quadruple click support\n * This is vaguely based on the DomEvent.DoubleTap implementation.\n */\n\nL.extend(L.DomEvent, {\n\n\taddMultiClickListener: function (obj, handler, id, type) {\n\t\tvar last = [],\n\t\t    delay = 250;\n\n\t\tfunction onClick(e) {\n\t\t\tvar now = Date.now();\n\t\t\tvar delta = 0;\n\t\t\tif (last) {\n\t\t\t\tdelta = now - (last[last.length - 1] || now);\n\t\t\t}\n\n\t\t\tvar doubleTap = (delta > 0 && delta <= delay);\n\n\t\t\tvar tripleTap = false;\n\t\t\tif (last.length > 1 && doubleTap) {\n\t\t\t\tvar delta2 = last[last.length - 1] - last[last.length - 2];\n\t\t\t\ttripleTap = (delta2 > 0 && delta2 <= delay);\n\t\t\t}\n\n\t\t\tif (tripleTap) {\n\n\t\t\t\tvar quadTap = false;\n\t\t\t\tif (last.length > 2 && tripleTap) {\n\t\t\t\t\tvar delta3 = last[last.length - 2] - last[last.length - 3];\n\t\t\t\t\tquadTap = (delta3 > 0 && delta3 <= delay);\n\t\t\t\t}\n\n\t\t\t\t// We can't modify e as it's a native DOM object, hence we copy\n\t\t\t\t// what we need instead. (I am however unable to actually find any\n\t\t\t\t// documentation regarding this anywhere.)\n\t\t\t\tvar eOut = {\n\t\t\t\t\ttype: quadTap ? 'qdrplclick' : 'trplclick',\n\t\t\t\t\tclientX: e.clientX,\n\t\t\t\t\tclientY: e.clientY,\n\t\t\t\t\tbutton: e.button,\n\t\t\t\t\ttarget: e.target,\n\t\t\t\t\tpointerType: e.pointerType,\n\t\t\t\t\tisMouseEvent: e instanceof MouseEvent\n\t\t\t\t};\n\n\t\t\t\tif (type == eOut.type)\n\t\t\t\t\thandler(eOut);\n\t\t\t}\n\n\t\t\tlast.push(now);\n\t\t\twhile (last.length > 3) {\n\t\t\t\tlast.shift();\n\t\t\t}\n\t\t}\n\n\t\tobj['_leaflet_click' + id] = onClick;\n\n\t\tobj.addEventListener('click', onClick, false);\n\t\treturn this;\n\t},\n\n\tremoveMultiClickListener: function (obj, id) {\n\t\tobj.removeEventListener('click', obj['_leaflet_click' + id], false);\n\n\t\treturn this;\n\t}\n});\n"]}