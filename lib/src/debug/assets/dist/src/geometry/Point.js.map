{"version":3,"file":"Point.js","sourceRoot":"","sources":["../../../../../../../../../../TanhX/online/browser/src/geometry/Point.ts"],"names":[],"mappings":"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","sourcesContent":["// @ts-strict-ignore\n/* -*- js-indent-level: 8 -*- */\n\ndeclare var L: any;\n\nnamespace cool {\n\nexport interface PointLike {\n\tx: number;\n\ty: number;\n}\n\nexport type PointConvertable = Point | Array<number> | PointLike;\n\n/// Point represents a point with x and y coordinates.\nexport class Point {\n\n\tpublic x: number;\n\tpublic y: number;\n\n\tconstructor(x: number, y: number, round: boolean = false) {\n\t\tthis.x = (round ? Math.round(x) : x);\n\t\tthis.y = (round ? Math.round(y) : y);\n\t}\n\n\tpublic static parse(pointString: string): Point { // (string) -> Point\n\t\tif (typeof pointString !== 'string') {\n\t\t\tconsole.error('invalid point string');\n\t\t\treturn undefined;\n\t\t}\n\n\t\tvar pointParts = pointString.match(/\\d+/g);\n\t\tif (pointParts === null || pointParts.length < 2) {\n\t\t\tconsole.error('incomplete point');\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn new Point(parseInt(pointParts[0]), parseInt(pointParts[1]));\n\t}\n\n\tpublic clone(): Point {\n\t\treturn new Point(this.x, this.y);\n\t}\n\n\t/// non-destructive, returns a new point\n\tpublic add(point: Point): Point {\n\t\treturn this.clone()._add(Point.toPoint(point));\n\t}\n\n\t// destructive, used directly for performance in situations where it's safe to modify existing point\n\tpublic _add(point: Point): Point {\n\t\tthis.x += point.x;\n\t\tthis.y += point.y;\n\t\treturn this;\n\t}\n\n\tpublic subtract(point: Point): Point {\n\t\treturn this.clone()._subtract(Point.toPoint(point));\n\t}\n\n\tpublic _subtract(point: Point): Point {\n\t\tthis.x -= point.x;\n\t\tthis.y -= point.y;\n\t\treturn this;\n\t}\n\n\tpublic divideBy(num: number): Point {\n\t\treturn this.clone()._divideBy(num);\n\t}\n\n\tpublic _divideBy(num: number): Point {\n\t\tthis.x /= num;\n\t\tthis.y /= num;\n\t\treturn this;\n\t}\n\n\tpublic multiplyBy(num: number): Point {\n\t\treturn this.clone()._multiplyBy(num);\n\t}\n\n\tpublic _multiplyBy(num: number): Point {\n\t\tthis.x *= num;\n\t\tthis.y *= num;\n\t\treturn this;\n\t}\n\n\tpublic round(): Point {\n\t\treturn this.clone()._round();\n\t}\n\n\tpublic _round(): Point {\n\t\tthis.x = Math.round(this.x);\n\t\tthis.y = Math.round(this.y);\n\t\treturn this;\n\t}\n\n\tpublic floor(): Point {\n\t\treturn this.clone()._floor();\n\t}\n\n\tpublic _floor(): Point {\n\t\tthis.x = Math.floor(this.x);\n\t\tthis.y = Math.floor(this.y);\n\t\treturn this;\n\t}\n\n\tpublic ceil(): Point {\n\t\treturn this.clone()._ceil();\n\t}\n\n\tpublic _ceil(): Point {\n\t\tthis.x = Math.ceil(this.x);\n\t\tthis.y = Math.ceil(this.y);\n\t\treturn this;\n\t}\n\n\tpublic distanceTo(point: Point): number {\n\t\tpoint = Point.toPoint(point);\n\n\t\tvar x = point.x - this.x;\n\t\tvar y = point.y - this.y;\n\n\t\treturn Math.sqrt(x * x + y * y);\n\t}\n\n\tpublic equals(point: Point): boolean {\n\t\tpoint = Point.toPoint(point);\n\n\t\t// Proper ieee 754 equality comparison.\n\t\treturn Math.abs(point.x - this.x) < Number.EPSILON &&\n\t\t\tMath.abs(point.y - this.y) < Number.EPSILON;\n\t}\n\n\tpublic contains(point: Point): boolean {\n\t\tpoint = Point.toPoint(point);\n\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\n\t\t\tMath.abs(point.y) <= Math.abs(this.y);\n\t}\n\n\tpublic assign(point: Point): boolean {\n\t\tvar xChanged = this.setX(point.x);\n\t\tvar yChanged = this.setY(point.y);\n\t\treturn xChanged || yChanged;\n\t}\n\n\tpublic setX(x: number): boolean {\n\t\tif (x === this.x) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.x = x;\n\t\treturn true;\n\t}\n\n\tpublic setY(y: number): boolean {\n\t\tif (y === this.y) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.y = y;\n\t\treturn true;\n\t}\n\n\tpublic toString(): string {\n\t\treturn 'Point(' +\n\t\t\tPoint.formatNum(this.x) + ', ' +\n\t\t\tPoint.formatNum(this.y) + ')';\n\t}\n\n\tpublic static toPoint(x: PointConvertable | number, y?: number, round?: boolean): Point {\n\t\tif (x instanceof Point) {\n\t\t\treturn x;\n\t\t}\n\n\t\tif (x instanceof SimplePoint) {\n\t\t\treturn new Point(x.x, x.y);\n\t\t}\n\n\t\tif (Array.isArray(x)) {\n\t\t\tvar arr = x as Array<number>;\n\t\t\treturn new Point(arr[0], arr[1]);\n\t\t}\n\n\t\tif (x === undefined || x === null) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Detect L.Point like objects such as CPoint.\n\t\tif (Object.prototype.hasOwnProperty.call(x, 'x')\n\t\t\t&& Object.prototype.hasOwnProperty.call(x, 'y')) {\n\t\t\tx = <PointLike>x;\n\t\t\treturn new Point(x.x, x.y);\n\t\t}\n\n\t\tx = <number>x;\n\t\treturn new Point(x, y, round);\n\t}\n\n\tprivate static formatNum(num: number): number {\n\t\tvar pow = Math.pow(10, 5);\n\t\treturn Math.round(num * pow) / pow;\n\t}\n}\n\n}\n\nL.Point = cool.Point;\nL.point = cool.Point.toPoint;\n"]}